(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function zp(n){const e=Object.create(null);for(const t of n.split(","))e[t]=1;return t=>t in e}const nt={},Do=[],kr=()=>{},bS=()=>!1,Ah=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),jp=n=>n.startsWith("onUpdate:"),_n=Object.assign,qp=(n,e)=>{const t=n.indexOf(e);t>-1&&n.splice(t,1)},wS=Object.prototype.hasOwnProperty,Qe=(n,e)=>wS.call(n,e),xe=Array.isArray,Mo=n=>Sh(n)==="[object Map]",Tb=n=>Sh(n)==="[object Set]",Re=n=>typeof n=="function",Ot=n=>typeof n=="string",Xi=n=>typeof n=="symbol",ht=n=>n!==null&&typeof n=="object",bb=n=>(ht(n)||Re(n))&&Re(n.then)&&Re(n.catch),wb=Object.prototype.toString,Sh=n=>wb.call(n),IS=n=>Sh(n).slice(8,-1),Ib=n=>Sh(n)==="[object Object]",Gp=n=>Ot(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,ml=zp(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Rh=n=>{const e=Object.create(null);return t=>e[t]||(e[t]=n(t))},ES=/-(\w)/g,er=Rh(n=>n.replace(ES,(e,t)=>t?t.toUpperCase():"")),kS=/\B([A-Z])/g,Zi=Rh(n=>n.replace(kS,"-$1").toLowerCase()),Ph=Rh(n=>n.charAt(0).toUpperCase()+n.slice(1)),Hd=Rh(n=>n?`on${Ph(n)}`:""),Vi=(n,e)=>!Object.is(n,e),Wd=(n,...e)=>{for(let t=0;t<n.length;t++)n[t](...e)},Eb=(n,e,t,r=!1)=>{Object.defineProperty(n,e,{configurable:!0,enumerable:!1,writable:r,value:t})},AS=n=>{const e=parseFloat(n);return isNaN(e)?n:e};let Ym;const Ch=()=>Ym||(Ym=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ho(n){if(xe(n)){const e={};for(let t=0;t<n.length;t++){const r=n[t],i=Ot(r)?CS(r):Ho(r);if(i)for(const s in i)e[s]=i[s]}return e}else if(Ot(n)||ht(n))return n}const SS=/;(?![^(]*\))/g,RS=/:([^]+)/,PS=/\/\*[^]*?\*\//g;function CS(n){const e={};return n.replace(PS,"").split(SS).forEach(t=>{if(t){const r=t.split(RS);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function en(n){let e="";if(Ot(n))e=n;else if(xe(n))for(let t=0;t<n.length;t++){const r=en(n[t]);r&&(e+=r+" ")}else if(ht(n))for(const t in n)n[t]&&(e+=t+" ");return e.trim()}const xS="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",OS=zp(xS);function kb(n){return!!n||n===""}const Ab=n=>!!(n&&n.__v_isRef===!0),lt=n=>Ot(n)?n:n==null?"":xe(n)||ht(n)&&(n.toString===wb||!Re(n.toString))?Ab(n)?lt(n.value):JSON.stringify(n,Sb,2):String(n),Sb=(n,e)=>Ab(e)?Sb(n,e.value):Mo(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[r,i],s)=>(t[Qd(r,s)+" =>"]=i,t),{})}:Tb(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>Qd(t))}:Xi(e)?Qd(e):ht(e)&&!xe(e)&&!Ib(e)?String(e):e,Qd=(n,e="")=>{var t;return Xi(n)?`Symbol(${(t=n.description)!=null?t:e})`:n};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Un;class Rb{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Un,!e&&Un&&(this.index=(Un.scopes||(Un.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=Un;try{return Un=this,e()}finally{Un=t}}}on(){Un=this}off(){Un=this.parent}stop(e){if(this._active){this._active=!1;let t,r;for(t=0,r=this.effects.length;t<r;t++)this.effects[t].stop();for(this.effects.length=0,t=0,r=this.cleanups.length;t<r;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function NS(n){return new Rb(n)}function VS(){return Un}let it;const Yd=new WeakSet;class Pb{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Un&&Un.active&&Un.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Yd.has(this)&&(Yd.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||xb(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Jm(this),Ob(this);const e=it,t=or;it=this,or=!0;try{return this.fn()}finally{Nb(this),it=e,or=t,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Qp(e);this.deps=this.depsTail=void 0,Jm(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Yd.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Nf(this)&&this.run()}get dirty(){return Nf(this)}}let Cb=0,yl,vl;function xb(n,e=!1){if(n.flags|=8,e){n.next=vl,vl=n;return}n.next=yl,yl=n}function Hp(){Cb++}function Wp(){if(--Cb>0)return;if(vl){let e=vl;for(vl=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let n;for(;yl;){let e=yl;for(yl=void 0;e;){const t=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){n||(n=r)}e=t}}if(n)throw n}function Ob(n){for(let e=n.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Nb(n){let e,t=n.depsTail,r=t;for(;r;){const i=r.prevDep;r.version===-1?(r===t&&(t=i),Qp(r),DS(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=i}n.deps=e,n.depsTail=t}function Nf(n){for(let e=n.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Vb(e.dep.computed)||e.dep.version!==e.version))return!0;return!!n._dirty}function Vb(n){if(n.flags&4&&!(n.flags&16)||(n.flags&=-17,n.globalVersion===Fl))return;n.globalVersion=Fl;const e=n.dep;if(n.flags|=2,e.version>0&&!n.isSSR&&n.deps&&!Nf(n)){n.flags&=-3;return}const t=it,r=or;it=n,or=!0;try{Ob(n);const i=n.fn(n._value);(e.version===0||Vi(i,n._value))&&(n._value=i,e.version++)}catch(i){throw e.version++,i}finally{it=t,or=r,Nb(n),n.flags&=-3}}function Qp(n,e=!1){const{dep:t,prevSub:r,nextSub:i}=n;if(r&&(r.nextSub=i,n.prevSub=void 0),i&&(i.prevSub=r,n.nextSub=void 0),t.subs===n&&(t.subs=r,!r&&t.computed)){t.computed.flags&=-5;for(let s=t.computed.deps;s;s=s.nextDep)Qp(s,!0)}!e&&!--t.sc&&t.map&&t.map.delete(t.key)}function DS(n){const{prevDep:e,nextDep:t}=n;e&&(e.nextDep=t,n.prevDep=void 0),t&&(t.prevDep=e,n.nextDep=void 0)}let or=!0;const Db=[];function es(){Db.push(or),or=!1}function ts(){const n=Db.pop();or=n===void 0?!0:n}function Jm(n){const{cleanup:e}=n;if(n.cleanup=void 0,e){const t=it;it=void 0;try{e()}finally{it=t}}}let Fl=0;class MS{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Yp{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!it||!or||it===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==it)t=this.activeLink=new MS(it,this),it.deps?(t.prevDep=it.depsTail,it.depsTail.nextDep=t,it.depsTail=t):it.deps=it.depsTail=t,Mb(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const r=t.nextDep;r.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=r),t.prevDep=it.depsTail,t.nextDep=void 0,it.depsTail.nextDep=t,it.depsTail=t,it.deps===t&&(it.deps=r)}return t}trigger(e){this.version++,Fl++,this.notify(e)}notify(e){Hp();try{for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{Wp()}}}function Mb(n){if(n.dep.sc++,n.sub.flags&4){const e=n.dep.computed;if(e&&!n.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)Mb(r)}const t=n.dep.subs;t!==n&&(n.prevSub=t,t&&(t.nextSub=n)),n.dep.subs=n}}const Fc=new WeakMap,xs=Symbol(""),Vf=Symbol(""),Ul=Symbol("");function cn(n,e,t){if(or&&it){let r=Fc.get(n);r||Fc.set(n,r=new Map);let i=r.get(t);i||(r.set(t,i=new Yp),i.map=r,i.key=t),i.track()}}function zr(n,e,t,r,i,s){const o=Fc.get(n);if(!o){Fl++;return}const a=l=>{l&&l.trigger()};if(Hp(),e==="clear")o.forEach(a);else{const l=xe(n),h=l&&Gp(t);if(l&&t==="length"){const f=Number(r);o.forEach((u,d)=>{(d==="length"||d===Ul||!Xi(d)&&d>=f)&&a(u)})}else switch((t!==void 0||o.has(void 0))&&a(o.get(t)),h&&a(o.get(Ul)),e){case"add":l?h&&a(o.get("length")):(a(o.get(xs)),Mo(n)&&a(o.get(Vf)));break;case"delete":l||(a(o.get(xs)),Mo(n)&&a(o.get(Vf)));break;case"set":Mo(n)&&a(o.get(xs));break}}Wp()}function LS(n,e){const t=Fc.get(n);return t&&t.get(e)}function po(n){const e=Ge(n);return e===n?e:(cn(e,"iterate",Ul),Xn(n)?e:e.map(hn))}function xh(n){return cn(n=Ge(n),"iterate",Ul),n}const FS={__proto__:null,[Symbol.iterator](){return Jd(this,Symbol.iterator,hn)},concat(...n){return po(this).concat(...n.map(e=>xe(e)?po(e):e))},entries(){return Jd(this,"entries",n=>(n[1]=hn(n[1]),n))},every(n,e){return Fr(this,"every",n,e,void 0,arguments)},filter(n,e){return Fr(this,"filter",n,e,t=>t.map(hn),arguments)},find(n,e){return Fr(this,"find",n,e,hn,arguments)},findIndex(n,e){return Fr(this,"findIndex",n,e,void 0,arguments)},findLast(n,e){return Fr(this,"findLast",n,e,hn,arguments)},findLastIndex(n,e){return Fr(this,"findLastIndex",n,e,void 0,arguments)},forEach(n,e){return Fr(this,"forEach",n,e,void 0,arguments)},includes(...n){return Xd(this,"includes",n)},indexOf(...n){return Xd(this,"indexOf",n)},join(n){return po(this).join(n)},lastIndexOf(...n){return Xd(this,"lastIndexOf",n)},map(n,e){return Fr(this,"map",n,e,void 0,arguments)},pop(){return Ga(this,"pop")},push(...n){return Ga(this,"push",n)},reduce(n,...e){return Xm(this,"reduce",n,e)},reduceRight(n,...e){return Xm(this,"reduceRight",n,e)},shift(){return Ga(this,"shift")},some(n,e){return Fr(this,"some",n,e,void 0,arguments)},splice(...n){return Ga(this,"splice",n)},toReversed(){return po(this).toReversed()},toSorted(n){return po(this).toSorted(n)},toSpliced(...n){return po(this).toSpliced(...n)},unshift(...n){return Ga(this,"unshift",n)},values(){return Jd(this,"values",hn)}};function Jd(n,e,t){const r=xh(n),i=r[e]();return r!==n&&!Xn(n)&&(i._next=i.next,i.next=()=>{const s=i._next();return s.value&&(s.value=t(s.value)),s}),i}const US=Array.prototype;function Fr(n,e,t,r,i,s){const o=xh(n),a=o!==n&&!Xn(n),l=o[e];if(l!==US[e]){const u=l.apply(n,s);return a?hn(u):u}let h=t;o!==n&&(a?h=function(u,d){return t.call(this,hn(u),d,n)}:t.length>2&&(h=function(u,d){return t.call(this,u,d,n)}));const f=l.call(o,h,r);return a&&i?i(f):f}function Xm(n,e,t,r){const i=xh(n);let s=t;return i!==n&&(Xn(n)?t.length>3&&(s=function(o,a,l){return t.call(this,o,a,l,n)}):s=function(o,a,l){return t.call(this,o,hn(a),l,n)}),i[e](s,...r)}function Xd(n,e,t){const r=Ge(n);cn(r,"iterate",Ul);const i=r[e](...t);return(i===-1||i===!1)&&e_(t[0])?(t[0]=Ge(t[0]),r[e](...t)):i}function Ga(n,e,t=[]){es(),Hp();const r=Ge(n)[e].apply(n,t);return Wp(),ts(),r}const KS=zp("__proto__,__v_isRef,__isVue"),Lb=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(Xi));function BS(n){Xi(n)||(n=String(n));const e=Ge(this);return cn(e,"has",n),e.hasOwnProperty(n)}class Fb{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,r){if(t==="__v_skip")return e.__v_skip;const i=this._isReadonly,s=this._isShallow;if(t==="__v_isReactive")return!i;if(t==="__v_isReadonly")return i;if(t==="__v_isShallow")return s;if(t==="__v_raw")return r===(i?s?JS:$b:s?Bb:Kb).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=xe(e);if(!i){let l;if(o&&(l=FS[t]))return l;if(t==="hasOwnProperty")return BS}const a=Reflect.get(e,t,At(e)?e:r);return(Xi(t)?Lb.has(t):KS(t))||(i||cn(e,"get",t),s)?a:At(a)?o&&Gp(t)?a:a.value:ht(a)?i?Xp(a):Xr(a):a}}class Ub extends Fb{constructor(e=!1){super(!1,e)}set(e,t,r,i){let s=e[t];if(!this._isShallow){const l=Ls(s);if(!Xn(r)&&!Ls(r)&&(s=Ge(s),r=Ge(r)),!xe(e)&&At(s)&&!At(r))return l?!1:(s.value=r,!0)}const o=xe(e)&&Gp(t)?Number(t)<e.length:Qe(e,t),a=Reflect.set(e,t,r,At(e)?e:i);return e===Ge(i)&&(o?Vi(r,s)&&zr(e,"set",t,r):zr(e,"add",t,r)),a}deleteProperty(e,t){const r=Qe(e,t);e[t];const i=Reflect.deleteProperty(e,t);return i&&r&&zr(e,"delete",t,void 0),i}has(e,t){const r=Reflect.has(e,t);return(!Xi(t)||!Lb.has(t))&&cn(e,"has",t),r}ownKeys(e){return cn(e,"iterate",xe(e)?"length":xs),Reflect.ownKeys(e)}}class $S extends Fb{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const zS=new Ub,jS=new $S,qS=new Ub(!0);const Df=n=>n,rc=n=>Reflect.getPrototypeOf(n);function GS(n,e,t){return function(...r){const i=this.__v_raw,s=Ge(i),o=Mo(s),a=n==="entries"||n===Symbol.iterator&&o,l=n==="keys"&&o,h=i[n](...r),f=t?Df:e?Mf:hn;return!e&&cn(s,"iterate",l?Vf:xs),{next(){const{value:u,done:d}=h.next();return d?{value:u,done:d}:{value:a?[f(u[0]),f(u[1])]:f(u),done:d}},[Symbol.iterator](){return this}}}}function ic(n){return function(...e){return n==="delete"?!1:n==="clear"?void 0:this}}function HS(n,e){const t={get(i){const s=this.__v_raw,o=Ge(s),a=Ge(i);n||(Vi(i,a)&&cn(o,"get",i),cn(o,"get",a));const{has:l}=rc(o),h=e?Df:n?Mf:hn;if(l.call(o,i))return h(s.get(i));if(l.call(o,a))return h(s.get(a));s!==o&&s.get(i)},get size(){const i=this.__v_raw;return!n&&cn(Ge(i),"iterate",xs),Reflect.get(i,"size",i)},has(i){const s=this.__v_raw,o=Ge(s),a=Ge(i);return n||(Vi(i,a)&&cn(o,"has",i),cn(o,"has",a)),i===a?s.has(i):s.has(i)||s.has(a)},forEach(i,s){const o=this,a=o.__v_raw,l=Ge(a),h=e?Df:n?Mf:hn;return!n&&cn(l,"iterate",xs),a.forEach((f,u)=>i.call(s,h(f),h(u),o))}};return _n(t,n?{add:ic("add"),set:ic("set"),delete:ic("delete"),clear:ic("clear")}:{add(i){!e&&!Xn(i)&&!Ls(i)&&(i=Ge(i));const s=Ge(this);return rc(s).has.call(s,i)||(s.add(i),zr(s,"add",i,i)),this},set(i,s){!e&&!Xn(s)&&!Ls(s)&&(s=Ge(s));const o=Ge(this),{has:a,get:l}=rc(o);let h=a.call(o,i);h||(i=Ge(i),h=a.call(o,i));const f=l.call(o,i);return o.set(i,s),h?Vi(s,f)&&zr(o,"set",i,s):zr(o,"add",i,s),this},delete(i){const s=Ge(this),{has:o,get:a}=rc(s);let l=o.call(s,i);l||(i=Ge(i),l=o.call(s,i)),a&&a.call(s,i);const h=s.delete(i);return l&&zr(s,"delete",i,void 0),h},clear(){const i=Ge(this),s=i.size!==0,o=i.clear();return s&&zr(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{t[i]=GS(i,n,e)}),t}function Jp(n,e){const t=HS(n,e);return(r,i,s)=>i==="__v_isReactive"?!n:i==="__v_isReadonly"?n:i==="__v_raw"?r:Reflect.get(Qe(t,i)&&i in r?t:r,i,s)}const WS={get:Jp(!1,!1)},QS={get:Jp(!1,!0)},YS={get:Jp(!0,!1)};const Kb=new WeakMap,Bb=new WeakMap,$b=new WeakMap,JS=new WeakMap;function XS(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function ZS(n){return n.__v_skip||!Object.isExtensible(n)?0:XS(IS(n))}function Xr(n){return Ls(n)?n:Zp(n,!1,zS,WS,Kb)}function zb(n){return Zp(n,!1,qS,QS,Bb)}function Xp(n){return Zp(n,!0,jS,YS,$b)}function Zp(n,e,t,r,i){if(!ht(n)||n.__v_raw&&!(e&&n.__v_isReactive))return n;const s=i.get(n);if(s)return s;const o=ZS(n);if(o===0)return n;const a=new Proxy(n,o===2?r:t);return i.set(n,a),a}function Lo(n){return Ls(n)?Lo(n.__v_raw):!!(n&&n.__v_isReactive)}function Ls(n){return!!(n&&n.__v_isReadonly)}function Xn(n){return!!(n&&n.__v_isShallow)}function e_(n){return n?!!n.__v_raw:!1}function Ge(n){const e=n&&n.__v_raw;return e?Ge(e):n}function eR(n){return!Qe(n,"__v_skip")&&Object.isExtensible(n)&&Eb(n,"__v_skip",!0),n}const hn=n=>ht(n)?Xr(n):n,Mf=n=>ht(n)?Xp(n):n;function At(n){return n?n.__v_isRef===!0:!1}function $n(n){return qb(n,!1)}function jb(n){return qb(n,!0)}function qb(n,e){return At(n)?n:new tR(n,e)}class tR{constructor(e,t){this.dep=new Yp,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:Ge(e),this._value=t?e:hn(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,r=this.__v_isShallow||Xn(e)||Ls(e);e=r?e:Ge(e),Vi(e,t)&&(this._rawValue=e,this._value=r?e:hn(e),this.dep.trigger())}}function $e(n){return At(n)?n.value:n}function Ie(n){return Re(n)?n():$e(n)}const nR={get:(n,e,t)=>e==="__v_raw"?n:$e(Reflect.get(n,e,t)),set:(n,e,t,r)=>{const i=n[e];return At(i)&&!At(t)?(i.value=t,!0):Reflect.set(n,e,t,r)}};function Gb(n){return Lo(n)?n:new Proxy(n,nR)}class rR{constructor(e,t,r){this._object=e,this._key=t,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return LS(Ge(this._object),this._key)}}class iR{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function Ts(n,e,t){return At(n)?n:Re(n)?new iR(n):ht(n)&&arguments.length>1?sR(n,e,t):$n(n)}function sR(n,e,t){const r=n[e];return At(r)?r:new rR(n,e,t)}class oR{constructor(e,t,r){this.fn=e,this.setter=t,this._value=void 0,this.dep=new Yp(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Fl-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&it!==this)return xb(this,!0),!0}get value(){const e=this.dep.track();return Vb(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function aR(n,e,t=!1){let r,i;return Re(n)?r=n:(r=n.get,i=n.set),new oR(r,i,t)}const sc={},Uc=new WeakMap;let gs;function lR(n,e=!1,t=gs){if(t){let r=Uc.get(t);r||Uc.set(t,r=[]),r.push(n)}}function uR(n,e,t=nt){const{immediate:r,deep:i,once:s,scheduler:o,augmentJob:a,call:l}=t,h=U=>i?U:Xn(U)||i===!1||i===0?jr(U,1):jr(U);let f,u,d,p,m=!1,T=!1;if(At(n)?(u=()=>n.value,m=Xn(n)):Lo(n)?(u=()=>h(n),m=!0):xe(n)?(T=!0,m=n.some(U=>Lo(U)||Xn(U)),u=()=>n.map(U=>{if(At(U))return U.value;if(Lo(U))return h(U);if(Re(U))return l?l(U,2):U()})):Re(n)?e?u=l?()=>l(n,2):n:u=()=>{if(d){es();try{d()}finally{ts()}}const U=gs;gs=f;try{return l?l(n,3,[p]):n(p)}finally{gs=U}}:u=kr,e&&i){const U=u,ee=i===!0?1/0:i;u=()=>jr(U(),ee)}const v=VS(),I=()=>{f.stop(),v&&v.active&&qp(v.effects,f)};if(s&&e){const U=e;e=(...ee)=>{U(...ee),I()}}let C=T?new Array(n.length).fill(sc):sc;const M=U=>{if(!(!(f.flags&1)||!f.dirty&&!U))if(e){const ee=f.run();if(i||m||(T?ee.some((ne,k)=>Vi(ne,C[k])):Vi(ee,C))){d&&d();const ne=gs;gs=f;try{const k=[ee,C===sc?void 0:T&&C[0]===sc?[]:C,p];l?l(e,3,k):e(...k),C=ee}finally{gs=ne}}}else f.run()};return a&&a(M),f=new Pb(u),f.scheduler=o?()=>o(M,!1):M,p=U=>lR(U,!1,f),d=f.onStop=()=>{const U=Uc.get(f);if(U){if(l)l(U,4);else for(const ee of U)ee();Uc.delete(f)}},e?r?M(!0):C=f.run():o?o(M.bind(null,!0),!0):f.run(),I.pause=f.pause.bind(f),I.resume=f.resume.bind(f),I.stop=I,I}function jr(n,e=1/0,t){if(e<=0||!ht(n)||n.__v_skip||(t=t||new Set,t.has(n)))return n;if(t.add(n),e--,At(n))jr(n.value,e,t);else if(xe(n))for(let r=0;r<n.length;r++)jr(n[r],e,t);else if(Tb(n)||Mo(n))n.forEach(r=>{jr(r,e,t)});else if(Ib(n)){for(const r in n)jr(n[r],e,t);for(const r of Object.getOwnPropertySymbols(n))Object.prototype.propertyIsEnumerable.call(n,r)&&jr(n[r],e,t)}return n}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function mu(n,e,t,r){try{return r?n(...r):n()}catch(i){Oh(i,e,t)}}function Pr(n,e,t,r){if(Re(n)){const i=mu(n,e,t,r);return i&&bb(i)&&i.catch(s=>{Oh(s,e,t)}),i}if(xe(n)){const i=[];for(let s=0;s<n.length;s++)i.push(Pr(n[s],e,t,r));return i}}function Oh(n,e,t,r=!0){const i=e?e.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||nt;if(e){let a=e.parent;const l=e.proxy,h=`https://vuejs.org/error-reference/#runtime-${t}`;for(;a;){const f=a.ec;if(f){for(let u=0;u<f.length;u++)if(f[u](n,l,h)===!1)return}a=a.parent}if(s){es(),mu(s,null,10,[n,l,h]),ts();return}}cR(n,t,i,r,o)}function cR(n,e,t,r=!0,i=!1){if(i)throw n;console.error(n)}const In=[];let fr=-1;const Fo=[];let Ai=null,Ao=0;const Hb=Promise.resolve();let Kc=null;function Qn(n){const e=Kc||Hb;return n?e.then(this?n.bind(this):n):e}function hR(n){let e=fr+1,t=In.length;for(;e<t;){const r=e+t>>>1,i=In[r],s=Kl(i);s<n||s===n&&i.flags&2?e=r+1:t=r}return e}function t_(n){if(!(n.flags&1)){const e=Kl(n),t=In[In.length-1];!t||!(n.flags&2)&&e>=Kl(t)?In.push(n):In.splice(hR(e),0,n),n.flags|=1,Wb()}}function Wb(){Kc||(Kc=Hb.then(Yb))}function dR(n){xe(n)?Fo.push(...n):Ai&&n.id===-1?Ai.splice(Ao+1,0,n):n.flags&1||(Fo.push(n),n.flags|=1),Wb()}function Zm(n,e,t=fr+1){for(;t<In.length;t++){const r=In[t];if(r&&r.flags&2){if(n&&r.id!==n.uid)continue;In.splice(t,1),t--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function Qb(n){if(Fo.length){const e=[...new Set(Fo)].sort((t,r)=>Kl(t)-Kl(r));if(Fo.length=0,Ai){Ai.push(...e);return}for(Ai=e,Ao=0;Ao<Ai.length;Ao++){const t=Ai[Ao];t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2}Ai=null,Ao=0}}const Kl=n=>n.id==null?n.flags&2?-1:1/0:n.id;function Yb(n){try{for(fr=0;fr<In.length;fr++){const e=In[fr];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),mu(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;fr<In.length;fr++){const e=In[fr];e&&(e.flags&=-2)}fr=-1,In.length=0,Qb(),Kc=null,(In.length||Fo.length)&&Yb()}}let Cn=null,Jb=null;function Bc(n){const e=Cn;return Cn=n,Jb=n&&n.type.__scopeId||null,e}function ar(n,e=Cn,t){if(!e||n._n)return n;const r=(...i)=>{r._d&&uy(-1);const s=Bc(e);let o;try{o=n(...i)}finally{Bc(s),r._d&&uy(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Bl(n,e){if(Cn===null)return n;const t=Lh(Cn),r=n.dirs||(n.dirs=[]);for(let i=0;i<e.length;i++){let[s,o,a,l=nt]=e[i];s&&(Re(s)&&(s={mounted:s,updated:s}),s.deep&&jr(o),r.push({dir:s,instance:t,value:o,oldValue:void 0,arg:a,modifiers:l}))}return n}function fs(n,e,t,r){const i=n.dirs,s=e&&e.dirs;for(let o=0;o<i.length;o++){const a=i[o];s&&(a.oldValue=s[o].value);let l=a.dir[r];l&&(es(),Pr(l,t,8,[n.el,a,n,e]),ts())}}const fR=Symbol("_vte"),pR=n=>n.__isTeleport;function n_(n,e){n.shapeFlag&6&&n.component?(n.transition=e,n_(n.component.subTree,e)):n.shapeFlag&128?(n.ssContent.transition=e.clone(n.ssContent),n.ssFallback.transition=e.clone(n.ssFallback)):n.transition=e}/*! #__NO_SIDE_EFFECTS__ */function yu(n,e){return Re(n)?_n({name:n.name},e,{setup:n}):n}function Xb(n){n.ids=[n.ids[0]+n.ids[2]+++"-",0,0]}function $c(n,e,t,r,i=!1){if(xe(n)){n.forEach((m,T)=>$c(m,e&&(xe(e)?e[T]:e),t,r,i));return}if(Tl(r)&&!i){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&$c(n,e,t,r.component.subTree);return}const s=r.shapeFlag&4?Lh(r.component):r.el,o=i?null:s,{i:a,r:l}=n,h=e&&e.r,f=a.refs===nt?a.refs={}:a.refs,u=a.setupState,d=Ge(u),p=u===nt?()=>!1:m=>Qe(d,m);if(h!=null&&h!==l&&(Ot(h)?(f[h]=null,p(h)&&(u[h]=null)):At(h)&&(h.value=null)),Re(l))mu(l,a,12,[o,f]);else{const m=Ot(l),T=At(l);if(m||T){const v=()=>{if(n.f){const I=m?p(l)?u[l]:f[l]:l.value;i?xe(I)&&qp(I,s):xe(I)?I.includes(s)||I.push(s):m?(f[l]=[s],p(l)&&(u[l]=f[l])):(l.value=[s],n.k&&(f[n.k]=l.value))}else m?(f[l]=o,p(l)&&(u[l]=o)):T&&(l.value=o,n.k&&(f[n.k]=o))};o?(v.id=-1,Fn(v,t)):v()}}}Ch().requestIdleCallback;Ch().cancelIdleCallback;const Tl=n=>!!n.type.__asyncLoader,Zb=n=>n.type.__isKeepAlive;function _R(n,e){ew(n,"a",e)}function gR(n,e){ew(n,"da",e)}function ew(n,e,t=tn){const r=n.__wdc||(n.__wdc=()=>{let i=t;for(;i;){if(i.isDeactivated)return;i=i.parent}return n()});if(Nh(e,r,t),t){let i=t.parent;for(;i&&i.parent;)Zb(i.parent.vnode)&&mR(r,e,t,i),i=i.parent}}function mR(n,e,t,r){const i=Nh(e,n,r,!0);nw(()=>{qp(r[e],i)},t)}function Nh(n,e,t=tn,r=!1){if(t){const i=t[n]||(t[n]=[]),s=e.__weh||(e.__weh=(...o)=>{es();const a=vu(t),l=Pr(e,t,n,o);return a(),ts(),l});return r?i.unshift(s):i.push(s),s}}const oi=n=>(e,t=tn)=>{(!zl||n==="sp")&&Nh(n,(...r)=>e(...r),t)},yR=oi("bm"),r_=oi("m"),vR=oi("bu"),TR=oi("u"),tw=oi("bum"),nw=oi("um"),bR=oi("sp"),wR=oi("rtg"),IR=oi("rtc");function ER(n,e=tn){Nh("ec",n,e)}const rw="components";function st(n,e){return sw(rw,n,!0,e)||n}const iw=Symbol.for("v-ndc");function i_(n){return Ot(n)?sw(rw,n,!1)||n:n||iw}function sw(n,e,t=!0,r=!1){const i=Cn||tn;if(i){const s=i.type;{const a=hP(s,!1);if(a&&(a===e||a===er(e)||a===Ph(er(e))))return s}const o=ey(i[n]||s[n],e)||ey(i.appContext[n],e);return!o&&r?s:o}}function ey(n,e){return n&&(n[e]||n[er(e)]||n[Ph(er(e))])}function Fs(n,e,t,r){let i;const s=t,o=xe(n);if(o||Ot(n)){const a=o&&Lo(n);let l=!1;a&&(l=!Xn(n),n=xh(n)),i=new Array(n.length);for(let h=0,f=n.length;h<f;h++)i[h]=e(l?hn(n[h]):n[h],h,void 0,s)}else if(typeof n=="number"){i=new Array(n);for(let a=0;a<n;a++)i[a]=e(a+1,a,void 0,s)}else if(ht(n))if(n[Symbol.iterator])i=Array.from(n,(a,l)=>e(a,l,void 0,s));else{const a=Object.keys(n);i=new Array(a.length);for(let l=0,h=a.length;l<h;l++){const f=a[l];i[l]=e(n[f],f,l,s)}}else i=[];return i}const Lf=n=>n?Aw(n)?Lh(n):Lf(n.parent):null,bl=_n(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>Lf(n.parent),$root:n=>Lf(n.root),$host:n=>n.ce,$emit:n=>n.emit,$options:n=>aw(n),$forceUpdate:n=>n.f||(n.f=()=>{t_(n.update)}),$nextTick:n=>n.n||(n.n=Qn.bind(n.proxy)),$watch:n=>GR.bind(n)}),Zd=(n,e)=>n!==nt&&!n.__isScriptSetup&&Qe(n,e),kR={get({_:n},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:r,data:i,props:s,accessCache:o,type:a,appContext:l}=n;let h;if(e[0]!=="$"){const p=o[e];if(p!==void 0)switch(p){case 1:return r[e];case 2:return i[e];case 4:return t[e];case 3:return s[e]}else{if(Zd(r,e))return o[e]=1,r[e];if(i!==nt&&Qe(i,e))return o[e]=2,i[e];if((h=n.propsOptions[0])&&Qe(h,e))return o[e]=3,s[e];if(t!==nt&&Qe(t,e))return o[e]=4,t[e];Ff&&(o[e]=0)}}const f=bl[e];let u,d;if(f)return e==="$attrs"&&cn(n.attrs,"get",""),f(n);if((u=a.__cssModules)&&(u=u[e]))return u;if(t!==nt&&Qe(t,e))return o[e]=4,t[e];if(d=l.config.globalProperties,Qe(d,e))return d[e]},set({_:n},e,t){const{data:r,setupState:i,ctx:s}=n;return Zd(i,e)?(i[e]=t,!0):r!==nt&&Qe(r,e)?(r[e]=t,!0):Qe(n.props,e)||e[0]==="$"&&e.slice(1)in n?!1:(s[e]=t,!0)},has({_:{data:n,setupState:e,accessCache:t,ctx:r,appContext:i,propsOptions:s}},o){let a;return!!t[o]||n!==nt&&Qe(n,o)||Zd(e,o)||(a=s[0])&&Qe(a,o)||Qe(r,o)||Qe(bl,o)||Qe(i.config.globalProperties,o)},defineProperty(n,e,t){return t.get!=null?n._.accessCache[e]=0:Qe(t,"value")&&this.set(n,e,t.value,null),Reflect.defineProperty(n,e,t)}};function ty(n){return xe(n)?n.reduce((e,t)=>(e[t]=null,e),{}):n}let Ff=!0;function AR(n){const e=aw(n),t=n.proxy,r=n.ctx;Ff=!1,e.beforeCreate&&ny(e.beforeCreate,n,"bc");const{data:i,computed:s,methods:o,watch:a,provide:l,inject:h,created:f,beforeMount:u,mounted:d,beforeUpdate:p,updated:m,activated:T,deactivated:v,beforeDestroy:I,beforeUnmount:C,destroyed:M,unmounted:U,render:ee,renderTracked:ne,renderTriggered:k,errorCaptured:w,serverPrefetch:b,expose:R,inheritAttrs:P,components:x,directives:A,filters:Le}=e;if(h&&SR(h,r,null),o)for(const le in o){const Pe=o[le];Re(Pe)&&(r[le]=Pe.bind(t))}if(i){const le=i.call(t,t);ht(le)&&(n.data=Xr(le))}if(Ff=!0,s)for(const le in s){const Pe=s[le],vt=Re(Pe)?Pe.bind(t,t):Re(Pe.get)?Pe.get.bind(t,t):kr,Ut=!Re(Pe)&&Re(Pe.set)?Pe.set.bind(t):kr,qt=Ne({get:vt,set:Ut});Object.defineProperty(r,le,{enumerable:!0,configurable:!0,get:()=>qt.value,set:Ze=>qt.value=Ze})}if(a)for(const le in a)ow(a[le],r,t,le);if(l){const le=Re(l)?l.call(t):l;Reflect.ownKeys(le).forEach(Pe=>{Os(Pe,le[Pe])})}f&&ny(f,n,"c");function De(le,Pe){xe(Pe)?Pe.forEach(vt=>le(vt.bind(t))):Pe&&le(Pe.bind(t))}if(De(yR,u),De(r_,d),De(vR,p),De(TR,m),De(_R,T),De(gR,v),De(ER,w),De(IR,ne),De(wR,k),De(tw,C),De(nw,U),De(bR,b),xe(R))if(R.length){const le=n.exposed||(n.exposed={});R.forEach(Pe=>{Object.defineProperty(le,Pe,{get:()=>t[Pe],set:vt=>t[Pe]=vt})})}else n.exposed||(n.exposed={});ee&&n.render===kr&&(n.render=ee),P!=null&&(n.inheritAttrs=P),x&&(n.components=x),A&&(n.directives=A),b&&Xb(n)}function SR(n,e,t=kr){xe(n)&&(n=Uf(n));for(const r in n){const i=n[r];let s;ht(i)?"default"in i?s=lr(i.from||r,i.default,!0):s=lr(i.from||r):s=lr(i),At(s)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[r]=s}}function ny(n,e,t){Pr(xe(n)?n.map(r=>r.bind(e.proxy)):n.bind(e.proxy),e,t)}function ow(n,e,t,r){let i=r.includes(".")?Tw(t,r):()=>t[r];if(Ot(n)){const s=e[n];Re(s)&&Gn(i,s)}else if(Re(n))Gn(i,n.bind(t));else if(ht(n))if(xe(n))n.forEach(s=>ow(s,e,t,r));else{const s=Re(n.handler)?n.handler.bind(t):e[n.handler];Re(s)&&Gn(i,s,n)}}function aw(n){const e=n.type,{mixins:t,extends:r}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=n.appContext,a=s.get(e);let l;return a?l=a:!i.length&&!t&&!r?l=e:(l={},i.length&&i.forEach(h=>zc(l,h,o,!0)),zc(l,e,o)),ht(e)&&s.set(e,l),l}function zc(n,e,t,r=!1){const{mixins:i,extends:s}=e;s&&zc(n,s,t,!0),i&&i.forEach(o=>zc(n,o,t,!0));for(const o in e)if(!(r&&o==="expose")){const a=RR[o]||t&&t[o];n[o]=a?a(n[o],e[o]):e[o]}return n}const RR={data:ry,props:iy,emits:iy,methods:al,computed:al,beforeCreate:vn,created:vn,beforeMount:vn,mounted:vn,beforeUpdate:vn,updated:vn,beforeDestroy:vn,beforeUnmount:vn,destroyed:vn,unmounted:vn,activated:vn,deactivated:vn,errorCaptured:vn,serverPrefetch:vn,components:al,directives:al,watch:CR,provide:ry,inject:PR};function ry(n,e){return e?n?function(){return _n(Re(n)?n.call(this,this):n,Re(e)?e.call(this,this):e)}:e:n}function PR(n,e){return al(Uf(n),Uf(e))}function Uf(n){if(xe(n)){const e={};for(let t=0;t<n.length;t++)e[n[t]]=n[t];return e}return n}function vn(n,e){return n?[...new Set([].concat(n,e))]:e}function al(n,e){return n?_n(Object.create(null),n,e):e}function iy(n,e){return n?xe(n)&&xe(e)?[...new Set([...n,...e])]:_n(Object.create(null),ty(n),ty(e??{})):e}function CR(n,e){if(!n)return e;if(!e)return n;const t=_n(Object.create(null),n);for(const r in e)t[r]=vn(n[r],e[r]);return t}function lw(){return{app:null,config:{isNativeTag:bS,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let xR=0;function OR(n,e){return function(r,i=null){Re(r)||(r=_n({},r)),i!=null&&!ht(i)&&(i=null);const s=lw(),o=new WeakSet,a=[];let l=!1;const h=s.app={_uid:xR++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:fP,get config(){return s.config},set config(f){},use(f,...u){return o.has(f)||(f&&Re(f.install)?(o.add(f),f.install(h,...u)):Re(f)&&(o.add(f),f(h,...u))),h},mixin(f){return s.mixins.includes(f)||s.mixins.push(f),h},component(f,u){return u?(s.components[f]=u,h):s.components[f]},directive(f,u){return u?(s.directives[f]=u,h):s.directives[f]},mount(f,u,d){if(!l){const p=h._ceVNode||Te(r,i);return p.appContext=s,d===!0?d="svg":d===!1&&(d=void 0),n(p,f,d),l=!0,h._container=f,f.__vue_app__=h,Lh(p.component)}},onUnmount(f){a.push(f)},unmount(){l&&(Pr(a,h._instance,16),n(null,h._container),delete h._container.__vue_app__)},provide(f,u){return s.provides[f]=u,h},runWithContext(f){const u=Uo;Uo=h;try{return f()}finally{Uo=u}}};return h}}let Uo=null;function Os(n,e){if(tn){let t=tn.provides;const r=tn.parent&&tn.parent.provides;r===t&&(t=tn.provides=Object.create(r)),t[n]=e}}function lr(n,e,t=!1){const r=tn||Cn;if(r||Uo){const i=Uo?Uo._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&n in i)return i[n];if(arguments.length>1)return t&&Re(e)?e.call(r&&r.proxy):e}}const uw={},cw=()=>Object.create(uw),hw=n=>Object.getPrototypeOf(n)===uw;function NR(n,e,t,r=!1){const i={},s=cw();n.propsDefaults=Object.create(null),dw(n,e,i,s);for(const o in n.propsOptions[0])o in i||(i[o]=void 0);t?n.props=r?i:zb(i):n.type.props?n.props=i:n.props=s,n.attrs=s}function VR(n,e,t,r){const{props:i,attrs:s,vnode:{patchFlag:o}}=n,a=Ge(i),[l]=n.propsOptions;let h=!1;if((r||o>0)&&!(o&16)){if(o&8){const f=n.vnode.dynamicProps;for(let u=0;u<f.length;u++){let d=f[u];if(Vh(n.emitsOptions,d))continue;const p=e[d];if(l)if(Qe(s,d))p!==s[d]&&(s[d]=p,h=!0);else{const m=er(d);i[m]=Kf(l,a,m,p,n,!1)}else p!==s[d]&&(s[d]=p,h=!0)}}}else{dw(n,e,i,s)&&(h=!0);let f;for(const u in a)(!e||!Qe(e,u)&&((f=Zi(u))===u||!Qe(e,f)))&&(l?t&&(t[u]!==void 0||t[f]!==void 0)&&(i[u]=Kf(l,a,u,void 0,n,!0)):delete i[u]);if(s!==a)for(const u in s)(!e||!Qe(e,u))&&(delete s[u],h=!0)}h&&zr(n.attrs,"set","")}function dw(n,e,t,r){const[i,s]=n.propsOptions;let o=!1,a;if(e)for(let l in e){if(ml(l))continue;const h=e[l];let f;i&&Qe(i,f=er(l))?!s||!s.includes(f)?t[f]=h:(a||(a={}))[f]=h:Vh(n.emitsOptions,l)||(!(l in r)||h!==r[l])&&(r[l]=h,o=!0)}if(s){const l=Ge(t),h=a||nt;for(let f=0;f<s.length;f++){const u=s[f];t[u]=Kf(i,l,u,h[u],n,!Qe(h,u))}}return o}function Kf(n,e,t,r,i,s){const o=n[t];if(o!=null){const a=Qe(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Re(l)){const{propsDefaults:h}=i;if(t in h)r=h[t];else{const f=vu(i);r=h[t]=l.call(null,e),f()}}else r=l;i.ce&&i.ce._setProp(t,r)}o[0]&&(s&&!a?r=!1:o[1]&&(r===""||r===Zi(t))&&(r=!0))}return r}const DR=new WeakMap;function fw(n,e,t=!1){const r=t?DR:e.propsCache,i=r.get(n);if(i)return i;const s=n.props,o={},a=[];let l=!1;if(!Re(n)){const f=u=>{l=!0;const[d,p]=fw(u,e,!0);_n(o,d),p&&a.push(...p)};!t&&e.mixins.length&&e.mixins.forEach(f),n.extends&&f(n.extends),n.mixins&&n.mixins.forEach(f)}if(!s&&!l)return ht(n)&&r.set(n,Do),Do;if(xe(s))for(let f=0;f<s.length;f++){const u=er(s[f]);sy(u)&&(o[u]=nt)}else if(s)for(const f in s){const u=er(f);if(sy(u)){const d=s[f],p=o[u]=xe(d)||Re(d)?{type:d}:_n({},d),m=p.type;let T=!1,v=!0;if(xe(m))for(let I=0;I<m.length;++I){const C=m[I],M=Re(C)&&C.name;if(M==="Boolean"){T=!0;break}else M==="String"&&(v=!1)}else T=Re(m)&&m.name==="Boolean";p[0]=T,p[1]=v,(T||Qe(p,"default"))&&a.push(u)}}const h=[o,a];return ht(n)&&r.set(n,h),h}function sy(n){return n[0]!=="$"&&!ml(n)}const pw=n=>n[0]==="_"||n==="$stable",s_=n=>xe(n)?n.map(_r):[_r(n)],MR=(n,e,t)=>{if(e._n)return e;const r=ar((...i)=>s_(e(...i)),t);return r._c=!1,r},_w=(n,e,t)=>{const r=n._ctx;for(const i in n){if(pw(i))continue;const s=n[i];if(Re(s))e[i]=MR(i,s,r);else if(s!=null){const o=s_(s);e[i]=()=>o}}},gw=(n,e)=>{const t=s_(e);n.slots.default=()=>t},mw=(n,e,t)=>{for(const r in e)(t||r!=="_")&&(n[r]=e[r])},LR=(n,e,t)=>{const r=n.slots=cw();if(n.vnode.shapeFlag&32){const i=e._;i?(mw(r,e,t),t&&Eb(r,"_",i,!0)):_w(e,r)}else e&&gw(n,e)},FR=(n,e,t)=>{const{vnode:r,slots:i}=n;let s=!0,o=nt;if(r.shapeFlag&32){const a=e._;a?t&&a===1?s=!1:mw(i,e,t):(s=!e.$stable,_w(e,i)),o=e}else e&&(gw(n,e),o={default:1});if(s)for(const a in i)!pw(a)&&o[a]==null&&delete i[a]},Fn=ZR;function UR(n){return KR(n)}function KR(n,e){const t=Ch();t.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:o,createText:a,createComment:l,setText:h,setElementText:f,parentNode:u,nextSibling:d,setScopeId:p=kr,insertStaticContent:m}=n,T=(E,S,N,z=null,q=null,j=null,ie=void 0,te=null,Z=!!S.dynamicChildren)=>{if(E===S)return;E&&!Ha(E,S)&&(z=F(E),Ze(E,q,j,!0),E=null),S.patchFlag===-2&&(Z=!1,S.dynamicChildren=null);const{type:Y,ref:be,shapeFlag:oe}=S;switch(Y){case Dh:v(E,S,N,z);break;case Us:I(E,S,N,z);break;case bc:E==null&&C(S,N,z,ie);break;case Bt:x(E,S,N,z,q,j,ie,te,Z);break;default:oe&1?ee(E,S,N,z,q,j,ie,te,Z):oe&6?A(E,S,N,z,q,j,ie,te,Z):(oe&64||oe&128)&&Y.process(E,S,N,z,q,j,ie,te,Z,he)}be!=null&&q&&$c(be,E&&E.ref,j,S||E,!S)},v=(E,S,N,z)=>{if(E==null)r(S.el=a(S.children),N,z);else{const q=S.el=E.el;S.children!==E.children&&h(q,S.children)}},I=(E,S,N,z)=>{E==null?r(S.el=l(S.children||""),N,z):S.el=E.el},C=(E,S,N,z)=>{[E.el,E.anchor]=m(E.children,S,N,z,E.el,E.anchor)},M=({el:E,anchor:S},N,z)=>{let q;for(;E&&E!==S;)q=d(E),r(E,N,z),E=q;r(S,N,z)},U=({el:E,anchor:S})=>{let N;for(;E&&E!==S;)N=d(E),i(E),E=N;i(S)},ee=(E,S,N,z,q,j,ie,te,Z)=>{S.type==="svg"?ie="svg":S.type==="math"&&(ie="mathml"),E==null?ne(S,N,z,q,j,ie,te,Z):b(E,S,q,j,ie,te,Z)},ne=(E,S,N,z,q,j,ie,te)=>{let Z,Y;const{props:be,shapeFlag:oe,transition:ge,dirs:ke}=E;if(Z=E.el=o(E.type,j,be&&be.is,be),oe&8?f(Z,E.children):oe&16&&w(E.children,Z,null,z,q,ef(E,j),ie,te),ke&&fs(E,null,z,"created"),k(Z,E,E.scopeId,ie,z),be){for(const Ce in be)Ce!=="value"&&!ml(Ce)&&s(Z,Ce,null,be[Ce],j,z);"value"in be&&s(Z,"value",null,be.value,j),(Y=be.onVnodeBeforeMount)&&dr(Y,z,E)}ke&&fs(E,null,z,"beforeMount");const ye=BR(q,ge);ye&&ge.beforeEnter(Z),r(Z,S,N),((Y=be&&be.onVnodeMounted)||ye||ke)&&Fn(()=>{Y&&dr(Y,z,E),ye&&ge.enter(Z),ke&&fs(E,null,z,"mounted")},q)},k=(E,S,N,z,q)=>{if(N&&p(E,N),z)for(let j=0;j<z.length;j++)p(E,z[j]);if(q){let j=q.subTree;if(S===j||ww(j.type)&&(j.ssContent===S||j.ssFallback===S)){const ie=q.vnode;k(E,ie,ie.scopeId,ie.slotScopeIds,q.parent)}}},w=(E,S,N,z,q,j,ie,te,Z=0)=>{for(let Y=Z;Y<E.length;Y++){const be=E[Y]=te?Si(E[Y]):_r(E[Y]);T(null,be,S,N,z,q,j,ie,te)}},b=(E,S,N,z,q,j,ie)=>{const te=S.el=E.el;let{patchFlag:Z,dynamicChildren:Y,dirs:be}=S;Z|=E.patchFlag&16;const oe=E.props||nt,ge=S.props||nt;let ke;if(N&&ps(N,!1),(ke=ge.onVnodeBeforeUpdate)&&dr(ke,N,S,E),be&&fs(S,E,N,"beforeUpdate"),N&&ps(N,!0),(oe.innerHTML&&ge.innerHTML==null||oe.textContent&&ge.textContent==null)&&f(te,""),Y?R(E.dynamicChildren,Y,te,N,z,ef(S,q),j):ie||Pe(E,S,te,null,N,z,ef(S,q),j,!1),Z>0){if(Z&16)P(te,oe,ge,N,q);else if(Z&2&&oe.class!==ge.class&&s(te,"class",null,ge.class,q),Z&4&&s(te,"style",oe.style,ge.style,q),Z&8){const ye=S.dynamicProps;for(let Ce=0;Ce<ye.length;Ce++){const Fe=ye[Ce],Gt=oe[Fe],Vt=ge[Fe];(Vt!==Gt||Fe==="value")&&s(te,Fe,Gt,Vt,q,N)}}Z&1&&E.children!==S.children&&f(te,S.children)}else!ie&&Y==null&&P(te,oe,ge,N,q);((ke=ge.onVnodeUpdated)||be)&&Fn(()=>{ke&&dr(ke,N,S,E),be&&fs(S,E,N,"updated")},z)},R=(E,S,N,z,q,j,ie)=>{for(let te=0;te<S.length;te++){const Z=E[te],Y=S[te],be=Z.el&&(Z.type===Bt||!Ha(Z,Y)||Z.shapeFlag&70)?u(Z.el):N;T(Z,Y,be,null,z,q,j,ie,!0)}},P=(E,S,N,z,q)=>{if(S!==N){if(S!==nt)for(const j in S)!ml(j)&&!(j in N)&&s(E,j,S[j],null,q,z);for(const j in N){if(ml(j))continue;const ie=N[j],te=S[j];ie!==te&&j!=="value"&&s(E,j,te,ie,q,z)}"value"in N&&s(E,"value",S.value,N.value,q)}},x=(E,S,N,z,q,j,ie,te,Z)=>{const Y=S.el=E?E.el:a(""),be=S.anchor=E?E.anchor:a("");let{patchFlag:oe,dynamicChildren:ge,slotScopeIds:ke}=S;ke&&(te=te?te.concat(ke):ke),E==null?(r(Y,N,z),r(be,N,z),w(S.children||[],N,be,q,j,ie,te,Z)):oe>0&&oe&64&&ge&&E.dynamicChildren?(R(E.dynamicChildren,ge,N,q,j,ie,te),(S.key!=null||q&&S===q.subTree)&&yw(E,S,!0)):Pe(E,S,N,be,q,j,ie,te,Z)},A=(E,S,N,z,q,j,ie,te,Z)=>{S.slotScopeIds=te,E==null?S.shapeFlag&512?q.ctx.activate(S,N,z,ie,Z):Le(S,N,z,q,j,ie,Z):Xe(E,S,Z)},Le=(E,S,N,z,q,j,ie)=>{const te=E.component=oP(E,z,q);if(Zb(E)&&(te.ctx.renderer=he),aP(te,!1,ie),te.asyncDep){if(q&&q.registerDep(te,De,ie),!E.el){const Z=te.subTree=Te(Us);I(null,Z,S,N)}}else De(te,E,S,N,q,j,ie)},Xe=(E,S,N)=>{const z=S.component=E.component;if(JR(E,S,N))if(z.asyncDep&&!z.asyncResolved){le(z,S,N);return}else z.next=S,z.update();else S.el=E.el,z.vnode=S},De=(E,S,N,z,q,j,ie)=>{const te=()=>{if(E.isMounted){let{next:oe,bu:ge,u:ke,parent:ye,vnode:Ce}=E;{const O=vw(E);if(O){oe&&(oe.el=Ce.el,le(E,oe,ie)),O.asyncDep.then(()=>{E.isUnmounted||te()});return}}let Fe=oe,Gt;ps(E,!1),oe?(oe.el=Ce.el,le(E,oe,ie)):oe=Ce,ge&&Wd(ge),(Gt=oe.props&&oe.props.onVnodeBeforeUpdate)&&dr(Gt,ye,oe,Ce),ps(E,!0);const Vt=ay(E),V=E.subTree;E.subTree=Vt,T(V,Vt,u(V.el),F(V),E,q,j),oe.el=Vt.el,Fe===null&&XR(E,Vt.el),ke&&Fn(ke,q),(Gt=oe.props&&oe.props.onVnodeUpdated)&&Fn(()=>dr(Gt,ye,oe,Ce),q)}else{let oe;const{el:ge,props:ke}=S,{bm:ye,m:Ce,parent:Fe,root:Gt,type:Vt}=E,V=Tl(S);ps(E,!1),ye&&Wd(ye),!V&&(oe=ke&&ke.onVnodeBeforeMount)&&dr(oe,Fe,S),ps(E,!0);{Gt.ce&&Gt.ce._injectChildStyle(Vt);const O=E.subTree=ay(E);T(null,O,N,z,E,q,j),S.el=O.el}if(Ce&&Fn(Ce,q),!V&&(oe=ke&&ke.onVnodeMounted)){const O=S;Fn(()=>dr(oe,Fe,O),q)}(S.shapeFlag&256||Fe&&Tl(Fe.vnode)&&Fe.vnode.shapeFlag&256)&&E.a&&Fn(E.a,q),E.isMounted=!0,S=N=z=null}};E.scope.on();const Z=E.effect=new Pb(te);E.scope.off();const Y=E.update=Z.run.bind(Z),be=E.job=Z.runIfDirty.bind(Z);be.i=E,be.id=E.uid,Z.scheduler=()=>t_(be),ps(E,!0),Y()},le=(E,S,N)=>{S.component=E;const z=E.vnode.props;E.vnode=S,E.next=null,VR(E,S.props,z,N),FR(E,S.children,N),es(),Zm(E),ts()},Pe=(E,S,N,z,q,j,ie,te,Z=!1)=>{const Y=E&&E.children,be=E?E.shapeFlag:0,oe=S.children,{patchFlag:ge,shapeFlag:ke}=S;if(ge>0){if(ge&128){Ut(Y,oe,N,z,q,j,ie,te,Z);return}else if(ge&256){vt(Y,oe,N,z,q,j,ie,te,Z);return}}ke&8?(be&16&&ce(Y,q,j),oe!==Y&&f(N,oe)):be&16?ke&16?Ut(Y,oe,N,z,q,j,ie,te,Z):ce(Y,q,j,!0):(be&8&&f(N,""),ke&16&&w(oe,N,z,q,j,ie,te,Z))},vt=(E,S,N,z,q,j,ie,te,Z)=>{E=E||Do,S=S||Do;const Y=E.length,be=S.length,oe=Math.min(Y,be);let ge;for(ge=0;ge<oe;ge++){const ke=S[ge]=Z?Si(S[ge]):_r(S[ge]);T(E[ge],ke,N,null,q,j,ie,te,Z)}Y>be?ce(E,q,j,!0,!1,oe):w(S,N,z,q,j,ie,te,Z,oe)},Ut=(E,S,N,z,q,j,ie,te,Z)=>{let Y=0;const be=S.length;let oe=E.length-1,ge=be-1;for(;Y<=oe&&Y<=ge;){const ke=E[Y],ye=S[Y]=Z?Si(S[Y]):_r(S[Y]);if(Ha(ke,ye))T(ke,ye,N,null,q,j,ie,te,Z);else break;Y++}for(;Y<=oe&&Y<=ge;){const ke=E[oe],ye=S[ge]=Z?Si(S[ge]):_r(S[ge]);if(Ha(ke,ye))T(ke,ye,N,null,q,j,ie,te,Z);else break;oe--,ge--}if(Y>oe){if(Y<=ge){const ke=ge+1,ye=ke<be?S[ke].el:z;for(;Y<=ge;)T(null,S[Y]=Z?Si(S[Y]):_r(S[Y]),N,ye,q,j,ie,te,Z),Y++}}else if(Y>ge)for(;Y<=oe;)Ze(E[Y],q,j,!0),Y++;else{const ke=Y,ye=Y,Ce=new Map;for(Y=ye;Y<=ge;Y++){const fe=S[Y]=Z?Si(S[Y]):_r(S[Y]);fe.key!=null&&Ce.set(fe.key,Y)}let Fe,Gt=0;const Vt=ge-ye+1;let V=!1,O=0;const G=new Array(Vt);for(Y=0;Y<Vt;Y++)G[Y]=0;for(Y=ke;Y<=oe;Y++){const fe=E[Y];if(Gt>=Vt){Ze(fe,q,j,!0);continue}let we;if(fe.key!=null)we=Ce.get(fe.key);else for(Fe=ye;Fe<=ge;Fe++)if(G[Fe-ye]===0&&Ha(fe,S[Fe])){we=Fe;break}we===void 0?Ze(fe,q,j,!0):(G[we-ye]=Y+1,we>=O?O=we:V=!0,T(fe,S[we],N,null,q,j,ie,te,Z),Gt++)}const ue=V?$R(G):Do;for(Fe=ue.length-1,Y=Vt-1;Y>=0;Y--){const fe=ye+Y,we=S[fe],ve=fe+1<be?S[fe+1].el:z;G[Y]===0?T(null,we,N,ve,q,j,ie,te,Z):V&&(Fe<0||Y!==ue[Fe]?qt(we,N,ve,2):Fe--)}}},qt=(E,S,N,z,q=null)=>{const{el:j,type:ie,transition:te,children:Z,shapeFlag:Y}=E;if(Y&6){qt(E.component.subTree,S,N,z);return}if(Y&128){E.suspense.move(S,N,z);return}if(Y&64){ie.move(E,S,N,he);return}if(ie===Bt){r(j,S,N);for(let oe=0;oe<Z.length;oe++)qt(Z[oe],S,N,z);r(E.anchor,S,N);return}if(ie===bc){M(E,S,N);return}if(z!==2&&Y&1&&te)if(z===0)te.beforeEnter(j),r(j,S,N),Fn(()=>te.enter(j),q);else{const{leave:oe,delayLeave:ge,afterLeave:ke}=te,ye=()=>r(j,S,N),Ce=()=>{oe(j,()=>{ye(),ke&&ke()})};ge?ge(j,ye,Ce):Ce()}else r(j,S,N)},Ze=(E,S,N,z=!1,q=!1)=>{const{type:j,props:ie,ref:te,children:Z,dynamicChildren:Y,shapeFlag:be,patchFlag:oe,dirs:ge,cacheIndex:ke}=E;if(oe===-2&&(q=!1),te!=null&&$c(te,null,N,E,!0),ke!=null&&(S.renderCache[ke]=void 0),be&256){S.ctx.deactivate(E);return}const ye=be&1&&ge,Ce=!Tl(E);let Fe;if(Ce&&(Fe=ie&&ie.onVnodeBeforeUnmount)&&dr(Fe,S,E),be&6)Sn(E.component,N,z);else{if(be&128){E.suspense.unmount(N,z);return}ye&&fs(E,null,S,"beforeUnmount"),be&64?E.type.remove(E,S,N,he,z):Y&&!Y.hasOnce&&(j!==Bt||oe>0&&oe&64)?ce(Y,S,N,!1,!0):(j===Bt&&oe&384||!q&&be&16)&&ce(Z,S,N),z&&rt(E)}(Ce&&(Fe=ie&&ie.onVnodeUnmounted)||ye)&&Fn(()=>{Fe&&dr(Fe,S,E),ye&&fs(E,null,S,"unmounted")},N)},rt=E=>{const{type:S,el:N,anchor:z,transition:q}=E;if(S===Bt){ft(N,z);return}if(S===bc){U(E);return}const j=()=>{i(N),q&&!q.persisted&&q.afterLeave&&q.afterLeave()};if(E.shapeFlag&1&&q&&!q.persisted){const{leave:ie,delayLeave:te}=q,Z=()=>ie(N,j);te?te(E.el,j,Z):Z()}else j()},ft=(E,S)=>{let N;for(;E!==S;)N=d(E),i(E),E=N;i(S)},Sn=(E,S,N)=>{const{bum:z,scope:q,job:j,subTree:ie,um:te,m:Z,a:Y}=E;oy(Z),oy(Y),z&&Wd(z),q.stop(),j&&(j.flags|=8,Ze(ie,E,S,N)),te&&Fn(te,S),Fn(()=>{E.isUnmounted=!0},S),S&&S.pendingBranch&&!S.isUnmounted&&E.asyncDep&&!E.asyncResolved&&E.suspenseId===S.pendingId&&(S.deps--,S.deps===0&&S.resolve())},ce=(E,S,N,z=!1,q=!1,j=0)=>{for(let ie=j;ie<E.length;ie++)Ze(E[ie],S,N,z,q)},F=E=>{if(E.shapeFlag&6)return F(E.component.subTree);if(E.shapeFlag&128)return E.suspense.next();const S=d(E.anchor||E.el),N=S&&S[fR];return N?d(N):S};let X=!1;const Q=(E,S,N)=>{E==null?S._vnode&&Ze(S._vnode,null,null,!0):T(S._vnode||null,E,S,null,null,null,N),S._vnode=E,X||(X=!0,Zm(),Qb(),X=!1)},he={p:T,um:Ze,m:qt,r:rt,mt:Le,mc:w,pc:Pe,pbc:R,n:F,o:n};return{render:Q,hydrate:void 0,createApp:OR(Q)}}function ef({type:n,props:e},t){return t==="svg"&&n==="foreignObject"||t==="mathml"&&n==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function ps({effect:n,job:e},t){t?(n.flags|=32,e.flags|=4):(n.flags&=-33,e.flags&=-5)}function BR(n,e){return(!n||n&&!n.pendingBranch)&&e&&!e.persisted}function yw(n,e,t=!1){const r=n.children,i=e.children;if(xe(r)&&xe(i))for(let s=0;s<r.length;s++){const o=r[s];let a=i[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[s]=Si(i[s]),a.el=o.el),!t&&a.patchFlag!==-2&&yw(o,a)),a.type===Dh&&(a.el=o.el)}}function $R(n){const e=n.slice(),t=[0];let r,i,s,o,a;const l=n.length;for(r=0;r<l;r++){const h=n[r];if(h!==0){if(i=t[t.length-1],n[i]<h){e[r]=i,t.push(r);continue}for(s=0,o=t.length-1;s<o;)a=s+o>>1,n[t[a]]<h?s=a+1:o=a;h<n[t[s]]&&(s>0&&(e[r]=t[s-1]),t[s]=r)}}for(s=t.length,o=t[s-1];s-- >0;)t[s]=o,o=e[o];return t}function vw(n){const e=n.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:vw(e)}function oy(n){if(n)for(let e=0;e<n.length;e++)n[e].flags|=8}const zR=Symbol.for("v-scx"),jR=()=>lr(zR);function qR(n,e){return o_(n,null,e)}function Gn(n,e,t){return o_(n,e,t)}function o_(n,e,t=nt){const{immediate:r,deep:i,flush:s,once:o}=t,a=_n({},t),l=e&&r||!e&&s!=="post";let h;if(zl){if(s==="sync"){const p=jR();h=p.__watcherHandles||(p.__watcherHandles=[])}else if(!l){const p=()=>{};return p.stop=kr,p.resume=kr,p.pause=kr,p}}const f=tn;a.call=(p,m,T)=>Pr(p,f,m,T);let u=!1;s==="post"?a.scheduler=p=>{Fn(p,f&&f.suspense)}:s!=="sync"&&(u=!0,a.scheduler=(p,m)=>{m?p():t_(p)}),a.augmentJob=p=>{e&&(p.flags|=4),u&&(p.flags|=2,f&&(p.id=f.uid,p.i=f))};const d=uR(n,e,a);return zl&&(h?h.push(d):l&&d()),d}function GR(n,e,t){const r=this.proxy,i=Ot(n)?n.includes(".")?Tw(r,n):()=>r[n]:n.bind(r,r);let s;Re(e)?s=e:(s=e.handler,t=e);const o=vu(this),a=o_(i,s.bind(r),t);return o(),a}function Tw(n,e){const t=e.split(".");return()=>{let r=n;for(let i=0;i<t.length&&r;i++)r=r[t[i]];return r}}const HR=(n,e)=>e==="modelValue"||e==="model-value"?n.modelModifiers:n[`${e}Modifiers`]||n[`${er(e)}Modifiers`]||n[`${Zi(e)}Modifiers`];function WR(n,e,...t){if(n.isUnmounted)return;const r=n.vnode.props||nt;let i=t;const s=e.startsWith("update:"),o=s&&HR(r,e.slice(7));o&&(o.trim&&(i=t.map(f=>Ot(f)?f.trim():f)),o.number&&(i=t.map(AS)));let a,l=r[a=Hd(e)]||r[a=Hd(er(e))];!l&&s&&(l=r[a=Hd(Zi(e))]),l&&Pr(l,n,6,i);const h=r[a+"Once"];if(h){if(!n.emitted)n.emitted={};else if(n.emitted[a])return;n.emitted[a]=!0,Pr(h,n,6,i)}}function bw(n,e,t=!1){const r=e.emitsCache,i=r.get(n);if(i!==void 0)return i;const s=n.emits;let o={},a=!1;if(!Re(n)){const l=h=>{const f=bw(h,e,!0);f&&(a=!0,_n(o,f))};!t&&e.mixins.length&&e.mixins.forEach(l),n.extends&&l(n.extends),n.mixins&&n.mixins.forEach(l)}return!s&&!a?(ht(n)&&r.set(n,null),null):(xe(s)?s.forEach(l=>o[l]=null):_n(o,s),ht(n)&&r.set(n,o),o)}function Vh(n,e){return!n||!Ah(e)?!1:(e=e.slice(2).replace(/Once$/,""),Qe(n,e[0].toLowerCase()+e.slice(1))||Qe(n,Zi(e))||Qe(n,e))}function ay(n){const{type:e,vnode:t,proxy:r,withProxy:i,propsOptions:[s],slots:o,attrs:a,emit:l,render:h,renderCache:f,props:u,data:d,setupState:p,ctx:m,inheritAttrs:T}=n,v=Bc(n);let I,C;try{if(t.shapeFlag&4){const U=i||r,ee=U;I=_r(h.call(ee,U,f,u,p,d,m)),C=a}else{const U=e;I=_r(U.length>1?U(u,{attrs:a,slots:o,emit:l}):U(u,null)),C=e.props?a:QR(a)}}catch(U){wl.length=0,Oh(U,n,1),I=Te(Us)}let M=I;if(C&&T!==!1){const U=Object.keys(C),{shapeFlag:ee}=M;U.length&&ee&7&&(s&&U.some(jp)&&(C=YR(C,s)),M=Qo(M,C,!1,!0))}return t.dirs&&(M=Qo(M,null,!1,!0),M.dirs=M.dirs?M.dirs.concat(t.dirs):t.dirs),t.transition&&n_(M,t.transition),I=M,Bc(v),I}const QR=n=>{let e;for(const t in n)(t==="class"||t==="style"||Ah(t))&&((e||(e={}))[t]=n[t]);return e},YR=(n,e)=>{const t={};for(const r in n)(!jp(r)||!(r.slice(9)in e))&&(t[r]=n[r]);return t};function JR(n,e,t){const{props:r,children:i,component:s}=n,{props:o,children:a,patchFlag:l}=e,h=s.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&l>=0){if(l&1024)return!0;if(l&16)return r?ly(r,o,h):!!o;if(l&8){const f=e.dynamicProps;for(let u=0;u<f.length;u++){const d=f[u];if(o[d]!==r[d]&&!Vh(h,d))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?ly(r,o,h):!0:!!o;return!1}function ly(n,e,t){const r=Object.keys(e);if(r.length!==Object.keys(n).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(e[s]!==n[s]&&!Vh(t,s))return!0}return!1}function XR({vnode:n,parent:e},t){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===n&&(r.el=n.el),r===n)(n=e.vnode).el=t,e=e.parent;else break}}const ww=n=>n.__isSuspense;function ZR(n,e){e&&e.pendingBranch?xe(n)?e.effects.push(...n):e.effects.push(n):dR(n)}const Bt=Symbol.for("v-fgt"),Dh=Symbol.for("v-txt"),Us=Symbol.for("v-cmt"),bc=Symbol.for("v-stc"),wl=[];let jn=null;function Ee(n=!1){wl.push(jn=n?null:[])}function eP(){wl.pop(),jn=wl[wl.length-1]||null}let $l=1;function uy(n,e=!1){$l+=n,n<0&&jn&&e&&(jn.hasOnce=!0)}function Iw(n){return n.dynamicChildren=$l>0?jn||Do:null,eP(),$l>0&&jn&&jn.push(n),n}function Ae(n,e,t,r,i,s){return Iw(K(n,e,t,r,i,s,!0))}function Wo(n,e,t,r,i){return Iw(Te(n,e,t,r,i,!0))}function jc(n){return n?n.__v_isVNode===!0:!1}function Ha(n,e){return n.type===e.type&&n.key===e.key}const Ew=({key:n})=>n??null,wc=({ref:n,ref_key:e,ref_for:t})=>(typeof n=="number"&&(n=""+n),n!=null?Ot(n)||At(n)||Re(n)?{i:Cn,r:n,k:e,f:!!t}:n:null);function K(n,e=null,t=null,r=0,i=null,s=n===Bt?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:n,props:e,key:e&&Ew(e),ref:e&&wc(e),scopeId:Jb,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Cn};return a?(a_(l,t),s&128&&n.normalize(l)):t&&(l.shapeFlag|=Ot(t)?8:16),$l>0&&!o&&jn&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&jn.push(l),l}const Te=tP;function tP(n,e=null,t=null,r=0,i=null,s=!1){if((!n||n===iw)&&(n=Us),jc(n)){const a=Qo(n,e,!0);return t&&a_(a,t),$l>0&&!s&&jn&&(a.shapeFlag&6?jn[jn.indexOf(n)]=a:jn.push(a)),a.patchFlag=-2,a}if(dP(n)&&(n=n.__vccOpts),e){e=nP(e);let{class:a,style:l}=e;a&&!Ot(a)&&(e.class=en(a)),ht(l)&&(e_(l)&&!xe(l)&&(l=_n({},l)),e.style=Ho(l))}const o=Ot(n)?1:ww(n)?128:pR(n)?64:ht(n)?4:Re(n)?2:0;return K(n,e,t,r,i,o,s,!0)}function nP(n){return n?e_(n)||hw(n)?_n({},n):n:null}function Qo(n,e,t=!1,r=!1){const{props:i,ref:s,patchFlag:o,children:a,transition:l}=n,h=e?rP(i||{},e):i,f={__v_isVNode:!0,__v_skip:!0,type:n.type,props:h,key:h&&Ew(h),ref:e&&e.ref?t&&s?xe(s)?s.concat(wc(e)):[s,wc(e)]:wc(e):s,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:a,target:n.target,targetStart:n.targetStart,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:e&&n.type!==Bt?o===-1?16:o|16:o,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:l,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&Qo(n.ssContent),ssFallback:n.ssFallback&&Qo(n.ssFallback),el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce};return l&&r&&n_(f,l.clone(f)),f}function Qr(n=" ",e=0){return Te(Dh,null,n,e)}function kw(n,e){const t=Te(bc,null,n);return t.staticCount=e,t}function xn(n="",e=!1){return e?(Ee(),Wo(Us,null,n)):Te(Us,null,n)}function _r(n){return n==null||typeof n=="boolean"?Te(Us):xe(n)?Te(Bt,null,n.slice()):jc(n)?Si(n):Te(Dh,null,String(n))}function Si(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:Qo(n)}function a_(n,e){let t=0;const{shapeFlag:r}=n;if(e==null)e=null;else if(xe(e))t=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),a_(n,i()),i._c&&(i._d=!0));return}else{t=32;const i=e._;!i&&!hw(e)?e._ctx=Cn:i===3&&Cn&&(Cn.slots._===1?e._=1:(e._=2,n.patchFlag|=1024))}else Re(e)?(e={default:e,_ctx:Cn},t=32):(e=String(e),r&64?(t=16,e=[Qr(e)]):t=8);n.children=e,n.shapeFlag|=t}function rP(...n){const e={};for(let t=0;t<n.length;t++){const r=n[t];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=en([e.class,r.class]));else if(i==="style")e.style=Ho([e.style,r.style]);else if(Ah(i)){const s=e[i],o=r[i];o&&s!==o&&!(xe(s)&&s.includes(o))&&(e[i]=s?[].concat(s,o):o)}else i!==""&&(e[i]=r[i])}return e}function dr(n,e,t,r=null){Pr(n,e,7,[t,r])}const iP=lw();let sP=0;function oP(n,e,t){const r=n.type,i=(e?e.appContext:n.appContext)||iP,s={uid:sP++,vnode:n,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Rb(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:fw(r,i),emitsOptions:bw(r,i),emit:null,emitted:null,propsDefaults:nt,inheritAttrs:r.inheritAttrs,ctx:nt,data:nt,props:nt,attrs:nt,slots:nt,refs:nt,setupState:nt,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=WR.bind(null,s),n.ce&&n.ce(s),s}let tn=null;const Mh=()=>tn||Cn;let qc,Bf;{const n=Ch(),e=(t,r)=>{let i;return(i=n[t])||(i=n[t]=[]),i.push(r),s=>{i.length>1?i.forEach(o=>o(s)):i[0](s)}};qc=e("__VUE_INSTANCE_SETTERS__",t=>tn=t),Bf=e("__VUE_SSR_SETTERS__",t=>zl=t)}const vu=n=>{const e=tn;return qc(n),n.scope.on(),()=>{n.scope.off(),qc(e)}},cy=()=>{tn&&tn.scope.off(),qc(null)};function Aw(n){return n.vnode.shapeFlag&4}let zl=!1;function aP(n,e=!1,t=!1){e&&Bf(e);const{props:r,children:i}=n.vnode,s=Aw(n);NR(n,r,s,e),LR(n,i,t);const o=s?lP(n,e):void 0;return e&&Bf(!1),o}function lP(n,e){const t=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,kR);const{setup:r}=t;if(r){es();const i=n.setupContext=r.length>1?cP(n):null,s=vu(n),o=mu(r,n,0,[n.props,i]),a=bb(o);if(ts(),s(),(a||n.sp)&&!Tl(n)&&Xb(n),a){if(o.then(cy,cy),e)return o.then(l=>{hy(n,l)}).catch(l=>{Oh(l,n,0)});n.asyncDep=o}else hy(n,o)}else Sw(n)}function hy(n,e,t){Re(e)?n.type.__ssrInlineRender?n.ssrRender=e:n.render=e:ht(e)&&(n.setupState=Gb(e)),Sw(n)}function Sw(n,e,t){const r=n.type;n.render||(n.render=r.render||kr);{const i=vu(n);es();try{AR(n)}finally{ts(),i()}}}const uP={get(n,e){return cn(n,"get",""),n[e]}};function cP(n){const e=t=>{n.exposed=t||{}};return{attrs:new Proxy(n.attrs,uP),slots:n.slots,emit:n.emit,expose:e}}function Lh(n){return n.exposed?n.exposeProxy||(n.exposeProxy=new Proxy(Gb(eR(n.exposed)),{get(e,t){if(t in e)return e[t];if(t in bl)return bl[t](n)},has(e,t){return t in e||t in bl}})):n.proxy}function hP(n,e=!0){return Re(n)?n.displayName||n.name:n.name||e&&n.__name}function dP(n){return Re(n)&&"__vccOpts"in n}const Ne=(n,e)=>aR(n,e,zl);function Yo(n,e,t){const r=arguments.length;return r===2?ht(e)&&!xe(e)?jc(e)?Te(n,null,[e]):Te(n,e):Te(n,null,e):(r>3?t=Array.prototype.slice.call(arguments,2):r===3&&jc(t)&&(t=[t]),Te(n,e,t))}const fP="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let $f;const dy=typeof window<"u"&&window.trustedTypes;if(dy)try{$f=dy.createPolicy("vue",{createHTML:n=>n})}catch{}const Rw=$f?n=>$f.createHTML(n):n=>n,pP="http://www.w3.org/2000/svg",_P="http://www.w3.org/1998/Math/MathML",Br=typeof document<"u"?document:null,fy=Br&&Br.createElement("template"),gP={insert:(n,e,t)=>{e.insertBefore(n,t||null)},remove:n=>{const e=n.parentNode;e&&e.removeChild(n)},createElement:(n,e,t,r)=>{const i=e==="svg"?Br.createElementNS(pP,n):e==="mathml"?Br.createElementNS(_P,n):t?Br.createElement(n,{is:t}):Br.createElement(n);return n==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:n=>Br.createTextNode(n),createComment:n=>Br.createComment(n),setText:(n,e)=>{n.nodeValue=e},setElementText:(n,e)=>{n.textContent=e},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>Br.querySelector(n),setScopeId(n,e){n.setAttribute(e,"")},insertStaticContent(n,e,t,r,i,s){const o=t?t.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),t),!(i===s||!(i=i.nextSibling)););else{fy.innerHTML=Rw(r==="svg"?`<svg>${n}</svg>`:r==="mathml"?`<math>${n}</math>`:n);const a=fy.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,t)}return[o?o.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},mP=Symbol("_vtc");function yP(n,e,t){const r=n[mP];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?n.removeAttribute("class"):t?n.setAttribute("class",e):n.className=e}const Gc=Symbol("_vod"),Pw=Symbol("_vsh"),jl={beforeMount(n,{value:e},{transition:t}){n[Gc]=n.style.display==="none"?"":n.style.display,t&&e?t.beforeEnter(n):Wa(n,e)},mounted(n,{value:e},{transition:t}){t&&e&&t.enter(n)},updated(n,{value:e,oldValue:t},{transition:r}){!e!=!t&&(r?e?(r.beforeEnter(n),Wa(n,!0),r.enter(n)):r.leave(n,()=>{Wa(n,!1)}):Wa(n,e))},beforeUnmount(n,{value:e}){Wa(n,e)}};function Wa(n,e){n.style.display=e?n[Gc]:"none",n[Pw]=!e}const vP=Symbol(""),TP=/(^|;)\s*display\s*:/;function bP(n,e,t){const r=n.style,i=Ot(t);let s=!1;if(t&&!i){if(e)if(Ot(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();t[a]==null&&Ic(r,a,"")}else for(const o in e)t[o]==null&&Ic(r,o,"");for(const o in t)o==="display"&&(s=!0),Ic(r,o,t[o])}else if(i){if(e!==t){const o=r[vP];o&&(t+=";"+o),r.cssText=t,s=TP.test(t)}}else e&&n.removeAttribute("style");Gc in n&&(n[Gc]=s?r.display:"",n[Pw]&&(r.display="none"))}const py=/\s*!important$/;function Ic(n,e,t){if(xe(t))t.forEach(r=>Ic(n,e,r));else if(t==null&&(t=""),e.startsWith("--"))n.setProperty(e,t);else{const r=wP(n,e);py.test(t)?n.setProperty(Zi(r),t.replace(py,""),"important"):n[r]=t}}const _y=["Webkit","Moz","ms"],tf={};function wP(n,e){const t=tf[e];if(t)return t;let r=er(e);if(r!=="filter"&&r in n)return tf[e]=r;r=Ph(r);for(let i=0;i<_y.length;i++){const s=_y[i]+r;if(s in n)return tf[e]=s}return e}const gy="http://www.w3.org/1999/xlink";function my(n,e,t,r,i,s=OS(e)){r&&e.startsWith("xlink:")?t==null?n.removeAttributeNS(gy,e.slice(6,e.length)):n.setAttributeNS(gy,e,t):t==null||s&&!kb(t)?n.removeAttribute(e):n.setAttribute(e,s?"":Xi(t)?String(t):t)}function yy(n,e,t,r,i){if(e==="innerHTML"||e==="textContent"){t!=null&&(n[e]=e==="innerHTML"?Rw(t):t);return}const s=n.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const a=s==="OPTION"?n.getAttribute("value")||"":n.value,l=t==null?n.type==="checkbox"?"on":"":String(t);(a!==l||!("_value"in n))&&(n.value=l),t==null&&n.removeAttribute(e),n._value=t;return}let o=!1;if(t===""||t==null){const a=typeof n[e];a==="boolean"?t=kb(t):t==null&&a==="string"?(t="",o=!0):a==="number"&&(t=0,o=!0)}try{n[e]=t}catch{}o&&n.removeAttribute(i||e)}function IP(n,e,t,r){n.addEventListener(e,t,r)}function EP(n,e,t,r){n.removeEventListener(e,t,r)}const vy=Symbol("_vei");function kP(n,e,t,r,i=null){const s=n[vy]||(n[vy]={}),o=s[e];if(r&&o)o.value=r;else{const[a,l]=AP(e);if(r){const h=s[e]=PP(r,i);IP(n,a,h,l)}else o&&(EP(n,a,o,l),s[e]=void 0)}}const Ty=/(?:Once|Passive|Capture)$/;function AP(n){let e;if(Ty.test(n)){e={};let r;for(;r=n.match(Ty);)n=n.slice(0,n.length-r[0].length),e[r[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):Zi(n.slice(2)),e]}let nf=0;const SP=Promise.resolve(),RP=()=>nf||(SP.then(()=>nf=0),nf=Date.now());function PP(n,e){const t=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=t.attached)return;Pr(CP(r,t.value),e,5,[r])};return t.value=n,t.attached=RP(),t}function CP(n,e){if(xe(e)){const t=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{t.call(n),n._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const by=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,xP=(n,e,t,r,i,s)=>{const o=i==="svg";e==="class"?yP(n,r,o):e==="style"?bP(n,t,r):Ah(e)?jp(e)||kP(n,e,t,r,s):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):OP(n,e,r,o))?(yy(n,e,r),!n.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&my(n,e,r,o,s,e!=="value")):n._isVueCE&&(/[A-Z]/.test(e)||!Ot(r))?yy(n,er(e),r,s,e):(e==="true-value"?n._trueValue=r:e==="false-value"&&(n._falseValue=r),my(n,e,r,o))};function OP(n,e,t,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in n&&by(e)&&Re(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&n.tagName==="INPUT"||e==="type"&&n.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=n.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return by(e)&&Ot(t)?!1:e in n}const NP=["ctrl","shift","alt","meta"],VP={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,e)=>NP.some(t=>n[`${t}Key`]&&!e.includes(t))},_t=(n,e)=>{const t=n._withMods||(n._withMods={}),r=e.join(".");return t[r]||(t[r]=(i,...s)=>{for(let o=0;o<e.length;o++){const a=VP[e[o]];if(a&&a(i,e))return}return n(i,...s)})},DP={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},MP=(n,e)=>{const t=n._withKeys||(n._withKeys={}),r=e.join(".");return t[r]||(t[r]=i=>{if(!("key"in i))return;const s=Zi(i.key);if(e.some(o=>o===s||DP[o]===s))return n(i)})},LP=_n({patchProp:xP},gP);let wy;function FP(){return wy||(wy=UR(LP))}const UP=(...n)=>{const e=FP().createApp(...n),{mount:t}=e;return e.mount=r=>{const i=BP(r);if(!i)return;const s=e._component;!Re(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=t(i,!1,KP(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e};function KP(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function BP(n){return Ot(n)?document.querySelector(n):n}function $P(){return Cw().__VUE_DEVTOOLS_GLOBAL_HOOK__}function Cw(){return typeof navigator<"u"&&typeof window<"u"?window:typeof globalThis<"u"?globalThis:{}}const zP=typeof Proxy=="function",jP="devtools-plugin:setup",qP="plugin:settings:set";let _o,zf;function GP(){var n;return _o!==void 0||(typeof window<"u"&&window.performance?(_o=!0,zf=window.performance):typeof globalThis<"u"&&(!((n=globalThis.perf_hooks)===null||n===void 0)&&n.performance)?(_o=!0,zf=globalThis.perf_hooks.performance):_o=!1),_o}function HP(){return GP()?zf.now():Date.now()}class WP{constructor(e,t){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=e,this.hook=t;const r={};if(e.settings)for(const o in e.settings){const a=e.settings[o];r[o]=a.defaultValue}const i=`__vue-devtools-plugin-settings__${e.id}`;let s=Object.assign({},r);try{const o=localStorage.getItem(i),a=JSON.parse(o);Object.assign(s,a)}catch{}this.fallbacks={getSettings(){return s},setSettings(o){try{localStorage.setItem(i,JSON.stringify(o))}catch{}s=o},now(){return HP()}},t&&t.on(qP,(o,a)=>{o===this.plugin.id&&this.fallbacks.setSettings(a)}),this.proxiedOn=new Proxy({},{get:(o,a)=>this.target?this.target.on[a]:(...l)=>{this.onQueue.push({method:a,args:l})}}),this.proxiedTarget=new Proxy({},{get:(o,a)=>this.target?this.target[a]:a==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(a)?(...l)=>(this.targetQueue.push({method:a,args:l,resolve:()=>{}}),this.fallbacks[a](...l)):(...l)=>new Promise(h=>{this.targetQueue.push({method:a,args:l,resolve:h})})})}async setRealTarget(e){this.target=e;for(const t of this.onQueue)this.target.on[t.method](...t.args);for(const t of this.targetQueue)t.resolve(await this.target[t.method](...t.args))}}function QP(n,e){const t=n,r=Cw(),i=$P(),s=zP&&t.enableEarlyProxy;if(i&&(r.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!s))i.emit(jP,n,e);else{const o=s?new WP(t,i):null;(r.__VUE_DEVTOOLS_PLUGINS__=r.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:t,setupFn:e,proxy:o}),o&&e(o.proxiedTarget)}}/*!
 * vuex v4.1.0
 * (c) 2022 Evan You
 * @license MIT
 */var YP="store";function wa(n,e){Object.keys(n).forEach(function(t){return e(n[t],t)})}function xw(n){return n!==null&&typeof n=="object"}function JP(n){return n&&typeof n.then=="function"}function XP(n,e){return function(){return n(e)}}function Ow(n,e,t){return e.indexOf(n)<0&&(t&&t.prepend?e.unshift(n):e.push(n)),function(){var r=e.indexOf(n);r>-1&&e.splice(r,1)}}function Nw(n,e){n._actions=Object.create(null),n._mutations=Object.create(null),n._wrappedGetters=Object.create(null),n._modulesNamespaceMap=Object.create(null);var t=n.state;Fh(n,t,[],n._modules.root,!0),l_(n,t,e)}function l_(n,e,t){var r=n._state,i=n._scope;n.getters={},n._makeLocalGettersCache=Object.create(null);var s=n._wrappedGetters,o={},a={},l=NS(!0);l.run(function(){wa(s,function(h,f){o[f]=XP(h,n),a[f]=Ne(function(){return o[f]()}),Object.defineProperty(n.getters,f,{get:function(){return a[f].value},enumerable:!0})})}),n._state=Xr({data:e}),n._scope=l,n.strict&&rC(n),r&&t&&n._withCommit(function(){r.data=null}),i&&i.stop()}function Fh(n,e,t,r,i){var s=!t.length,o=n._modules.getNamespace(t);if(r.namespaced&&(n._modulesNamespaceMap[o],n._modulesNamespaceMap[o]=r),!s&&!i){var a=u_(e,t.slice(0,-1)),l=t[t.length-1];n._withCommit(function(){a[l]=r.state})}var h=r.context=ZP(n,o,t);r.forEachMutation(function(f,u){var d=o+u;eC(n,d,f,h)}),r.forEachAction(function(f,u){var d=f.root?u:o+u,p=f.handler||f;tC(n,d,p,h)}),r.forEachGetter(function(f,u){var d=o+u;nC(n,d,f,h)}),r.forEachChild(function(f,u){Fh(n,e,t.concat(u),f,i)})}function ZP(n,e,t){var r=e==="",i={dispatch:r?n.dispatch:function(s,o,a){var l=Hc(s,o,a),h=l.payload,f=l.options,u=l.type;return(!f||!f.root)&&(u=e+u),n.dispatch(u,h)},commit:r?n.commit:function(s,o,a){var l=Hc(s,o,a),h=l.payload,f=l.options,u=l.type;(!f||!f.root)&&(u=e+u),n.commit(u,h,f)}};return Object.defineProperties(i,{getters:{get:r?function(){return n.getters}:function(){return Vw(n,e)}},state:{get:function(){return u_(n.state,t)}}}),i}function Vw(n,e){if(!n._makeLocalGettersCache[e]){var t={},r=e.length;Object.keys(n.getters).forEach(function(i){if(i.slice(0,r)===e){var s=i.slice(r);Object.defineProperty(t,s,{get:function(){return n.getters[i]},enumerable:!0})}}),n._makeLocalGettersCache[e]=t}return n._makeLocalGettersCache[e]}function eC(n,e,t,r){var i=n._mutations[e]||(n._mutations[e]=[]);i.push(function(o){t.call(n,r.state,o)})}function tC(n,e,t,r){var i=n._actions[e]||(n._actions[e]=[]);i.push(function(o){var a=t.call(n,{dispatch:r.dispatch,commit:r.commit,getters:r.getters,state:r.state,rootGetters:n.getters,rootState:n.state},o);return JP(a)||(a=Promise.resolve(a)),n._devtoolHook?a.catch(function(l){throw n._devtoolHook.emit("vuex:error",l),l}):a})}function nC(n,e,t,r){n._wrappedGetters[e]||(n._wrappedGetters[e]=function(s){return t(r.state,r.getters,s.state,s.getters)})}function rC(n){Gn(function(){return n._state.data},function(){},{deep:!0,flush:"sync"})}function u_(n,e){return e.reduce(function(t,r){return t[r]},n)}function Hc(n,e,t){return xw(n)&&n.type&&(t=e,e=n,n=n.type),{type:n,payload:e,options:t}}var iC="vuex bindings",Iy="vuex:mutations",rf="vuex:actions",go="vuex",sC=0;function oC(n,e){QP({id:"org.vuejs.vuex",app:n,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[iC]},function(t){t.addTimelineLayer({id:Iy,label:"Vuex Mutations",color:Ey}),t.addTimelineLayer({id:rf,label:"Vuex Actions",color:Ey}),t.addInspector({id:go,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),t.on.getInspectorTree(function(r){if(r.app===n&&r.inspectorId===go)if(r.filter){var i=[];Fw(i,e._modules.root,r.filter,""),r.rootNodes=i}else r.rootNodes=[Lw(e._modules.root,"")]}),t.on.getInspectorState(function(r){if(r.app===n&&r.inspectorId===go){var i=r.nodeId;Vw(e,i),r.state=uC(hC(e._modules,i),i==="root"?e.getters:e._makeLocalGettersCache,i)}}),t.on.editInspectorState(function(r){if(r.app===n&&r.inspectorId===go){var i=r.nodeId,s=r.path;i!=="root"&&(s=i.split("/").filter(Boolean).concat(s)),e._withCommit(function(){r.set(e._state.data,s,r.state.value)})}}),e.subscribe(function(r,i){var s={};r.payload&&(s.payload=r.payload),s.state=i,t.notifyComponentUpdate(),t.sendInspectorTree(go),t.sendInspectorState(go),t.addTimelineEvent({layerId:Iy,event:{time:Date.now(),title:r.type,data:s}})}),e.subscribeAction({before:function(r,i){var s={};r.payload&&(s.payload=r.payload),r._id=sC++,r._time=Date.now(),s.state=i,t.addTimelineEvent({layerId:rf,event:{time:r._time,title:r.type,groupId:r._id,subtitle:"start",data:s}})},after:function(r,i){var s={},o=Date.now()-r._time;s.duration={_custom:{type:"duration",display:o+"ms",tooltip:"Action duration",value:o}},r.payload&&(s.payload=r.payload),s.state=i,t.addTimelineEvent({layerId:rf,event:{time:Date.now(),title:r.type,groupId:r._id,subtitle:"end",data:s}})}})})}var Ey=8702998,aC=6710886,lC=16777215,Dw={label:"namespaced",textColor:lC,backgroundColor:aC};function Mw(n){return n&&n!=="root"?n.split("/").slice(-2,-1)[0]:"Root"}function Lw(n,e){return{id:e||"root",label:Mw(e),tags:n.namespaced?[Dw]:[],children:Object.keys(n._children).map(function(t){return Lw(n._children[t],e+t+"/")})}}function Fw(n,e,t,r){r.includes(t)&&n.push({id:r||"root",label:r.endsWith("/")?r.slice(0,r.length-1):r||"Root",tags:e.namespaced?[Dw]:[]}),Object.keys(e._children).forEach(function(i){Fw(n,e._children[i],t,r+i+"/")})}function uC(n,e,t){e=t==="root"?e:e[t];var r=Object.keys(e),i={state:Object.keys(n.state).map(function(o){return{key:o,editable:!0,value:n.state[o]}})};if(r.length){var s=cC(e);i.getters=Object.keys(s).map(function(o){return{key:o.endsWith("/")?Mw(o):o,editable:!1,value:jf(function(){return s[o]})}})}return i}function cC(n){var e={};return Object.keys(n).forEach(function(t){var r=t.split("/");if(r.length>1){var i=e,s=r.pop();r.forEach(function(o){i[o]||(i[o]={_custom:{value:{},display:o,tooltip:"Module",abstract:!0}}),i=i[o]._custom.value}),i[s]=jf(function(){return n[t]})}else e[t]=jf(function(){return n[t]})}),e}function hC(n,e){var t=e.split("/").filter(function(r){return r});return t.reduce(function(r,i,s){var o=r[i];if(!o)throw new Error('Missing module "'+i+'" for path "'+e+'".');return s===t.length-1?o:o._children},e==="root"?n:n.root._children)}function jf(n){try{return n()}catch(e){return e}}var hr=function(e,t){this.runtime=t,this._children=Object.create(null),this._rawModule=e;var r=e.state;this.state=(typeof r=="function"?r():r)||{}},Uw={namespaced:{configurable:!0}};Uw.namespaced.get=function(){return!!this._rawModule.namespaced};hr.prototype.addChild=function(e,t){this._children[e]=t};hr.prototype.removeChild=function(e){delete this._children[e]};hr.prototype.getChild=function(e){return this._children[e]};hr.prototype.hasChild=function(e){return e in this._children};hr.prototype.update=function(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)};hr.prototype.forEachChild=function(e){wa(this._children,e)};hr.prototype.forEachGetter=function(e){this._rawModule.getters&&wa(this._rawModule.getters,e)};hr.prototype.forEachAction=function(e){this._rawModule.actions&&wa(this._rawModule.actions,e)};hr.prototype.forEachMutation=function(e){this._rawModule.mutations&&wa(this._rawModule.mutations,e)};Object.defineProperties(hr.prototype,Uw);var eo=function(e){this.register([],e,!1)};eo.prototype.get=function(e){return e.reduce(function(t,r){return t.getChild(r)},this.root)};eo.prototype.getNamespace=function(e){var t=this.root;return e.reduce(function(r,i){return t=t.getChild(i),r+(t.namespaced?i+"/":"")},"")};eo.prototype.update=function(e){Kw([],this.root,e)};eo.prototype.register=function(e,t,r){var i=this;r===void 0&&(r=!0);var s=new hr(t,r);if(e.length===0)this.root=s;else{var o=this.get(e.slice(0,-1));o.addChild(e[e.length-1],s)}t.modules&&wa(t.modules,function(a,l){i.register(e.concat(l),a,r)})};eo.prototype.unregister=function(e){var t=this.get(e.slice(0,-1)),r=e[e.length-1],i=t.getChild(r);i&&i.runtime&&t.removeChild(r)};eo.prototype.isRegistered=function(e){var t=this.get(e.slice(0,-1)),r=e[e.length-1];return t?t.hasChild(r):!1};function Kw(n,e,t){if(e.update(t),t.modules)for(var r in t.modules){if(!e.getChild(r))return;Kw(n.concat(r),e.getChild(r),t.modules[r])}}function dC(n){return new Dn(n)}var Dn=function(e){var t=this;e===void 0&&(e={});var r=e.plugins;r===void 0&&(r=[]);var i=e.strict;i===void 0&&(i=!1);var s=e.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new eo(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._scope=null,this._devtools=s;var o=this,a=this,l=a.dispatch,h=a.commit;this.dispatch=function(d,p){return l.call(o,d,p)},this.commit=function(d,p,m){return h.call(o,d,p,m)},this.strict=i;var f=this._modules.root.state;Fh(this,f,[],this._modules.root),l_(this,f),r.forEach(function(u){return u(t)})},c_={state:{configurable:!0}};Dn.prototype.install=function(e,t){e.provide(t||YP,this),e.config.globalProperties.$store=this;var r=this._devtools!==void 0?this._devtools:!1;r&&oC(e,this)};c_.state.get=function(){return this._state.data};c_.state.set=function(n){};Dn.prototype.commit=function(e,t,r){var i=this,s=Hc(e,t,r),o=s.type,a=s.payload,l={type:o,payload:a},h=this._mutations[o];h&&(this._withCommit(function(){h.forEach(function(u){u(a)})}),this._subscribers.slice().forEach(function(f){return f(l,i.state)}))};Dn.prototype.dispatch=function(e,t){var r=this,i=Hc(e,t),s=i.type,o=i.payload,a={type:s,payload:o},l=this._actions[s];if(l){try{this._actionSubscribers.slice().filter(function(f){return f.before}).forEach(function(f){return f.before(a,r.state)})}catch{}var h=l.length>1?Promise.all(l.map(function(f){return f(o)})):l[0](o);return new Promise(function(f,u){h.then(function(d){try{r._actionSubscribers.filter(function(p){return p.after}).forEach(function(p){return p.after(a,r.state)})}catch{}f(d)},function(d){try{r._actionSubscribers.filter(function(p){return p.error}).forEach(function(p){return p.error(a,r.state,d)})}catch{}u(d)})})}};Dn.prototype.subscribe=function(e,t){return Ow(e,this._subscribers,t)};Dn.prototype.subscribeAction=function(e,t){var r=typeof e=="function"?{before:e}:e;return Ow(r,this._actionSubscribers,t)};Dn.prototype.watch=function(e,t,r){var i=this;return Gn(function(){return e(i.state,i.getters)},t,Object.assign({},r))};Dn.prototype.replaceState=function(e){var t=this;this._withCommit(function(){t._state.data=e})};Dn.prototype.registerModule=function(e,t,r){r===void 0&&(r={}),typeof e=="string"&&(e=[e]),this._modules.register(e,t),Fh(this,this.state,e,this._modules.get(e),r.preserveState),l_(this,this.state)};Dn.prototype.unregisterModule=function(e){var t=this;typeof e=="string"&&(e=[e]),this._modules.unregister(e),this._withCommit(function(){var r=u_(t.state,e.slice(0,-1));delete r[e[e.length-1]]}),Nw(this)};Dn.prototype.hasModule=function(e){return typeof e=="string"&&(e=[e]),this._modules.isRegistered(e)};Dn.prototype.hotUpdate=function(e){this._modules.update(e),Nw(this,!0)};Dn.prototype._withCommit=function(e){var t=this._committing;this._committing=!0,e(),this._committing=t};Object.defineProperties(Dn.prototype,c_);var h_=Bh(function(n,e){var t={};return Kh(e).forEach(function(r){var i=r.key,s=r.val;t[i]=function(){var a=this.$store.state,l=this.$store.getters;if(n){var h=$h(this.$store,"mapState",n);if(!h)return;a=h.context.state,l=h.context.getters}return typeof s=="function"?s.call(this,a,l):a[s]},t[i].vuex=!0}),t}),Uh=Bh(function(n,e){var t={};return Kh(e).forEach(function(r){var i=r.key,s=r.val;t[i]=function(){for(var a=[],l=arguments.length;l--;)a[l]=arguments[l];var h=this.$store.commit;if(n){var f=$h(this.$store,"mapMutations",n);if(!f)return;h=f.context.commit}return typeof s=="function"?s.apply(this,[h].concat(a)):h.apply(this.$store,[s].concat(a))}}),t}),d_=Bh(function(n,e){var t={};return Kh(e).forEach(function(r){var i=r.key,s=r.val;s=n+s,t[i]=function(){if(!(n&&!$h(this.$store,"mapGetters",n)))return this.$store.getters[s]},t[i].vuex=!0}),t}),f_=Bh(function(n,e){var t={};return Kh(e).forEach(function(r){var i=r.key,s=r.val;t[i]=function(){for(var a=[],l=arguments.length;l--;)a[l]=arguments[l];var h=this.$store.dispatch;if(n){var f=$h(this.$store,"mapActions",n);if(!f)return;h=f.context.dispatch}return typeof s=="function"?s.apply(this,[h].concat(a)):h.apply(this.$store,[s].concat(a))}}),t});function Kh(n){return fC(n)?Array.isArray(n)?n.map(function(e){return{key:e,val:e}}):Object.keys(n).map(function(e){return{key:e,val:n[e]}}):[]}function fC(n){return Array.isArray(n)||xw(n)}function Bh(n){return function(e,t){return typeof e!="string"?(t=e,e=""):e.charAt(e.length-1)!=="/"&&(e+="/"),n(e,t)}}function $h(n,e,t){var r=n._modulesNamespaceMap[t];return r}const zt=(n,e)=>{const t=n.__vccOpts||n;for(const[r,i]of e)t[r]=i;return t},pC={name:"Header",computed:{...h_({userLoggedIn:n=>n.auth.userLoggedIn})},methods:{...Uh(["toggleAuthModal"]),logoutUser(){this.$store.dispatch("logoutUser"),this.$route.meta.requiresAuthentication&&this.$router.push({name:"home"})}}},_C={id:"header",class:"bg-gray-700"},gC={class:"container mx-auto flex justify-start items-center py-5 px-4"},mC={class:"flex flex-grow items-center"},yC={class:"flex flex-row mt-1"},vC={key:0};function TC(n,e,t,r,i,s){const o=st("router-link");return Ee(),Ae("header",_C,[K("nav",gC,[Te(o,{to:{name:"home"},class:"text-white font-bold uppercase text-2xl mr-4","exact-active-class":"not-active"},{default:ar(()=>e[2]||(e[2]=[Qr("")])),_:1}),K("div",mC,[K("ul",yC,[K("li",null,[Te(o,{to:{name:"about"},class:"px-2 text-white"},{default:ar(()=>e[3]||(e[3]=[Qr("About")])),_:1})]),n.userLoggedIn?(Ee(),Ae(Bt,{key:1},[K("li",null,[Te(o,{class:"px-2 text-white",to:{name:"manage"}},{default:ar(()=>e[4]||(e[4]=[Qr("Manage")])),_:1})]),K("li",null,[K("a",{class:"px-2 text-white",href:"#",onClick:e[1]||(e[1]=_t((...a)=>s.logoutUser&&s.logoutUser(...a),["prevent"]))},"Logout")])],64)):(Ee(),Ae("li",vC,[K("a",{class:"px-2 text-white",href:"#",onClick:e[0]||(e[0]=_t((...a)=>n.toggleAuthModal&&n.toggleAuthModal(...a),["prevent"]))},"Login / Register")]))])])])])}const bC=zt(pC,[["render",TC]]),wC={name:"FormRegister",data(){return{valSchema:{name:"required|min:3|max:100|alpha_spaces",email:"required|min:3|max:100|email",age:"required|min_value:14|max_value:100",password:"required|min:6|max:20",confirmed:"passwords_mismatch:@password",country:"required|country_excluded:Phantasialand",tos:"tos"},userData:{country:"Germany"},reg_in_submission:!1,reg_show_alert:!1,reg_alert_variant:"bg-blue-50",reg_alert_message:"Please wait! Processing registration..."}},computed:{},methods:{async registerUser(n){this.reg_show_alert=!0,this.reg_in_submission=!0,this.reg_alert_variant="bg-blue-50",this.reg_alert_message="Please wait! Processing registration...";try{await this.$store.dispatch("registerUser",n)}catch(e){this.reg_in_submission=!1,this.reg_alert_variant="bg-red-50",this.reg_alert_message=`Unexpected error during registration... Error message: ${e.message}`,console.log(e);return}this.reg_alert_variant="bg-green-50",this.reg_alert_message="Your account was created!",setTimeout(()=>{this.toggleAuthModal()},1e3)},...Uh(["toggleAuthModal"])}},IC={class:"mb-3"},EC={class:"mb-3"},kC={class:"mb-3"},AC={class:"mb-3"},SC={class:"mb-3"},RC={class:"mb-3"},PC={class:"mb-3 pl-6"},CC=["disabled"];function xC(n,e,t,r,i,s){const o=st("vee-field"),a=st("ErrorMessage"),l=st("vee-form");return Ee(),Ae("div",null,[i.reg_show_alert?(Ee(),Ae("div",{key:0,class:en(["text white text-center font-bold p-5 mb-4",i.reg_alert_variant])},lt(i.reg_alert_message),3)):xn("",!0),Te(l,{"validation-schema":i.valSchema,onSubmit:s.registerUser,"initial-values":i.userData},{default:ar(()=>[K("div",IC,[e[0]||(e[0]=K("label",{class:"inline-block mb-2"},"Name",-1)),Te(o,{type:"text",name:"name",class:"block w-full py-1.5 px-3 text-gray-800 border border-gray-300 transition duration-500 focus:outline-none focus:border-black rounded",placeholder:"Enter Name"}),Te(a,{class:"text-red-600",name:"name"})]),K("div",EC,[e[1]||(e[1]=K("label",{class:"inline-block mb-2"},"Email",-1)),Te(o,{type:"email",name:"email",class:"block w-full py-1.5 px-3 text-gray-800 border border-gray-300 transition duration-500 focus:outline-none focus:border-black rounded",placeholder:"Enter Email"}),Te(a,{class:"text-red-600",name:"email"})]),K("div",kC,[e[2]||(e[2]=K("label",{class:"inline-block mb-2"},"Age",-1)),Te(o,{type:"number",name:"age",class:"block w-full py-1.5 px-3 text-gray-800 border border-gray-300 transition duration-500 focus:outline-none focus:border-black rounded"}),Te(a,{class:"text-red-600",name:"age"})]),K("div",AC,[e[3]||(e[3]=K("label",{class:"inline-block mb-2"},"Password",-1)),Te(o,{type:"password",name:"password",class:"block w-full py-1.5 px-3 text-gray-800 border border-gray-300 transition duration-500 focus:outline-none focus:border-black rounded",placeholder:"Password"}),Te(a,{class:"text-red-600",name:"password"})]),K("div",SC,[e[4]||(e[4]=K("label",{class:"inline-block mb-2"},"Confirm Password",-1)),Te(o,{type:"password",name:"confirmed",class:"block w-full py-1.5 px-3 text-gray-800 border border-gray-300 transition duration-500 focus:outline-none focus:border-black rounded",placeholder:"Confirm Password"}),Te(a,{class:"text-red-600",name:"confirmed"})]),K("div",RC,[e[6]||(e[6]=K("label",{class:"inline-block mb-2"},"Country",-1)),Te(o,{as:"select",name:"country",class:"block w-full py-1.5 px-3 text-gray-800 border border-gray-300 transition duration-500 focus:outline-none focus:border-black rounded"},{default:ar(()=>e[5]||(e[5]=[K("option",{value:"USA"},"USA",-1),K("option",{value:"Mexico"},"Mexico",-1),K("option",{value:"Germany"},"Germany",-1),K("option",{value:"Phantasialand"},"Phantasialand",-1)])),_:1}),Te(a,{class:"text-red-600",name:"country"})]),K("div",PC,[Te(o,{type:"checkbox",name:"tos",value:"1",class:"w-4 h-4 float-left -ml-6 mt-1 rounded"}),e[7]||(e[7]=K("label",{class:"inline-block"},"Accept terms of service",-1)),Te(a,{class:"text-red-600 block",name:"tos"})]),K("button",{type:"submit",disabled:i.reg_in_submission,class:"block w-full bg-purple-600 text-white py-1.5 px-3 rounded transition hover:bg-purple-700"}," Submit ",8,CC)]),_:1},8,["validation-schema","onSubmit","initial-values"])])}const OC=zt(wC,[["render",xC]]),NC={name:"FormLogin",data(){return{valSchema:{email:"loginEmptyEmail",password:"loginEmptyPwd"},login_in_submission:!1,login_show_alert:!1,login_alert_variant:"bg-blue-50",login_alert_message:"Please wait! Processing registration..."}},components:{},methods:{async loginUser(n){this.login_show_alert=!0,this.login_in_submission=!0,this.login_alert_variant="bg-blue-50",this.login_alert_message="Please wait! Processing registration...";try{await this.$store.dispatch("loginUser",n)}catch(e){this.reg_in_submission=!1,this.reg_alert_variant="bg-red-50",this.reg_alert_message=`Unexpected error during login... Error message: ${e.message}`,console.log(e);return}this.login_alert_variant="bg-green-50",this.login_alert_message="Your are logged in!",setTimeout(()=>{this.toggleAuthModal()},1e3)},...Uh(["toggleAuthModal"])}},VC={class:"mb-3"},DC={class:"mb-3"};function MC(n,e,t,r,i,s){const o=st("vee-field"),a=st("ErrorMessage"),l=st("vee-form");return Ee(),Ae("div",null,[i.login_show_alert?(Ee(),Ae("div",{key:0,class:en(["text white text-center font-bold p-5 mb-4",i.login_alert_variant])},lt(i.login_alert_message),3)):xn("",!0),Te(l,{"validation-schema":i.valSchema,onSubmit:s.loginUser},{default:ar(()=>[K("div",VC,[e[0]||(e[0]=K("label",{class:"inline-block mb-2"},"Email",-1)),Te(o,{type:"email",name:"email",class:"block w-full py-1.5 px-3 text-gray-800 border border-gray-300 transition duration-500 focus:outline-none focus:border-black rounded",placeholder:"Enter Email"}),Te(a,{class:"text-red-600",name:"email"})]),K("div",DC,[e[1]||(e[1]=K("label",{class:"inline-block mb-2"},"Password",-1)),Te(o,{type:"password",name:"password",class:"block w-full py-1.5 px-3 text-gray-800 border border-gray-300 transition duration-500 focus:outline-none focus:border-black rounded",placeholder:"Password"}),Te(a,{class:"text-red-600",name:"password"})]),e[2]||(e[2]=K("button",{type:"submit",class:"block w-full bg-purple-600 text-white py-1.5 px-3 rounded transition hover:bg-purple-700"}," Submit ",-1))]),_:1},8,["validation-schema","onSubmit"])])}const LC=zt(NC,[["render",MC]]),FC={components:{AppFormRegister:OC,AppFormLogin:LC},name:"Auth",data(){return{tab:"login"}},computed:{...h_({authShowModal:n=>n.auth.authShowModal})},methods:{...Uh(["toggleAuthModal"])}},UC={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},KC={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},BC={class:"py-4 text-left px-6"},$C={class:"flex justify-between items-center pb-4"},zC={class:"flex flex-wrap mb-4"},jC={class:"flex-auto text-center"},qC={class:"flex-auto text-center"};function GC(n,e,t,r,i,s){const o=st("app-form-login"),a=st("app-form-register");return Ee(),Ae("div",{id:"modal",class:en(["fixed z-10 inset-0 overflow-y-auto",{hidden:!n.authShowModal}])},[K("div",UC,[e[5]||(e[5]=K("div",{class:"fixed inset-0 transition-opacity"},[K("div",{class:"absolute inset-0 bg-gray-800 opacity-75"})],-1)),e[6]||(e[6]=K("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen"},"",-1)),K("div",KC,[K("div",BC,[K("div",$C,[e[4]||(e[4]=K("p",{class:"text-2xl font-bold"},"Your Account",-1)),K("div",{class:"modal-close cursor-pointer z-50",onClick:e[0]||(e[0]=_t((...l)=>n.toggleAuthModal&&n.toggleAuthModal(...l),["prevent"]))},e[3]||(e[3]=[K("i",{class:"fas fa-times"},null,-1)]))]),K("ul",zC,[K("li",jC,[K("a",{class:en(["block rounded py-3 px-4 transition",{"hover:text-white text-white bg-blue-600":i.tab==="login"}]),href:"#",onClick:e[1]||(e[1]=_t(l=>i.tab="login",["prevent"]))},"Login",2)]),K("li",qC,[K("a",{class:en(["block rounded py-3 px-4 transition",{"hover:text-white text-white bg-blue-600":i.tab==="register"}]),href:"#",onClick:e[2]||(e[2]=_t(l=>i.tab="register",["prevent"]))},"Register",2)])]),Bl(Te(o,{activeTab:i.tab},null,8,["activeTab"]),[[jl,i.tab==="login"]]),Bl(Te(a,{activeTab:i.tab},null,8,["activeTab"]),[[jl,i.tab==="register"]])])])])],2)}const HC=zt(FC,[["render",GC]]),WC={name:"App",components:{AppHeader:bC,AuthModal:HC},created(){this.$store.dispatch("initLogin")}};function QC(n,e,t,r,i,s){const o=st("app-header"),a=st("router-view"),l=st("auth-modal");return Ee(),Ae("div",null,[Te(o),(Ee(),Wo(a,{key:n.$route.fullPath})),Te(l)])}const YC=zt(WC,[["render",QC]]);/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const So=typeof document<"u";function Bw(n){return typeof n=="object"||"displayName"in n||"props"in n||"__vccOpts"in n}function JC(n){return n.__esModule||n[Symbol.toStringTag]==="Module"||n.default&&Bw(n.default)}const We=Object.assign;function sf(n,e){const t={};for(const r in e){const i=e[r];t[r]=ur(i)?i.map(n):n(i)}return t}const Il=()=>{},ur=Array.isArray,$w=/#/g,XC=/&/g,ZC=/\//g,e1=/=/g,t1=/\?/g,zw=/\+/g,n1=/%5B/g,r1=/%5D/g,jw=/%5E/g,i1=/%60/g,qw=/%7B/g,s1=/%7C/g,Gw=/%7D/g,o1=/%20/g;function p_(n){return encodeURI(""+n).replace(s1,"|").replace(n1,"[").replace(r1,"]")}function a1(n){return p_(n).replace(qw,"{").replace(Gw,"}").replace(jw,"^")}function qf(n){return p_(n).replace(zw,"%2B").replace(o1,"+").replace($w,"%23").replace(XC,"%26").replace(i1,"`").replace(qw,"{").replace(Gw,"}").replace(jw,"^")}function l1(n){return qf(n).replace(e1,"%3D")}function u1(n){return p_(n).replace($w,"%23").replace(t1,"%3F")}function c1(n){return n==null?"":u1(n).replace(ZC,"%2F")}function ql(n){try{return decodeURIComponent(""+n)}catch{}return""+n}const h1=/\/$/,d1=n=>n.replace(h1,"");function of(n,e,t="/"){let r,i={},s="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(r=e.slice(0,l),s=e.slice(l+1,a>-1?a:e.length),i=n(s)),a>-1&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=g1(r??e,t),{fullPath:r+(s&&"?")+s+o,path:r,query:i,hash:ql(o)}}function f1(n,e){const t=e.query?n(e.query):"";return e.path+(t&&"?")+t+(e.hash||"")}function ky(n,e){return!e||!n.toLowerCase().startsWith(e.toLowerCase())?n:n.slice(e.length)||"/"}function p1(n,e,t){const r=e.matched.length-1,i=t.matched.length-1;return r>-1&&r===i&&Jo(e.matched[r],t.matched[i])&&Hw(e.params,t.params)&&n(e.query)===n(t.query)&&e.hash===t.hash}function Jo(n,e){return(n.aliasOf||n)===(e.aliasOf||e)}function Hw(n,e){if(Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(!_1(n[t],e[t]))return!1;return!0}function _1(n,e){return ur(n)?Ay(n,e):ur(e)?Ay(e,n):n===e}function Ay(n,e){return ur(e)?n.length===e.length&&n.every((t,r)=>t===e[r]):n.length===1&&n[0]===e}function g1(n,e){if(n.startsWith("/"))return n;if(!n)return e;const t=e.split("/"),r=n.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let s=t.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")s>1&&s--;else break;return t.slice(0,s).join("/")+"/"+r.slice(o).join("/")}const Ti={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Gl;(function(n){n.pop="pop",n.push="push"})(Gl||(Gl={}));var El;(function(n){n.back="back",n.forward="forward",n.unknown=""})(El||(El={}));function m1(n){if(!n)if(So){const e=document.querySelector("base");n=e&&e.getAttribute("href")||"/",n=n.replace(/^\w+:\/\/[^\/]+/,"")}else n="/";return n[0]!=="/"&&n[0]!=="#"&&(n="/"+n),d1(n)}const y1=/^[^#]+#/;function v1(n,e){return n.replace(y1,"#")+e}function T1(n,e){const t=document.documentElement.getBoundingClientRect(),r=n.getBoundingClientRect();return{behavior:e.behavior,left:r.left-t.left-(e.left||0),top:r.top-t.top-(e.top||0)}}const zh=()=>({left:window.scrollX,top:window.scrollY});function b1(n){let e;if("el"in n){const t=n.el,r=typeof t=="string"&&t.startsWith("#"),i=typeof t=="string"?r?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!i)return;e=T1(i,n)}else e=n;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Sy(n,e){return(history.state?history.state.position-e:-1)+n}const Gf=new Map;function w1(n,e){Gf.set(n,e)}function I1(n){const e=Gf.get(n);return Gf.delete(n),e}let E1=()=>location.protocol+"//"+location.host;function Ww(n,e){const{pathname:t,search:r,hash:i}=e,s=n.indexOf("#");if(s>-1){let a=i.includes(n.slice(s))?n.slice(s).length:1,l=i.slice(a);return l[0]!=="/"&&(l="/"+l),ky(l,"")}return ky(t,n)+r+i}function k1(n,e,t,r){let i=[],s=[],o=null;const a=({state:d})=>{const p=Ww(n,location),m=t.value,T=e.value;let v=0;if(d){if(t.value=p,e.value=d,o&&o===m){o=null;return}v=T?d.position-T.position:0}else r(p);i.forEach(I=>{I(t.value,m,{delta:v,type:Gl.pop,direction:v?v>0?El.forward:El.back:El.unknown})})};function l(){o=t.value}function h(d){i.push(d);const p=()=>{const m=i.indexOf(d);m>-1&&i.splice(m,1)};return s.push(p),p}function f(){const{history:d}=window;d.state&&d.replaceState(We({},d.state,{scroll:zh()}),"")}function u(){for(const d of s)d();s=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",f)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",f,{passive:!0}),{pauseListeners:l,listen:h,destroy:u}}function Ry(n,e,t,r=!1,i=!1){return{back:n,current:e,forward:t,replaced:r,position:window.history.length,scroll:i?zh():null}}function A1(n){const{history:e,location:t}=window,r={value:Ww(n,t)},i={value:e.state};i.value||s(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function s(l,h,f){const u=n.indexOf("#"),d=u>-1?(t.host&&document.querySelector("base")?n:n.slice(u))+l:E1()+n+l;try{e[f?"replaceState":"pushState"](h,"",d),i.value=h}catch(p){console.error(p),t[f?"replace":"assign"](d)}}function o(l,h){const f=We({},e.state,Ry(i.value.back,l,i.value.forward,!0),h,{position:i.value.position});s(l,f,!0),r.value=l}function a(l,h){const f=We({},i.value,e.state,{forward:l,scroll:zh()});s(f.current,f,!0);const u=We({},Ry(r.value,l,null),{position:f.position+1},h);s(l,u,!1),r.value=l}return{location:r,state:i,push:a,replace:o}}function S1(n){n=m1(n);const e=A1(n),t=k1(n,e.state,e.location,e.replace);function r(s,o=!0){o||t.pauseListeners(),history.go(s)}const i=We({location:"",base:n,go:r,createHref:v1.bind(null,n)},e,t);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function R1(n){return typeof n=="string"||n&&typeof n=="object"}function Qw(n){return typeof n=="string"||typeof n=="symbol"}const Yw=Symbol("");var Py;(function(n){n[n.aborted=4]="aborted",n[n.cancelled=8]="cancelled",n[n.duplicated=16]="duplicated"})(Py||(Py={}));function Xo(n,e){return We(new Error,{type:n,[Yw]:!0},e)}function Ur(n,e){return n instanceof Error&&Yw in n&&(e==null||!!(n.type&e))}const Cy="[^/]+?",P1={sensitive:!1,strict:!1,start:!0,end:!0},C1=/[.+*?^${}()[\]/\\]/g;function x1(n,e){const t=We({},P1,e),r=[];let i=t.start?"^":"";const s=[];for(const h of n){const f=h.length?[]:[90];t.strict&&!h.length&&(i+="/");for(let u=0;u<h.length;u++){const d=h[u];let p=40+(t.sensitive?.25:0);if(d.type===0)u||(i+="/"),i+=d.value.replace(C1,"\\$&"),p+=40;else if(d.type===1){const{value:m,repeatable:T,optional:v,regexp:I}=d;s.push({name:m,repeatable:T,optional:v});const C=I||Cy;if(C!==Cy){p+=10;try{new RegExp(`(${C})`)}catch(U){throw new Error(`Invalid custom RegExp for param "${m}" (${C}): `+U.message)}}let M=T?`((?:${C})(?:/(?:${C}))*)`:`(${C})`;u||(M=v&&h.length<2?`(?:/${M})`:"/"+M),v&&(M+="?"),i+=M,p+=20,v&&(p+=-8),T&&(p+=-20),C===".*"&&(p+=-50)}f.push(p)}r.push(f)}if(t.strict&&t.end){const h=r.length-1;r[h][r[h].length-1]+=.7000000000000001}t.strict||(i+="/?"),t.end?i+="$":t.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const o=new RegExp(i,t.sensitive?"":"i");function a(h){const f=h.match(o),u={};if(!f)return null;for(let d=1;d<f.length;d++){const p=f[d]||"",m=s[d-1];u[m.name]=p&&m.repeatable?p.split("/"):p}return u}function l(h){let f="",u=!1;for(const d of n){(!u||!f.endsWith("/"))&&(f+="/"),u=!1;for(const p of d)if(p.type===0)f+=p.value;else if(p.type===1){const{value:m,repeatable:T,optional:v}=p,I=m in h?h[m]:"";if(ur(I)&&!T)throw new Error(`Provided param "${m}" is an array but it is not repeatable (* or + modifiers)`);const C=ur(I)?I.join("/"):I;if(!C)if(v)d.length<2&&(f.endsWith("/")?f=f.slice(0,-1):u=!0);else throw new Error(`Missing required param "${m}"`);f+=C}}return f||"/"}return{re:o,score:r,keys:s,parse:a,stringify:l}}function O1(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=e[t]-n[t];if(r)return r;t++}return n.length<e.length?n.length===1&&n[0]===80?-1:1:n.length>e.length?e.length===1&&e[0]===80?1:-1:0}function Jw(n,e){let t=0;const r=n.score,i=e.score;for(;t<r.length&&t<i.length;){const s=O1(r[t],i[t]);if(s)return s;t++}if(Math.abs(i.length-r.length)===1){if(xy(r))return 1;if(xy(i))return-1}return i.length-r.length}function xy(n){const e=n[n.length-1];return n.length>0&&e[e.length-1]<0}const N1={type:0,value:""},V1=/[a-zA-Z0-9_]/;function D1(n){if(!n)return[[]];if(n==="/")return[[N1]];if(!n.startsWith("/"))throw new Error(`Invalid path "${n}"`);function e(p){throw new Error(`ERR (${t})/"${h}": ${p}`)}let t=0,r=t;const i=[];let s;function o(){s&&i.push(s),s=[]}let a=0,l,h="",f="";function u(){h&&(t===0?s.push({type:0,value:h}):t===1||t===2||t===3?(s.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${h}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:h,regexp:f,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),h="")}function d(){h+=l}for(;a<n.length;){if(l=n[a++],l==="\\"&&t!==2){r=t,t=4;continue}switch(t){case 0:l==="/"?(h&&u(),o()):l===":"?(u(),t=1):d();break;case 4:d(),t=r;break;case 1:l==="("?t=2:V1.test(l)?d():(u(),t=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?f[f.length-1]=="\\"?f=f.slice(0,-1)+l:t=3:f+=l;break;case 3:u(),t=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,f="";break;default:e("Unknown state");break}}return t===2&&e(`Unfinished custom RegExp for param "${h}"`),u(),o(),i}function M1(n,e,t){const r=x1(D1(n.path),t),i=We(r,{record:n,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function L1(n,e){const t=[],r=new Map;e=Dy({strict:!1,end:!0,sensitive:!1},e);function i(u){return r.get(u)}function s(u,d,p){const m=!p,T=Ny(u);T.aliasOf=p&&p.record;const v=Dy(e,u),I=[T];if("alias"in u){const U=typeof u.alias=="string"?[u.alias]:u.alias;for(const ee of U)I.push(Ny(We({},T,{components:p?p.record.components:T.components,path:ee,aliasOf:p?p.record:T})))}let C,M;for(const U of I){const{path:ee}=U;if(d&&ee[0]!=="/"){const ne=d.record.path,k=ne[ne.length-1]==="/"?"":"/";U.path=d.record.path+(ee&&k+ee)}if(C=M1(U,d,v),p?p.alias.push(C):(M=M||C,M!==C&&M.alias.push(C),m&&u.name&&!Vy(C)&&o(u.name)),Xw(C)&&l(C),T.children){const ne=T.children;for(let k=0;k<ne.length;k++)s(ne[k],C,p&&p.children[k])}p=p||C}return M?()=>{o(M)}:Il}function o(u){if(Qw(u)){const d=r.get(u);d&&(r.delete(u),t.splice(t.indexOf(d),1),d.children.forEach(o),d.alias.forEach(o))}else{const d=t.indexOf(u);d>-1&&(t.splice(d,1),u.record.name&&r.delete(u.record.name),u.children.forEach(o),u.alias.forEach(o))}}function a(){return t}function l(u){const d=K1(u,t);t.splice(d,0,u),u.record.name&&!Vy(u)&&r.set(u.record.name,u)}function h(u,d){let p,m={},T,v;if("name"in u&&u.name){if(p=r.get(u.name),!p)throw Xo(1,{location:u});v=p.record.name,m=We(Oy(d.params,p.keys.filter(M=>!M.optional).concat(p.parent?p.parent.keys.filter(M=>M.optional):[]).map(M=>M.name)),u.params&&Oy(u.params,p.keys.map(M=>M.name))),T=p.stringify(m)}else if(u.path!=null)T=u.path,p=t.find(M=>M.re.test(T)),p&&(m=p.parse(T),v=p.record.name);else{if(p=d.name?r.get(d.name):t.find(M=>M.re.test(d.path)),!p)throw Xo(1,{location:u,currentLocation:d});v=p.record.name,m=We({},d.params,u.params),T=p.stringify(m)}const I=[];let C=p;for(;C;)I.unshift(C.record),C=C.parent;return{name:v,path:T,params:m,matched:I,meta:U1(I)}}n.forEach(u=>s(u));function f(){t.length=0,r.clear()}return{addRoute:s,resolve:h,removeRoute:o,clearRoutes:f,getRoutes:a,getRecordMatcher:i}}function Oy(n,e){const t={};for(const r of e)r in n&&(t[r]=n[r]);return t}function Ny(n){const e={path:n.path,redirect:n.redirect,name:n.name,meta:n.meta||{},aliasOf:n.aliasOf,beforeEnter:n.beforeEnter,props:F1(n),children:n.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in n?n.components||null:n.component&&{default:n.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function F1(n){const e={},t=n.props||!1;if("component"in n)e.default=t;else for(const r in n.components)e[r]=typeof t=="object"?t[r]:t;return e}function Vy(n){for(;n;){if(n.record.aliasOf)return!0;n=n.parent}return!1}function U1(n){return n.reduce((e,t)=>We(e,t.meta),{})}function Dy(n,e){const t={};for(const r in n)t[r]=r in e?e[r]:n[r];return t}function K1(n,e){let t=0,r=e.length;for(;t!==r;){const s=t+r>>1;Jw(n,e[s])<0?r=s:t=s+1}const i=B1(n);return i&&(r=e.lastIndexOf(i,r-1)),r}function B1(n){let e=n;for(;e=e.parent;)if(Xw(e)&&Jw(n,e)===0)return e}function Xw({record:n}){return!!(n.name||n.components&&Object.keys(n.components).length||n.redirect)}function $1(n){const e={};if(n===""||n==="?")return e;const r=(n[0]==="?"?n.slice(1):n).split("&");for(let i=0;i<r.length;++i){const s=r[i].replace(zw," "),o=s.indexOf("="),a=ql(o<0?s:s.slice(0,o)),l=o<0?null:ql(s.slice(o+1));if(a in e){let h=e[a];ur(h)||(h=e[a]=[h]),h.push(l)}else e[a]=l}return e}function My(n){let e="";for(let t in n){const r=n[t];if(t=l1(t),r==null){r!==void 0&&(e+=(e.length?"&":"")+t);continue}(ur(r)?r.map(s=>s&&qf(s)):[r&&qf(r)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+t,s!=null&&(e+="="+s))})}return e}function z1(n){const e={};for(const t in n){const r=n[t];r!==void 0&&(e[t]=ur(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return e}const j1=Symbol(""),Ly=Symbol(""),__=Symbol(""),Zw=Symbol(""),Hf=Symbol("");function Qa(){let n=[];function e(r){return n.push(r),()=>{const i=n.indexOf(r);i>-1&&n.splice(i,1)}}function t(){n=[]}return{add:e,list:()=>n.slice(),reset:t}}function Ri(n,e,t,r,i,s=o=>o()){const o=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((a,l)=>{const h=d=>{d===!1?l(Xo(4,{from:t,to:e})):d instanceof Error?l(d):R1(d)?l(Xo(2,{from:e,to:d})):(o&&r.enterCallbacks[i]===o&&typeof d=="function"&&o.push(d),a())},f=s(()=>n.call(r&&r.instances[i],e,t,h));let u=Promise.resolve(f);n.length<3&&(u=u.then(h)),u.catch(d=>l(d))})}function af(n,e,t,r,i=s=>s()){const s=[];for(const o of n)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(Bw(l)){const f=(l.__vccOpts||l)[e];f&&s.push(Ri(f,t,r,o,a,i))}else{let h=l();s.push(()=>h.then(f=>{if(!f)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const u=JC(f)?f.default:f;o.mods[a]=f,o.components[a]=u;const p=(u.__vccOpts||u)[e];return p&&Ri(p,t,r,o,a,i)()}))}}return s}function Fy(n){const e=lr(__),t=lr(Zw),r=Ne(()=>{const l=$e(n.to);return e.resolve(l)}),i=Ne(()=>{const{matched:l}=r.value,{length:h}=l,f=l[h-1],u=t.matched;if(!f||!u.length)return-1;const d=u.findIndex(Jo.bind(null,f));if(d>-1)return d;const p=Uy(l[h-2]);return h>1&&Uy(f)===p&&u[u.length-1].path!==p?u.findIndex(Jo.bind(null,l[h-2])):d}),s=Ne(()=>i.value>-1&&Q1(t.params,r.value.params)),o=Ne(()=>i.value>-1&&i.value===t.matched.length-1&&Hw(t.params,r.value.params));function a(l={}){if(W1(l)){const h=e[$e(n.replace)?"replace":"push"]($e(n.to)).catch(Il);return n.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>h),h}return Promise.resolve()}return{route:r,href:Ne(()=>r.value.href),isActive:s,isExactActive:o,navigate:a}}function q1(n){return n.length===1?n[0]:n}const G1=yu({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Fy,setup(n,{slots:e}){const t=Xr(Fy(n)),{options:r}=lr(__),i=Ne(()=>({[Ky(n.activeClass,r.linkActiveClass,"router-link-active")]:t.isActive,[Ky(n.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const s=e.default&&q1(e.default(t));return n.custom?s:Yo("a",{"aria-current":t.isExactActive?n.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:i.value},s)}}}),H1=G1;function W1(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)&&!n.defaultPrevented&&!(n.button!==void 0&&n.button!==0)){if(n.currentTarget&&n.currentTarget.getAttribute){const e=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return n.preventDefault&&n.preventDefault(),!0}}function Q1(n,e){for(const t in e){const r=e[t],i=n[t];if(typeof r=="string"){if(r!==i)return!1}else if(!ur(i)||i.length!==r.length||r.some((s,o)=>s!==i[o]))return!1}return!0}function Uy(n){return n?n.aliasOf?n.aliasOf.path:n.path:""}const Ky=(n,e,t)=>n??e??t,Y1=yu({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(n,{attrs:e,slots:t}){const r=lr(Hf),i=Ne(()=>n.route||r.value),s=lr(Ly,0),o=Ne(()=>{let h=$e(s);const{matched:f}=i.value;let u;for(;(u=f[h])&&!u.components;)h++;return h}),a=Ne(()=>i.value.matched[o.value]);Os(Ly,Ne(()=>o.value+1)),Os(j1,a),Os(Hf,i);const l=$n();return Gn(()=>[l.value,a.value,n.name],([h,f,u],[d,p,m])=>{f&&(f.instances[u]=h,p&&p!==f&&h&&h===d&&(f.leaveGuards.size||(f.leaveGuards=p.leaveGuards),f.updateGuards.size||(f.updateGuards=p.updateGuards))),h&&f&&(!p||!Jo(f,p)||!d)&&(f.enterCallbacks[u]||[]).forEach(T=>T(h))},{flush:"post"}),()=>{const h=i.value,f=n.name,u=a.value,d=u&&u.components[f];if(!d)return By(t.default,{Component:d,route:h});const p=u.props[f],m=p?p===!0?h.params:typeof p=="function"?p(h):p:null,v=Yo(d,We({},m,e,{onVnodeUnmounted:I=>{I.component.isUnmounted&&(u.instances[f]=null)},ref:l}));return By(t.default,{Component:v,route:h})||v}}});function By(n,e){if(!n)return null;const t=n(e);return t.length===1?t[0]:t}const J1=Y1;function X1(n){const e=L1(n.routes,n),t=n.parseQuery||$1,r=n.stringifyQuery||My,i=n.history,s=Qa(),o=Qa(),a=Qa(),l=jb(Ti);let h=Ti;So&&n.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const f=sf.bind(null,F=>""+F),u=sf.bind(null,c1),d=sf.bind(null,ql);function p(F,X){let Q,he;return Qw(F)?(Q=e.getRecordMatcher(F),he=X):he=F,e.addRoute(he,Q)}function m(F){const X=e.getRecordMatcher(F);X&&e.removeRoute(X)}function T(){return e.getRoutes().map(F=>F.record)}function v(F){return!!e.getRecordMatcher(F)}function I(F,X){if(X=We({},X||l.value),typeof F=="string"){const N=of(t,F,X.path),z=e.resolve({path:N.path},X),q=i.createHref(N.fullPath);return We(N,z,{params:d(z.params),hash:ql(N.hash),redirectedFrom:void 0,href:q})}let Q;if(F.path!=null)Q=We({},F,{path:of(t,F.path,X.path).path});else{const N=We({},F.params);for(const z in N)N[z]==null&&delete N[z];Q=We({},F,{params:u(N)}),X.params=u(X.params)}const he=e.resolve(Q,X),Oe=F.hash||"";he.params=f(d(he.params));const E=f1(r,We({},F,{hash:a1(Oe),path:he.path})),S=i.createHref(E);return We({fullPath:E,hash:Oe,query:r===My?z1(F.query):F.query||{}},he,{redirectedFrom:void 0,href:S})}function C(F){return typeof F=="string"?of(t,F,l.value.path):We({},F)}function M(F,X){if(h!==F)return Xo(8,{from:X,to:F})}function U(F){return k(F)}function ee(F){return U(We(C(F),{replace:!0}))}function ne(F){const X=F.matched[F.matched.length-1];if(X&&X.redirect){const{redirect:Q}=X;let he=typeof Q=="function"?Q(F):Q;return typeof he=="string"&&(he=he.includes("?")||he.includes("#")?he=C(he):{path:he},he.params={}),We({query:F.query,hash:F.hash,params:he.path!=null?{}:F.params},he)}}function k(F,X){const Q=h=I(F),he=l.value,Oe=F.state,E=F.force,S=F.replace===!0,N=ne(Q);if(N)return k(We(C(N),{state:typeof N=="object"?We({},Oe,N.state):Oe,force:E,replace:S}),X||Q);const z=Q;z.redirectedFrom=X;let q;return!E&&p1(r,he,Q)&&(q=Xo(16,{to:z,from:he}),qt(he,he,!0,!1)),(q?Promise.resolve(q):R(z,he)).catch(j=>Ur(j)?Ur(j,2)?j:Ut(j):Pe(j,z,he)).then(j=>{if(j){if(Ur(j,2))return k(We({replace:S},C(j.to),{state:typeof j.to=="object"?We({},Oe,j.to.state):Oe,force:E}),X||z)}else j=x(z,he,!0,S,Oe);return P(z,he,j),j})}function w(F,X){const Q=M(F,X);return Q?Promise.reject(Q):Promise.resolve()}function b(F){const X=ft.values().next().value;return X&&typeof X.runWithContext=="function"?X.runWithContext(F):F()}function R(F,X){let Q;const[he,Oe,E]=Z1(F,X);Q=af(he.reverse(),"beforeRouteLeave",F,X);for(const N of he)N.leaveGuards.forEach(z=>{Q.push(Ri(z,F,X))});const S=w.bind(null,F,X);return Q.push(S),ce(Q).then(()=>{Q=[];for(const N of s.list())Q.push(Ri(N,F,X));return Q.push(S),ce(Q)}).then(()=>{Q=af(Oe,"beforeRouteUpdate",F,X);for(const N of Oe)N.updateGuards.forEach(z=>{Q.push(Ri(z,F,X))});return Q.push(S),ce(Q)}).then(()=>{Q=[];for(const N of E)if(N.beforeEnter)if(ur(N.beforeEnter))for(const z of N.beforeEnter)Q.push(Ri(z,F,X));else Q.push(Ri(N.beforeEnter,F,X));return Q.push(S),ce(Q)}).then(()=>(F.matched.forEach(N=>N.enterCallbacks={}),Q=af(E,"beforeRouteEnter",F,X,b),Q.push(S),ce(Q))).then(()=>{Q=[];for(const N of o.list())Q.push(Ri(N,F,X));return Q.push(S),ce(Q)}).catch(N=>Ur(N,8)?N:Promise.reject(N))}function P(F,X,Q){a.list().forEach(he=>b(()=>he(F,X,Q)))}function x(F,X,Q,he,Oe){const E=M(F,X);if(E)return E;const S=X===Ti,N=So?history.state:{};Q&&(he||S?i.replace(F.fullPath,We({scroll:S&&N&&N.scroll},Oe)):i.push(F.fullPath,Oe)),l.value=F,qt(F,X,Q,S),Ut()}let A;function Le(){A||(A=i.listen((F,X,Q)=>{if(!Sn.listening)return;const he=I(F),Oe=ne(he);if(Oe){k(We(Oe,{replace:!0,force:!0}),he).catch(Il);return}h=he;const E=l.value;So&&w1(Sy(E.fullPath,Q.delta),zh()),R(he,E).catch(S=>Ur(S,12)?S:Ur(S,2)?(k(We(C(S.to),{force:!0}),he).then(N=>{Ur(N,20)&&!Q.delta&&Q.type===Gl.pop&&i.go(-1,!1)}).catch(Il),Promise.reject()):(Q.delta&&i.go(-Q.delta,!1),Pe(S,he,E))).then(S=>{S=S||x(he,E,!1),S&&(Q.delta&&!Ur(S,8)?i.go(-Q.delta,!1):Q.type===Gl.pop&&Ur(S,20)&&i.go(-1,!1)),P(he,E,S)}).catch(Il)}))}let Xe=Qa(),De=Qa(),le;function Pe(F,X,Q){Ut(F);const he=De.list();return he.length?he.forEach(Oe=>Oe(F,X,Q)):console.error(F),Promise.reject(F)}function vt(){return le&&l.value!==Ti?Promise.resolve():new Promise((F,X)=>{Xe.add([F,X])})}function Ut(F){return le||(le=!F,Le(),Xe.list().forEach(([X,Q])=>F?Q(F):X()),Xe.reset()),F}function qt(F,X,Q,he){const{scrollBehavior:Oe}=n;if(!So||!Oe)return Promise.resolve();const E=!Q&&I1(Sy(F.fullPath,0))||(he||!Q)&&history.state&&history.state.scroll||null;return Qn().then(()=>Oe(F,X,E)).then(S=>S&&b1(S)).catch(S=>Pe(S,F,X))}const Ze=F=>i.go(F);let rt;const ft=new Set,Sn={currentRoute:l,listening:!0,addRoute:p,removeRoute:m,clearRoutes:e.clearRoutes,hasRoute:v,getRoutes:T,resolve:I,options:n,push:U,replace:ee,go:Ze,back:()=>Ze(-1),forward:()=>Ze(1),beforeEach:s.add,beforeResolve:o.add,afterEach:a.add,onError:De.add,isReady:vt,install(F){const X=this;F.component("RouterLink",H1),F.component("RouterView",J1),F.config.globalProperties.$router=X,Object.defineProperty(F.config.globalProperties,"$route",{enumerable:!0,get:()=>$e(l)}),So&&!rt&&l.value===Ti&&(rt=!0,U(i.location).catch(Oe=>{}));const Q={};for(const Oe in Ti)Object.defineProperty(Q,Oe,{get:()=>l.value[Oe],enumerable:!0});F.provide(__,X),F.provide(Zw,zb(Q)),F.provide(Hf,l);const he=F.unmount;ft.add(F),F.unmount=function(){ft.delete(F),ft.size<1&&(h=Ti,A&&A(),A=null,l.value=Ti,rt=!1,le=!1),he()}}};function ce(F){return F.reduce((X,Q)=>X.then(()=>b(Q)),Promise.resolve())}return Sn}function Z1(n,e){const t=[],r=[],i=[],s=Math.max(e.matched.length,n.matched.length);for(let o=0;o<s;o++){const a=e.matched[o];a&&(n.matched.find(h=>Jo(h,a))?r.push(a):t.push(a));const l=n.matched[o];l&&(e.matched.find(h=>Jo(h,l))||i.push(l))}return[t,r,i]}const ex=()=>{};var $y={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eI=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},tx=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[t++],o=n[t++],a=n[t++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},tI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],o=i+1<n.length,a=o?n[i+1]:0,l=i+2<n.length,h=l?n[i+2]:0,f=s>>2,u=(s&3)<<4|a>>4;let d=(a&15)<<2|h>>6,p=h&63;l||(p=64,o||(d=64)),r.push(t[f],t[u],t[d],t[p])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(eI(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):tx(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;const h=i<n.length?t[n.charAt(i)]:64;++i;const u=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||h==null||u==null)throw new nx;const d=s<<2|a>>4;if(r.push(d),h!==64){const p=a<<4&240|h>>2;if(r.push(p),u!==64){const m=h<<6&192|u;r.push(m)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class nx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const rx=function(n){const e=eI(n);return tI.encodeByteArray(e,!0)},Wc=function(n){return rx(n).replace(/\./g,"")},g_=function(n){try{return tI.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Qc(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!ix(t)||(n[t]=Qc(n[t],e[t]));return n}function ix(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sx=()=>nI().__FIREBASE_DEFAULTS__,ox=()=>{if(typeof process>"u"||typeof $y>"u")return;const n=$y.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},ax=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&g_(n[1]);return e&&JSON.parse(e)},m_=()=>{try{return ex()||sx()||ox()||ax()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},rI=()=>{var n;return(n=m_())===null||n===void 0?void 0:n.config},lx=n=>{var e;return(e=m_())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iI(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Wc(JSON.stringify(t)),Wc(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function cx(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(wt())}function y_(){var n;const e=(n=m_())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function hx(){return typeof window<"u"||sI()}function sI(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function dx(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function oI(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function v_(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function aI(){const n=wt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function lI(){return!y_()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Hl(){try{return typeof indexedDB=="object"}catch{return!1}}function fx(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const px="FirebaseError";class fn extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=px,Object.setPrototypeOf(this,fn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,to.prototype.create)}}class to{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?_x(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new fn(i,a,r)}}function _x(n,e){return n.replace(gx,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const gx=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zy(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function mx(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ki(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],o=e[i];if(jy(s)&&jy(o)){if(!Ki(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function jy(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ia(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function No(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function ll(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function uI(n,e){const t=new yx(n,e);return t.subscribe.bind(t)}class yx{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");vx(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=lf),i.error===void 0&&(i.error=lf),i.complete===void 0&&(i.complete=lf);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function vx(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function lf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _e(n){return n&&n._delegate?n._delegate:n}class tr{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ms="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new ux;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(wx(e))try{this.getOrInitializeService({instanceIdentifier:ms})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ms){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ms){return this.instances.has(e)}getOptions(e=ms){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:bx(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ms){return this.component?this.component.multipleInstances?e:ms:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function bx(n){return n===ms?void 0:n}function wx(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Tx(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T_=[];var Me;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Me||(Me={}));const hI={debug:Me.DEBUG,verbose:Me.VERBOSE,info:Me.INFO,warn:Me.WARN,error:Me.ERROR,silent:Me.SILENT},Ix=Me.INFO,Ex={[Me.DEBUG]:"log",[Me.VERBOSE]:"log",[Me.INFO]:"info",[Me.WARN]:"warn",[Me.ERROR]:"error"},kx=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=Ex[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class jh{constructor(e){this.name=e,this._logLevel=Ix,this._logHandler=kx,this._userLogHandler=null,T_.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?hI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Me.DEBUG,...e),this._logHandler(this,Me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Me.VERBOSE,...e),this._logHandler(this,Me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Me.INFO,...e),this._logHandler(this,Me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Me.WARN,...e),this._logHandler(this,Me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Me.ERROR,...e),this._logHandler(this,Me.ERROR,...e)}}function Ax(n){T_.forEach(e=>{e.setLogLevel(n)})}function Sx(n,e){for(const t of T_){let r=null;e&&e.level&&(r=hI[e.level]),n===null?t.userLogHandler=null:t.userLogHandler=(i,s,...o)=>{const a=o.map(l=>{if(l==null)return null;if(typeof l=="string")return l;if(typeof l=="number"||typeof l=="boolean")return l.toString();if(l instanceof Error)return l.message;try{return JSON.stringify(l)}catch{return null}}).filter(l=>l).join(" ");s>=(r??i.logLevel)&&n({level:Me[s].toLowerCase(),message:a,args:o,type:i.name})}}}const Rx=(n,e)=>e.some(t=>n instanceof t);let qy,Gy;function Px(){return qy||(qy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Cx(){return Gy||(Gy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const dI=new WeakMap,Wf=new WeakMap,fI=new WeakMap,uf=new WeakMap,b_=new WeakMap;function xx(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Di(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&dI.set(t,n)}).catch(()=>{}),b_.set(e,n),e}function Ox(n){if(Wf.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});Wf.set(n,e)}let Qf={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Wf.get(n);if(e==="objectStoreNames")return n.objectStoreNames||fI.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Di(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Nx(n){Qf=n(Qf)}function Vx(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(cf(this),e,...t);return fI.set(r,e.sort?e.sort():[e]),Di(r)}:Cx().includes(n)?function(...e){return n.apply(cf(this),e),Di(dI.get(this))}:function(...e){return Di(n.apply(cf(this),e))}}function Dx(n){return typeof n=="function"?Vx(n):(n instanceof IDBTransaction&&Ox(n),Rx(n,Px())?new Proxy(n,Qf):n)}function Di(n){if(n instanceof IDBRequest)return xx(n);if(uf.has(n))return uf.get(n);const e=Dx(n);return e!==n&&(uf.set(n,e),b_.set(e,n)),e}const cf=n=>b_.get(n);function Mx(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(n,e),a=Di(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Di(o.result),l.oldVersion,l.newVersion,Di(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),a}const Lx=["get","getKey","getAll","getAllKeys","count"],Fx=["put","add","delete","clear"],hf=new Map;function Hy(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(hf.get(e))return hf.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=Fx.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Lx.includes(t)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let h=l.store;return r&&(h=h.index(a.shift())),(await Promise.all([h[t](...a),i&&l.done]))[0]};return hf.set(e,s),s}Nx(n=>({...n,get:(e,t,r)=>Hy(e,t)||n.get(e,t,r),has:(e,t)=>!!Hy(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Kx(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function Kx(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Yc="@firebase/app",Yf="0.11.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zr=new jh("@firebase/app"),Bx="@firebase/app-compat",$x="@firebase/analytics-compat",zx="@firebase/analytics",jx="@firebase/app-check-compat",qx="@firebase/app-check",Gx="@firebase/auth",Hx="@firebase/auth-compat",Wx="@firebase/database",Qx="@firebase/data-connect",Yx="@firebase/database-compat",Jx="@firebase/functions",Xx="@firebase/functions-compat",Zx="@firebase/installations",eO="@firebase/installations-compat",tO="@firebase/messaging",nO="@firebase/messaging-compat",rO="@firebase/performance",iO="@firebase/performance-compat",sO="@firebase/remote-config",oO="@firebase/remote-config-compat",aO="@firebase/storage",lO="@firebase/storage-compat",uO="@firebase/firestore",cO="@firebase/vertexai",hO="@firebase/firestore-compat",dO="firebase",fO="11.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bi="[DEFAULT]",pO={[Yc]:"fire-core",[Bx]:"fire-core-compat",[zx]:"fire-analytics",[$x]:"fire-analytics-compat",[qx]:"fire-app-check",[jx]:"fire-app-check-compat",[Gx]:"fire-auth",[Hx]:"fire-auth-compat",[Wx]:"fire-rtdb",[Qx]:"fire-data-connect",[Yx]:"fire-rtdb-compat",[Jx]:"fire-fn",[Xx]:"fire-fn-compat",[Zx]:"fire-iid",[eO]:"fire-iid-compat",[tO]:"fire-fcm",[nO]:"fire-fcm-compat",[rO]:"fire-perf",[iO]:"fire-perf-compat",[sO]:"fire-rc",[oO]:"fire-rc-compat",[aO]:"fire-gcs",[lO]:"fire-gcs-compat",[uO]:"fire-fst",[hO]:"fire-fst-compat",[cO]:"fire-vertex","fire-js":"fire-js",[dO]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $i=new Map,Zo=new Map,ea=new Map;function Wl(n,e){try{n.container.addComponent(e)}catch(t){Zr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function pI(n,e){n.container.addOrOverwriteComponent(e)}function ei(n){const e=n.name;if(ea.has(e))return Zr.debug(`There were multiple attempts to register component ${e}.`),!1;ea.set(e,n);for(const t of $i.values())Wl(t,n);for(const t of Zo.values())Wl(t,n);return!0}function _I(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function _O(n,e,t=Bi){_I(n,e).clearInstance(t)}function gI(n){return n.options!==void 0}function ct(n){return n==null?!1:n.settings!==void 0}function gO(){ea.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Zn=new to("app","Firebase",mO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mI=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new tr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Zn.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wy(n,e){const t=g_(n.split(".")[1]);if(t===null){console.error(`FirebaseServerApp ${e} is invalid: second part could not be parsed.`);return}if(JSON.parse(t).exp===void 0){console.error(`FirebaseServerApp ${e} is invalid: expiration claim could not be parsed`);return}const i=JSON.parse(t).exp*1e3,s=new Date().getTime();i-s<=0&&console.error(`FirebaseServerApp ${e} is invalid: the token has expired.`)}class yO extends mI{constructor(e,t,r,i){const s=t.automaticDataCollectionEnabled!==void 0?t.automaticDataCollectionEnabled:!1,o={name:r,automaticDataCollectionEnabled:s};if(e.apiKey!==void 0)super(e,o,i);else{const a=e;super(a.options,o,i)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:s},t),this._serverConfig.authIdToken&&Wy(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&Wy(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,Hn(Yc,Yf,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){I_(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Zn.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ai=fO;function w_(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Bi,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Zn.create("bad-app-name",{appName:String(i)});if(t||(t=rI()),!t)throw Zn.create("no-options");const s=$i.get(i);if(s){if(Ki(t,s.options)&&Ki(r,s.config))return s;throw Zn.create("duplicate-app",{appName:i})}const o=new cI(i);for(const l of ea.values())o.addComponent(l);const a=new mI(t,r,o);return $i.set(i,a),a}function vO(n,e){if(hx()&&!sI())throw Zn.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let t;gI(n)?t=n.options:t=n;const r=Object.assign(Object.assign({},e),t);r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const i=h=>[...h].reduce((f,u)=>Math.imul(31,f)+u.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw Zn.create("finalization-registry-not-supported",{});const s=""+i(JSON.stringify(r)),o=Zo.get(s);if(o)return o.incRefCount(e.releaseOnDeref),o;const a=new cI(s);for(const h of ea.values())a.addComponent(h);const l=new yO(t,e,s,a);return Zo.set(s,l),l}function TO(n=Bi){const e=$i.get(n);if(!e&&n===Bi&&rI())return w_();if(!e)throw Zn.create("no-app",{appName:n});return e}function bO(){return Array.from($i.values())}async function I_(n){let e=!1;const t=n.name;$i.has(t)?(e=!0,$i.delete(t)):Zo.has(t)&&n.decRefCount()<=0&&(Zo.delete(t),e=!0),e&&(await Promise.all(n.container.getProviders().map(r=>r.delete())),n.isDeleted=!0)}function Hn(n,e,t){var r;let i=(r=pO[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Zr.warn(a.join(" "));return}ei(new tr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function yI(n,e){if(n!==null&&typeof n!="function")throw Zn.create("invalid-log-argument");Sx(n,e)}function vI(n){Ax(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wO="firebase-heartbeat-database",IO=1,Ql="firebase-heartbeat-store";let df=null;function TI(){return df||(df=Mx(wO,IO,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Ql)}catch(t){console.warn(t)}}}}).catch(n=>{throw Zn.create("idb-open",{originalErrorMessage:n.message})})),df}async function EO(n){try{const t=(await TI()).transaction(Ql),r=await t.objectStore(Ql).get(bI(n));return await t.done,r}catch(e){if(e instanceof fn)Zr.warn(e.message);else{const t=Zn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Zr.warn(t.message)}}}async function Qy(n,e){try{const r=(await TI()).transaction(Ql,"readwrite");await r.objectStore(Ql).put(e,bI(n)),await r.done}catch(t){if(t instanceof fn)Zr.warn(t.message);else{const r=Zn.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Zr.warn(r.message)}}}function bI(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kO=1024,AO=30;class SO{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new PO(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Yy();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>AO){const o=CO(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Zr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Yy(),{heartbeatsToSend:r,unsentEntries:i}=RO(this._heartbeatsCache.heartbeats),s=Wc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return Zr.warn(t),""}}}function Yy(){return new Date().toISOString().substring(0,10)}function RO(n,e=kO){const t=[];let r=n.slice();for(const i of n){const s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Jy(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Jy(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class PO{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Hl()?fx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await EO(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return Qy(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return Qy(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Jy(n){return Wc(JSON.stringify({version:2,heartbeats:n})).length}function CO(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xO(n){ei(new tr("platform-logger",e=>new Ux(e),"PRIVATE")),ei(new tr("heartbeat",e=>new SO(e),"PRIVATE")),Hn(Yc,Yf,n),Hn(Yc,Yf,"esm2017"),Hn("fire-js","")}xO("");const OO=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:fn,SDK_VERSION:ai,_DEFAULT_ENTRY_NAME:Bi,_addComponent:Wl,_addOrOverwriteComponent:pI,_apps:$i,_clearComponents:gO,_components:ea,_getProvider:_I,_isFirebaseApp:gI,_isFirebaseServerApp:ct,_registerComponent:ei,_removeServiceInstance:_O,_serverApps:Zo,deleteApp:I_,getApp:TO,getApps:bO,initializeApp:w_,initializeServerApp:vO,onLog:yI,registerVersion:Hn,setLogLevel:vI},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NO{constructor(e,t){this._delegate=e,this.firebase=t,Wl(e,new tr("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),I_(this._delegate)))}_getService(e,t=Bi){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:t})}_removeServiceInstance(e,t=Bi){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){Wl(this._delegate,e)}_addOrOverwriteComponent(e){pI(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VO={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},Xy=new to("app-compat","Firebase",VO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DO(n){const e={},t={__esModule:!0,initializeApp:s,app:i,registerVersion:Hn,setLogLevel:vI,onLog:yI,apps:null,SDK_VERSION:ai,INTERNAL:{registerComponent:a,removeApp:r,useAsService:l,modularAPIs:OO}};t.default=t,Object.defineProperty(t,"apps",{get:o});function r(h){delete e[h]}function i(h){if(h=h||Bi,!zy(e,h))throw Xy.create("no-app",{appName:h});return e[h]}i.App=n;function s(h,f={}){const u=w_(h,f);if(zy(e,u.name))return e[u.name];const d=new n(u,t);return e[u.name]=d,d}function o(){return Object.keys(e).map(h=>e[h])}function a(h){const f=h.name,u=f.replace("-compat","");if(ei(h)&&h.type==="PUBLIC"){const d=(p=i())=>{if(typeof p[u]!="function")throw Xy.create("invalid-app-argument",{appName:f});return p[u]()};h.serviceProps!==void 0&&Qc(d,h.serviceProps),t[u]=d,n.prototype[u]=function(...p){return this._getService.bind(this,f).apply(this,h.multipleInstances?p:[])}}return h.type==="PUBLIC"?t[u]:null}function l(h,f){return f==="serverAuth"?null:f}return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wI(){const n=DO(NO);n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:wI,extendNamespace:e,createSubscribe:uI,ErrorFactory:to,deepExtend:Qc});function e(t){Qc(n,t)}return n}const MO=wI();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zy=new jh("@firebase/app-compat"),LO="@firebase/app-compat",FO="0.2.51";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UO(n){Hn(LO,FO,n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const n=nI();if(n.firebase!==void 0){Zy.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=n.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&Zy.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const Vr=MO;UO();var KO="firebase",BO="11.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vr.registerVersion(KO,BO,"app-compat");function E_(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}const Ya={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},mo={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $O(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}}function II(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const zO=$O,jO=II,EI=new to("auth","Firebase",II());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jc=new jh("@firebase/auth");function qO(n,...e){Jc.logLevel<=Me.WARN&&Jc.warn(`Auth (${ai}): ${n}`,...e)}function Ec(n,...e){Jc.logLevel<=Me.ERROR&&Jc.error(`Auth (${ai}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(n,...e){throw A_(n,...e)}function $t(n,...e){return A_(n,...e)}function k_(n,e,t){const r=Object.assign(Object.assign({},jO()),{[e]:t});return new to("auth","Firebase",r).create(e,{appName:n.name})}function Jt(n){return k_(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ea(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&sn(n,"argument-error"),k_(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function A_(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return EI.create(n,...e)}function J(n,e,...t){if(!n)throw A_(e,...t)}function wr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Ec(e),new Error(e)}function cr(n,e){n||wr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yl(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function S_(){return ev()==="http:"||ev()==="https:"}function ev(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GO(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(S_()||oI()||"connection"in navigator)?navigator.onLine:!0}function HO(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(e,t){this.shortDelay=e,this.longDelay=t,cr(t>e,"Short delay should be less than long delay!"),this.isMobile=cx()||v_()}get(){return GO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R_(n,e){cr(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;wr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;wr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;wr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QO=new Tu(3e4,6e4);function Rt(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Pt(n,e,t,r,i={}){return AI(n,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Ia(Object.assign({key:n.config.apiKey},o)).slice(1),l=await n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const h=Object.assign({method:e,headers:l},s);return dx()||(h.referrerPolicy="no-referrer"),kI.fetch()(SI(n,n.config.apiHost,t,a),h)})}async function AI(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},WO),e);try{const i=new JO(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw ul(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,h]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw ul(n,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw ul(n,"email-already-in-use",o);if(l==="USER_DISABLED")throw ul(n,"user-disabled",o);const f=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw k_(n,f,h);sn(n,f)}}catch(i){if(i instanceof fn)throw i;sn(n,"network-request-failed",{message:String(i)})}}async function li(n,e,t,r,i={}){const s=await Pt(n,e,t,r,i);return"mfaPendingCredential"in s&&sn(n,"multi-factor-auth-required",{_serverResponse:s}),s}function SI(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?R_(n.config,i):`${n.config.apiScheme}://${i}`}function YO(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class JO{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r($t(this.auth,"network-request-failed")),QO.get())})}}function ul(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=$t(n,e,r);return i.customData._tokenResponse=t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tv(n){return n!==void 0&&n.getResponse!==void 0}function nv(n){return n!==void 0&&n.enterprise!==void 0}class RI{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return YO(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XO(n){return(await Pt(n,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function PI(n,e){return Pt(n,"GET","/v2/recaptchaConfig",Rt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZO(n,e){return Pt(n,"POST","/v1/accounts:delete",e)}async function eN(n,e){return Pt(n,"POST","/v1/accounts:update",e)}async function CI(n,e){return Pt(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kl(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function tN(n,e=!1){const t=_e(n),r=await t.getIdToken(e),i=qh(r);J(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:kl(ff(i.auth_time)),issuedAtTime:kl(ff(i.iat)),expirationTime:kl(ff(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function ff(n){return Number(n)*1e3}function qh(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Ec("JWT malformed, contained fewer than 3 sections"),null;try{const i=g_(t);return i?JSON.parse(i):(Ec("Failed to decode base64 JWT payload"),null)}catch(i){return Ec("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function rv(n){const e=qh(n);return J(e,"internal-error"),J(typeof e.exp<"u","internal-error"),J(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ti(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof fn&&nN(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function nN({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=kl(this.lastLoginAt),this.creationTime=kl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jl(n){var e;const t=n.auth,r=await n.getIdToken(),i=await ti(n,CI(t,{idToken:r}));J(i==null?void 0:i.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?xI(s.providerUserInfo):[],a=sN(n.providerData,o),l=n.isAnonymous,h=!(n.email&&s.passwordHash)&&!(a!=null&&a.length),f=l?h:!1,u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Jf(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(n,u)}async function iN(n){const e=_e(n);await Jl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function sN(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function xI(n){return n.map(e=>{var{providerId:t}=e,r=E_(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oN(n,e){const t=await AI(n,{},async()=>{const r=Ia({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=SI(n,i,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",kI.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function aN(n,e){return Pt(n,"POST","/v2/accounts:revokeToken",Rt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){J(e.idToken,"internal-error"),J(typeof e.idToken<"u","internal-error"),J(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):rv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){J(e.length!==0,"internal-error");const t=rv(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(J(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:s}=await oN(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new Ko;return r&&(J(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(J(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(J(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ko,this.toJSON())}_performRefresh(){return wr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bi(n,e){J(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Gr{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=E_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new rN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Jf(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await ti(this,this.stsTokenManager.getToken(this.auth,e));return J(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return tN(this,e)}reload(){return iN(this)}_assign(e){this!==e&&(J(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Gr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){J(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Jl(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ct(this.auth.app))return Promise.reject(Jt(this.auth));const e=await this.getIdToken();return await ti(this,ZO(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,l,h,f;const u=(r=t.displayName)!==null&&r!==void 0?r:void 0,d=(i=t.email)!==null&&i!==void 0?i:void 0,p=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,m=(o=t.photoURL)!==null&&o!==void 0?o:void 0,T=(a=t.tenantId)!==null&&a!==void 0?a:void 0,v=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,I=(h=t.createdAt)!==null&&h!==void 0?h:void 0,C=(f=t.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:M,emailVerified:U,isAnonymous:ee,providerData:ne,stsTokenManager:k}=t;J(M&&k,e,"internal-error");const w=Ko.fromJSON(this.name,k);J(typeof M=="string",e,"internal-error"),bi(u,e.name),bi(d,e.name),J(typeof U=="boolean",e,"internal-error"),J(typeof ee=="boolean",e,"internal-error"),bi(p,e.name),bi(m,e.name),bi(T,e.name),bi(v,e.name),bi(I,e.name),bi(C,e.name);const b=new Gr({uid:M,auth:e,email:d,emailVerified:U,displayName:u,isAnonymous:ee,photoURL:m,phoneNumber:p,tenantId:T,stsTokenManager:w,createdAt:I,lastLoginAt:C});return ne&&Array.isArray(ne)&&(b.providerData=ne.map(R=>Object.assign({},R))),v&&(b._redirectEventId=v),b}static async _fromIdTokenResponse(e,t,r=!1){const i=new Ko;i.updateFromServerResponse(t);const s=new Gr({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Jl(s),s}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];J(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?xI(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Ko;a.updateFromIdToken(r);const l=new Gr({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Jf(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,h),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iv=new Map;function qn(n){cr(n instanceof Function,"Expected a class definition");let e=iv.get(n);return e?(cr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,iv.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}OI.type="NONE";const ta=OI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ns(n,e,t){return`firebase:${n}:${e}:${t}`}class Bo{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Ns(this.userKey,i.apiKey,s),this.fullPersistenceKey=Ns("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Gr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Bo(qn(ta),e,r);const i=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let s=i[0]||qn(ta);const o=Ns(r,e.config.apiKey,e.name);let a=null;for(const h of t)try{const f=await h._get(o);if(f){const u=Gr._fromJSON(e,f);h!==s&&(a=u),s=h;break}}catch{}const l=i.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Bo(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async h=>{if(h!==s)try{await h._remove(o)}catch{}})),new Bo(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sv(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(MI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(NI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(LI(e))return"Blackberry";if(FI(e))return"Webos";if(VI(e))return"Safari";if((e.includes("chrome/")||DI(e))&&!e.includes("edge/"))return"Chrome";if(bu(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function NI(n=wt()){return/firefox\//i.test(n)}function VI(n=wt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function DI(n=wt()){return/crios\//i.test(n)}function MI(n=wt()){return/iemobile/i.test(n)}function bu(n=wt()){return/android/i.test(n)}function LI(n=wt()){return/blackberry/i.test(n)}function FI(n=wt()){return/webos/i.test(n)}function wu(n=wt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function lN(n=wt()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(n)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(n)}function uN(n=wt()){var e;return wu(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function cN(){return aI()&&document.documentMode===10}function UI(n=wt()){return wu(n)||bu(n)||FI(n)||LI(n)||/windows phone/i.test(n)||MI(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KI(n,e=[]){let t;switch(n){case"Browser":t=sv(wt());break;case"Worker":t=`${sv(wt())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ai}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dN(n,e={}){return Pt(n,"GET","/v2/passwordPolicy",Rt(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fN=6;class pN{constructor(e){var t,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:fN,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ov(this),this.idTokenSubscription=new ov(this),this.beforeStateQueue=new hN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=EI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=qn(t)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Bo.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await CI(this,{idToken:e}),r=await Gr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(ct(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return J(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Jl(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=HO()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ct(this.app))return Promise.reject(Jt(this));const t=e?_e(e):null;return t&&J(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&J(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ct(this.app)?Promise.reject(Jt(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ct(this.app)?Promise.reject(Jt(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(qn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await dN(this),t=new pN(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new to("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await aN(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&qn(e)||this._popupRedirectResolver;J(t,this,"argument-error"),this.redirectPersistenceManager=await Bo.create(this,[qn(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(J(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){const l=e.addObserver(t,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(t);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return J(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=KI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(ct(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&qO(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function It(n){return _e(n)}class ov{constructor(e){this.auth=e,this.observer=null,this.addObserver=uI(t=>this.observer=t)}get next(){return J(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Iu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function gN(n){Iu=n}function P_(n){return Iu.loadJS(n)}function mN(){return Iu.recaptchaV2Script}function yN(){return Iu.recaptchaEnterpriseScript}function vN(){return Iu.gapiScript}function BI(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TN=500,bN=6e4,oc=1e12;class wN{constructor(e){this.auth=e,this.counter=oc,this._widgets=new Map}render(e,t){const r=this.counter;return this._widgets.set(r,new kN(e,this.auth.name,t||{})),this.counter++,r}reset(e){var t;const r=e||oc;(t=this._widgets.get(r))===null||t===void 0||t.delete(),this._widgets.delete(r)}getResponse(e){var t;const r=e||oc;return((t=this._widgets.get(r))===null||t===void 0?void 0:t.getResponse())||""}async execute(e){var t;const r=e||oc;return(t=this._widgets.get(r))===null||t===void 0||t.execute(),""}}class IN{constructor(){this.enterprise=new EN}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class EN{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class kN{constructor(e,t,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;J(i,"argument-error",{appName:t}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=AN(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},bN)},TN))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function AN(n){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<n;r++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}const SN="recaptcha-enterprise",Al="NO_RECAPTCHA";class $I{constructor(e){this.type=SN,this.auth=It(e)}async verify(e="verify",t=!1){async function r(s){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{PI(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const h=new RI(l);return s.tenantId==null?s._agentRecaptchaConfig=h:s._tenantRecaptchaConfigs[s.tenantId]=h,o(h.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;nv(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(h=>{o(h)}).catch(()=>{o(Al)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new IN().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!t&&nv(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=yN();l.length!==0&&(l+=a),P_(l).then(()=>{i(a,s,o)}).catch(h=>{o(h)})}}).catch(a=>{o(a)})})}}async function Ja(n,e,t,r=!1,i=!1){const s=new $I(n);let o;if(i)o=Al;else try{o=await s.verify(t)}catch{o=await s.verify(t,!0)}const a=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,h=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:h,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Mi(n,e,t,r,i){var s,o;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await Ja(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await Ja(n,e,t,t==="getOobCode");return r(n,l)}else return Promise.reject(a)});else if(i==="PHONE_PROVIDER")if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("PHONE_PROVIDER")){const a=await Ja(n,e,t);return r(n,a).catch(async l=>{var h;if(((h=n._getRecaptchaConfig())===null||h===void 0?void 0:h.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(l.code==="auth/missing-recaptcha-token"||l.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);const f=await Ja(n,e,t,!1,!0);return r(n,f)}return Promise.reject(l)})}else{const a=await Ja(n,e,t,!1,!0);return r(n,a)}else return Promise.reject(i+" provider is not supported.")}async function RN(n){const e=It(n),t=await PI(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new RI(t);e.tenantId==null?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isAnyProviderEnabled()&&new $I(e).verify()}function PN(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(qn);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function CN(n,e,t){const r=It(n);J(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(t!=null&&t.disableWarnings),s=zI(e),{host:o,port:a}=xN(e),l=a===null?"":`:${a}`,h={url:`${s}//${o}${l}/`},f=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){J(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),J(Ki(h,r.config.emulator)&&Ki(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=h,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,i||ON()}function zI(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function xN(n){const e=zI(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:av(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:av(o)}}}function av(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function ON(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return wr("not implemented")}_getIdTokenResponse(e){return wr("not implemented")}_linkToIdToken(e,t){return wr("not implemented")}_getReauthenticationResolver(e){return wr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jI(n,e){return Pt(n,"POST","/v1/accounts:resetPassword",Rt(n,e))}async function NN(n,e){return Pt(n,"POST","/v1/accounts:update",e)}async function VN(n,e){return Pt(n,"POST","/v1/accounts:signUp",e)}async function DN(n,e){return Pt(n,"POST","/v1/accounts:update",Rt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MN(n,e){return li(n,"POST","/v1/accounts:signInWithPassword",Rt(n,e))}async function Gh(n,e){return Pt(n,"POST","/v1/accounts:sendOobCode",Rt(n,e))}async function LN(n,e){return Gh(n,e)}async function FN(n,e){return Gh(n,e)}async function UN(n,e){return Gh(n,e)}async function KN(n,e){return Gh(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BN(n,e){return li(n,"POST","/v1/accounts:signInWithEmailLink",Rt(n,e))}async function $N(n,e){return li(n,"POST","/v1/accounts:signInWithEmailLink",Rt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl extends ka{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Xl(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Xl(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Mi(e,t,"signInWithPassword",MN,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return BN(e,{email:this._email,oobCode:this._password});default:sn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Mi(e,r,"signUpPassword",VN,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return $N(e,{idToken:t,email:this._email,oobCode:this._password});default:sn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yr(n,e){return li(n,"POST","/v1/accounts:signInWithIdp",Rt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zN="http://localhost";class Cr extends ka{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Cr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):sn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=E_(t,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Cr(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return Yr(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Yr(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Yr(e,t)}buildRequest(){const e={requestUri:zN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ia(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lv(n,e){return Pt(n,"POST","/v1/accounts:sendVerificationCode",Rt(n,e))}async function jN(n,e){return li(n,"POST","/v1/accounts:signInWithPhoneNumber",Rt(n,e))}async function qN(n,e){const t=await li(n,"POST","/v1/accounts:signInWithPhoneNumber",Rt(n,e));if(t.temporaryProof)throw ul(n,"account-exists-with-different-credential",t);return t}const GN={USER_NOT_FOUND:"user-not-found"};async function HN(n,e){const t=Object.assign(Object.assign({},e),{operation:"REAUTH"});return li(n,"POST","/v1/accounts:signInWithPhoneNumber",Rt(n,t),GN)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs extends ka{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Vs({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Vs({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return jN(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return qN(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return HN(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:r,verificationCode:i}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:r,phoneNumber:i,temporaryProof:s}=e;return!r&&!t&&!i&&!s?null:new Vs({verificationId:t,verificationCode:r,phoneNumber:i,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WN(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function QN(n){const e=No(ll(n)).link,t=e?No(ll(e)).deep_link_id:null,r=No(ll(n)).deep_link_id;return(r?No(ll(r)).link:null)||r||t||e||n}class Hh{constructor(e){var t,r,i,s,o,a;const l=No(ll(e)),h=(t=l.apiKey)!==null&&t!==void 0?t:null,f=(r=l.oobCode)!==null&&r!==void 0?r:null,u=WN((i=l.mode)!==null&&i!==void 0?i:null);J(h&&f&&u,"argument-error"),this.apiKey=h,this.operation=u,this.code=f,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const t=QN(e);try{return new Hh(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(){this.providerId=ns.PROVIDER_ID}static credential(e,t){return Xl._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Hh.parseLink(t);return J(r,"argument-error"),Xl._fromEmailAndCode(e,r.code,r.tenantId)}}ns.PROVIDER_ID="password";ns.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ns.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa extends ui{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class $o extends Aa{static credentialFromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;return J("providerId"in t&&"signInMethod"in t,"argument-error"),Cr._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return J(e.idToken||e.accessToken,"argument-error"),Cr._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return $o.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return $o.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=e;if(!r&&!i&&!t&&!s||!a)return null;try{return new $o(a)._credential({idToken:t,accessToken:r,nonce:o,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr extends Aa{constructor(){super("facebook.com")}static credential(e){return Cr._fromParams({providerId:mr.PROVIDER_ID,signInMethod:mr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return mr.credentialFromTaggedObject(e)}static credentialFromError(e){return mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return mr.credential(e.oauthAccessToken)}catch{return null}}}mr.FACEBOOK_SIGN_IN_METHOD="facebook.com";mr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr extends Aa{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Cr._fromParams({providerId:yr.PROVIDER_ID,signInMethod:yr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return yr.credentialFromTaggedObject(e)}static credentialFromError(e){return yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return yr.credential(t,r)}catch{return null}}}yr.GOOGLE_SIGN_IN_METHOD="google.com";yr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr extends Aa{constructor(){super("github.com")}static credential(e){return Cr._fromParams({providerId:vr.PROVIDER_ID,signInMethod:vr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vr.credentialFromTaggedObject(e)}static credentialFromError(e){return vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vr.credential(e.oauthAccessToken)}catch{return null}}}vr.GITHUB_SIGN_IN_METHOD="github.com";vr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YN="http://localhost";class na extends ka{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){const t=this.buildRequest();return Yr(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Yr(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Yr(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:s}=t;return!r||!i||!s||r!==i?null:new na(r,s)}static _create(e,t){return new na(e,t)}buildRequest(){return{requestUri:YN,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JN="saml.";class Xc extends ui{constructor(e){J(e.startsWith(JN),"argument-error"),super(e)}static credentialFromResult(e){return Xc.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Xc.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=na.fromJSON(e);return J(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:r}=e;if(!t||!r)return null;try{return na._create(r,t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr extends Aa{constructor(){super("twitter.com")}static credential(e,t){return Cr._fromParams({providerId:Tr.PROVIDER_ID,signInMethod:Tr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Tr.credentialFromTaggedObject(e)}static credentialFromError(e){return Tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Tr.credential(t,r)}catch{return null}}}Tr.TWITTER_SIGN_IN_METHOD="twitter.com";Tr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qI(n,e){return li(n,"POST","/v1/accounts:signUp",Rt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const s=await Gr._fromIdTokenResponse(e,r,i),o=uv(r);return new nr({user:s,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=uv(r);return new nr({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function uv(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XN(n){var e;if(ct(n.app))return Promise.reject(Jt(n));const t=It(n);if(await t._initializationPromise,!((e=t.currentUser)===null||e===void 0)&&e.isAnonymous)return new nr({user:t.currentUser,providerId:null,operationType:"signIn"});const r=await qI(t,{returnSecureToken:!0}),i=await nr._fromIdTokenResponse(t,"signIn",r,!0);return await t._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc extends fn{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Zc.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new Zc(e,t,r,i)}}function GI(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Zc._fromErrorAndOperation(n,s,e,r):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HI(n){return new Set(n.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZN(n,e){const t=_e(n);await Wh(!0,t,e);const{providerUserInfo:r}=await eN(t.auth,{idToken:await t.getIdToken(),deleteProvider:[e]}),i=HI(r||[]);return t.providerData=t.providerData.filter(s=>i.has(s.providerId)),i.has("phone")||(t.phoneNumber=null),await t.auth._persistUserIfCurrent(t),t}async function C_(n,e,t=!1){const r=await ti(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return nr._forOperation(n,"link",r)}async function Wh(n,e,t){await Jl(e);const r=HI(e.providerData),i=n===!1?"provider-already-linked":"no-such-provider";J(r.has(t)===n,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WI(n,e,t=!1){const{auth:r}=n;if(ct(r.app))return Promise.reject(Jt(r));const i="reauthenticate";try{const s=await ti(n,GI(r,i,e,n),t);J(s.idToken,r,"internal-error");const o=qh(s.idToken);J(o,r,"internal-error");const{sub:a}=o;return J(n.uid===a,r,"user-mismatch"),nr._forOperation(n,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&sn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QI(n,e,t=!1){if(ct(n.app))return Promise.reject(Jt(n));const r="signIn",i=await GI(n,r,e),s=await nr._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}async function Qh(n,e){return QI(It(n),e)}async function YI(n,e){const t=_e(n);return await Wh(!1,t,e.providerId),C_(t,e)}async function JI(n,e){return WI(_e(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eV(n,e){return li(n,"POST","/v1/accounts:signInWithCustomToken",Rt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tV(n,e){if(ct(n.app))return Promise.reject(Jt(n));const t=It(n),r=await eV(t,{token:e,returnSecureToken:!0}),i=await nr._fromIdTokenResponse(t,"signIn",r);return await t._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?x_._fromServerResponse(e,t):"totpInfo"in t?O_._fromServerResponse(e,t):sn(e,"internal-error")}}class x_ extends Eu{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new x_(t)}}class O_ extends Eu{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new O_(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yh(n,e,t){var r;J(((r=t.url)===null||r===void 0?void 0:r.length)>0,n,"invalid-continue-uri"),J(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),J(typeof t.linkDomain>"u"||t.linkDomain.length>0,n,"invalid-hosting-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.linkDomain=t.linkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(J(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(J(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N_(n){const e=It(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function nV(n,e,t){const r=It(n),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&Yh(r,i,t),await Mi(r,i,"getOobCode",FN,"EMAIL_PASSWORD_PROVIDER")}async function rV(n,e,t){await jI(_e(n),{oobCode:e,newPassword:t}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&N_(n),r})}async function iV(n,e){await DN(_e(n),{oobCode:e})}async function XI(n,e){const t=_e(n),r=await jI(t,{oobCode:e}),i=r.requestType;switch(J(i,t,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":J(r.newEmail,t,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":J(r.mfaInfo,t,"internal-error");default:J(r.email,t,"internal-error")}let s=null;return r.mfaInfo&&(s=Eu._fromServerResponse(It(t),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function sV(n,e){const{data:t}=await XI(_e(n),e);return t.email}async function oV(n,e,t){if(ct(n.app))return Promise.reject(Jt(n));const r=It(n),o=await Mi(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",qI,"EMAIL_PASSWORD_PROVIDER").catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&N_(n),l}),a=await nr._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function aV(n,e,t){return ct(n.app)?Promise.reject(Jt(n)):Qh(_e(n),ns.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&N_(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lV(n,e,t){const r=It(n),i={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function s(o,a){J(a.handleCodeInApp,r,"argument-error"),a&&Yh(r,o,a)}s(i,t),await Mi(r,i,"getOobCode",UN,"EMAIL_PASSWORD_PROVIDER")}function uV(n,e){const t=Hh.parseLink(e);return(t==null?void 0:t.operation)==="EMAIL_SIGNIN"}async function cV(n,e,t){if(ct(n.app))return Promise.reject(Jt(n));const r=_e(n),i=ns.credentialWithLink(e,t||Yl());return J(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Qh(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hV(n,e){return Pt(n,"POST","/v1/accounts:createAuthUri",Rt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dV(n,e){const t=S_()?Yl():"http://localhost",r={identifier:e,continueUri:t},{signinMethods:i}=await hV(_e(n),r);return i||[]}async function fV(n,e){const t=_e(n),i={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()};e&&Yh(t.auth,i,e);const{email:s}=await LN(t.auth,i);s!==n.email&&await n.reload()}async function pV(n,e,t){const r=_e(n),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await n.getIdToken(),newEmail:e};t&&Yh(r.auth,s,t);const{email:o}=await KN(r.auth,s);o!==n.email&&await n.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _V(n,e){return Pt(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gV(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=_e(n),s={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},o=await ti(r,_V(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function mV(n,e){const t=_e(n);return ct(t.auth.app)?Promise.reject(Jt(t.auth)):ZI(t,e,null)}function yV(n,e){return ZI(_e(n),null,e)}async function ZI(n,e,t){const{auth:r}=n,s={idToken:await n.getIdToken(),returnSecureToken:!0};e&&(s.email=e),t&&(s.password=t);const o=await ti(n,NN(r,s));await n._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vV(n){var e,t;if(!n)return null;const{providerId:r}=n,i=n.rawUserInfo?JSON.parse(n.rawUserInfo):{},s=n.isNewUser||n.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(n!=null&&n.idToken)){const o=(t=(e=qh(n.idToken))===null||e===void 0?void 0:e.firebase)===null||t===void 0?void 0:t.sign_in_provider;if(o){const a=o!=="anonymous"&&o!=="custom"?o:null;return new zo(s,a)}}if(!r)return null;switch(r){case"facebook.com":return new TV(s,i);case"github.com":return new bV(s,i);case"google.com":return new wV(s,i);case"twitter.com":return new IV(s,i,n.screenName||null);case"custom":case"anonymous":return new zo(s,null);default:return new zo(s,r,i)}}class zo{constructor(e,t,r={}){this.isNewUser=e,this.providerId=t,this.profile=r}}class eE extends zo{constructor(e,t,r,i){super(e,t,r),this.username=i}}class TV extends zo{constructor(e,t){super(e,"facebook.com",t)}}class bV extends eE{constructor(e,t){super(e,"github.com",t,typeof(t==null?void 0:t.login)=="string"?t==null?void 0:t.login:null)}}class wV extends zo{constructor(e,t){super(e,"google.com",t)}}class IV extends eE{constructor(e,t,r){super(e,"twitter.com",t,r)}}function EV(n){const{user:e,_tokenResponse:t}=n;return e.isAnonymous&&!t?{providerId:null,isNewUser:!1,profile:null}:vV(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e,t,r){this.type=e,this.credential=t,this.user=r}static _fromIdtoken(e,t){return new As("enroll",e,t)}static _fromMfaPendingCredential(e){return new As("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,r;if(e!=null&&e.multiFactorSession){if(!((t=e.multiFactorSession)===null||t===void 0)&&t.pendingCredential)return As._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((r=e.multiFactorSession)===null||r===void 0)&&r.idToken)return As._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_{constructor(e,t,r){this.session=e,this.hints=t,this.signInResolver=r}static _fromError(e,t){const r=It(e),i=t.customData._serverResponse,s=(i.mfaInfo||[]).map(a=>Eu._fromServerResponse(r,a));J(i.mfaPendingCredential,r,"internal-error");const o=As._fromMfaPendingCredential(i.mfaPendingCredential);return new V_(o,s,async a=>{const l=await a._process(r,o);delete i.mfaInfo,delete i.mfaPendingCredential;const h=Object.assign(Object.assign({},i),{idToken:l.idToken,refreshToken:l.refreshToken});switch(t.operationType){case"signIn":const f=await nr._fromIdTokenResponse(r,t.operationType,h);return await r._updateCurrentUser(f.user),f;case"reauthenticate":return J(t.user,r,"internal-error"),nr._forOperation(t.user,t.operationType,h);default:sn(r,"internal-error")}})}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}function kV(n,e){var t;const r=_e(n),i=e;return J(e.customData.operationType,r,"argument-error"),J((t=i.customData._serverResponse)===null||t===void 0?void 0:t.mfaPendingCredential,r,"argument-error"),V_._fromError(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cv(n,e){return Pt(n,"POST","/v2/accounts/mfaEnrollment:start",Rt(n,e))}function AV(n,e){return Pt(n,"POST","/v2/accounts/mfaEnrollment:finalize",Rt(n,e))}function SV(n,e){return Pt(n,"POST","/v2/accounts/mfaEnrollment:withdraw",Rt(n,e))}class D_{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(r=>Eu._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new D_(e)}async getSession(){return As._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const r=e,i=await this.getSession(),s=await ti(this.user,r._process(this.user.auth,i,t));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){const t=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const i=await ti(this.user,SV(this.user.auth,{idToken:r,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter(({uid:s})=>s!==t),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const pf=new WeakMap;function RV(n){const e=_e(n);return pf.has(e)||pf.set(e,D_._fromUser(e)),pf.get(e)}const eh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tE{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(eh,"1"),this.storage.removeItem(eh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PV=1e3,CV=10;class nE extends tE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=UI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!t&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);cN()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,CV):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},PV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}nE.type="LOCAL";const M_=nE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE extends tE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}rE.type="SESSION";const Ks=rE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xV(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new Jh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:s}=t.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async h=>h(t.origin,s)),l=await xV(a);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Jh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ku(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OV{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const h=ku("",20);i.port1.start();const f=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(u){const d=u;if(d.data.eventId===h)switch(d.data.status){case"ack":clearTimeout(f),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(f),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ft(){return window}function NV(n){Ft().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L_(){return typeof Ft().WorkerGlobalScope<"u"&&typeof Ft().importScripts=="function"}async function VV(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function DV(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function MV(){return L_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE="firebaseLocalStorageDb",LV=1,th="firebaseLocalStorage",sE="fbase_key";class Au{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Xh(n,e){return n.transaction([th],e?"readwrite":"readonly").objectStore(th)}function FV(){const n=indexedDB.deleteDatabase(iE);return new Au(n).toPromise()}function Xf(){const n=indexedDB.open(iE,LV);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(th,{keyPath:sE})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(th)?e(r):(r.close(),await FV(),e(await Xf()))})})}async function hv(n,e,t){const r=Xh(n,!0).put({[sE]:e,value:t});return new Au(r).toPromise()}async function UV(n,e){const t=Xh(n,!1).get(e),r=await new Au(t).toPromise();return r===void 0?null:r.value}function dv(n,e){const t=Xh(n,!0).delete(e);return new Au(t).toPromise()}const KV=800,BV=3;class oE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Xf(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>BV)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return L_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Jh._getInstance(MV()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await VV(),!this.activeServiceWorker)return;this.sender=new OV(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||DV()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Xf();return await hv(e,eh,"1"),await dv(e,eh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>hv(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>UV(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>dv(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Xh(i,!1).getAll();return new Au(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),KV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}oE.type="LOCAL";const Zl=oE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fv(n,e){return Pt(n,"POST","/v2/accounts/mfaSignIn:start",Rt(n,e))}function $V(n,e){return Pt(n,"POST","/v2/accounts/mfaSignIn:finalize",Rt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _f=BI("rcb"),zV=new Tu(3e4,6e4);class jV{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=Ft().grecaptcha)===null||e===void 0)&&e.render)}load(e,t=""){return J(qV(t),e,"argument-error"),this.shouldResolveImmediately(t)&&tv(Ft().grecaptcha)?Promise.resolve(Ft().grecaptcha):new Promise((r,i)=>{const s=Ft().setTimeout(()=>{i($t(e,"network-request-failed"))},zV.get());Ft()[_f]=()=>{Ft().clearTimeout(s),delete Ft()[_f];const a=Ft().grecaptcha;if(!a||!tv(a)){i($t(e,"internal-error"));return}const l=a.render;a.render=(h,f)=>{const u=l(h,f);return this.counter++,u},this.hostLanguage=t,r(a)};const o=`${mN()}?${Ia({onload:_f,render:"explicit",hl:t})}`;P_(o).catch(()=>{clearTimeout(s),i($t(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(!((t=Ft().grecaptcha)===null||t===void 0)&&t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function qV(n){return n.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(n)}class GV{async load(e){return new wN(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sl="recaptcha",HV={theme:"light",type:"image"};let WV=class{constructor(e,t,r=Object.assign({},HV)){this.parameters=r,this.type=Sl,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=It(e),this.isInvisible=this.parameters.size==="invisible",J(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof t=="string"?document.getElementById(t):t;J(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new GV:new jV,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),r=t.getResponse(e);return r||new Promise(i=>{const s=o=>{o&&(this.tokenChangeListeners.delete(s),i(o))};this.tokenChangeListeners.add(s),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){J(!this.parameters.sitekey,this.auth,"argument-error"),J(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),J(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(r=>r(t)),typeof e=="function")e(t);else if(typeof e=="string"){const r=Ft()[e];typeof r=="function"&&r(t)}}}assertNotDestroyed(){J(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){J(S_()&&!L_(),this.auth,"internal-error"),await QV(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await XO(this.auth);J(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return J(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function QV(){let n=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}n=()=>e(),window.addEventListener("load",n)}).catch(e=>{throw n&&window.removeEventListener("load",n),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=Vs._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function YV(n,e,t){if(ct(n.app))return Promise.reject(Jt(n));const r=It(n),i=await Zh(r,e,_e(t));return new F_(i,s=>Qh(r,s))}async function JV(n,e,t){const r=_e(n);await Wh(!1,r,"phone");const i=await Zh(r.auth,e,_e(t));return new F_(i,s=>YI(r,s))}async function XV(n,e,t){const r=_e(n);if(ct(r.auth.app))return Promise.reject(Jt(r.auth));const i=await Zh(r.auth,e,_e(t));return new F_(i,s=>JI(r,s))}async function Zh(n,e,t){var r;if(!n._getRecaptchaConfig())try{await RN(n)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(typeof e=="string"?i={phoneNumber:e}:i=e,"session"in i){const s=i.session;if("phoneNumber"in i){J(s.type==="enroll",n,"internal-error");const o={idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await Mi(n,o,"mfaSmsEnrollment",async(f,u)=>{if(u.phoneEnrollmentInfo.captchaResponse===Al){J((t==null?void 0:t.type)===Sl,f,"argument-error");const d=await gf(f,u,t);return cv(f,d)}return cv(f,u)},"PHONE_PROVIDER").catch(f=>Promise.reject(f))).phoneSessionInfo.sessionInfo}else{J(s.type==="signin",n,"internal-error");const o=((r=i.multiFactorHint)===null||r===void 0?void 0:r.uid)||i.multiFactorUid;J(o,n,"missing-multi-factor-info");const a={mfaPendingCredential:s.credential,mfaEnrollmentId:o,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await Mi(n,a,"mfaSmsSignIn",async(u,d)=>{if(d.phoneSignInInfo.captchaResponse===Al){J((t==null?void 0:t.type)===Sl,u,"argument-error");const p=await gf(u,d,t);return fv(u,p)}return fv(u,d)},"PHONE_PROVIDER").catch(u=>Promise.reject(u))).phoneResponseInfo.sessionInfo}}else{const s={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await Mi(n,s,"sendVerificationCode",async(h,f)=>{if(f.captchaResponse===Al){J((t==null?void 0:t.type)===Sl,h,"argument-error");const u=await gf(h,f,t);return lv(h,u)}return lv(h,f)},"PHONE_PROVIDER").catch(h=>Promise.reject(h))).sessionInfo}}finally{t==null||t._reset()}}async function ZV(n,e){const t=_e(n);if(ct(t.auth.app))return Promise.reject(Jt(t.auth));await C_(t,e)}async function gf(n,e,t){J(t.type===Sl,n,"argument-error");const r=await t.verify();J(typeof r=="string",n,"argument-error");const i=Object.assign({},e);if("phoneEnrollmentInfo"in i){const s=i.phoneEnrollmentInfo.phoneNumber,o=i.phoneEnrollmentInfo.captchaResponse,a=i.phoneEnrollmentInfo.clientType,l=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:s,recaptchaToken:r,captchaResponse:o,clientType:a,recaptchaVersion:l}}),i}else if("phoneSignInInfo"in i){const s=i.phoneSignInInfo.captchaResponse,o=i.phoneSignInInfo.clientType,a=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:s,clientType:o,recaptchaVersion:a}}),i}else return Object.assign(i,{recaptchaToken:r}),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bs=class kc{constructor(e){this.providerId=kc.PROVIDER_ID,this.auth=It(e)}verifyPhoneNumber(e,t){return Zh(this.auth,e,_e(t))}static credential(e,t){return Vs._fromVerification(e,t)}static credentialFromResult(e){const t=e;return kc.credentialFromTaggedObject(t)}static credentialFromError(e){return kc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:r}=e;return t&&r?Vs._fromTokenResponse(t,r):null}};Bs.PROVIDER_ID="phone";Bs.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function no(n,e){return e?qn(e):(J(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_ extends ka{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Yr(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Yr(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Yr(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function eD(n){return QI(n.auth,new U_(n),n.bypassAuthState)}function tD(n){const{auth:e,user:t}=n;return J(t,e,"internal-error"),WI(t,new U_(n),n.bypassAuthState)}async function nD(n){const{auth:e,user:t}=n;return J(t,e,"internal-error"),C_(t,new U_(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return eD;case"linkViaPopup":case"linkViaRedirect":return nD;case"reauthViaPopup":case"reauthViaRedirect":return tD;default:sn(this.auth,"internal-error")}}resolve(e){cr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){cr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rD=new Tu(2e3,1e4);async function iD(n,e,t){if(ct(n.app))return Promise.reject($t(n,"operation-not-supported-in-this-environment"));const r=It(n);Ea(n,e,ui);const i=no(r,t);return new Hr(r,"signInViaPopup",e,i).executeNotNull()}async function sD(n,e,t){const r=_e(n);if(ct(r.auth.app))return Promise.reject($t(r.auth,"operation-not-supported-in-this-environment"));Ea(r.auth,e,ui);const i=no(r.auth,t);return new Hr(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function oD(n,e,t){const r=_e(n);Ea(r.auth,e,ui);const i=no(r.auth,t);return new Hr(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class Hr extends aE{constructor(e,t,r,i,s){super(e,t,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Hr.currentPopupAction&&Hr.currentPopupAction.cancel(),Hr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return J(e,this.auth,"internal-error"),e}async onExecution(){cr(this.filter.length===1,"Popup operations only handle one event");const e=ku();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject($t(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject($t(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Hr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject($t(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,rD.get())};e()}}Hr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aD="pendingRedirect",Rl=new Map;class lD extends aE{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Rl.get(this.auth._key());if(!e){try{const r=await uD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Rl.set(this.auth._key(),e)}return this.bypassAuthState||Rl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function uD(n,e){const t=uE(e),r=lE(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}async function K_(n,e){return lE(n)._set(uE(e),"true")}function cD(){Rl.clear()}function B_(n,e){Rl.set(n._key(),e)}function lE(n){return qn(n._redirectPersistence)}function uE(n){return Ns(aD,n.config.apiKey,n.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hD(n,e,t){return dD(n,e,t)}async function dD(n,e,t){if(ct(n.app))return Promise.reject(Jt(n));const r=It(n);Ea(n,e,ui),await r._initializationPromise;const i=no(r,t);return await K_(i,r),i._openRedirect(r,e,"signInViaRedirect")}function fD(n,e,t){return pD(n,e,t)}async function pD(n,e,t){const r=_e(n);if(Ea(r.auth,e,ui),ct(r.auth.app))return Promise.reject(Jt(r.auth));await r.auth._initializationPromise;const i=no(r.auth,t);await K_(i,r.auth);const s=await cE(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",s)}function _D(n,e,t){return gD(n,e,t)}async function gD(n,e,t){const r=_e(n);Ea(r.auth,e,ui),await r.auth._initializationPromise;const i=no(r.auth,t);await Wh(!1,r,e.providerId),await K_(i,r.auth);const s=await cE(r);return i._openRedirect(r.auth,e,"linkViaRedirect",s)}async function mD(n,e){return await It(n)._initializationPromise,ed(n,e,!1)}async function ed(n,e,t=!1){if(ct(n.app))return Promise.reject(Jt(n));const r=It(n),i=no(r,e),o=await new lD(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}async function cE(n){const e=ku(`${n.uid}:::`);return n._redirectEventId=e,await n.auth._setRedirectUser(n),await n.auth._persistUserIfCurrent(n),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yD=10*60*1e3;class hE{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!vD(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!dE(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError($t(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=yD&&this.cachedEventUids.clear(),this.cachedEventUids.has(pv(e))}saveEventToCache(e){this.cachedEventUids.add(pv(e)),this.lastProcessedEventTime=Date.now()}}function pv(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function dE({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function vD(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return dE(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fE(n,e={}){return Pt(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,bD=/^https?/;async function wD(n){if(n.config.emulator)return;const{authorizedDomains:e}=await fE(n);for(const t of e)try{if(ID(t))return}catch{}sn(n,"unauthorized-domain")}function ID(n){const e=Yl(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!bD.test(t))return!1;if(TD.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ED=new Tu(3e4,6e4);function _v(){const n=Ft().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function kD(n){return new Promise((e,t)=>{var r,i,s;function o(){_v(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{_v(),t($t(n,"network-request-failed"))},timeout:ED.get()})}if(!((i=(r=Ft().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Ft().gapi)===null||s===void 0)&&s.load)o();else{const a=BI("iframefcb");return Ft()[a]=()=>{gapi.load?o():t($t(n,"network-request-failed"))},P_(`${vN()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw Ac=null,e})}let Ac=null;function AD(n){return Ac=Ac||kD(n),Ac}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SD=new Tu(5e3,15e3),RD="__/auth/iframe",PD="emulator/auth/iframe",CD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},xD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function OD(n){const e=n.config;J(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?R_(e,PD):`https://${n.config.authDomain}/${RD}`,r={apiKey:e.apiKey,appName:n.name,v:ai},i=xD.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${Ia(r).slice(1)}`}async function ND(n){const e=await AD(n),t=Ft().gapi;return J(t,n,"internal-error"),e.open({where:document.body,url:OD(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:CD,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=$t(n,"network-request-failed"),a=Ft().setTimeout(()=>{s(o)},SD.get());function l(){Ft().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},DD=500,MD=600,LD="_blank",FD="http://localhost";class gv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function UD(n,e,t,r=DD,i=MD){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},VD),{width:r.toString(),height:i.toString(),top:s,left:o}),h=wt().toLowerCase();t&&(a=DI(h)?LD:t),NI(h)&&(e=e||FD,l.scrollbars="yes");const f=Object.entries(l).reduce((d,[p,m])=>`${d}${p}=${m},`,"");if(uN(h)&&a!=="_self")return KD(e||"",a),new gv(null);const u=window.open(e||"",a,f);J(u,n,"popup-blocked");try{u.focus()}catch{}return new gv(u)}function KD(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BD="__/auth/handler",$D="emulator/auth/handler",zD=encodeURIComponent("fac");async function Zf(n,e,t,r,i,s){J(n.config.authDomain,n,"auth-domain-config-required"),J(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:ai,eventId:i};if(e instanceof ui){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",mx(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,u]of Object.entries(s||{}))o[f]=u}if(e instanceof Aa){const f=e.getScopes().filter(u=>u!=="");f.length>0&&(o.scopes=f.join(","))}n.tenantId&&(o.tid=n.tenantId);const a=o;for(const f of Object.keys(a))a[f]===void 0&&delete a[f];const l=await n._getAppCheckToken(),h=l?`#${zD}=${encodeURIComponent(l)}`:"";return`${jD(n)}?${Ia(a).slice(1)}${h}`}function jD({config:n}){return n.emulator?R_(n,$D):`https://${n.authDomain}/${BD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mf="webStorageSupport";class qD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ks,this._completeRedirectFn=ed,this._overrideRedirectResult=B_}async _openPopup(e,t,r,i){var s;cr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Zf(e,t,r,Yl(),i);return UD(e,o,ku())}async _openRedirect(e,t,r,i){await this._originValidation(e);const s=await Zf(e,t,r,Yl(),i);return NV(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(cr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await ND(e),r=new hE(e);return t.register("authEvent",i=>(J(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(mf,{type:mf},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[mf];o!==void 0&&t(!!o),sn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=wD(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return UI()||VI()||wu()}}const GD=qD;class HD{constructor(e){this.factorId=e}_process(e,t,r){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,r);case"signin":return this._finalizeSignIn(e,t.credential);default:return wr("unexpected MultiFactorSessionType")}}}class $_ extends HD{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new $_(e)}_finalizeEnroll(e,t,r){return AV(e,{idToken:t,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return $V(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class pE{constructor(){}static assertion(e){return $_._fromCredential(e)}}pE.FACTOR_ID="phone";var mv="@firebase/auth",yv="1.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){J(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QD(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function YD(n){ei(new tr("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;J(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:KI(n)},h=new _N(r,i,s,l);return PN(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),ei(new tr("auth-internal",e=>{const t=It(e.getProvider("auth").getImmediate());return(r=>new WD(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Hn(mv,yv,QD(n)),Hn(mv,yv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JD=5*60;lx("authIdTokenMaxAge");function XD(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}gN({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=$t("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",XD().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});YD("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $s(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZD=2e3;async function eM(n,e,t){var r;const{BuildInfo:i}=$s();cr(e.sessionId,"AuthEvent did not contain a session ID");const s=await sM(e.sessionId),o={};return wu()?o.ibi=i.packageName:bu()?o.apn=i.packageName:sn(n,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,Zf(n,t,e.type,void 0,(r=e.eventId)!==null&&r!==void 0?r:void 0,o)}async function tM(n){const{BuildInfo:e}=$s(),t={};wu()?t.iosBundleId=e.packageName:bu()?t.androidPackageName=e.packageName:sn(n,"operation-not-supported-in-this-environment"),await fE(n,t)}function nM(n){const{cordova:e}=$s();return new Promise(t=>{e.plugins.browsertab.isAvailable(r=>{let i=null;r?e.plugins.browsertab.openUrl(n):i=e.InAppBrowser.open(n,lN()?"_blank":"_system","location=yes"),t(i)})})}async function rM(n,e,t){const{cordova:r}=$s();let i=()=>{};try{await new Promise((s,o)=>{let a=null;function l(){var u;s();const d=(u=r.plugins.browsertab)===null||u===void 0?void 0:u.close;typeof d=="function"&&d(),typeof(t==null?void 0:t.close)=="function"&&t.close()}function h(){a||(a=window.setTimeout(()=>{o($t(n,"redirect-cancelled-by-user"))},ZD))}function f(){(document==null?void 0:document.visibilityState)==="visible"&&h()}e.addPassiveListener(l),document.addEventListener("resume",h,!1),bu()&&document.addEventListener("visibilitychange",f,!1),i=()=>{e.removePassiveListener(l),document.removeEventListener("resume",h,!1),document.removeEventListener("visibilitychange",f,!1),a&&window.clearTimeout(a)}})}finally{i()}}function iM(n){var e,t,r,i,s,o,a,l,h,f;const u=$s();J(typeof((e=u==null?void 0:u.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),J(typeof((t=u==null?void 0:u.BuildInfo)===null||t===void 0?void 0:t.packageName)<"u",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),J(typeof((s=(i=(r=u==null?void 0:u.cordova)===null||r===void 0?void 0:r.plugins)===null||i===void 0?void 0:i.browsertab)===null||s===void 0?void 0:s.openUrl)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),J(typeof((l=(a=(o=u==null?void 0:u.cordova)===null||o===void 0?void 0:o.plugins)===null||a===void 0?void 0:a.browsertab)===null||l===void 0?void 0:l.isAvailable)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),J(typeof((f=(h=u==null?void 0:u.cordova)===null||h===void 0?void 0:h.InAppBrowser)===null||f===void 0?void 0:f.open)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function sM(n){const e=oM(n),t=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(t)).map(i=>i.toString(16).padStart(2,"0")).join("")}function oM(n){if(cr(/[0-9a-zA-Z]+/.test(n),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(n);const e=new ArrayBuffer(n.length),t=new Uint8Array(e);for(let r=0;r<n.length;r++)t[r]=n.charCodeAt(r);return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aM=20;class lM extends hE{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(t=>t(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function uM(n,e,t=null){return{type:e,eventId:t,urlResponse:null,sessionId:dM(),postBody:null,tenantId:n.tenantId,error:$t(n,"no-auth-event")}}function cM(n,e){return ep()._set(tp(n),e)}async function vv(n){const e=await ep()._get(tp(n));return e&&await ep()._remove(tp(n)),e}function hM(n,e){var t,r;const i=pM(e);if(i.includes("/__/auth/callback")){const s=Sc(i),o=s.firebaseError?fM(decodeURIComponent(s.firebaseError)):null,a=(r=(t=o==null?void 0:o.code)===null||t===void 0?void 0:t.split("auth/"))===null||r===void 0?void 0:r[1],l=a?$t(a):null;return l?{type:n.type,eventId:n.eventId,tenantId:n.tenantId,error:l,urlResponse:null,sessionId:null,postBody:null}:{type:n.type,eventId:n.eventId,tenantId:n.tenantId,sessionId:n.sessionId,urlResponse:i,postBody:null}}return null}function dM(){const n=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let t=0;t<aM;t++){const r=Math.floor(Math.random()*e.length);n.push(e.charAt(r))}return n.join("")}function ep(){return qn(M_)}function tp(n){return Ns("authEvent",n.config.apiKey,n.name)}function fM(n){try{return JSON.parse(n)}catch{return null}}function pM(n){const e=Sc(n),t=e.link?decodeURIComponent(e.link):void 0,r=Sc(t).link,i=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return Sc(i).link||i||r||t||n}function Sc(n){if(!(n!=null&&n.includes("?")))return{};const[e,...t]=n.split("?");return No(t.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _M=500;class gM{constructor(){this._redirectPersistence=Ks,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ed,this._overrideRedirectResult=B_}async _initialize(e){const t=e._key();let r=this.eventManagers.get(t);return r||(r=new lM(e),this.eventManagers.set(t,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){sn(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,r,i){iM(e);const s=await this._initialize(e);await s.initialized(),s.resetRedirect(),cD(),await this._originValidation(e);const o=uM(e,r,i);await cM(e,o);const a=await eM(e,o,t),l=await nM(a);return rM(e,s,l)}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=tM(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:r,handleOpenURL:i,BuildInfo:s}=$s(),o=setTimeout(async()=>{await vv(e),t.onEvent(Tv())},_M),a=async f=>{clearTimeout(o);const u=await vv(e);let d=null;u&&(f!=null&&f.url)&&(d=hM(u,f.url)),t.onEvent(d||Tv())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,a);const l=i,h=`${s.packageName.toLowerCase()}://`;$s().handleOpenURL=async f=>{if(f.toLowerCase().startsWith(h)&&a({url:f}),typeof l=="function")try{l(f)}catch(u){console.error(u)}}}}const mM=gM;function Tv(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:$t("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yM(n,e){It(n)._logFramework(e)}var vM="@firebase/auth-compat",TM="0.5.19";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bM=1e3;function Pl(){var n;return((n=self==null?void 0:self.location)===null||n===void 0?void 0:n.protocol)||null}function wM(){return Pl()==="http:"||Pl()==="https:"}function _E(n=wt()){return!!((Pl()==="file:"||Pl()==="ionic:"||Pl()==="capacitor:")&&n.toLowerCase().match(/iphone|ipad|ipod|android/))}function IM(){return v_()||y_()}function EM(){return aI()&&(document==null?void 0:document.documentMode)===11}function kM(n=wt()){return/Edge\/\d+/.test(n)}function AM(n=wt()){return EM()||kM(n)}function gE(){try{const n=self.localStorage,e=ku();if(n)return n.setItem(e,"1"),n.removeItem(e),AM()?Hl():!0}catch{return z_()&&Hl()}return!1}function z_(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function yf(){return(wM()||oI()||_E())&&!IM()&&gE()&&!z_()}function mE(){return _E()&&typeof document<"u"}async function SM(){return mE()?new Promise(n=>{const e=setTimeout(()=>{n(!1)},bM);document.addEventListener("deviceready",()=>{clearTimeout(e),n(!0)})}):!1}function RM(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zn={LOCAL:"local",NONE:"none",SESSION:"session"},Xa=J,yE="persistence";function PM(n,e){if(Xa(Object.values(zn).includes(e),n,"invalid-persistence-type"),v_()){Xa(e!==zn.SESSION,n,"unsupported-persistence-type");return}if(y_()){Xa(e===zn.NONE,n,"unsupported-persistence-type");return}if(z_()){Xa(e===zn.NONE||e===zn.LOCAL&&Hl(),n,"unsupported-persistence-type");return}Xa(e===zn.NONE||gE(),n,"unsupported-persistence-type")}async function np(n){await n._initializationPromise;const e=vE(),t=Ns(yE,n.config.apiKey,n.name);e&&e.setItem(t,n._getPersistence())}function CM(n,e){const t=vE();if(!t)return[];const r=Ns(yE,n,e);switch(t.getItem(r)){case zn.NONE:return[ta];case zn.LOCAL:return[Zl,Ks];case zn.SESSION:return[Ks];default:return[]}}function vE(){var n;try{return((n=RM())===null||n===void 0?void 0:n.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xM=J;class Ci{constructor(){this.browserResolver=qn(GD),this.cordovaResolver=qn(mM),this.underlyingResolver=null,this._redirectPersistence=Ks,this._completeRedirectFn=ed,this._overrideRedirectResult=B_}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,r,i)}async _openRedirect(e,t,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,r,i)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return mE()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return xM(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await SM();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TE(n){return n.unwrap()}function OM(n){return n.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NM(n){return bE(n)}function VM(n,e){var t;const r=(t=e.customData)===null||t===void 0?void 0:t._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const i=e;i.resolver=new DM(n,kV(n,e))}else if(r){const i=bE(e),s=e;i&&(s.credential=i,s.tenantId=r.tenantId||void 0,s.email=r.email||void 0,s.phoneNumber=r.phoneNumber||void 0)}}function bE(n){const{_tokenResponse:e}=n instanceof fn?n.customData:n;if(!e)return null;if(!(n instanceof fn)&&"temporaryProof"in e&&"phoneNumber"in e)return Bs.credentialFromResult(n);const t=e.providerId;if(!t||t===Ya.PASSWORD)return null;let r;switch(t){case Ya.GOOGLE:r=yr;break;case Ya.FACEBOOK:r=mr;break;case Ya.GITHUB:r=vr;break;case Ya.TWITTER:r=Tr;break;default:const{oauthIdToken:i,oauthAccessToken:s,oauthTokenSecret:o,pendingToken:a,nonce:l}=e;return!s&&!o&&!i&&!a?null:a?t.startsWith("saml.")?na._create(t,a):Cr._fromParams({providerId:t,signInMethod:t,pendingToken:a,idToken:i,accessToken:s}):new $o(t).credential({idToken:i,accessToken:s,rawNonce:l})}return n instanceof fn?r.credentialFromError(n):r.credentialFromResult(n)}function Rn(n,e){return e.catch(t=>{throw t instanceof fn&&VM(n,t),t}).then(t=>{const r=t.operationType,i=t.user;return{operationType:r,credential:NM(t),additionalUserInfo:EV(t),user:td.getOrCreate(i)}})}async function rp(n,e){const t=await e;return{verificationId:t.verificationId,confirm:r=>Rn(n,t.confirm(r))}}class DM{constructor(e,t){this.resolver=t,this.auth=OM(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return Rn(TE(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let td=class cl{constructor(e){this._delegate=e,this.multiFactor=RV(e)}static getOrCreate(e){return cl.USER_MAP.has(e)||cl.USER_MAP.set(e,new cl(e)),cl.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return Rn(this.auth,YI(this._delegate,e))}async linkWithPhoneNumber(e,t){return rp(this.auth,JV(this._delegate,e,t))}async linkWithPopup(e){return Rn(this.auth,oD(this._delegate,e,Ci))}async linkWithRedirect(e){return await np(It(this.auth)),_D(this._delegate,e,Ci)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return Rn(this.auth,JI(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return rp(this.auth,XV(this._delegate,e,t))}reauthenticateWithPopup(e){return Rn(this.auth,sD(this._delegate,e,Ci))}async reauthenticateWithRedirect(e){return await np(It(this.auth)),fD(this._delegate,e,Ci)}sendEmailVerification(e){return fV(this._delegate,e)}async unlink(e){return await ZN(this._delegate,e),this}updateEmail(e){return mV(this._delegate,e)}updatePassword(e){return yV(this._delegate,e)}updatePhoneNumber(e){return ZV(this._delegate,e)}updateProfile(e){return gV(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return pV(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}};td.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Za=J;class ip{constructor(e,t){if(this.app=e,t.isInitialized()){this._delegate=t.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;Za(r,"invalid-api-key",{appName:e.name}),Za(r,"invalid-api-key",{appName:e.name});const i=typeof window<"u"?Ci:void 0;this._delegate=t.initialize({options:{persistence:MM(r,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(zO),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?td.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){CN(this._delegate,e,t)}applyActionCode(e){return iV(this._delegate,e)}checkActionCode(e){return XI(this._delegate,e)}confirmPasswordReset(e,t){return rV(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return Rn(this._delegate,oV(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return dV(this._delegate,e)}isSignInWithEmailLink(e){return uV(this._delegate,e)}async getRedirectResult(){Za(yf(),this._delegate,"operation-not-supported-in-this-environment");const e=await mD(this._delegate,Ci);return e?Rn(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){yM(this._delegate,e)}onAuthStateChanged(e,t,r){const{next:i,error:s,complete:o}=bv(e,t,r);return this._delegate.onAuthStateChanged(i,s,o)}onIdTokenChanged(e,t,r){const{next:i,error:s,complete:o}=bv(e,t,r);return this._delegate.onIdTokenChanged(i,s,o)}sendSignInLinkToEmail(e,t){return lV(this._delegate,e,t)}sendPasswordResetEmail(e,t){return nV(this._delegate,e,t||void 0)}async setPersistence(e){PM(this._delegate,e);let t;switch(e){case zn.SESSION:t=Ks;break;case zn.LOCAL:t=await qn(Zl)._isAvailable()?Zl:M_;break;case zn.NONE:t=ta;break;default:return sn("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return Rn(this._delegate,XN(this._delegate))}signInWithCredential(e){return Rn(this._delegate,Qh(this._delegate,e))}signInWithCustomToken(e){return Rn(this._delegate,tV(this._delegate,e))}signInWithEmailAndPassword(e,t){return Rn(this._delegate,aV(this._delegate,e,t))}signInWithEmailLink(e,t){return Rn(this._delegate,cV(this._delegate,e,t))}signInWithPhoneNumber(e,t){return rp(this._delegate,YV(this._delegate,e,t))}async signInWithPopup(e){return Za(yf(),this._delegate,"operation-not-supported-in-this-environment"),Rn(this._delegate,iD(this._delegate,e,Ci))}async signInWithRedirect(e){return Za(yf(),this._delegate,"operation-not-supported-in-this-environment"),await np(this._delegate),hD(this._delegate,e,Ci)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return sV(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}ip.Persistence=zn;function bv(n,e,t){let r=n;typeof n!="function"&&({next:r,error:e,complete:t}=n);const i=r;return{next:o=>i(o&&td.getOrCreate(o)),error:e,complete:t}}function MM(n,e){const t=CM(n,e);if(typeof self<"u"&&!t.includes(Zl)&&t.push(Zl),typeof window<"u")for(const r of[M_,Ks])t.includes(r)||t.push(r);return t.includes(ta)||t.push(ta),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_{static credential(e,t){return Bs.credential(e,t)}constructor(){this.providerId="phone",this._delegate=new Bs(TE(Vr.auth()))}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}j_.PHONE_SIGN_IN_METHOD=Bs.PHONE_SIGN_IN_METHOD;j_.PROVIDER_ID=Bs.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LM=J;class FM{constructor(e,t,r=Vr.app()){var i;LM((i=r.options)===null||i===void 0?void 0:i.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new WV(r.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UM="auth-compat";function KM(n){n.INTERNAL.registerComponent(new tr(UM,e=>{const t=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new ip(t,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:mo.EMAIL_SIGNIN,PASSWORD_RESET:mo.PASSWORD_RESET,RECOVER_EMAIL:mo.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:mo.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:mo.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:mo.VERIFY_EMAIL}},EmailAuthProvider:ns,FacebookAuthProvider:mr,GithubAuthProvider:vr,GoogleAuthProvider:yr,OAuthProvider:$o,SAMLAuthProvider:Xc,PhoneAuthProvider:j_,PhoneMultiFactorGenerator:pE,RecaptchaVerifier:FM,TwitterAuthProvider:Tr,Auth:ip,AuthCredential:ka,Error:fn}).setInstantiationMode("LAZY").setMultipleInstances(!1)),n.registerVersion(vM,TM)}KM(Vr);var wv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Li,wE;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,w){function b(){}b.prototype=w.prototype,k.D=w.prototype,k.prototype=new b,k.prototype.constructor=k,k.C=function(R,P,x){for(var A=Array(arguments.length-2),Le=2;Le<arguments.length;Le++)A[Le-2]=arguments[Le];return w.prototype[P].apply(R,A)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(k,w,b){b||(b=0);var R=Array(16);if(typeof w=="string")for(var P=0;16>P;++P)R[P]=w.charCodeAt(b++)|w.charCodeAt(b++)<<8|w.charCodeAt(b++)<<16|w.charCodeAt(b++)<<24;else for(P=0;16>P;++P)R[P]=w[b++]|w[b++]<<8|w[b++]<<16|w[b++]<<24;w=k.g[0],b=k.g[1],P=k.g[2];var x=k.g[3],A=w+(x^b&(P^x))+R[0]+3614090360&4294967295;w=b+(A<<7&4294967295|A>>>25),A=x+(P^w&(b^P))+R[1]+3905402710&4294967295,x=w+(A<<12&4294967295|A>>>20),A=P+(b^x&(w^b))+R[2]+606105819&4294967295,P=x+(A<<17&4294967295|A>>>15),A=b+(w^P&(x^w))+R[3]+3250441966&4294967295,b=P+(A<<22&4294967295|A>>>10),A=w+(x^b&(P^x))+R[4]+4118548399&4294967295,w=b+(A<<7&4294967295|A>>>25),A=x+(P^w&(b^P))+R[5]+1200080426&4294967295,x=w+(A<<12&4294967295|A>>>20),A=P+(b^x&(w^b))+R[6]+2821735955&4294967295,P=x+(A<<17&4294967295|A>>>15),A=b+(w^P&(x^w))+R[7]+4249261313&4294967295,b=P+(A<<22&4294967295|A>>>10),A=w+(x^b&(P^x))+R[8]+1770035416&4294967295,w=b+(A<<7&4294967295|A>>>25),A=x+(P^w&(b^P))+R[9]+2336552879&4294967295,x=w+(A<<12&4294967295|A>>>20),A=P+(b^x&(w^b))+R[10]+4294925233&4294967295,P=x+(A<<17&4294967295|A>>>15),A=b+(w^P&(x^w))+R[11]+2304563134&4294967295,b=P+(A<<22&4294967295|A>>>10),A=w+(x^b&(P^x))+R[12]+1804603682&4294967295,w=b+(A<<7&4294967295|A>>>25),A=x+(P^w&(b^P))+R[13]+4254626195&4294967295,x=w+(A<<12&4294967295|A>>>20),A=P+(b^x&(w^b))+R[14]+2792965006&4294967295,P=x+(A<<17&4294967295|A>>>15),A=b+(w^P&(x^w))+R[15]+1236535329&4294967295,b=P+(A<<22&4294967295|A>>>10),A=w+(P^x&(b^P))+R[1]+4129170786&4294967295,w=b+(A<<5&4294967295|A>>>27),A=x+(b^P&(w^b))+R[6]+3225465664&4294967295,x=w+(A<<9&4294967295|A>>>23),A=P+(w^b&(x^w))+R[11]+643717713&4294967295,P=x+(A<<14&4294967295|A>>>18),A=b+(x^w&(P^x))+R[0]+3921069994&4294967295,b=P+(A<<20&4294967295|A>>>12),A=w+(P^x&(b^P))+R[5]+3593408605&4294967295,w=b+(A<<5&4294967295|A>>>27),A=x+(b^P&(w^b))+R[10]+38016083&4294967295,x=w+(A<<9&4294967295|A>>>23),A=P+(w^b&(x^w))+R[15]+3634488961&4294967295,P=x+(A<<14&4294967295|A>>>18),A=b+(x^w&(P^x))+R[4]+3889429448&4294967295,b=P+(A<<20&4294967295|A>>>12),A=w+(P^x&(b^P))+R[9]+568446438&4294967295,w=b+(A<<5&4294967295|A>>>27),A=x+(b^P&(w^b))+R[14]+3275163606&4294967295,x=w+(A<<9&4294967295|A>>>23),A=P+(w^b&(x^w))+R[3]+4107603335&4294967295,P=x+(A<<14&4294967295|A>>>18),A=b+(x^w&(P^x))+R[8]+1163531501&4294967295,b=P+(A<<20&4294967295|A>>>12),A=w+(P^x&(b^P))+R[13]+2850285829&4294967295,w=b+(A<<5&4294967295|A>>>27),A=x+(b^P&(w^b))+R[2]+4243563512&4294967295,x=w+(A<<9&4294967295|A>>>23),A=P+(w^b&(x^w))+R[7]+1735328473&4294967295,P=x+(A<<14&4294967295|A>>>18),A=b+(x^w&(P^x))+R[12]+2368359562&4294967295,b=P+(A<<20&4294967295|A>>>12),A=w+(b^P^x)+R[5]+4294588738&4294967295,w=b+(A<<4&4294967295|A>>>28),A=x+(w^b^P)+R[8]+2272392833&4294967295,x=w+(A<<11&4294967295|A>>>21),A=P+(x^w^b)+R[11]+1839030562&4294967295,P=x+(A<<16&4294967295|A>>>16),A=b+(P^x^w)+R[14]+4259657740&4294967295,b=P+(A<<23&4294967295|A>>>9),A=w+(b^P^x)+R[1]+2763975236&4294967295,w=b+(A<<4&4294967295|A>>>28),A=x+(w^b^P)+R[4]+1272893353&4294967295,x=w+(A<<11&4294967295|A>>>21),A=P+(x^w^b)+R[7]+4139469664&4294967295,P=x+(A<<16&4294967295|A>>>16),A=b+(P^x^w)+R[10]+3200236656&4294967295,b=P+(A<<23&4294967295|A>>>9),A=w+(b^P^x)+R[13]+681279174&4294967295,w=b+(A<<4&4294967295|A>>>28),A=x+(w^b^P)+R[0]+3936430074&4294967295,x=w+(A<<11&4294967295|A>>>21),A=P+(x^w^b)+R[3]+3572445317&4294967295,P=x+(A<<16&4294967295|A>>>16),A=b+(P^x^w)+R[6]+76029189&4294967295,b=P+(A<<23&4294967295|A>>>9),A=w+(b^P^x)+R[9]+3654602809&4294967295,w=b+(A<<4&4294967295|A>>>28),A=x+(w^b^P)+R[12]+3873151461&4294967295,x=w+(A<<11&4294967295|A>>>21),A=P+(x^w^b)+R[15]+530742520&4294967295,P=x+(A<<16&4294967295|A>>>16),A=b+(P^x^w)+R[2]+3299628645&4294967295,b=P+(A<<23&4294967295|A>>>9),A=w+(P^(b|~x))+R[0]+4096336452&4294967295,w=b+(A<<6&4294967295|A>>>26),A=x+(b^(w|~P))+R[7]+1126891415&4294967295,x=w+(A<<10&4294967295|A>>>22),A=P+(w^(x|~b))+R[14]+2878612391&4294967295,P=x+(A<<15&4294967295|A>>>17),A=b+(x^(P|~w))+R[5]+4237533241&4294967295,b=P+(A<<21&4294967295|A>>>11),A=w+(P^(b|~x))+R[12]+1700485571&4294967295,w=b+(A<<6&4294967295|A>>>26),A=x+(b^(w|~P))+R[3]+2399980690&4294967295,x=w+(A<<10&4294967295|A>>>22),A=P+(w^(x|~b))+R[10]+4293915773&4294967295,P=x+(A<<15&4294967295|A>>>17),A=b+(x^(P|~w))+R[1]+2240044497&4294967295,b=P+(A<<21&4294967295|A>>>11),A=w+(P^(b|~x))+R[8]+1873313359&4294967295,w=b+(A<<6&4294967295|A>>>26),A=x+(b^(w|~P))+R[15]+4264355552&4294967295,x=w+(A<<10&4294967295|A>>>22),A=P+(w^(x|~b))+R[6]+2734768916&4294967295,P=x+(A<<15&4294967295|A>>>17),A=b+(x^(P|~w))+R[13]+1309151649&4294967295,b=P+(A<<21&4294967295|A>>>11),A=w+(P^(b|~x))+R[4]+4149444226&4294967295,w=b+(A<<6&4294967295|A>>>26),A=x+(b^(w|~P))+R[11]+3174756917&4294967295,x=w+(A<<10&4294967295|A>>>22),A=P+(w^(x|~b))+R[2]+718787259&4294967295,P=x+(A<<15&4294967295|A>>>17),A=b+(x^(P|~w))+R[9]+3951481745&4294967295,k.g[0]=k.g[0]+w&4294967295,k.g[1]=k.g[1]+(P+(A<<21&4294967295|A>>>11))&4294967295,k.g[2]=k.g[2]+P&4294967295,k.g[3]=k.g[3]+x&4294967295}r.prototype.u=function(k,w){w===void 0&&(w=k.length);for(var b=w-this.blockSize,R=this.B,P=this.h,x=0;x<w;){if(P==0)for(;x<=b;)i(this,k,x),x+=this.blockSize;if(typeof k=="string"){for(;x<w;)if(R[P++]=k.charCodeAt(x++),P==this.blockSize){i(this,R),P=0;break}}else for(;x<w;)if(R[P++]=k[x++],P==this.blockSize){i(this,R),P=0;break}}this.h=P,this.o+=w},r.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var w=1;w<k.length-8;++w)k[w]=0;var b=8*this.o;for(w=k.length-8;w<k.length;++w)k[w]=b&255,b/=256;for(this.u(k),k=Array(16),w=b=0;4>w;++w)for(var R=0;32>R;R+=8)k[b++]=this.g[w]>>>R&255;return k};function s(k,w){var b=a;return Object.prototype.hasOwnProperty.call(b,k)?b[k]:b[k]=w(k)}function o(k,w){this.h=w;for(var b=[],R=!0,P=k.length-1;0<=P;P--){var x=k[P]|0;R&&x==w||(b[P]=x,R=!1)}this.g=b}var a={};function l(k){return-128<=k&&128>k?s(k,function(w){return new o([w|0],0>w?-1:0)}):new o([k|0],0>k?-1:0)}function h(k){if(isNaN(k)||!isFinite(k))return u;if(0>k)return v(h(-k));for(var w=[],b=1,R=0;k>=b;R++)w[R]=k/b|0,b*=4294967296;return new o(w,0)}function f(k,w){if(k.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(k.charAt(0)=="-")return v(f(k.substring(1),w));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=h(Math.pow(w,8)),R=u,P=0;P<k.length;P+=8){var x=Math.min(8,k.length-P),A=parseInt(k.substring(P,P+x),w);8>x?(x=h(Math.pow(w,x)),R=R.j(x).add(h(A))):(R=R.j(b),R=R.add(h(A)))}return R}var u=l(0),d=l(1),p=l(16777216);n=o.prototype,n.m=function(){if(T(this))return-v(this).m();for(var k=0,w=1,b=0;b<this.g.length;b++){var R=this.i(b);k+=(0<=R?R:4294967296+R)*w,w*=4294967296}return k},n.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(m(this))return"0";if(T(this))return"-"+v(this).toString(k);for(var w=h(Math.pow(k,6)),b=this,R="";;){var P=U(b,w).g;b=I(b,P.j(w));var x=((0<b.g.length?b.g[0]:b.h)>>>0).toString(k);if(b=P,m(b))return x+R;for(;6>x.length;)x="0"+x;R=x+R}},n.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function m(k){if(k.h!=0)return!1;for(var w=0;w<k.g.length;w++)if(k.g[w]!=0)return!1;return!0}function T(k){return k.h==-1}n.l=function(k){return k=I(this,k),T(k)?-1:m(k)?0:1};function v(k){for(var w=k.g.length,b=[],R=0;R<w;R++)b[R]=~k.g[R];return new o(b,~k.h).add(d)}n.abs=function(){return T(this)?v(this):this},n.add=function(k){for(var w=Math.max(this.g.length,k.g.length),b=[],R=0,P=0;P<=w;P++){var x=R+(this.i(P)&65535)+(k.i(P)&65535),A=(x>>>16)+(this.i(P)>>>16)+(k.i(P)>>>16);R=A>>>16,x&=65535,A&=65535,b[P]=A<<16|x}return new o(b,b[b.length-1]&-2147483648?-1:0)};function I(k,w){return k.add(v(w))}n.j=function(k){if(m(this)||m(k))return u;if(T(this))return T(k)?v(this).j(v(k)):v(v(this).j(k));if(T(k))return v(this.j(v(k)));if(0>this.l(p)&&0>k.l(p))return h(this.m()*k.m());for(var w=this.g.length+k.g.length,b=[],R=0;R<2*w;R++)b[R]=0;for(R=0;R<this.g.length;R++)for(var P=0;P<k.g.length;P++){var x=this.i(R)>>>16,A=this.i(R)&65535,Le=k.i(P)>>>16,Xe=k.i(P)&65535;b[2*R+2*P]+=A*Xe,C(b,2*R+2*P),b[2*R+2*P+1]+=x*Xe,C(b,2*R+2*P+1),b[2*R+2*P+1]+=A*Le,C(b,2*R+2*P+1),b[2*R+2*P+2]+=x*Le,C(b,2*R+2*P+2)}for(R=0;R<w;R++)b[R]=b[2*R+1]<<16|b[2*R];for(R=w;R<2*w;R++)b[R]=0;return new o(b,0)};function C(k,w){for(;(k[w]&65535)!=k[w];)k[w+1]+=k[w]>>>16,k[w]&=65535,w++}function M(k,w){this.g=k,this.h=w}function U(k,w){if(m(w))throw Error("division by zero");if(m(k))return new M(u,u);if(T(k))return w=U(v(k),w),new M(v(w.g),v(w.h));if(T(w))return w=U(k,v(w)),new M(v(w.g),w.h);if(30<k.g.length){if(T(k)||T(w))throw Error("slowDivide_ only works with positive integers.");for(var b=d,R=w;0>=R.l(k);)b=ee(b),R=ee(R);var P=ne(b,1),x=ne(R,1);for(R=ne(R,2),b=ne(b,2);!m(R);){var A=x.add(R);0>=A.l(k)&&(P=P.add(b),x=A),R=ne(R,1),b=ne(b,1)}return w=I(k,P.j(w)),new M(P,w)}for(P=u;0<=k.l(w);){for(b=Math.max(1,Math.floor(k.m()/w.m())),R=Math.ceil(Math.log(b)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),x=h(b),A=x.j(w);T(A)||0<A.l(k);)b-=R,x=h(b),A=x.j(w);m(x)&&(x=d),P=P.add(x),k=I(k,A)}return new M(P,k)}n.A=function(k){return U(this,k).h},n.and=function(k){for(var w=Math.max(this.g.length,k.g.length),b=[],R=0;R<w;R++)b[R]=this.i(R)&k.i(R);return new o(b,this.h&k.h)},n.or=function(k){for(var w=Math.max(this.g.length,k.g.length),b=[],R=0;R<w;R++)b[R]=this.i(R)|k.i(R);return new o(b,this.h|k.h)},n.xor=function(k){for(var w=Math.max(this.g.length,k.g.length),b=[],R=0;R<w;R++)b[R]=this.i(R)^k.i(R);return new o(b,this.h^k.h)};function ee(k){for(var w=k.g.length+1,b=[],R=0;R<w;R++)b[R]=k.i(R)<<1|k.i(R-1)>>>31;return new o(b,k.h)}function ne(k,w){var b=w>>5;w%=32;for(var R=k.g.length-b,P=[],x=0;x<R;x++)P[x]=0<w?k.i(x+b)>>>w|k.i(x+b+1)<<32-w:k.i(x+b);return new o(P,k.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,wE=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=f,Li=o}).apply(typeof wv<"u"?wv:typeof self<"u"?self:typeof window<"u"?window:{});var ac=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var IE,hl,EE,Rc,sp,kE,AE,SE;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,_,g){return c==Array.prototype||c==Object.prototype||(c[_]=g.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof ac=="object"&&ac];for(var _=0;_<c.length;++_){var g=c[_];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=t(this);function i(c,_){if(_)e:{var g=r;c=c.split(".");for(var y=0;y<c.length-1;y++){var L=c[y];if(!(L in g))break e;g=g[L]}c=c[c.length-1],y=g[c],_=_(y),_!=y&&_!=null&&e(g,c,{configurable:!0,writable:!0,value:_})}}function s(c,_){c instanceof String&&(c+="");var g=0,y=!1,L={next:function(){if(!y&&g<c.length){var $=g++;return{value:_($,c[$]),done:!1}}return y=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}i("Array.prototype.values",function(c){return c||function(){return s(this,function(_,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(c){var _=typeof c;return _=_!="object"?_:c?Array.isArray(c)?"array":_:"null",_=="array"||_=="object"&&typeof c.length=="number"}function h(c){var _=typeof c;return _=="object"&&c!=null||_=="function"}function f(c,_,g){return c.call.apply(c.bind,arguments)}function u(c,_,g){if(!c)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,y),c.apply(_,L)}}return function(){return c.apply(_,arguments)}}function d(c,_,g){return d=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:u,d.apply(null,arguments)}function p(c,_){var g=Array.prototype.slice.call(arguments,1);return function(){var y=g.slice();return y.push.apply(y,arguments),c.apply(this,y)}}function m(c,_){function g(){}g.prototype=_.prototype,c.aa=_.prototype,c.prototype=new g,c.prototype.constructor=c,c.Qb=function(y,L,$){for(var re=Array(arguments.length-2),tt=2;tt<arguments.length;tt++)re[tt-2]=arguments[tt];return _.prototype[L].apply(y,re)}}function T(c){const _=c.length;if(0<_){const g=Array(_);for(let y=0;y<_;y++)g[y]=c[y];return g}return[]}function v(c,_){for(let g=1;g<arguments.length;g++){const y=arguments[g];if(l(y)){const L=c.length||0,$=y.length||0;c.length=L+$;for(let re=0;re<$;re++)c[L+re]=y[re]}else c.push(y)}}class I{constructor(_,g){this.i=_,this.j=g,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function C(c){return/^[\s\xa0]*$/.test(c)}function M(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function U(c){return U[" "](c),c}U[" "]=function(){};var ee=M().indexOf("Gecko")!=-1&&!(M().toLowerCase().indexOf("webkit")!=-1&&M().indexOf("Edge")==-1)&&!(M().indexOf("Trident")!=-1||M().indexOf("MSIE")!=-1)&&M().indexOf("Edge")==-1;function ne(c,_,g){for(const y in c)_.call(g,c[y],y,c)}function k(c,_){for(const g in c)_.call(void 0,c[g],g,c)}function w(c){const _={};for(const g in c)_[g]=c[g];return _}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(c,_){let g,y;for(let L=1;L<arguments.length;L++){y=arguments[L];for(g in y)c[g]=y[g];for(let $=0;$<b.length;$++)g=b[$],Object.prototype.hasOwnProperty.call(y,g)&&(c[g]=y[g])}}function P(c){var _=1;c=c.split(":");const g=[];for(;0<_&&c.length;)g.push(c.shift()),_--;return c.length&&g.push(c.join(":")),g}function x(c){a.setTimeout(()=>{throw c},0)}function A(){var c=vt;let _=null;return c.g&&(_=c.g,c.g=c.g.next,c.g||(c.h=null),_.next=null),_}class Le{constructor(){this.h=this.g=null}add(_,g){const y=Xe.get();y.set(_,g),this.h?this.h.next=y:this.g=y,this.h=y}}var Xe=new I(()=>new De,c=>c.reset());class De{constructor(){this.next=this.g=this.h=null}set(_,g){this.h=_,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let le,Pe=!1,vt=new Le,Ut=()=>{const c=a.Promise.resolve(void 0);le=()=>{c.then(qt)}};var qt=()=>{for(var c;c=A();){try{c.h.call(c.g)}catch(g){x(g)}var _=Xe;_.j(c),100>_.h&&(_.h++,c.next=_.g,_.g=c)}Pe=!1};function Ze(){this.s=this.s,this.C=this.C}Ze.prototype.s=!1,Ze.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ze.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function rt(c,_){this.type=c,this.g=this.target=_,this.defaultPrevented=!1}rt.prototype.h=function(){this.defaultPrevented=!0};var ft=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,_=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const g=()=>{};a.addEventListener("test",g,_),a.removeEventListener("test",g,_)}catch{}return c}();function Sn(c,_){if(rt.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var g=this.type=c.type,y=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=_,_=c.relatedTarget){if(ee){e:{try{U(_.nodeName);var L=!0;break e}catch{}L=!1}L||(_=null)}}else g=="mouseover"?_=c.fromElement:g=="mouseout"&&(_=c.toElement);this.relatedTarget=_,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:ce[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Sn.aa.h.call(this)}}m(Sn,rt);var ce={2:"touch",3:"pen",4:"mouse"};Sn.prototype.h=function(){Sn.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var F="closure_listenable_"+(1e6*Math.random()|0),X=0;function Q(c,_,g,y,L){this.listener=c,this.proxy=null,this.src=_,this.type=g,this.capture=!!y,this.ha=L,this.key=++X,this.da=this.fa=!1}function he(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Oe(c){this.src=c,this.g={},this.h=0}Oe.prototype.add=function(c,_,g,y,L){var $=c.toString();c=this.g[$],c||(c=this.g[$]=[],this.h++);var re=S(c,_,y,L);return-1<re?(_=c[re],g||(_.fa=!1)):(_=new Q(_,this.src,$,!!y,L),_.fa=g,c.push(_)),_};function E(c,_){var g=_.type;if(g in c.g){var y=c.g[g],L=Array.prototype.indexOf.call(y,_,void 0),$;($=0<=L)&&Array.prototype.splice.call(y,L,1),$&&(he(_),c.g[g].length==0&&(delete c.g[g],c.h--))}}function S(c,_,g,y){for(var L=0;L<c.length;++L){var $=c[L];if(!$.da&&$.listener==_&&$.capture==!!g&&$.ha==y)return L}return-1}var N="closure_lm_"+(1e6*Math.random()|0),z={};function q(c,_,g,y,L){if(Array.isArray(_)){for(var $=0;$<_.length;$++)q(c,_[$],g,y,L);return null}return g=ke(g),c&&c[F]?c.K(_,g,h(y)?!!y.capture:!1,L):j(c,_,g,!1,y,L)}function j(c,_,g,y,L,$){if(!_)throw Error("Invalid event type");var re=h(L)?!!L.capture:!!L,tt=oe(c);if(tt||(c[N]=tt=new Oe(c)),g=tt.add(_,g,y,re,$),g.proxy)return g;if(y=ie(),g.proxy=y,y.src=c,y.listener=g,c.addEventListener)ft||(L=re),L===void 0&&(L=!1),c.addEventListener(_.toString(),y,L);else if(c.attachEvent)c.attachEvent(Y(_.toString()),y);else if(c.addListener&&c.removeListener)c.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return g}function ie(){function c(g){return _.call(c.src,c.listener,g)}const _=be;return c}function te(c,_,g,y,L){if(Array.isArray(_))for(var $=0;$<_.length;$++)te(c,_[$],g,y,L);else y=h(y)?!!y.capture:!!y,g=ke(g),c&&c[F]?(c=c.i,_=String(_).toString(),_ in c.g&&($=c.g[_],g=S($,g,y,L),-1<g&&(he($[g]),Array.prototype.splice.call($,g,1),$.length==0&&(delete c.g[_],c.h--)))):c&&(c=oe(c))&&(_=c.g[_.toString()],c=-1,_&&(c=S(_,g,y,L)),(g=-1<c?_[c]:null)&&Z(g))}function Z(c){if(typeof c!="number"&&c&&!c.da){var _=c.src;if(_&&_[F])E(_.i,c);else{var g=c.type,y=c.proxy;_.removeEventListener?_.removeEventListener(g,y,c.capture):_.detachEvent?_.detachEvent(Y(g),y):_.addListener&&_.removeListener&&_.removeListener(y),(g=oe(_))?(E(g,c),g.h==0&&(g.src=null,_[N]=null)):he(c)}}}function Y(c){return c in z?z[c]:z[c]="on"+c}function be(c,_){if(c.da)c=!0;else{_=new Sn(_,this);var g=c.listener,y=c.ha||c.src;c.fa&&Z(c),c=g.call(y,_)}return c}function oe(c){return c=c[N],c instanceof Oe?c:null}var ge="__closure_events_fn_"+(1e9*Math.random()>>>0);function ke(c){return typeof c=="function"?c:(c[ge]||(c[ge]=function(_){return c.handleEvent(_)}),c[ge])}function ye(){Ze.call(this),this.i=new Oe(this),this.M=this,this.F=null}m(ye,Ze),ye.prototype[F]=!0,ye.prototype.removeEventListener=function(c,_,g,y){te(this,c,_,g,y)};function Ce(c,_){var g,y=c.F;if(y)for(g=[];y;y=y.F)g.push(y);if(c=c.M,y=_.type||_,typeof _=="string")_=new rt(_,c);else if(_ instanceof rt)_.target=_.target||c;else{var L=_;_=new rt(y,c),R(_,L)}if(L=!0,g)for(var $=g.length-1;0<=$;$--){var re=_.g=g[$];L=Fe(re,y,!0,_)&&L}if(re=_.g=c,L=Fe(re,y,!0,_)&&L,L=Fe(re,y,!1,_)&&L,g)for($=0;$<g.length;$++)re=_.g=g[$],L=Fe(re,y,!1,_)&&L}ye.prototype.N=function(){if(ye.aa.N.call(this),this.i){var c=this.i,_;for(_ in c.g){for(var g=c.g[_],y=0;y<g.length;y++)he(g[y]);delete c.g[_],c.h--}}this.F=null},ye.prototype.K=function(c,_,g,y){return this.i.add(String(c),_,!1,g,y)},ye.prototype.L=function(c,_,g,y){return this.i.add(String(c),_,!0,g,y)};function Fe(c,_,g,y){if(_=c.i.g[String(_)],!_)return!0;_=_.concat();for(var L=!0,$=0;$<_.length;++$){var re=_[$];if(re&&!re.da&&re.capture==g){var tt=re.listener,Xt=re.ha||re.src;re.fa&&E(c.i,re),L=tt.call(Xt,y)!==!1&&L}}return L&&!y.defaultPrevented}function Gt(c,_,g){if(typeof c=="function")g&&(c=d(c,g));else if(c&&typeof c.handleEvent=="function")c=d(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:a.setTimeout(c,_||0)}function Vt(c){c.g=Gt(()=>{c.g=null,c.i&&(c.i=!1,Vt(c))},c.l);const _=c.h;c.h=null,c.m.apply(null,_)}class V extends Ze{constructor(_,g){super(),this.m=_,this.l=g,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Vt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function O(c){Ze.call(this),this.h=c,this.g={}}m(O,Ze);var G=[];function ue(c){ne(c.g,function(_,g){this.g.hasOwnProperty(g)&&Z(_)},c),c.g={}}O.prototype.N=function(){O.aa.N.call(this),ue(this)},O.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var fe=a.JSON.stringify,we=a.JSON.parse,ve=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function et(){}et.prototype.h=null;function Tt(c){return c.h||(c.h=c.i())}function Kt(){}var qe={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Dt(){rt.call(this,"d")}m(Dt,rt);function Ht(){rt.call(this,"c")}m(Ht,rt);var Mt={},_i=null;function gi(){return _i=_i||new ye}Mt.La="serverreachability";function ao(c){rt.call(this,Mt.La,c)}m(ao,rt);function Dr(c){const _=gi();Ce(_,new ao(_))}Mt.STAT_EVENT="statevent";function lo(c,_){rt.call(this,Mt.STAT_EVENT,c),this.stat=_}m(lo,rt);function mn(c){const _=gi();Ce(_,new lo(_,c))}Mt.Ma="timingevent";function cm(c,_){rt.call(this,Mt.Ma,c),this.size=_}m(cm,rt);function Ma(c,_){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},_)}function La(){this.g=!0}La.prototype.xa=function(){this.g=!1};function XA(c,_,g,y,L,$){c.info(function(){if(c.g)if($)for(var re="",tt=$.split("&"),Xt=0;Xt<tt.length;Xt++){var ze=tt[Xt].split("=");if(1<ze.length){var on=ze[0];ze=ze[1];var an=on.split("_");re=2<=an.length&&an[1]=="type"?re+(on+"="+ze+"&"):re+(on+"=redacted&")}}else re=null;else re=$;return"XMLHTTP REQ ("+y+") [attempt "+L+"]: "+_+`
`+g+`
`+re})}function ZA(c,_,g,y,L,$,re){c.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+L+"]: "+_+`
`+g+`
`+$+" "+re})}function uo(c,_,g,y){c.info(function(){return"XMLHTTP TEXT ("+_+"): "+tS(c,g)+(y?" "+y:"")})}function eS(c,_){c.info(function(){return"TIMEOUT: "+_})}La.prototype.info=function(){};function tS(c,_){if(!c.g)return _;if(!_)return null;try{var g=JSON.parse(_);if(g){for(c=0;c<g.length;c++)if(Array.isArray(g[c])){var y=g[c];if(!(2>y.length)){var L=y[1];if(Array.isArray(L)&&!(1>L.length)){var $=L[0];if($!="noop"&&$!="stop"&&$!="close")for(var re=1;re<L.length;re++)L[re]=""}}}}return fe(g)}catch{return _}}var zu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},hm={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Dd;function ju(){}m(ju,et),ju.prototype.g=function(){return new XMLHttpRequest},ju.prototype.i=function(){return{}},Dd=new ju;function mi(c,_,g,y){this.j=c,this.i=_,this.l=g,this.R=y||1,this.U=new O(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new dm}function dm(){this.i=null,this.g="",this.h=!1}var fm={},Md={};function Ld(c,_,g){c.L=1,c.v=Wu(Mr(_)),c.m=g,c.P=!0,pm(c,null)}function pm(c,_){c.F=Date.now(),qu(c),c.A=Mr(c.v);var g=c.A,y=c.R;Array.isArray(y)||(y=[String(y)]),Rm(g.i,"t",y),c.C=0,g=c.j.J,c.h=new dm,c.g=Gm(c.j,g?_:null,!c.m),0<c.O&&(c.M=new V(d(c.Y,c,c.g),c.O)),_=c.U,g=c.g,y=c.ca;var L="readystatechange";Array.isArray(L)||(L&&(G[0]=L.toString()),L=G);for(var $=0;$<L.length;$++){var re=q(g,L[$],y||_.handleEvent,!1,_.h||_);if(!re)break;_.g[re.key]=re}_=c.H?w(c.H):{},c.m?(c.u||(c.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,_)):(c.u="GET",c.g.ea(c.A,c.u,null,_)),Dr(),XA(c.i,c.u,c.A,c.l,c.R,c.m)}mi.prototype.ca=function(c){c=c.target;const _=this.M;_&&Lr(c)==3?_.j():this.Y(c)},mi.prototype.Y=function(c){try{if(c==this.g)e:{const an=Lr(this.g);var _=this.g.Ba();const fo=this.g.Z();if(!(3>an)&&(an!=3||this.g&&(this.h.h||this.g.oa()||Dm(this.g)))){this.J||an!=4||_==7||(_==8||0>=fo?Dr(3):Dr(2)),Fd(this);var g=this.g.Z();this.X=g;t:if(_m(this)){var y=Dm(this.g);c="";var L=y.length,$=Lr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){cs(this),Fa(this);var re="";break t}this.h.i=new a.TextDecoder}for(_=0;_<L;_++)this.h.h=!0,c+=this.h.i.decode(y[_],{stream:!($&&_==L-1)});y.length=0,this.h.g+=c,this.C=0,re=this.h.g}else re=this.g.oa();if(this.o=g==200,ZA(this.i,this.u,this.A,this.l,this.R,an,g),this.o){if(this.T&&!this.K){t:{if(this.g){var tt,Xt=this.g;if((tt=Xt.g?Xt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(tt)){var ze=tt;break t}}ze=null}if(g=ze)uo(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ud(this,g);else{this.o=!1,this.s=3,mn(12),cs(this),Fa(this);break e}}if(this.P){g=!0;let rr;for(;!this.J&&this.C<re.length;)if(rr=nS(this,re),rr==Md){an==4&&(this.s=4,mn(14),g=!1),uo(this.i,this.l,null,"[Incomplete Response]");break}else if(rr==fm){this.s=4,mn(15),uo(this.i,this.l,re,"[Invalid Chunk]"),g=!1;break}else uo(this.i,this.l,rr,null),Ud(this,rr);if(_m(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),an!=4||re.length!=0||this.h.h||(this.s=1,mn(16),g=!1),this.o=this.o&&g,!g)uo(this.i,this.l,re,"[Invalid Chunked Response]"),cs(this),Fa(this);else if(0<re.length&&!this.W){this.W=!0;var on=this.j;on.g==this&&on.ba&&!on.M&&(on.j.info("Great, no buffering proxy detected. Bytes received: "+re.length),qd(on),on.M=!0,mn(11))}}else uo(this.i,this.l,re,null),Ud(this,re);an==4&&cs(this),this.o&&!this.J&&(an==4?$m(this.j,this):(this.o=!1,qu(this)))}else vS(this.g),g==400&&0<re.indexOf("Unknown SID")?(this.s=3,mn(12)):(this.s=0,mn(13)),cs(this),Fa(this)}}}catch{}finally{}};function _m(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function nS(c,_){var g=c.C,y=_.indexOf(`
`,g);return y==-1?Md:(g=Number(_.substring(g,y)),isNaN(g)?fm:(y+=1,y+g>_.length?Md:(_=_.slice(y,y+g),c.C=y+g,_)))}mi.prototype.cancel=function(){this.J=!0,cs(this)};function qu(c){c.S=Date.now()+c.I,gm(c,c.I)}function gm(c,_){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Ma(d(c.ba,c),_)}function Fd(c){c.B&&(a.clearTimeout(c.B),c.B=null)}mi.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(eS(this.i,this.A),this.L!=2&&(Dr(),mn(17)),cs(this),this.s=2,Fa(this)):gm(this,this.S-c)};function Fa(c){c.j.G==0||c.J||$m(c.j,c)}function cs(c){Fd(c);var _=c.M;_&&typeof _.ma=="function"&&_.ma(),c.M=null,ue(c.U),c.g&&(_=c.g,c.g=null,_.abort(),_.ma())}function Ud(c,_){try{var g=c.j;if(g.G!=0&&(g.g==c||Kd(g.h,c))){if(!c.K&&Kd(g.h,c)&&g.G==3){try{var y=g.Da.g.parse(_)}catch{y=null}if(Array.isArray(y)&&y.length==3){var L=y;if(L[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<c.F)ec(g),Xu(g);else break e;jd(g),mn(18)}}else g.za=L[1],0<g.za-g.T&&37500>L[2]&&g.F&&g.v==0&&!g.C&&(g.C=Ma(d(g.Za,g),6e3));if(1>=vm(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else ds(g,11)}else if((c.K||g.g==c)&&ec(g),!C(_))for(L=g.Da.g.parse(_),_=0;_<L.length;_++){let ze=L[_];if(g.T=ze[0],ze=ze[1],g.G==2)if(ze[0]=="c"){g.K=ze[1],g.ia=ze[2];const on=ze[3];on!=null&&(g.la=on,g.j.info("VER="+g.la));const an=ze[4];an!=null&&(g.Aa=an,g.j.info("SVER="+g.Aa));const fo=ze[5];fo!=null&&typeof fo=="number"&&0<fo&&(y=1.5*fo,g.L=y,g.j.info("backChannelRequestTimeoutMs_="+y)),y=g;const rr=c.g;if(rr){const nc=rr.g?rr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(nc){var $=y.h;$.g||nc.indexOf("spdy")==-1&&nc.indexOf("quic")==-1&&nc.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(Bd($,$.h),$.h=null))}if(y.D){const Gd=rr.g?rr.g.getResponseHeader("X-HTTP-Session-Id"):null;Gd&&(y.ya=Gd,at(y.I,y.D,Gd))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-c.F,g.j.info("Handshake RTT: "+g.R+"ms")),y=g;var re=c;if(y.qa=qm(y,y.J?y.ia:null,y.W),re.K){Tm(y.h,re);var tt=re,Xt=y.L;Xt&&(tt.I=Xt),tt.B&&(Fd(tt),qu(tt)),y.g=re}else Km(y);0<g.i.length&&Zu(g)}else ze[0]!="stop"&&ze[0]!="close"||ds(g,7);else g.G==3&&(ze[0]=="stop"||ze[0]=="close"?ze[0]=="stop"?ds(g,7):zd(g):ze[0]!="noop"&&g.l&&g.l.ta(ze),g.v=0)}}Dr(4)}catch{}}var rS=class{constructor(c,_){this.g=c,this.map=_}};function mm(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ym(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function vm(c){return c.h?1:c.g?c.g.size:0}function Kd(c,_){return c.h?c.h==_:c.g?c.g.has(_):!1}function Bd(c,_){c.g?c.g.add(_):c.h=_}function Tm(c,_){c.h&&c.h==_?c.h=null:c.g&&c.g.has(_)&&c.g.delete(_)}mm.prototype.cancel=function(){if(this.i=bm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function bm(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let _=c.i;for(const g of c.g.values())_=_.concat(g.D);return _}return T(c.i)}function iS(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var _=[],g=c.length,y=0;y<g;y++)_.push(c[y]);return _}_=[],g=0;for(y in c)_[g++]=c[y];return _}function sS(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var _=[];c=c.length;for(var g=0;g<c;g++)_.push(g);return _}_=[],g=0;for(const y in c)_[g++]=y;return _}}}function wm(c,_){if(c.forEach&&typeof c.forEach=="function")c.forEach(_,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,_,void 0);else for(var g=sS(c),y=iS(c),L=y.length,$=0;$<L;$++)_.call(void 0,y[$],g&&g[$],c)}var Im=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function oS(c,_){if(c){c=c.split("&");for(var g=0;g<c.length;g++){var y=c[g].indexOf("="),L=null;if(0<=y){var $=c[g].substring(0,y);L=c[g].substring(y+1)}else $=c[g];_($,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function hs(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof hs){this.h=c.h,Gu(this,c.j),this.o=c.o,this.g=c.g,Hu(this,c.s),this.l=c.l;var _=c.i,g=new Ba;g.i=_.i,_.g&&(g.g=new Map(_.g),g.h=_.h),Em(this,g),this.m=c.m}else c&&(_=String(c).match(Im))?(this.h=!1,Gu(this,_[1]||"",!0),this.o=Ua(_[2]||""),this.g=Ua(_[3]||"",!0),Hu(this,_[4]),this.l=Ua(_[5]||"",!0),Em(this,_[6]||"",!0),this.m=Ua(_[7]||"")):(this.h=!1,this.i=new Ba(null,this.h))}hs.prototype.toString=function(){var c=[],_=this.j;_&&c.push(Ka(_,km,!0),":");var g=this.g;return(g||_=="file")&&(c.push("//"),(_=this.o)&&c.push(Ka(_,km,!0),"@"),c.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&c.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&c.push("/"),c.push(Ka(g,g.charAt(0)=="/"?uS:lS,!0))),(g=this.i.toString())&&c.push("?",g),(g=this.m)&&c.push("#",Ka(g,hS)),c.join("")};function Mr(c){return new hs(c)}function Gu(c,_,g){c.j=g?Ua(_,!0):_,c.j&&(c.j=c.j.replace(/:$/,""))}function Hu(c,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);c.s=_}else c.s=null}function Em(c,_,g){_ instanceof Ba?(c.i=_,dS(c.i,c.h)):(g||(_=Ka(_,cS)),c.i=new Ba(_,c.h))}function at(c,_,g){c.i.set(_,g)}function Wu(c){return at(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Ua(c,_){return c?_?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Ka(c,_,g){return typeof c=="string"?(c=encodeURI(c).replace(_,aS),g&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function aS(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var km=/[#\/\?@]/g,lS=/[#\?:]/g,uS=/[#\?]/g,cS=/[#\?@]/g,hS=/#/g;function Ba(c,_){this.h=this.g=null,this.i=c||null,this.j=!!_}function yi(c){c.g||(c.g=new Map,c.h=0,c.i&&oS(c.i,function(_,g){c.add(decodeURIComponent(_.replace(/\+/g," ")),g)}))}n=Ba.prototype,n.add=function(c,_){yi(this),this.i=null,c=co(this,c);var g=this.g.get(c);return g||this.g.set(c,g=[]),g.push(_),this.h+=1,this};function Am(c,_){yi(c),_=co(c,_),c.g.has(_)&&(c.i=null,c.h-=c.g.get(_).length,c.g.delete(_))}function Sm(c,_){return yi(c),_=co(c,_),c.g.has(_)}n.forEach=function(c,_){yi(this),this.g.forEach(function(g,y){g.forEach(function(L){c.call(_,L,y,this)},this)},this)},n.na=function(){yi(this);const c=Array.from(this.g.values()),_=Array.from(this.g.keys()),g=[];for(let y=0;y<_.length;y++){const L=c[y];for(let $=0;$<L.length;$++)g.push(_[y])}return g},n.V=function(c){yi(this);let _=[];if(typeof c=="string")Sm(this,c)&&(_=_.concat(this.g.get(co(this,c))));else{c=Array.from(this.g.values());for(let g=0;g<c.length;g++)_=_.concat(c[g])}return _},n.set=function(c,_){return yi(this),this.i=null,c=co(this,c),Sm(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[_]),this.h+=1,this},n.get=function(c,_){return c?(c=this.V(c),0<c.length?String(c[0]):_):_};function Rm(c,_,g){Am(c,_),0<g.length&&(c.i=null,c.g.set(co(c,_),T(g)),c.h+=g.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],_=Array.from(this.g.keys());for(var g=0;g<_.length;g++){var y=_[g];const $=encodeURIComponent(String(y)),re=this.V(y);for(y=0;y<re.length;y++){var L=$;re[y]!==""&&(L+="="+encodeURIComponent(String(re[y]))),c.push(L)}}return this.i=c.join("&")};function co(c,_){return _=String(_),c.j&&(_=_.toLowerCase()),_}function dS(c,_){_&&!c.j&&(yi(c),c.i=null,c.g.forEach(function(g,y){var L=y.toLowerCase();y!=L&&(Am(this,y),Rm(this,L,g))},c)),c.j=_}function fS(c,_){const g=new La;if(a.Image){const y=new Image;y.onload=p(vi,g,"TestLoadImage: loaded",!0,_,y),y.onerror=p(vi,g,"TestLoadImage: error",!1,_,y),y.onabort=p(vi,g,"TestLoadImage: abort",!1,_,y),y.ontimeout=p(vi,g,"TestLoadImage: timeout",!1,_,y),a.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=c}else _(!1)}function pS(c,_){const g=new La,y=new AbortController,L=setTimeout(()=>{y.abort(),vi(g,"TestPingServer: timeout",!1,_)},1e4);fetch(c,{signal:y.signal}).then($=>{clearTimeout(L),$.ok?vi(g,"TestPingServer: ok",!0,_):vi(g,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(L),vi(g,"TestPingServer: error",!1,_)})}function vi(c,_,g,y,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),y(g)}catch{}}function _S(){this.g=new ve}function gS(c,_,g){const y=g||"";try{wm(c,function(L,$){let re=L;h(L)&&(re=fe(L)),_.push(y+$+"="+encodeURIComponent(re))})}catch(L){throw _.push(y+"type="+encodeURIComponent("_badmap")),L}}function Qu(c){this.l=c.Ub||null,this.j=c.eb||!1}m(Qu,et),Qu.prototype.g=function(){return new Yu(this.l,this.j)},Qu.prototype.i=function(c){return function(){return c}}({});function Yu(c,_){ye.call(this),this.D=c,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}m(Yu,ye),n=Yu.prototype,n.open=function(c,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=_,this.readyState=1,za(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(_.body=c),(this.D||a).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,$a(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,za(this)),this.g&&(this.readyState=3,za(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Pm(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Pm(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var _=c.value?c.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!c.done}))&&(this.response=this.responseText+=_)}c.done?$a(this):za(this),this.readyState==3&&Pm(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,$a(this))},n.Qa=function(c){this.g&&(this.response=c,$a(this))},n.ga=function(){this.g&&$a(this)};function $a(c){c.readyState=4,c.l=null,c.j=null,c.v=null,za(c)}n.setRequestHeader=function(c,_){this.u.append(c,_)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],_=this.h.entries();for(var g=_.next();!g.done;)g=g.value,c.push(g[0]+": "+g[1]),g=_.next();return c.join(`\r
`)};function za(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Yu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Cm(c){let _="";return ne(c,function(g,y){_+=y,_+=":",_+=g,_+=`\r
`}),_}function $d(c,_,g){e:{for(y in g){var y=!1;break e}y=!0}y||(g=Cm(g),typeof c=="string"?g!=null&&encodeURIComponent(String(g)):at(c,_,g))}function kt(c){ye.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}m(kt,ye);var mS=/^https?$/i,yS=["POST","PUT"];n=kt.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,_,g,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);_=_?_.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Dd.g(),this.v=this.o?Tt(this.o):Tt(Dd),this.g.onreadystatechange=d(this.Ea,this);try{this.B=!0,this.g.open(_,String(c),!0),this.B=!1}catch($){xm(this,$);return}if(c=g||"",g=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var L in y)g.set(L,y[L]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(const $ of y.keys())g.set($,y.get($));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(g.keys()).find($=>$.toLowerCase()=="content-type"),L=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(yS,_,void 0))||y||L||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,re]of g)this.g.setRequestHeader($,re);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Vm(this),this.u=!0,this.g.send(c),this.u=!1}catch($){xm(this,$)}};function xm(c,_){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=_,c.m=5,Om(c),Ju(c)}function Om(c){c.A||(c.A=!0,Ce(c,"complete"),Ce(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Ce(this,"complete"),Ce(this,"abort"),Ju(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ju(this,!0)),kt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Nm(this):this.bb())},n.bb=function(){Nm(this)};function Nm(c){if(c.h&&typeof o<"u"&&(!c.v[1]||Lr(c)!=4||c.Z()!=2)){if(c.u&&Lr(c)==4)Gt(c.Ea,0,c);else if(Ce(c,"readystatechange"),Lr(c)==4){c.h=!1;try{const re=c.Z();e:switch(re){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var g;if(!(g=_)){var y;if(y=re===0){var L=String(c.D).match(Im)[1]||null;!L&&a.self&&a.self.location&&(L=a.self.location.protocol.slice(0,-1)),y=!mS.test(L?L.toLowerCase():"")}g=y}if(g)Ce(c,"complete"),Ce(c,"success");else{c.m=6;try{var $=2<Lr(c)?c.g.statusText:""}catch{$=""}c.l=$+" ["+c.Z()+"]",Om(c)}}finally{Ju(c)}}}}function Ju(c,_){if(c.g){Vm(c);const g=c.g,y=c.v[0]?()=>{}:null;c.g=null,c.v=null,_||Ce(c,"ready");try{g.onreadystatechange=y}catch{}}}function Vm(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function Lr(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<Lr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var _=this.g.responseText;return c&&_.indexOf(c)==0&&(_=_.substring(c.length)),we(_)}};function Dm(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function vS(c){const _={};c=(c.g&&2<=Lr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<c.length;y++){if(C(c[y]))continue;var g=P(c[y]);const L=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const $=_[L]||[];_[L]=$,$.push(g)}k(_,function(y){return y.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ja(c,_,g){return g&&g.internalChannelParams&&g.internalChannelParams[c]||_}function Mm(c){this.Aa=0,this.i=[],this.j=new La,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ja("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ja("baseRetryDelayMs",5e3,c),this.cb=ja("retryDelaySeedMs",1e4,c),this.Wa=ja("forwardChannelMaxRetries",2,c),this.wa=ja("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new mm(c&&c.concurrentRequestLimit),this.Da=new _S,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Mm.prototype,n.la=8,n.G=1,n.connect=function(c,_,g,y){mn(0),this.W=c,this.H=_||{},g&&y!==void 0&&(this.H.OSID=g,this.H.OAID=y),this.F=this.X,this.I=qm(this,null,this.W),Zu(this)};function zd(c){if(Lm(c),c.G==3){var _=c.U++,g=Mr(c.I);if(at(g,"SID",c.K),at(g,"RID",_),at(g,"TYPE","terminate"),qa(c,g),_=new mi(c,c.j,_),_.L=2,_.v=Wu(Mr(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(_.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=_.v,g=!0),g||(_.g=Gm(_.j,null),_.g.ea(_.v)),_.F=Date.now(),qu(_)}jm(c)}function Xu(c){c.g&&(qd(c),c.g.cancel(),c.g=null)}function Lm(c){Xu(c),c.u&&(a.clearTimeout(c.u),c.u=null),ec(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Zu(c){if(!ym(c.h)&&!c.s){c.s=!0;var _=c.Ga;le||Ut(),Pe||(le(),Pe=!0),vt.add(_,c),c.B=0}}function TS(c,_){return vm(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=_.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Ma(d(c.Ga,c,_),zm(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const L=new mi(this,this.j,c);let $=this.o;if(this.S&&($?($=w($),R($,this.S)):$=this.S),this.m!==null||this.O||(L.H=$,$=null),this.P)e:{for(var _=0,g=0;g<this.i.length;g++){t:{var y=this.i[g];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(_+=y,4096<_){_=g;break e}if(_===4096||g===this.i.length-1){_=g+1;break e}}_=1e3}else _=1e3;_=Um(this,L,_),g=Mr(this.I),at(g,"RID",c),at(g,"CVER",22),this.D&&at(g,"X-HTTP-Session-Id",this.D),qa(this,g),$&&(this.O?_="headers="+encodeURIComponent(String(Cm($)))+"&"+_:this.m&&$d(g,this.m,$)),Bd(this.h,L),this.Ua&&at(g,"TYPE","init"),this.P?(at(g,"$req",_),at(g,"SID","null"),L.T=!0,Ld(L,g,null)):Ld(L,g,_),this.G=2}}else this.G==3&&(c?Fm(this,c):this.i.length==0||ym(this.h)||Fm(this))};function Fm(c,_){var g;_?g=_.l:g=c.U++;const y=Mr(c.I);at(y,"SID",c.K),at(y,"RID",g),at(y,"AID",c.T),qa(c,y),c.m&&c.o&&$d(y,c.m,c.o),g=new mi(c,c.j,g,c.B+1),c.m===null&&(g.H=c.o),_&&(c.i=_.D.concat(c.i)),_=Um(c,g,1e3),g.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Bd(c.h,g),Ld(g,y,_)}function qa(c,_){c.H&&ne(c.H,function(g,y){at(_,y,g)}),c.l&&wm({},function(g,y){at(_,y,g)})}function Um(c,_,g){g=Math.min(c.i.length,g);var y=c.l?d(c.l.Na,c.l,c):null;e:{var L=c.i;let $=-1;for(;;){const re=["count="+g];$==-1?0<g?($=L[0].g,re.push("ofs="+$)):$=0:re.push("ofs="+$);let tt=!0;for(let Xt=0;Xt<g;Xt++){let ze=L[Xt].g;const on=L[Xt].map;if(ze-=$,0>ze)$=Math.max(0,L[Xt].g-100),tt=!1;else try{gS(on,re,"req"+ze+"_")}catch{y&&y(on)}}if(tt){y=re.join("&");break e}}}return c=c.i.splice(0,g),_.D=c,y}function Km(c){if(!c.g&&!c.u){c.Y=1;var _=c.Fa;le||Ut(),Pe||(le(),Pe=!0),vt.add(_,c),c.v=0}}function jd(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Ma(d(c.Fa,c),zm(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,Bm(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Ma(d(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,mn(10),Xu(this),Bm(this))};function qd(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function Bm(c){c.g=new mi(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var _=Mr(c.qa);at(_,"RID","rpc"),at(_,"SID",c.K),at(_,"AID",c.T),at(_,"CI",c.F?"0":"1"),!c.F&&c.ja&&at(_,"TO",c.ja),at(_,"TYPE","xmlhttp"),qa(c,_),c.m&&c.o&&$d(_,c.m,c.o),c.L&&(c.g.I=c.L);var g=c.g;c=c.ia,g.L=1,g.v=Wu(Mr(_)),g.m=null,g.P=!0,pm(g,c)}n.Za=function(){this.C!=null&&(this.C=null,Xu(this),jd(this),mn(19))};function ec(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function $m(c,_){var g=null;if(c.g==_){ec(c),qd(c),c.g=null;var y=2}else if(Kd(c.h,_))g=_.D,Tm(c.h,_),y=1;else return;if(c.G!=0){if(_.o)if(y==1){g=_.m?_.m.length:0,_=Date.now()-_.F;var L=c.B;y=gi(),Ce(y,new cm(y,g)),Zu(c)}else Km(c);else if(L=_.s,L==3||L==0&&0<_.X||!(y==1&&TS(c,_)||y==2&&jd(c)))switch(g&&0<g.length&&(_=c.h,_.i=_.i.concat(g)),L){case 1:ds(c,5);break;case 4:ds(c,10);break;case 3:ds(c,6);break;default:ds(c,2)}}}function zm(c,_){let g=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(g*=2),g*_}function ds(c,_){if(c.j.info("Error code "+_),_==2){var g=d(c.fb,c),y=c.Xa;const L=!y;y=new hs(y||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Gu(y,"https"),Wu(y),L?fS(y.toString(),g):pS(y.toString(),g)}else mn(2);c.G=0,c.l&&c.l.sa(_),jm(c),Lm(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),mn(2)):(this.j.info("Failed to ping google.com"),mn(1))};function jm(c){if(c.G=0,c.ka=[],c.l){const _=bm(c.h);(_.length!=0||c.i.length!=0)&&(v(c.ka,_),v(c.ka,c.i),c.h.i.length=0,T(c.i),c.i.length=0),c.l.ra()}}function qm(c,_,g){var y=g instanceof hs?Mr(g):new hs(g);if(y.g!="")_&&(y.g=_+"."+y.g),Hu(y,y.s);else{var L=a.location;y=L.protocol,_=_?_+"."+L.hostname:L.hostname,L=+L.port;var $=new hs(null);y&&Gu($,y),_&&($.g=_),L&&Hu($,L),g&&($.l=g),y=$}return g=c.D,_=c.ya,g&&_&&at(y,g,_),at(y,"VER",c.la),qa(c,y),y}function Gm(c,_,g){if(_&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=c.Ca&&!c.pa?new kt(new Qu({eb:g})):new kt(c.pa),_.Ha(c.J),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Hm(){}n=Hm.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function tc(){}tc.prototype.g=function(c,_){return new Mn(c,_)};function Mn(c,_){ye.call(this),this.g=new Mm(_),this.l=c,this.h=_&&_.messageUrlParams||null,c=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(c?c["X-WebChannel-Content-Type"]=_.messageContentType:c={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(c?c["X-WebChannel-Client-Profile"]=_.va:c={"X-WebChannel-Client-Profile":_.va}),this.g.S=c,(c=_&&_.Sb)&&!C(c)&&(this.g.m=c),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!C(_)&&(this.g.D=_,c=this.h,c!==null&&_ in c&&(c=this.h,_ in c&&delete c[_])),this.j=new ho(this)}m(Mn,ye),Mn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Mn.prototype.close=function(){zd(this.g)},Mn.prototype.o=function(c){var _=this.g;if(typeof c=="string"){var g={};g.__data__=c,c=g}else this.u&&(g={},g.__data__=fe(c),c=g);_.i.push(new rS(_.Ya++,c)),_.G==3&&Zu(_)},Mn.prototype.N=function(){this.g.l=null,delete this.j,zd(this.g),delete this.g,Mn.aa.N.call(this)};function Wm(c){Dt.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var _=c.__sm__;if(_){e:{for(const g in _){c=g;break e}c=void 0}(this.i=c)&&(c=this.i,_=_!==null&&c in _?_[c]:void 0),this.data=_}else this.data=c}m(Wm,Dt);function Qm(){Ht.call(this),this.status=1}m(Qm,Ht);function ho(c){this.g=c}m(ho,Hm),ho.prototype.ua=function(){Ce(this.g,"a")},ho.prototype.ta=function(c){Ce(this.g,new Wm(c))},ho.prototype.sa=function(c){Ce(this.g,new Qm)},ho.prototype.ra=function(){Ce(this.g,"b")},tc.prototype.createWebChannel=tc.prototype.g,Mn.prototype.send=Mn.prototype.o,Mn.prototype.open=Mn.prototype.m,Mn.prototype.close=Mn.prototype.close,SE=function(){return new tc},AE=function(){return gi()},kE=Mt,sp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},zu.NO_ERROR=0,zu.TIMEOUT=8,zu.HTTP_ERROR=6,Rc=zu,hm.COMPLETE="complete",EE=hm,Kt.EventType=qe,qe.OPEN="a",qe.CLOSE="b",qe.ERROR="c",qe.MESSAGE="d",ye.prototype.listen=ye.prototype.K,hl=Kt,kt.prototype.listenOnce=kt.prototype.L,kt.prototype.getLastError=kt.prototype.Ka,kt.prototype.getLastErrorCode=kt.prototype.Ba,kt.prototype.getStatus=kt.prototype.Z,kt.prototype.getResponseJson=kt.prototype.Oa,kt.prototype.getResponseText=kt.prototype.oa,kt.prototype.send=kt.prototype.ea,kt.prototype.setWithCredentials=kt.prototype.Ha,IE=kt}).apply(typeof ac<"u"?ac:typeof self<"u"?self:typeof window<"u"?window:{});const Iv="@firebase/firestore",Ev="4.7.9";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Qt.UNAUTHENTICATED=new Qt(null),Qt.GOOGLE_CREDENTIALS=new Qt("google-credentials-uid"),Qt.FIRST_PARTY=new Qt("first-party-uid"),Qt.MOCK_USER=new Qt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sa="11.4.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zi=new jh("@firebase/firestore");function Ro(){return zi.logLevel}function BM(n){zi.setLogLevel(n)}function W(n,...e){if(zi.logLevel<=Me.DEBUG){const t=e.map(q_);zi.debug(`Firestore (${Sa}): ${n}`,...t)}}function Ct(n,...e){if(zi.logLevel<=Me.ERROR){const t=e.map(q_);zi.error(`Firestore (${Sa}): ${n}`,...t)}}function xr(n,...e){if(zi.logLevel<=Me.WARN){const t=e.map(q_);zi.warn(`Firestore (${Sa}): ${n}`,...t)}}function q_(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function de(n="Unexpected state"){const e=`FIRESTORE (${Sa}) INTERNAL ASSERTION FAILED: `+n;throw Ct(e),new Error(e)}function pe(n,e){n||de()}function $M(n,e){n||de()}function ae(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class H extends fn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class zM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Qt.UNAUTHENTICATED))}shutdown(){}}class jM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class qM{constructor(e){this.t=e,this.currentUser=Qt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){pe(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve();let s=new rn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new rn,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new rn)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(pe(typeof r.accessToken=="string"),new RE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return pe(e===null||typeof e=="string"),new Qt(e)}}class GM{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Qt.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class HM{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new GM(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Qt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class kv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class WM{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,ct(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){pe(this.o===void 0);const r=s=>{s.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,W("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new kv(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(pe(typeof t.token=="string"),this.R=t.token,new kv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QM(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=QM(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}}function Se(n,e){return n<e?-1:n>e?1:0}function ra(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function CE(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Av=-62135596800,Sv=1e6;class yt{static now(){return yt.fromMillis(Date.now())}static fromDate(e){return yt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Sv);return new yt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new H(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new H(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Av)throw new H(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new H(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Sv}_compareTo(e){return this.seconds===e.seconds?Se(this.nanoseconds,e.nanoseconds):Se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Av;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{static fromTimestamp(e){return new me(e)}static min(){return new me(new yt(0,0))}static max(){return new me(new yt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rv="__name__";class pr{constructor(e,t,r){t===void 0?t=0:t>e.length&&de(),r===void 0?r=e.length-t:r>e.length-t&&de(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return pr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof pr?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=pr.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return Math.sign(e.length-t.length)}static compareSegments(e,t){const r=pr.isNumericId(e),i=pr.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?pr.extractNumericId(e).compare(pr.extractNumericId(t)):e<t?-1:e>t?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Li.fromString(e.substring(4,e.length-2))}}class Ue extends pr{construct(e,t,r){return new Ue(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new H(B.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Ue(t)}static emptyPath(){return new Ue([])}}const YM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class gt extends pr{construct(e,t,r){return new gt(e,t,r)}static isValidIdentifier(e){return YM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),gt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Rv}static keyField(){return new gt([Rv])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(r.length===0)throw new H(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new H(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new H(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new H(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new gt(t)}static emptyPath(){return new gt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.path=e}static fromPath(e){return new se(Ue.fromString(e))}static fromName(e){return new se(Ue.fromString(e).popFirst(5))}static empty(){return new se(Ue.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ue.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ue.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new se(new Ue(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ia=-1;class nh{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function op(n){return n.fields.find(e=>e.kind===2)}function ys(n){return n.fields.filter(e=>e.kind!==2)}nh.UNKNOWN_ID=-1;class Pc{constructor(e,t){this.fieldPath=e,this.kind=t}}class eu{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new eu(0,Wn.min())}}function xE(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=me.fromTimestamp(r===1e9?new yt(t+1,0):new yt(t,r));return new Wn(i,se.empty(),e)}function OE(n){return new Wn(n.readTime,n.key,ia)}class Wn{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Wn(me.min(),se.empty(),ia)}static max(){return new Wn(me.max(),se.empty(),ia)}}function G_(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=se.comparator(n.documentKey,e.documentKey),t!==0?t:Se(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class VE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rs(n){if(n.code!==B.FAILED_PRECONDITION||n.message!==NE)throw n;W("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&de(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new D((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof D?t:D.resolve(t)}catch(t){return D.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):D.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):D.reject(t)}static resolve(e){return new D((t,r)=>{t(e)})}static reject(e){return new D((t,r)=>{r(e)})}static waitFor(e){return new D((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},l=>r(l))}),o=!0,s===i&&t()})}static or(e){let t=D.resolve(!1);for(const r of e)t=t.next(i=>i?D.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new D((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const h=l;t(e[h]).next(f=>{o[h]=f,++a,a===s&&r(o)},f=>i(f))}})}static doWhile(e,t){return new D((r,i)=>{const s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bn="SimpleDb";class nd{static open(e,t,r,i){try{return new nd(t,e.transaction(i,r))}catch(s){throw new Cl(t,s)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.m=new rn,this.transaction.oncomplete=()=>{this.m.resolve()},this.transaction.onabort=()=>{t.error?this.m.reject(new Cl(e,t.error)):this.m.resolve()},this.transaction.onerror=r=>{const i=H_(r.target.error);this.m.reject(new Cl(e,i))}}get p(){return this.m.promise}abort(e){e&&this.m.reject(e),this.aborted||(W(Bn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}S(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new XM(t)}}class Ar{static delete(e){return W(Bn,"Removing database:",e),bs(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Hl())return!1;if(Ar.v())return!0;const e=wt(),t=Ar.C(e),r=0<t&&t<10,i=DE(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,t){return e.store(t)}static C(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.O=r,Ar.C(wt())===12.2&&Ct("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async N(e){return this.db||(W(Bn,"Opening database:",this.name),this.db=await new Promise((t,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;t(o)},i.onblocked=()=>{r(new Cl(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new H(B.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new H(B.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Cl(e,o))},i.onupgradeneeded=s=>{W(Bn,'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.O.B(o,i.transaction,s.oldVersion,this.version).next(()=>{W(Bn,"Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=t=>this.L(t)),this.db}k(e){this.L=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,i){const s=t==="readonly";let o=0;for(;;){++o;try{this.db=await this.N(e);const a=nd.open(this.db,e,s?"readonly":"readwrite",r),l=i(a).next(h=>(a.S(),h)).catch(h=>(a.abort(h),D.reject(h))).toPromise();return l.catch(()=>{}),await a.p,l}catch(a){const l=a,h=l.name!=="FirebaseError"&&o<3;if(W(Bn,"Transaction failed with error:",l.message,"Retrying:",h),this.close(),!h)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function DE(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class JM{constructor(e){this.q=e,this.$=!1,this.K=null}get isDone(){return this.$}get U(){return this.K}set cursor(e){this.q=e}done(){this.$=!0}W(e){this.K=e}delete(){return bs(this.q.delete())}}class Cl extends H{constructor(e,t){super(B.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function is(n){return n.name==="IndexedDbTransactionError"}class XM{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(W(Bn,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(W(Bn,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),bs(r)}add(e){return W(Bn,"ADD",this.store.name,e,e),bs(this.store.add(e))}get(e){return bs(this.store.get(e)).next(t=>(t===void 0&&(t=null),W(Bn,"GET",this.store.name,e,t),t))}delete(e){return W(Bn,"DELETE",this.store.name,e),bs(this.store.delete(e))}count(){return W(Bn,"COUNT",this.store.name),bs(this.store.count())}G(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new D((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{const s=this.cursor(r),o=[];return this.j(s,(a,l)=>{o.push(l)}).next(()=>o)}}H(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new D((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}J(e,t){W(Bn,"DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const i=this.cursor(r);return this.j(i,(s,o,a)=>a.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.j(i,t)}X(e){const t=this.cursor({});return new D((r,i)=>{t.onerror=s=>{const o=H_(s.target.error);i(o)},t.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}j(e,t){const r=[];return new D((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new JM(a),h=t(a.primaryKey,a.value,l);if(h instanceof D){const f=h.catch(u=>(l.done(),D.reject(u)));r.push(f)}l.isDone?i():l.U===null?a.continue():a.continue(l.U)}}).next(()=>D.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function bs(n){return new D((e,t)=>{n.onsuccess=r=>{const i=r.target.result;e(i)},n.onerror=r=>{const i=H_(r.target.error);t(i)}})}let Pv=!1;function H_(n){const e=Ar.C(wt());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new H("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Pv||(Pv=!0,setTimeout(()=>{throw r},0)),r}}return n}const xl="IndexBackfiller";class ZM{constructor(e,t){this.asyncQueue=e,this.ee=t,this.task=null}start(){this.te(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}te(e){W(xl,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const t=await this.ee.ne();W(xl,`Documents written: ${t}`)}catch(t){is(t)?W(xl,"Ignoring IndexedDB error during index backfill: ",t):await rs(t)}await this.te(6e4)})}}class eL{constructor(e,t){this.localStore=e,this.persistence=t}async ne(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.re(t,e))}re(e,t){const r=new Set;let i=t,s=!0;return D.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return W(xl,`Processing collection: ${o}`),this.ie(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>t-i)}ie(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.se(i,s)).next(a=>(W(xl,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}se(e,t){let r=e;return t.changes.forEach((i,s)=>{const o=OE(s);G_(o,r)>0&&(r=o)}),new Wn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.oe(r),this._e=r=>t.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}On.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fi=-1;function Su(n){return n==null}function tu(n){return n===0&&1/n==-1/0}function ME(n){return typeof n=="number"&&Number.isInteger(n)&&!tu(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rh="";function pn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Cv(e)),e=tL(n.get(t),e);return Cv(e)}function tL(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="";break;case rh:t+="";break;default:t+=s}}return t}function Cv(n){return n+rh+""}function Ir(n){const e=n.length;if(pe(e>=2),e===2)return pe(n.charAt(0)===rh&&n.charAt(1)===""),Ue.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const o=n.indexOf(rh,s);switch((o<0||o>t)&&de(),n.charAt(o+1)){case"":const a=n.substring(s,o);let l;i.length===0?l=a:(i+=a,l=i,i=""),r.push(l);break;case"":i+=n.substring(s,o),i+="\0";break;case"":i+=n.substring(s,o+1);break;default:de()}s=o+2}return new Ue(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs="remoteDocuments",Ru="owner",yo="owner",nu="mutationQueues",nL="userId",ir="mutations",xv="batchId",Ss="userMutationsIndex",Ov=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cc(n,e){return[n,pn(e)]}function LE(n,e,t){return[n,pn(e),t]}const rL={},sa="documentMutations",ih="remoteDocumentsV14",iL=["prefixPath","collectionGroup","readTime","documentId"],xc="documentKeyIndex",sL=["prefixPath","collectionGroup","documentId"],FE="collectionGroupIndex",oL=["collectionGroup","readTime","prefixPath","documentId"],ru="remoteDocumentGlobal",ap="remoteDocumentGlobalKey",oa="targets",UE="queryTargetsIndex",aL=["canonicalId","targetId"],aa="targetDocuments",lL=["targetId","path"],W_="documentTargetsIndex",uL=["path","targetId"],sh="targetGlobalKey",Ds="targetGlobal",iu="collectionParents",cL=["collectionId","parent"],la="clientMetadata",hL="clientId",rd="bundles",dL="bundleId",id="namedQueries",fL="name",Q_="indexConfiguration",pL="indexId",lp="collectionGroupIndex",_L="collectionGroup",oh="indexState",gL=["indexId","uid"],KE="sequenceNumberIndex",mL=["uid","sequenceNumber"],ah="indexEntries",yL=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],BE="documentKeyIndex",vL=["indexId","uid","orderedDocumentKey"],sd="documentOverlays",TL=["userId","collectionPath","documentId"],up="collectionPathOverlayIndex",bL=["userId","collectionPath","largestBatchId"],$E="collectionGroupOverlayIndex",wL=["userId","collectionGroup","largestBatchId"],Y_="globals",IL="name",zE=[nu,ir,sa,vs,oa,Ru,Ds,aa,la,ru,iu,rd,id],EL=[...zE,sd],jE=[nu,ir,sa,ih,oa,Ru,Ds,aa,la,ru,iu,rd,id,sd],qE=jE,J_=[...qE,Q_,oh,ah],kL=J_,AL=[...J_,Y_];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp extends VE{constructor(e,t){super(),this.ue=e,this.currentSequenceNumber=t}}function jt(n,e){const t=ae(n);return Ar.M(t.ue,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nv(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ss(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function GE(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e,t){this.comparator=e,this.root=t||Zt.EMPTY}insert(e,t){return new ot(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Zt.BLACK,null,null))}remove(e){return new ot(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new lc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new lc(this.root,e,this.comparator,!1)}getReverseIterator(){return new lc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new lc(this.root,e,this.comparator,!0)}}class lc{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Zt{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??Zt.RED,this.left=i??Zt.EMPTY,this.right=s??Zt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Zt(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Zt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Zt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Zt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Zt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw de();const e=this.left.check();if(e!==this.right.check())throw de();return e+(this.isRed()?0:1)}}Zt.EMPTY=null,Zt.RED=!0,Zt.BLACK=!1;Zt.EMPTY=new class{constructor(){this.size=0}get key(){throw de()}get value(){throw de()}get color(){throw de()}get left(){throw de()}get right(){throw de()}copy(e,t,r,i,s){return this}insert(e,t,r){return new Zt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e){this.comparator=e,this.data=new ot(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Vv(this.data.getIterator())}getIteratorFrom(e){return new Vv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Je)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Je(this.comparator);return t.data=e,t}}class Vv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function vo(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this.fields=e,e.sort(gt.comparator)}static empty(){return new Nn([])}unionWith(e){let t=new Je(gt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Nn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ra(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SL(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new HE("Invalid base64 string: "+s):s}}(e);return new St(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new St(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}St.EMPTY_BYTE_STRING=new St("");const RL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ni(n){if(pe(!!n),typeof n=="string"){let e=0;const t=RL.exec(n);if(pe(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:pt(n.seconds),nanos:pt(n.nanos)}}function pt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ri(n){return typeof n=="string"?St.fromBase64String(n):St.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WE="server_timestamp",QE="__type__",YE="__previous_value__",JE="__local_write_time__";function od(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[QE])===null||t===void 0?void 0:t.stringValue)===WE}function ad(n){const e=n.mapValue.fields[YE];return od(e)?ad(e):e}function su(n){const e=ni(n.mapValue.fields[JE].timestampValue);return new yt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PL{constructor(e,t,r,i,s,o,a,l,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=h}}const hp="(default)";class ji{constructor(e,t){this.projectId=e,this.database=t||hp}static empty(){return new ji("","")}get isDefaultDatabase(){return this.database===hp}isEqual(e){return e instanceof ji&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X_="__type__",XE="__max__",xi={mapValue:{fields:{__type__:{stringValue:XE}}}},Z_="__vector__",ua="value",Oc={nullValue:"NULL_VALUE"};function qi(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?od(n)?4:ZE(n)?9007199254740991:ld(n)?10:11:de()}function Or(n,e){if(n===e)return!0;const t=qi(n);if(t!==qi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return su(n).isEqual(su(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=ni(i.timestampValue),a=ni(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return ri(i.bytesValue).isEqual(ri(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return pt(i.geoPointValue.latitude)===pt(s.geoPointValue.latitude)&&pt(i.geoPointValue.longitude)===pt(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return pt(i.integerValue)===pt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=pt(i.doubleValue),a=pt(s.doubleValue);return o===a?tu(o)===tu(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return ra(n.arrayValue.values||[],e.arrayValue.values||[],Or);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Nv(o)!==Nv(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Or(o[l],a[l])))return!1;return!0}(n,e);default:return de()}}function ou(n,e){return(n.values||[]).find(t=>Or(t,e))!==void 0}function Gi(n,e){if(n===e)return 0;const t=qi(n),r=qi(e);if(t!==r)return Se(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Se(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=pt(s.integerValue||s.doubleValue),l=pt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,e);case 3:return Dv(n.timestampValue,e.timestampValue);case 4:return Dv(su(n),su(e));case 5:return Se(n.stringValue,e.stringValue);case 6:return function(s,o){const a=ri(s),l=ri(o);return a.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let h=0;h<a.length&&h<l.length;h++){const f=Se(a[h],l[h]);if(f!==0)return f}return Se(a.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Se(pt(s.latitude),pt(o.latitude));return a!==0?a:Se(pt(s.longitude),pt(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Mv(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,h,f;const u=s.fields||{},d=o.fields||{},p=(a=u[ua])===null||a===void 0?void 0:a.arrayValue,m=(l=d[ua])===null||l===void 0?void 0:l.arrayValue,T=Se(((h=p==null?void 0:p.values)===null||h===void 0?void 0:h.length)||0,((f=m==null?void 0:m.values)===null||f===void 0?void 0:f.length)||0);return T!==0?T:Mv(p,m)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===xi.mapValue&&o===xi.mapValue)return 0;if(s===xi.mapValue)return 1;if(o===xi.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),h=o.fields||{},f=Object.keys(h);l.sort(),f.sort();for(let u=0;u<l.length&&u<f.length;++u){const d=Se(l[u],f[u]);if(d!==0)return d;const p=Gi(a[l[u]],h[f[u]]);if(p!==0)return p}return Se(l.length,f.length)}(n.mapValue,e.mapValue);default:throw de()}}function Dv(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Se(n,e);const t=ni(n),r=ni(e),i=Se(t.seconds,r.seconds);return i!==0?i:Se(t.nanos,r.nanos)}function Mv(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=Gi(t[i],r[i]);if(s)return s}return Se(t.length,r.length)}function ca(n){return dp(n)}function dp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=ni(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return ri(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return se.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=dp(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${dp(t.fields[o])}`;return i+"}"}(n.mapValue):de()}function Nc(n){switch(qi(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ad(n);return e?16+Nc(e):16;case 5:return 2*n.stringValue.length;case 6:return ri(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+Nc(s),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return ss(r.fields,(s,o)=>{i+=s.length+Nc(o)}),i}(n.mapValue);default:throw de()}}function zs(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function fp(n){return!!n&&"integerValue"in n}function au(n){return!!n&&"arrayValue"in n}function Lv(n){return!!n&&"nullValue"in n}function Fv(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Vc(n){return!!n&&"mapValue"in n}function ld(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[X_])===null||t===void 0?void 0:t.stringValue)===Z_}function Ol(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return ss(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Ol(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ol(n.arrayValue.values[t]);return e}return Object.assign({},n)}function ZE(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===XE}const e0={mapValue:{fields:{[X_]:{stringValue:Z_},[ua]:{arrayValue:{}}}}};function CL(n){return"nullValue"in n?Oc:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?zs(ji.empty(),se.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?ld(n)?e0:{mapValue:{}}:de()}function xL(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?zs(ji.empty(),se.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?e0:"mapValue"in n?ld(n)?{mapValue:{}}:xi:de()}function Uv(n,e){const t=Gi(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Kv(n,e){const t=Gi(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.value=e}static empty(){return new nn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Vc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ol(t)}setAll(e){let t=gt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=Ol(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());Vc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Or(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Vc(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ss(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new nn(Ol(this.value))}}function t0(n){const e=[];return ss(n.fields,(t,r)=>{const i=new gt([t]);if(Vc(r)){const s=t0(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Nn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new ut(e,0,me.min(),me.min(),me.min(),nn.empty(),0)}static newFoundDocument(e,t,r,i){return new ut(e,1,t,me.min(),r,i,0)}static newNoDocument(e,t){return new ut(e,2,t,me.min(),me.min(),nn.empty(),0)}static newUnknownDocument(e,t){return new ut(e,3,t,me.min(),me.min(),nn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=nn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=nn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ut&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ut(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(e,t){this.position=e,this.inclusive=t}}function Bv(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(s.field.isKeyField()?r=se.comparator(se.fromName(o.referenceValue),t.key):r=Gi(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function $v(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Or(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e,t="asc"){this.field=e,this.dir=t}}function OL(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0{}class Ke extends n0{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new NL(e,t,r):t==="array-contains"?new ML(e,r):t==="in"?new l0(e,r):t==="not-in"?new LL(e,r):t==="array-contains-any"?new FL(e,r):new Ke(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new VL(e,r):new DL(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Gi(t,this.value)):t!==null&&qi(this.value)===qi(t)&&this.matchesComparison(Gi(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return de()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ye extends n0{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new Ye(e,t)}matches(e){return ha(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function ha(n){return n.op==="and"}function pp(n){return n.op==="or"}function eg(n){return r0(n)&&ha(n)}function r0(n){for(const e of n.filters)if(e instanceof Ye)return!1;return!0}function _p(n){if(n instanceof Ke)return n.field.canonicalString()+n.op.toString()+ca(n.value);if(eg(n))return n.filters.map(e=>_p(e)).join(",");{const e=n.filters.map(t=>_p(t)).join(",");return`${n.op}(${e})`}}function i0(n,e){return n instanceof Ke?function(r,i){return i instanceof Ke&&r.op===i.op&&r.field.isEqual(i.field)&&Or(r.value,i.value)}(n,e):n instanceof Ye?function(r,i){return i instanceof Ye&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&i0(o,i.filters[a]),!0):!1}(n,e):void de()}function s0(n,e){const t=n.filters.concat(e);return Ye.create(t,n.op)}function o0(n){return n instanceof Ke?function(t){return`${t.field.canonicalString()} ${t.op} ${ca(t.value)}`}(n):n instanceof Ye?function(t){return t.op.toString()+" {"+t.getFilters().map(o0).join(" ,")+"}"}(n):"Filter"}class NL extends Ke{constructor(e,t,r){super(e,t,r),this.key=se.fromName(r.referenceValue)}matches(e){const t=se.comparator(e.key,this.key);return this.matchesComparison(t)}}class VL extends Ke{constructor(e,t){super(e,"in",t),this.keys=a0("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class DL extends Ke{constructor(e,t){super(e,"not-in",t),this.keys=a0("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function a0(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>se.fromName(r.referenceValue))}class ML extends Ke{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return au(t)&&ou(t.arrayValue,this.value)}}class l0 extends Ke{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&ou(this.value.arrayValue,t)}}class LL extends Ke{constructor(e,t){super(e,"not-in",t)}matches(e){if(ou(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!ou(this.value.arrayValue,t)}}class FL extends Ke{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!au(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>ou(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UL{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.le=null}}function gp(n,e=null,t=[],r=[],i=null,s=null,o=null){return new UL(n,e,t,r,i,s,o)}function js(n){const e=ae(n);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>_p(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Su(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ca(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ca(r)).join(",")),e.le=t}return e.le}function Pu(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!OL(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!i0(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!$v(n.startAt,e.startAt)&&$v(n.endAt,e.endAt)}function lh(n){return se.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function uh(n,e){return n.filters.filter(t=>t instanceof Ke&&t.field.isEqual(e))}function zv(n,e,t){let r=Oc,i=!0;for(const s of uh(n,e)){let o=Oc,a=!0;switch(s.op){case"<":case"<=":o=CL(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=Oc}Uv({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];Uv({value:r,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(r=o,i=t.inclusive);break}}return{value:r,inclusive:i}}function jv(n,e,t){let r=xi,i=!0;for(const s of uh(n,e)){let o=xi,a=!0;switch(s.op){case">=":case">":o=xL(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=xi}Kv({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];Kv({value:r,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(r=o,i=t.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function u0(n,e,t,r,i,s,o,a){return new ci(n,e,t,r,i,s,o,a)}function Ra(n){return new ci(n)}function qv(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function tg(n){return n.collectionGroup!==null}function jo(n){const e=ae(n);if(e.he===null){e.he=[];const t=new Set;for(const s of e.explicitOrderBy)e.he.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Je(gt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(h=>{h.isInequality()&&(a=a.add(h.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.he.push(new lu(s,r))}),t.has(gt.keyField().canonicalString())||e.he.push(new lu(gt.keyField(),r))}return e.he}function En(n){const e=ae(n);return e.Pe||(e.Pe=KL(e,jo(n))),e.Pe}function KL(n,e){if(n.limitType==="F")return gp(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new lu(i.field,s)});const t=n.endAt?new Hi(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Hi(n.startAt.position,n.startAt.inclusive):null;return gp(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function mp(n,e){const t=n.filters.concat([e]);return new ci(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function ch(n,e,t){return new ci(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Cu(n,e){return Pu(En(n),En(e))&&n.limitType===e.limitType}function c0(n){return`${js(En(n))}|lt:${n.limitType}`}function Po(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>o0(i)).join(", ")}]`),Su(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>ca(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>ca(i)).join(",")),`Target(${r})`}(En(n))}; limitType=${n.limitType})`}function xu(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):se.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of jo(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const h=Bv(o,a,l);return o.inclusive?h<=0:h<0}(r.startAt,jo(r),i)||r.endAt&&!function(o,a,l){const h=Bv(o,a,l);return o.inclusive?h>=0:h>0}(r.endAt,jo(r),i))}(n,e)}function h0(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function d0(n){return(e,t)=>{let r=!1;for(const i of jo(n)){const s=BL(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function BL(n,e,t){const r=n.field.isKeyField()?se.comparator(e.key,t.key):function(s,o,a){const l=o.data.field(s),h=a.data.field(s);return l!==null&&h!==null?Gi(l,h):de()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return de()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ss(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return GE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $L=new ot(se.comparator);function Vn(){return $L}const f0=new ot(se.comparator);function dl(...n){let e=f0;for(const t of n)e=e.insert(t.key,t);return e}function p0(n){let e=f0;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Er(){return Nl()}function _0(){return Nl()}function Nl(){return new hi(n=>n.toString(),(n,e)=>n.isEqual(e))}const zL=new ot(se.comparator),jL=new Je(se.comparator);function Ve(...n){let e=jL;for(const t of n)e=e.add(t);return e}const qL=new Je(Se);function ng(){return qL}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rg(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:tu(e)?"-0":e}}function g0(n){return{integerValue:""+n}}function m0(n,e){return ME(e)?g0(e):rg(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(){this._=void 0}}function GL(n,e,t){return n instanceof da?function(i,s){const o={fields:{[QE]:{stringValue:WE},[JE]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&od(s)&&(s=ad(s)),s&&(o.fields[YE]=s),{mapValue:o}}(t,e):n instanceof qs?v0(n,e):n instanceof Gs?T0(n,e):function(i,s){const o=y0(i,s),a=Gv(o)+Gv(i.Ie);return fp(o)&&fp(i.Ie)?g0(a):rg(i.serializer,a)}(n,e)}function HL(n,e,t){return n instanceof qs?v0(n,e):n instanceof Gs?T0(n,e):t}function y0(n,e){return n instanceof fa?function(r){return fp(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class da extends ud{}class qs extends ud{constructor(e){super(),this.elements=e}}function v0(n,e){const t=b0(e);for(const r of n.elements)t.some(i=>Or(i,r))||t.push(r);return{arrayValue:{values:t}}}class Gs extends ud{constructor(e){super(),this.elements=e}}function T0(n,e){let t=b0(e);for(const r of n.elements)t=t.filter(i=>!Or(i,r));return{arrayValue:{values:t}}}class fa extends ud{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function Gv(n){return pt(n.integerValue||n.doubleValue)}function b0(n){return au(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou{constructor(e,t){this.field=e,this.transform=t}}function WL(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof qs&&i instanceof qs||r instanceof Gs&&i instanceof Gs?ra(r.elements,i.elements,Or):r instanceof fa&&i instanceof fa?Or(r.Ie,i.Ie):r instanceof da&&i instanceof da}(n.transform,e.transform)}class QL{constructor(e,t){this.version=e,this.transformResults=t}}class mt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new mt}static exists(e){return new mt(void 0,e)}static updateTime(e){return new mt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Dc(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class cd{}function w0(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Ca(n.key,mt.none()):new Pa(n.key,n.data,mt.none());{const t=n.data,r=nn.empty();let i=new Je(gt.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new di(n.key,r,new Nn(i.toArray()),mt.none())}}function YL(n,e,t){n instanceof Pa?function(i,s,o){const a=i.value.clone(),l=Wv(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof di?function(i,s,o){if(!Dc(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=Wv(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(I0(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function Vl(n,e,t,r){return n instanceof Pa?function(s,o,a,l){if(!Dc(s.precondition,o))return a;const h=s.value.clone(),f=Qv(s.fieldTransforms,l,o);return h.setAll(f),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(n,e,t,r):n instanceof di?function(s,o,a,l){if(!Dc(s.precondition,o))return a;const h=Qv(s.fieldTransforms,l,o),f=o.data;return f.setAll(I0(s)),f.setAll(h),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(u=>u.field))}(n,e,t,r):function(s,o,a){return Dc(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function JL(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=y0(r.transform,i||null);s!=null&&(t===null&&(t=nn.empty()),t.set(r.field,s))}return t||null}function Hv(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ra(r,i,(s,o)=>WL(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Pa extends cd{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class di extends cd{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function I0(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Wv(n,e,t){const r=new Map;pe(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,HL(o,a,t[i]))}return r}function Qv(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,GL(s,o,e))}return r}class Ca extends cd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ig extends cd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&YL(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Vl(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Vl(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=_0();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const l=w0(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(me.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ve())}isEqual(e){return this.batchId===e.batchId&&ra(this.mutations,e.mutations,(t,r)=>Hv(t,r))&&ra(this.baseMutations,e.baseMutations,(t,r)=>Hv(t,r))}}class og{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){pe(e.mutations.length===r.length);let i=function(){return zL}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new og(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XL{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lt,Be;function E0(n){switch(n){case B.OK:return de();case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0;default:return de()}}function k0(n){if(n===void 0)return Ct("GRPC error has no .code"),B.UNKNOWN;switch(n){case Lt.OK:return B.OK;case Lt.CANCELLED:return B.CANCELLED;case Lt.UNKNOWN:return B.UNKNOWN;case Lt.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case Lt.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case Lt.INTERNAL:return B.INTERNAL;case Lt.UNAVAILABLE:return B.UNAVAILABLE;case Lt.UNAUTHENTICATED:return B.UNAUTHENTICATED;case Lt.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case Lt.NOT_FOUND:return B.NOT_FOUND;case Lt.ALREADY_EXISTS:return B.ALREADY_EXISTS;case Lt.PERMISSION_DENIED:return B.PERMISSION_DENIED;case Lt.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case Lt.ABORTED:return B.ABORTED;case Lt.OUT_OF_RANGE:return B.OUT_OF_RANGE;case Lt.UNIMPLEMENTED:return B.UNIMPLEMENTED;case Lt.DATA_LOSS:return B.DATA_LOSS;default:return de()}}(Be=Lt||(Lt={}))[Be.OK=0]="OK",Be[Be.CANCELLED=1]="CANCELLED",Be[Be.UNKNOWN=2]="UNKNOWN",Be[Be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Be[Be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Be[Be.NOT_FOUND=5]="NOT_FOUND",Be[Be.ALREADY_EXISTS=6]="ALREADY_EXISTS",Be[Be.PERMISSION_DENIED=7]="PERMISSION_DENIED",Be[Be.UNAUTHENTICATED=16]="UNAUTHENTICATED",Be[Be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Be[Be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Be[Be.ABORTED=10]="ABORTED",Be[Be.OUT_OF_RANGE=11]="OUT_OF_RANGE",Be[Be.UNIMPLEMENTED=12]="UNIMPLEMENTED",Be[Be.INTERNAL=13]="INTERNAL",Be[Be.UNAVAILABLE=14]="UNAVAILABLE",Be[Be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A0(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZL=new Li([4294967295,4294967295],0);function Yv(n){const e=A0().encode(n),t=new wE;return t.update(e),new Uint8Array(t.digest())}function Jv(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Li([t,r],0),new Li([i,s],0)]}class lg{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new fl(`Invalid padding: ${t}`);if(r<0)throw new fl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new fl(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new fl(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=Li.fromNumber(this.Ee)}Ae(e,t,r){let i=e.add(t.multiply(Li.fromNumber(r)));return i.compare(ZL)===1&&(i=new Li([i.getBits(0),i.getBits(1)],0)),i.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=Yv(e),[r,i]=Jv(t);for(let s=0;s<this.hashCount;s++){const o=this.Ae(r,i,s);if(!this.Re(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new lg(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ee===0)return;const t=Yv(e),[r,i]=Jv(t);for(let s=0;s<this.hashCount;s++){const o=this.Ae(r,i,s);this.Ve(o)}}Ve(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class fl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Vu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Nu(me.min(),i,new ot(Se),Vn(),Ve())}}class Vu{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Vu(r,t,Ve(),Ve(),Ve())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(e,t,r,i){this.me=e,this.removedTargetIds=t,this.key=r,this.fe=i}}class S0{constructor(e,t){this.targetId=e,this.ge=t}}class R0{constructor(e,t,r=St.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Xv{constructor(){this.pe=0,this.ye=Zv(),this.we=St.EMPTY_BYTE_STRING,this.be=!1,this.Se=!0}get current(){return this.be}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.we=e)}Fe(){let e=Ve(),t=Ve(),r=Ve();return this.ye.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:de()}}),new Vu(this.we,this.be,e,t,r)}Me(){this.Se=!1,this.ye=Zv()}xe(e,t){this.Se=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.Se=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,pe(this.pe>=0)}Le(){this.Se=!0,this.be=!0}}class eF{constructor(e){this.ke=e,this.qe=new Map,this.Qe=Vn(),this.$e=uc(),this.Ke=uc(),this.Ue=new ot(Se)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const r=this.He(t);switch(e.state){case 0:this.Je(t)&&r.Ce(e.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(e.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(t);break;case 3:this.Je(t)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),r.Ce(e.resumeToken));break;default:de()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((r,i)=>{this.Je(i)&&t(i)})}Ze(e){const t=e.targetId,r=e.ge.count,i=this.Xe(t);if(i){const s=i.target;if(lh(s))if(r===0){const o=new se(s.path);this.ze(t,o,ut.newNoDocument(o,me.min()))}else pe(r===1);else{const o=this.et(t);if(o!==r){const a=this.tt(e),l=a?this.nt(a,e,o):1;if(l!==0){this.Ye(t);const h=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(t,h)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,a;try{o=ri(r).toUint8Array()}catch(l){if(l instanceof HE)return xr("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new lg(o,i,s)}catch(l){return xr(l instanceof fl?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ee===0?null:a}nt(e,t,r){return t.ge.count===r-this.st(e,t.targetId)?0:2}st(e,t){const r=this.ke.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const o=this.ke.it(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.ze(t,s,null),i++)}),i}ot(e){const t=new Map;this.qe.forEach((s,o)=>{const a=this.Xe(o);if(a){if(s.current&&lh(a.target)){const l=new se(a.target.path);this._t(l).has(o)||this.ut(o,l)||this.ze(o,l,ut.newNoDocument(l,e))}s.ve&&(t.set(o,s.Fe()),s.Me())}});let r=Ve();this.Ke.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const h=this.Xe(l);return!h||h.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.Qe.forEach((s,o)=>o.setReadTime(e));const i=new Nu(e,t,this.Ue,this.Qe,r);return this.Qe=Vn(),this.$e=uc(),this.Ke=uc(),this.Ue=new ot(Se),i}Ge(e,t){if(!this.Je(e))return;const r=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,r),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ke=this.Ke.insert(t.key,this.ct(t.key).add(e))}ze(e,t,r){if(!this.Je(e))return;const i=this.He(e);this.ut(e,t)?i.xe(t,1):i.Oe(t),this.Ke=this.Ke.insert(t,this.ct(t).delete(e)),this.Ke=this.Ke.insert(t,this.ct(t).add(e)),r&&(this.Qe=this.Qe.insert(t,r))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new Xv,this.qe.set(e,t)),t}ct(e){let t=this.Ke.get(e);return t||(t=new Je(Se),this.Ke=this.Ke.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new Je(Se),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||W("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new Xv),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function uc(){return new ot(se.comparator)}function Zv(){return new ot(se.comparator)}const tF={asc:"ASCENDING",desc:"DESCENDING"},nF={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},rF={and:"AND",or:"OR"};class iF{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function yp(n,e){return n.useProto3Json||Su(e)?e:{value:e}}function pa(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function P0(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function sF(n,e){return pa(n,e.toTimestamp())}function xt(n){return pe(!!n),me.fromTimestamp(function(t){const r=ni(t);return new yt(r.seconds,r.nanos)}(n))}function ug(n,e){return vp(n,e).canonicalString()}function vp(n,e){const t=function(i){return new Ue(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function C0(n){const e=Ue.fromString(n);return pe(K0(e)),e}function uu(n,e){return ug(n.databaseId,e.path)}function Sr(n,e){const t=C0(e);if(t.get(1)!==n.databaseId.projectId)throw new H(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new H(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new se(N0(t))}function x0(n,e){return ug(n.databaseId,e)}function O0(n){const e=C0(n);return e.length===4?Ue.emptyPath():N0(e)}function Tp(n){return new Ue(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function N0(n){return pe(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function eT(n,e,t){return{name:uu(n,e),fields:t.value.mapValue.fields}}function V0(n,e,t){const r=Sr(n,e.name),i=xt(e.updateTime),s=e.createTime?xt(e.createTime):me.min(),o=new nn({mapValue:{fields:e.fields}}),a=ut.newFoundDocument(r,i,s,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function oF(n,e){return"found"in e?function(r,i){pe(!!i.found),i.found.name,i.found.updateTime;const s=Sr(r,i.found.name),o=xt(i.found.updateTime),a=i.found.createTime?xt(i.found.createTime):me.min(),l=new nn({mapValue:{fields:i.found.fields}});return ut.newFoundDocument(s,o,a,l)}(n,e):"missing"in e?function(r,i){pe(!!i.missing),pe(!!i.readTime);const s=Sr(r,i.missing),o=xt(i.readTime);return ut.newNoDocument(s,o)}(n,e):de()}function aF(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:de()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(h,f){return h.useProto3Json?(pe(f===void 0||typeof f=="string"),St.fromBase64String(f||"")):(pe(f===void 0||f instanceof Buffer||f instanceof Uint8Array),St.fromUint8Array(f||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(h){const f=h.code===void 0?B.UNKNOWN:k0(h.code);return new H(f,h.message||"")}(o);t=new R0(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Sr(n,r.document.name),s=xt(r.document.updateTime),o=r.document.createTime?xt(r.document.createTime):me.min(),a=new nn({mapValue:{fields:r.document.fields}}),l=ut.newFoundDocument(i,s,o,a),h=r.targetIds||[],f=r.removedTargetIds||[];t=new Mc(h,f,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Sr(n,r.document),s=r.readTime?xt(r.readTime):me.min(),o=ut.newNoDocument(i,s),a=r.removedTargetIds||[];t=new Mc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Sr(n,r.document),s=r.removedTargetIds||[];t=new Mc([],s,i,null)}else{if(!("filter"in e))return de();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new XL(i,s),a=r.targetId;t=new S0(a,o)}}return t}function cu(n,e){let t;if(e instanceof Pa)t={update:eT(n,e.key,e.value)};else if(e instanceof Ca)t={delete:uu(n,e.key)};else if(e instanceof di)t={update:eT(n,e.key,e.data),updateMask:fF(e.fieldMask)};else{if(!(e instanceof ig))return de();t={verify:uu(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof da)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof qs)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Gs)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof fa)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw de()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:sF(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:de()}(n,e.precondition)),t}function bp(n,e){const t=e.currentDocument?function(s){return s.updateTime!==void 0?mt.updateTime(xt(s.updateTime)):s.exists!==void 0?mt.exists(s.exists):mt.none()}(e.currentDocument):mt.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let l=null;if("setToServerValue"in a)pe(a.setToServerValue==="REQUEST_TIME"),l=new da;else if("appendMissingElements"in a){const f=a.appendMissingElements.values||[];l=new qs(f)}else if("removeAllFromArray"in a){const f=a.removeAllFromArray.values||[];l=new Gs(f)}else"increment"in a?l=new fa(o,a.increment):de();const h=gt.fromServerFormat(a.fieldPath);return new Ou(h,l)}(n,i)):[];if(e.update){e.update.name;const i=Sr(n,e.update.name),s=new nn({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const h=l.fieldPaths||[];return new Nn(h.map(f=>gt.fromServerFormat(f)))}(e.updateMask);return new di(i,s,o,t,r)}return new Pa(i,s,t,r)}if(e.delete){const i=Sr(n,e.delete);return new Ca(i,t)}if(e.verify){const i=Sr(n,e.verify);return new ig(i,t)}return de()}function lF(n,e){return n&&n.length>0?(pe(e!==void 0),n.map(t=>function(i,s){let o=i.updateTime?xt(i.updateTime):xt(s);return o.isEqual(me.min())&&(o=xt(s)),new QL(o,i.transformResults||[])}(t,e))):[]}function D0(n,e){return{documents:[x0(n,e.path)]}}function M0(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=x0(n,i);const s=function(h){if(h.length!==0)return U0(Ye.create(h,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(h){if(h.length!==0)return h.map(f=>function(d){return{field:Co(d.field),direction:cF(d.dir)}}(f))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=yp(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{ht:t,parent:i}}function L0(n){let e=O0(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){pe(r===1);const f=t.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];t.where&&(s=function(u){const d=F0(u);return d instanceof Ye&&eg(d)?d.getFilters():[d]}(t.where));let o=[];t.orderBy&&(o=function(u){return u.map(d=>function(m){return new lu(xo(m.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(d))}(t.orderBy));let a=null;t.limit&&(a=function(u){let d;return d=typeof u=="object"?u.value:u,Su(d)?null:d}(t.limit));let l=null;t.startAt&&(l=function(u){const d=!!u.before,p=u.values||[];return new Hi(p,d)}(t.startAt));let h=null;return t.endAt&&(h=function(u){const d=!u.before,p=u.values||[];return new Hi(p,d)}(t.endAt)),u0(e,i,o,s,a,"F",l,h)}function uF(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return de()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function F0(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=xo(t.unaryFilter.field);return Ke.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=xo(t.unaryFilter.field);return Ke.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=xo(t.unaryFilter.field);return Ke.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=xo(t.unaryFilter.field);return Ke.create(o,"!=",{nullValue:"NULL_VALUE"});default:return de()}}(n):n.fieldFilter!==void 0?function(t){return Ke.create(xo(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return de()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Ye.create(t.compositeFilter.filters.map(r=>F0(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return de()}}(t.compositeFilter.op))}(n):de()}function cF(n){return tF[n]}function hF(n){return nF[n]}function dF(n){return rF[n]}function Co(n){return{fieldPath:n.canonicalString()}}function xo(n){return gt.fromServerFormat(n.fieldPath)}function U0(n){return n instanceof Ke?function(t){if(t.op==="=="){if(Fv(t.value))return{unaryFilter:{field:Co(t.field),op:"IS_NAN"}};if(Lv(t.value))return{unaryFilter:{field:Co(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Fv(t.value))return{unaryFilter:{field:Co(t.field),op:"IS_NOT_NAN"}};if(Lv(t.value))return{unaryFilter:{field:Co(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Co(t.field),op:hF(t.op),value:t.value}}}(n):n instanceof Ye?function(t){const r=t.getFilters().map(i=>U0(i));return r.length===1?r[0]:{compositeFilter:{op:dF(t.op),filters:r}}}(n):de()}function fF(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function K0(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e,t,r,i,s=me.min(),o=me.min(),a=St.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Wr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Wr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Wr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Wr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0{constructor(e){this.Tt=e}}function pF(n,e){let t;if(e.document)t=V0(n.Tt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=se.fromSegments(e.noDocument.path),i=Ws(e.noDocument.readTime);t=ut.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return de();{const r=se.fromSegments(e.unknownDocument.path),i=Ws(e.unknownDocument.version);t=ut.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const s=new yt(i[0],i[1]);return me.fromTimestamp(s)}(e.readTime)),t}function tT(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:hh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:uu(s,o.key),fields:o.data.value.mapValue.fields,updateTime:pa(s,o.version.toTimestamp()),createTime:pa(s,o.createTime.toTimestamp())}}(n.Tt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Hs(e.version)};else{if(!e.isUnknownDocument())return de();r.unknownDocument={path:t.path.toArray(),version:Hs(e.version)}}return r}function hh(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Hs(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ws(n){const e=new yt(n.seconds,n.nanoseconds);return me.fromTimestamp(e)}function ws(n,e){const t=(e.baseMutations||[]).map(s=>bp(n.Tt,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>bp(n.Tt,s)),i=yt.fromMillis(e.localWriteTimeMs);return new sg(e.batchId,i,t,r)}function pl(n){const e=Ws(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Ws(n.lastLimboFreeSnapshotVersion):me.min();let r;return r=function(s){return s.documents!==void 0}(n.query)?function(s){return pe(s.documents.length===1),En(Ra(O0(s.documents[0])))}(n.query):function(s){return En(L0(s))}(n.query),new Wr(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,St.fromBase64String(n.resumeToken))}function $0(n,e){const t=Hs(e.snapshotVersion),r=Hs(e.lastLimboFreeSnapshotVersion);let i;i=lh(e.target)?D0(n.Tt,e.target):M0(n.Tt,e.target).ht;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:js(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function cg(n){const e=L0({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?ch(e,e.limit,"L"):e}function vf(n,e){return new ag(e.largestBatchId,bp(n.Tt,e.overlayMutation))}function nT(n,e){const t=e.path.lastSegment();return[n,pn(e.path.popLast()),t]}function rT(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Hs(r.readTime),documentKey:pn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _F{getBundleMetadata(e,t){return iT(e).get(t).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:Ws(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,t){return iT(e).put(function(i){return{bundleId:i.id,createTime:Hs(xt(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return sT(e).get(t).next(r=>{if(r)return function(s){return{name:s.name,query:cg(s.bundledQuery),readTime:Ws(s.readTime)}}(r)})}saveNamedQuery(e,t){return sT(e).put(function(i){return{name:i.name,readTime:Hs(xt(i.readTime)),bundledQuery:i.bundledQuery}}(t))}}function iT(n){return jt(n,rd)}function sT(n){return jt(n,id)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(e,t){this.serializer=e,this.userId=t}static It(e,t){const r=t.uid||"";return new hd(e,r)}getOverlay(e,t){return el(e).get(nT(this.userId,t)).next(r=>r?vf(this.serializer,r):null)}getOverlays(e,t){const r=Er();return D.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,o)=>{const a=new ag(t,o);i.push(this.Et(e,a))}),D.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(o=>i.add(pn(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(el(e).J(up,a))}),D.waitFor(s)}getOverlaysForCollection(e,t,r){const i=Er(),s=pn(t),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return el(e).G(up,o).next(a=>{for(const l of a){const h=vf(this.serializer,l);i.set(h.getKey(),h)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=Er();let o;const a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return el(e).Z({index:$E,range:a},(l,h,f)=>{const u=vf(this.serializer,h);s.size()<i||u.largestBatchId===o?(s.set(u.getKey(),u),o=u.largestBatchId):f.done()}).next(()=>s)}Et(e,t){return el(e).put(function(i,s,o){const[a,l,h]=nT(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:h,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:cu(i.Tt,o.mutation)}}(this.serializer,this.userId,t))}}function el(n){return jt(n,sd)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gF{dt(e){return jt(e,Y_)}getSessionToken(e){return this.dt(e).get("sessionToken").next(t=>{const r=t==null?void 0:t.value;return r?St.fromUint8Array(r):St.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.dt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(){}At(e,t){this.Rt(e,t),t.Vt()}Rt(e,t){if("nullValue"in e)this.ft(t,5);else if("booleanValue"in e)this.ft(t,10),t.gt(e.booleanValue?1:0);else if("integerValue"in e)this.ft(t,15),t.gt(pt(e.integerValue));else if("doubleValue"in e){const r=pt(e.doubleValue);isNaN(r)?this.ft(t,13):(this.ft(t,15),tu(r)?t.gt(0):t.gt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.ft(t,20),typeof r=="string"&&(r=ni(r)),t.yt(`${r.seconds||""}`),t.gt(r.nanos||0)}else if("stringValue"in e)this.wt(e.stringValue,t),this.bt(t);else if("bytesValue"in e)this.ft(t,30),t.St(ri(e.bytesValue)),this.bt(t);else if("referenceValue"in e)this.Dt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ft(t,45),t.gt(r.latitude||0),t.gt(r.longitude||0)}else"mapValue"in e?ZE(e)?this.ft(t,Number.MAX_SAFE_INTEGER):ld(e)?this.vt(e.mapValue,t):(this.Ct(e.mapValue,t),this.bt(t)):"arrayValue"in e?(this.Ft(e.arrayValue,t),this.bt(t)):de()}wt(e,t){this.ft(t,25),this.Mt(e,t)}Mt(e,t){t.yt(e)}Ct(e,t){const r=e.fields||{};this.ft(t,55);for(const i of Object.keys(r))this.wt(i,t),this.Rt(r[i],t)}vt(e,t){var r,i;const s=e.fields||{};this.ft(t,53);const o=ua,a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.ft(t,15),t.gt(pt(a)),this.wt(o,t),this.Rt(s[o],t)}Ft(e,t){const r=e.values||[];this.ft(t,50);for(const i of r)this.Rt(i,t)}Dt(e,t){this.ft(t,37),se.fromName(e).path.forEach(r=>{this.ft(t,60),this.Mt(r,t)})}ft(e,t){e.gt(t)}bt(e){e.gt(2)}}Is.xt=new Is;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const To=255;function mF(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function oT(n){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=mF(255&r[s]);if(i+=o,o!==8)break}return i}(n);return Math.ceil(e/8)}class yF{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ot(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Nt(r.value),r=t.next();this.Bt()}Lt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.kt(r.value),r=t.next();this.qt()}Qt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Nt(r);else if(r<2048)this.Nt(960|r>>>6),this.Nt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Nt(480|r>>>12),this.Nt(128|63&r>>>6),this.Nt(128|63&r);else{const i=t.codePointAt(0);this.Nt(240|i>>>18),this.Nt(128|63&i>>>12),this.Nt(128|63&i>>>6),this.Nt(128|63&i)}}this.Bt()}$t(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.kt(r);else if(r<2048)this.kt(960|r>>>6),this.kt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.kt(480|r>>>12),this.kt(128|63&r>>>6),this.kt(128|63&r);else{const i=t.codePointAt(0);this.kt(240|i>>>18),this.kt(128|63&i>>>12),this.kt(128|63&i>>>6),this.kt(128|63&i)}}this.qt()}Kt(e){const t=this.Ut(e),r=oT(t);this.Wt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Gt(e){const t=this.Ut(e),r=oT(t);this.Wt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}zt(){this.jt(To),this.jt(255)}Ht(){this.Jt(To),this.Jt(255)}reset(){this.position=0}seed(e){this.Wt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Yt(){return this.buffer.slice(0,this.position)}Ut(e){const t=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Nt(e){const t=255&e;t===0?(this.jt(0),this.jt(255)):t===To?(this.jt(To),this.jt(0)):this.jt(t)}kt(e){const t=255&e;t===0?(this.Jt(0),this.Jt(255)):t===To?(this.Jt(To),this.Jt(0)):this.Jt(e)}Bt(){this.jt(0),this.jt(1)}qt(){this.Jt(0),this.Jt(1)}jt(e){this.Wt(1),this.buffer[this.position++]=e}Jt(e){this.Wt(1),this.buffer[this.position++]=~e}Wt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class vF{constructor(e){this.Zt=e}St(e){this.Zt.Ot(e)}yt(e){this.Zt.Qt(e)}gt(e){this.Zt.Kt(e)}Vt(){this.Zt.zt()}}class TF{constructor(e){this.Zt=e}St(e){this.Zt.Lt(e)}yt(e){this.Zt.$t(e)}gt(e){this.Zt.Gt(e)}Vt(){this.Zt.Ht()}}class tl{constructor(){this.Zt=new yF,this.Xt=new vF(this.Zt),this.en=new TF(this.Zt)}seed(e){this.Zt.seed(e)}tn(e){return e===0?this.Xt:this.en}Yt(){return this.Zt.Yt()}reset(){this.Zt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}nn(){const e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Es(this.indexId,this.documentKey,this.arrayValue,r)}}function wi(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=aT(n.arrayValue,e.arrayValue),t!==0?t:(t=aT(n.directionalValue,e.directionalValue),t!==0?t:se.comparator(n.documentKey,e.documentKey)))}function aT(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{constructor(e){this.rn=new Je((t,r)=>gt.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.sn=e.orderBy,this._n=[];for(const t of e.filters){const r=t;r.isInequality()?this.rn=this.rn.add(r):this._n.push(r)}}get an(){return this.rn.size>1}un(e){if(pe(e.collectionGroup===this.collectionId),this.an)return!1;const t=op(e);if(t!==void 0&&!this.cn(t))return!1;const r=ys(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.cn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.rn.size>0){const a=this.rn.getIterator().getNext();if(!i.has(a.field.canonicalString())){const l=r[s];if(!this.ln(a,l)||!this.hn(this.sn[o++],l))return!1}++s}for(;s<r.length;++s){const a=r[s];if(o>=this.sn.length||!this.hn(this.sn[o++],a))return!1}return!0}Pn(){if(this.an)return null;let e=new Je(gt.comparator);const t=[];for(const r of this._n)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Pc(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Pc(r.field,0))}for(const r of this.sn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Pc(r.field,r.dir==="asc"?0:1)));return new nh(nh.UNKNOWN_ID,this.collectionId,t,eu.empty())}cn(e){for(const t of this._n)if(this.ln(t,e))return!0;return!1}ln(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}hn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z0(n){var e,t;if(pe(n instanceof Ke||n instanceof Ye),n instanceof Ke){if(n instanceof l0){const i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(s=>Ke.create(n.field,"==",s)))||[];return Ye.create(i,"or")}return n}const r=n.filters.map(i=>z0(i));return Ye.create(r,n.op)}function bF(n){if(n.getFilters().length===0)return[];const e=Ep(z0(n));return pe(j0(e)),wp(e)||Ip(e)?[e]:e.getFilters()}function wp(n){return n instanceof Ke}function Ip(n){return n instanceof Ye&&eg(n)}function j0(n){return wp(n)||Ip(n)||function(t){if(t instanceof Ye&&pp(t)){for(const r of t.getFilters())if(!wp(r)&&!Ip(r))return!1;return!0}return!1}(n)}function Ep(n){if(pe(n instanceof Ke||n instanceof Ye),n instanceof Ke)return n;if(n.filters.length===1)return Ep(n.filters[0]);const e=n.filters.map(r=>Ep(r));let t=Ye.create(e,n.op);return t=dh(t),j0(t)?t:(pe(t instanceof Ye),pe(ha(t)),pe(t.filters.length>1),t.filters.reduce((r,i)=>hg(r,i)))}function hg(n,e){let t;return pe(n instanceof Ke||n instanceof Ye),pe(e instanceof Ke||e instanceof Ye),t=n instanceof Ke?e instanceof Ke?function(i,s){return Ye.create([i,s],"and")}(n,e):uT(n,e):e instanceof Ke?uT(e,n):function(i,s){if(pe(i.filters.length>0&&s.filters.length>0),ha(i)&&ha(s))return s0(i,s.getFilters());const o=pp(i)?i:s,a=pp(i)?s:i,l=o.filters.map(h=>hg(h,a));return Ye.create(l,"or")}(n,e),dh(t)}function uT(n,e){if(ha(e))return s0(e,n.getFilters());{const t=e.filters.map(r=>hg(n,r));return Ye.create(t,"or")}}function dh(n){if(pe(n instanceof Ke||n instanceof Ye),n instanceof Ke)return n;const e=n.getFilters();if(e.length===1)return dh(e[0]);if(r0(n))return n;const t=e.map(i=>dh(i)),r=[];return t.forEach(i=>{i instanceof Ke?r.push(i):i instanceof Ye&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Ye.create(r,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wF{constructor(){this.Tn=new dg}addToCollectionParentIndex(e,t){return this.Tn.add(t),D.resolve()}getCollectionParents(e,t){return D.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return D.resolve()}deleteFieldIndex(e,t){return D.resolve()}deleteAllFieldIndexes(e){return D.resolve()}createTargetIndexes(e,t){return D.resolve()}getDocumentsMatchingTarget(e,t){return D.resolve(null)}getIndexType(e,t){return D.resolve(0)}getFieldIndexes(e,t){return D.resolve([])}getNextCollectionGroupToUpdate(e){return D.resolve(null)}getMinOffset(e,t){return D.resolve(Wn.min())}getMinOffsetFromCollectionGroup(e,t){return D.resolve(Wn.min())}updateCollectionGroup(e,t,r){return D.resolve()}updateIndexEntries(e,t){return D.resolve()}}class dg{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Je(Ue.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Je(Ue.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cT="IndexedDbIndexManager",cc=new Uint8Array(0);class IF{constructor(e,t){this.databaseId=t,this.In=new dg,this.En=new hi(r=>js(r),(r,i)=>Pu(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.In.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.In.add(t)});const s={collectionId:r,parent:pn(i)};return hT(e).put(s)}return D.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[CE(t),""],!1,!0);return hT(e).G(i).next(s=>{for(const o of s){if(o.collectionId!==t)break;r.push(Ir(o.parent))}return r})}addFieldIndex(e,t){const r=nl(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(t);delete i.indexId;const s=r.add(i);if(t.indexState){const o=wo(e);return s.next(a=>{o.put(rT(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=nl(e),i=wo(e),s=bo(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=nl(e),r=bo(e),i=wo(e);return t.J().next(()=>r.J()).next(()=>i.J())}createTargetIndexes(e,t){return D.forEach(this.dn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const s=new lT(r).Pn();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){const r=bo(e);let i=!0;const s=new Map;return D.forEach(this.dn(t),o=>this.An(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=Ve();const a=[];return D.forEach(s,(l,h)=>{W(cT,`Using index ${function(M){return`id=${M.indexId}|cg=${M.collectionGroup}|f=${M.fields.map(U=>`${U.fieldPath}:${U.kind}`).join(",")}`}(l)} to execute ${js(t)}`);const f=function(M,U){const ee=op(U);if(ee===void 0)return null;for(const ne of uh(M,ee.fieldPath))switch(ne.op){case"array-contains-any":return ne.value.arrayValue.values||[];case"array-contains":return[ne.value]}return null}(h,l),u=function(M,U){const ee=new Map;for(const ne of ys(U))for(const k of uh(M,ne.fieldPath))switch(k.op){case"==":case"in":ee.set(ne.fieldPath.canonicalString(),k.value);break;case"not-in":case"!=":return ee.set(ne.fieldPath.canonicalString(),k.value),Array.from(ee.values())}return null}(h,l),d=function(M,U){const ee=[];let ne=!0;for(const k of ys(U)){const w=k.kind===0?zv(M,k.fieldPath,M.startAt):jv(M,k.fieldPath,M.startAt);ee.push(w.value),ne&&(ne=w.inclusive)}return new Hi(ee,ne)}(h,l),p=function(M,U){const ee=[];let ne=!0;for(const k of ys(U)){const w=k.kind===0?jv(M,k.fieldPath,M.endAt):zv(M,k.fieldPath,M.endAt);ee.push(w.value),ne&&(ne=w.inclusive)}return new Hi(ee,ne)}(h,l),m=this.Rn(l,h,d),T=this.Rn(l,h,p),v=this.Vn(l,h,u),I=this.mn(l.indexId,f,m,d.inclusive,T,p.inclusive,v);return D.forEach(I,C=>r.H(C,t.limit).next(M=>{M.forEach(U=>{const ee=se.fromSegments(U.documentKey);o.has(ee)||(o=o.add(ee),a.push(ee))})}))}).next(()=>a)}return D.resolve(null)})}dn(e){let t=this.En.get(e);return t||(e.filters.length===0?t=[e]:t=bF(Ye.create(e.filters,"and")).map(r=>gp(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.En.set(e,t),t)}mn(e,t,r,i,s,o,a){const l=(t!=null?t.length:1)*Math.max(r.length,s.length),h=l/(t!=null?t.length:1),f=[];for(let u=0;u<l;++u){const d=t?this.fn(t[u/h]):cc,p=this.gn(e,d,r[u%h],i),m=this.pn(e,d,s[u%h],o),T=a.map(v=>this.gn(e,d,v,!0));f.push(...this.createRange(p,m,T))}return f}gn(e,t,r,i){const s=new Es(e,se.empty(),t,r);return i?s:s.nn()}pn(e,t,r,i){const s=new Es(e,se.empty(),t,r);return i?s.nn():s}An(e,t){const r=new lT(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.un(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let r=2;const i=this.dn(t);return D.forEach(i,s=>this.An(e,s).next(o=>{o?r!==0&&o.fields.length<function(l){let h=new Je(gt.comparator),f=!1;for(const u of l.filters)for(const d of u.getFlattenedFilters())d.field.isKeyField()||(d.op==="array-contains"||d.op==="array-contains-any"?f=!0:h=h.add(d.field));for(const u of l.orderBy)u.field.isKeyField()||(h=h.add(u.field));return h.size+(f?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(t)&&i.length>1&&r===2?1:r)}yn(e,t){const r=new tl;for(const i of ys(e)){const s=t.data.field(i.fieldPath);if(s==null)return null;const o=r.tn(i.kind);Is.xt.At(s,o)}return r.Yt()}fn(e){const t=new tl;return Is.xt.At(e,t.tn(0)),t.Yt()}wn(e,t){const r=new tl;return Is.xt.At(zs(this.databaseId,t),r.tn(function(s){const o=ys(s);return o.length===0?0:o[o.length-1].kind}(e))),r.Yt()}Vn(e,t,r){if(r===null)return[];let i=[];i.push(new tl);let s=0;for(const o of ys(e)){const a=r[s++];for(const l of i)if(this.bn(t,o.fieldPath)&&au(a))i=this.Sn(i,o,a);else{const h=l.tn(o.kind);Is.xt.At(a,h)}}return this.Dn(i)}Rn(e,t,r){return this.Vn(e,t,r.position)}Dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Yt();return t}Sn(e,t,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new tl;l.seed(a.Yt()),Is.xt.At(o,l.tn(t.kind)),s.push(l)}return s}bn(e,t){return!!e.filters.find(r=>r instanceof Ke&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){const r=nl(e),i=wo(e);return(t?r.G(lp,IDBKeyRange.bound(t,t)):r.G()).next(s=>{const o=[];return D.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(f,u){const d=u?new eu(u.sequenceNumber,new Wn(Ws(u.readTime),new se(Ir(u.documentKey)),u.largestBatchId)):eu.empty(),p=f.fields.map(([m,T])=>new Pc(gt.fromServerFormat(m),T));return new nh(f.indexId,f.collectionGroup,p,d)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:Se(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=nl(e),s=wo(e);return this.vn(e).next(o=>i.G(lp,IDBKeyRange.bound(t,t)).next(a=>D.forEach(a,l=>s.put(rT(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,t){const r=new Map;return D.forEach(t,(i,s)=>{const o=r.get(i.collectionGroup);return(o?D.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),D.forEach(a,l=>this.Cn(e,i,l).next(h=>{const f=this.Fn(s,l);return h.isEqual(f)?D.resolve():this.Mn(e,s,l,h,f)}))))})}xn(e,t,r,i){return bo(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.wn(r,t.key),documentKey:t.key.path.toArray()})}On(e,t,r,i){return bo(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.wn(r,t.key),t.key.path.toArray()])}Cn(e,t,r){const i=bo(e);let s=new Je(wi);return i.Z({index:BE,range:IDBKeyRange.only([r.indexId,this.uid,this.wn(r,t)])},(o,a)=>{s=s.add(new Es(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}Fn(e,t){let r=new Je(wi);const i=this.yn(t,e);if(i==null)return r;const s=op(t);if(s!=null){const o=e.data.field(s.fieldPath);if(au(o))for(const a of o.arrayValue.values||[])r=r.add(new Es(t.indexId,e.key,this.fn(a),i))}else r=r.add(new Es(t.indexId,e.key,cc,i));return r}Mn(e,t,r,i,s){W(cT,"Updating index entries for document '%s'",t.key);const o=[];return function(l,h,f,u,d){const p=l.getIterator(),m=h.getIterator();let T=vo(p),v=vo(m);for(;T||v;){let I=!1,C=!1;if(T&&v){const M=f(T,v);M<0?C=!0:M>0&&(I=!0)}else T!=null?C=!0:I=!0;I?(u(v),v=vo(m)):C?(d(T),T=vo(p)):(T=vo(p),v=vo(m))}}(i,s,wi,a=>{o.push(this.xn(e,t,r,a))},a=>{o.push(this.On(e,t,r,a))}),D.waitFor(o)}vn(e){let t=1;return wo(e).Z({index:KE,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,a)=>wi(o,a)).filter((o,a,l)=>!a||wi(o,l[a-1])!==0);const i=[];i.push(e);for(const o of r){const a=wi(o,e),l=wi(o,t);if(a===0)i[0]=e.nn();else if(a>0&&l<0)i.push(o),i.push(o.nn());else if(l>0)break}i.push(t);const s=[];for(let o=0;o<i.length;o+=2){if(this.Nn(i[o],i[o+1]))return[];const a=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,cc,[]],l=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,cc,[]];s.push(IDBKeyRange.bound(a,l))}return s}Nn(e,t){return wi(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(dT)}getMinOffset(e,t){return D.mapArray(this.dn(t),r=>this.An(e,r).next(i=>i||de())).next(dT)}}function hT(n){return jt(n,iu)}function bo(n){return jt(n,ah)}function nl(n){return jt(n,Q_)}function wo(n){return jt(n,oh)}function dT(n){pe(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;G_(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Wn(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},q0=41943040;class un{static withCacheSize(e){return new un(e,un.DEFAULT_COLLECTION_PERCENTILE,un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G0(n,e,t){const r=n.store(ir),i=n.store(sa),s=[],o=IDBKeyRange.only(t.batchId);let a=0;const l=r.Z({range:o},(f,u,d)=>(a++,d.delete()));s.push(l.next(()=>{pe(a===1)}));const h=[];for(const f of t.mutations){const u=LE(e,f.key.path,t.batchId);s.push(i.delete(u)),h.push(f.key)}return D.waitFor(s).next(()=>h)}function fh(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw de();e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */un.DEFAULT_COLLECTION_PERCENTILE=10,un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,un.DEFAULT=new un(q0,un.DEFAULT_COLLECTION_PERCENTILE,un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),un.DISABLED=new un(-1,0,0);class dd{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Bn={}}static It(e,t,r,i){pe(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new dd(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ii(e).Z({index:Ss,range:r},(i,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=Oo(e),o=Ii(e);return o.add({}).next(a=>{pe(typeof a=="number");const l=new sg(a,t,r,i),h=function(p,m,T){const v=T.baseMutations.map(C=>cu(p.Tt,C)),I=T.mutations.map(C=>cu(p.Tt,C));return{userId:m,batchId:T.batchId,localWriteTimeMs:T.localWriteTime.toMillis(),baseMutations:v,mutations:I}}(this.serializer,this.userId,l),f=[];let u=new Je((d,p)=>Se(d.canonicalString(),p.canonicalString()));for(const d of i){const p=LE(this.userId,d.key.path,a);u=u.add(d.key.path.popLast()),f.push(o.put(h)),f.push(s.put(p,rL))}return u.forEach(d=>{f.push(this.indexManager.addToCollectionParentIndex(e,d))}),e.addOnCommittedListener(()=>{this.Bn[a]=l.keys()}),D.waitFor(f).next(()=>l)})}lookupMutationBatch(e,t){return Ii(e).get(t).next(r=>r?(pe(r.userId===this.userId),ws(this.serializer,r)):null)}Ln(e,t){return this.Bn[t]?D.resolve(this.Bn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Bn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Ii(e).Z({index:Ss,range:i},(o,a,l)=>{a.userId===this.userId&&(pe(a.batchId>=r),s=ws(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Fi;return Ii(e).Z({index:Ss,range:t,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,Fi],[this.userId,Number.POSITIVE_INFINITY]);return Ii(e).G(Ss,t).next(r=>r.map(i=>ws(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Cc(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return Oo(e).Z({range:i},(o,a,l)=>{const[h,f,u]=o,d=Ir(f);if(h===this.userId&&t.path.isEqual(d))return Ii(e).get(u).next(p=>{if(!p)throw de();pe(p.userId===this.userId),s.push(ws(this.serializer,p))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Je(Se);const i=[];return t.forEach(s=>{const o=Cc(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=Oo(e).Z({range:a},(h,f,u)=>{const[d,p,m]=h,T=Ir(p);d===this.userId&&s.path.isEqual(T)?r=r.add(m):u.done()});i.push(l)}),D.waitFor(i).next(()=>this.kn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=Cc(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new Je(Se);return Oo(e).Z({range:o},(l,h,f)=>{const[u,d,p]=l,m=Ir(d);u===this.userId&&r.isPrefixOf(m)?m.length===i&&(a=a.add(p)):f.done()}).next(()=>this.kn(e,a))}kn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(Ii(e).get(s).next(o=>{if(o===null)throw de();pe(o.userId===this.userId),r.push(ws(this.serializer,o))}))}),D.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return G0(e.ue,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.qn(t.batchId)}),D.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}qn(e){delete this.Bn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return D.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return Oo(e).Z({range:r},(s,o,a)=>{if(s[0]===this.userId){const l=Ir(s[1]);i.push(l)}else a.done()}).next(()=>{pe(i.length===0)})})}containsKey(e,t){return H0(e,this.userId,t)}Qn(e){return W0(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:Fi,lastStreamToken:""})}}function H0(n,e,t){const r=Cc(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Oo(n).Z({range:s,Y:!0},(a,l,h)=>{const[f,u,d]=a;f===e&&u===i&&(o=!0),h.done()}).next(()=>o)}function Ii(n){return jt(n,ir)}function Oo(n){return jt(n,sa)}function W0(n){return jt(n,nu)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Kn(){return new Qs(0)}static Un(){return new Qs(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EF{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Wn(e).next(t=>{const r=new Qs(t.highestTargetId);return t.highestTargetId=r.next(),this.Gn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Wn(e).next(t=>me.fromTimestamp(new yt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Wn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Wn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Gn(e,i)))}addTargetData(e,t){return this.zn(e,t).next(()=>this.Wn(e).next(r=>(r.targetCount+=1,this.jn(t,r),this.Gn(e,r))))}updateTargetData(e,t){return this.zn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Io(e).delete(t.targetId)).next(()=>this.Wn(e)).next(r=>(pe(r.targetCount>0),r.targetCount-=1,this.Gn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return Io(e).Z((o,a)=>{const l=pl(a);l.sequenceNumber<=t&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>D.waitFor(s)).next(()=>i)}forEachTarget(e,t){return Io(e).Z((r,i)=>{const s=pl(i);t(s)})}Wn(e){return pT(e).get(sh).next(t=>(pe(t!==null),t))}Gn(e,t){return pT(e).put(sh,t)}zn(e,t){return Io(e).put($0(this.serializer,t))}jn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Wn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=js(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Io(e).Z({range:i,index:UE},(o,a,l)=>{const h=pl(a);Pu(t,h.target)&&(s=h,l.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=Pi(e);return t.forEach(o=>{const a=pn(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),D.waitFor(i)}removeMatchingKeys(e,t,r){const i=Pi(e);return D.forEach(t,s=>{const o=pn(s.path);return D.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=Pi(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Pi(e);let s=Ve();return i.Z({range:r,Y:!0},(o,a,l)=>{const h=Ir(o[1]),f=new se(h);s=s.add(f)}).next(()=>s)}containsKey(e,t){const r=pn(t.path),i=IDBKeyRange.bound([r],[CE(r)],!1,!0);let s=0;return Pi(e).Z({index:W_,Y:!0,range:i},([o,a],l,h)=>{o!==0&&(s++,h.done())}).next(()=>s>0)}lt(e,t){return Io(e).get(t).next(r=>r?pl(r):null)}}function Io(n){return jt(n,oa)}function pT(n){return jt(n,Ds)}function Pi(n){return jt(n,aa)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _T="LruGarbageCollector",kF=1048576;function gT([n,e],[t,r]){const i=Se(n,t);return i===0?Se(e,r):i}class AF{constructor(e){this.Hn=e,this.buffer=new Je(gT),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();gT(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Q0{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){W(_T,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){is(t)?W(_T,"Ignoring IndexedDB error during garbage collection: ",t):await rs(t)}await this.er(3e5)})}}class SF{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return D.resolve(On.ae);const r=new AF(t);return this.tr.forEachTarget(e,i=>r.Zn(i.sequenceNumber)).next(()=>this.tr.rr(e,i=>r.Zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.tr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(W("LruGarbageCollector","Garbage collection skipped; disabled"),D.resolve(fT)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(W("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),fT):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let r,i,s,o,a,l,h;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(u=>(u>this.params.maximumSequenceNumbersToCollect?(W("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${u}`),i=this.params.maximumSequenceNumbersToCollect):i=u,o=Date.now(),this.nthSequenceNumber(e,i))).next(u=>(r=u,a=Date.now(),this.removeTargets(e,r,t))).next(u=>(s=u,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(u=>(h=Date.now(),Ro()<=Me.DEBUG&&W("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${u} documents in `+(h-l)+`ms
Total Duration: ${h-f}ms`),D.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:u})))}}function Y0(n,e){return new SF(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RF{constructor(e,t){this.db=e,this.garbageCollector=Y0(this,t)}nr(e){const t=this.sr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}sr(e){let t=0;return this.rr(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}rr(e,t){return this._r(e,(r,i)=>t(i))}addReference(e,t,r){return hc(e,r)}removeReference(e,t,r){return hc(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return hc(e,t)}ar(e,t){return function(i,s){let o=!1;return W0(i).X(a=>H0(i,a,s).next(l=>(l&&(o=!0),D.resolve(!l)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this._r(e,(o,a)=>{if(a<=t){const l=this.ar(e,o).next(h=>{if(!h)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,me.min()),Pi(e).delete(function(u){return[0,pn(u.path)]}(o))))});i.push(l)}}).next(()=>D.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return hc(e,t)}_r(e,t){const r=Pi(e);let i,s=On.ae;return r.Z({index:W_},([o,a],{path:l,sequenceNumber:h})=>{o===0?(s!==On.ae&&t(new se(Ir(i)),s),s=h,i=l):s=On.ae}).next(()=>{s!==On.ae&&t(new se(Ir(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function hc(n,e){return Pi(n).put(function(r,i){return{targetId:0,path:pn(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{constructor(){this.changes=new hi(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ut.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?D.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PF{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return _s(e).put(r)}removeEntry(e,t,r){return _s(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],hh(o),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.ur(e,r)))}getEntry(e,t){let r=ut.newInvalidDocument(t);return _s(e).Z({index:xc,range:IDBKeyRange.only(rl(t))},(i,s)=>{r=this.cr(t,s)}).next(()=>r)}lr(e,t){let r={size:0,document:ut.newInvalidDocument(t)};return _s(e).Z({index:xc,range:IDBKeyRange.only(rl(t))},(i,s)=>{r={document:this.cr(t,s),size:fh(s)}}).next(()=>r)}getEntries(e,t){let r=Vn();return this.hr(e,t,(i,s)=>{const o=this.cr(i,s);r=r.insert(i,o)}).next(()=>r)}Pr(e,t){let r=Vn(),i=new ot(se.comparator);return this.hr(e,t,(s,o)=>{const a=this.cr(s,o);r=r.insert(s,a),i=i.insert(s,fh(o))}).next(()=>({documents:r,Tr:i}))}hr(e,t,r){if(t.isEmpty())return D.resolve();let i=new Je(vT);t.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(rl(i.first()),rl(i.last())),o=i.getIterator();let a=o.getNext();return _s(e).Z({index:xc,range:s},(l,h,f)=>{const u=se.fromSegments([...h.prefixPath,h.collectionGroup,h.documentId]);for(;a&&vT(a,u)<0;)r(a,null),a=o.getNext();a&&a.isEqual(u)&&(r(a,h),a=o.hasNext()?o.getNext():null),a?f.W(rl(a)):f.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){const o=t.path,a=[o.popLast().toArray(),o.lastSegment(),hh(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return _s(e).G(IDBKeyRange.bound(a,l,!0)).next(h=>{s==null||s.incrementDocumentReadCount(h.length);let f=Vn();for(const u of h){const d=this.cr(se.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);d.isFoundDocument()&&(xu(t,d)||i.has(d.key))&&(f=f.insert(d.key,d))}return f})}getAllFromCollectionGroup(e,t,r,i){let s=Vn();const o=yT(t,r),a=yT(t,Wn.max());return _s(e).Z({index:FE,range:IDBKeyRange.bound(o,a,!0)},(l,h,f)=>{const u=this.cr(se.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);s=s.insert(u.key,u),s.size===i&&f.done()}).next(()=>s)}newChangeBuffer(e){return new CF(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return mT(e).get(ap).next(t=>(pe(!!t),t))}ur(e,t){return mT(e).put(ap,t)}cr(e,t){if(t){const r=pF(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(me.min())))return r}return ut.newInvalidDocument(e)}}function X0(n){return new PF(n)}class CF extends J0{constructor(e,t){super(),this.Ir=e,this.trackRemovals=t,this.Er=new hi(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Je((s,o)=>Se(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.Er.get(s);if(t.push(this.Ir.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=tT(this.Ir.serializer,o);i=i.add(s.path.popLast());const h=fh(l);r+=h-a.size,t.push(this.Ir.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=tT(this.Ir.serializer,o.convertToNoDocument(me.min()));t.push(this.Ir.addEntry(e,s,l))}}),i.forEach(s=>{t.push(this.Ir.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.Ir.updateMetadata(e,r)),D.waitFor(t)}getFromCache(e,t){return this.Ir.lr(e,t).next(r=>(this.Er.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Ir.Pr(e,t).next(({documents:r,Tr:i})=>(i.forEach((s,o)=>{this.Er.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function mT(n){return jt(n,ru)}function _s(n){return jt(n,ih)}function rl(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function yT(n,e){const t=e.documentKey.path.toArray();return[n,hh(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function vT(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=Se(t[s],r[s]),i)return i;return i=Se(t.length,r.length),i||(i=Se(t[t.length-2],r[r.length-2]),i||Se(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xF{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Vl(r.mutation,i,Nn.empty(),yt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ve()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ve()){const i=Er();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=dl();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=Er();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ve()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=Vn();const o=Nl(),a=function(){return Nl()}();return t.forEach((l,h)=>{const f=r.get(h.key);i.has(h.key)&&(f===void 0||f.mutation instanceof di)?s=s.insert(h.key,h):f!==void 0?(o.set(h.key,f.mutation.getFieldMask()),Vl(f.mutation,h,f.mutation.getFieldMask(),yt.now())):o.set(h.key,Nn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((h,f)=>o.set(h,f)),t.forEach((h,f)=>{var u;return a.set(h,new xF(f,(u=o.get(h))!==null&&u!==void 0?u:null))}),a))}recalculateAndSaveOverlays(e,t){const r=Nl();let i=new ot((o,a)=>o-a),s=Ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(l=>{const h=t.get(l);if(h===null)return;let f=r.get(l)||Nn.empty();f=a.applyToLocalView(h,f),r.set(l,f);const u=(i.get(a.batchId)||Ve()).add(l);i=i.insert(a.batchId,u)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),h=l.key,f=l.value,u=_0();f.forEach(d=>{if(!s.has(d)){const p=w0(t.get(d),r.get(d));p!==null&&u.set(d,p),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,u))}return D.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return se.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):tg(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):D.resolve(Er());let a=ia,l=s;return o.next(h=>D.forEach(h,(f,u)=>(a<u.largestBatchId&&(a=u.largestBatchId),s.get(f)?D.resolve():this.remoteDocumentCache.getEntry(e,f).next(d=>{l=l.insert(f,d)}))).next(()=>this.populateOverlays(e,h,s)).next(()=>this.computeViews(e,l,h,Ve())).next(f=>({batchId:a,changes:p0(f)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new se(t)).next(r=>{let i=dl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=dl();return this.indexManager.getCollectionParents(e,s).next(a=>D.forEach(a,l=>{const h=function(u,d){return new ci(d,null,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next(f=>{f.forEach((u,d)=>{o=o.insert(u,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((l,h)=>{const f=h.getKey();o.get(f)===null&&(o=o.insert(f,ut.newInvalidDocument(f)))});let a=dl();return o.forEach((l,h)=>{const f=s.get(l);f!==void 0&&Vl(f.mutation,h,Nn.empty(),yt.now()),xu(t,h)&&(a=a.insert(l,h))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OF{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return D.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:xt(i.createTime)}}(t)),D.resolve()}getNamedQuery(e,t){return D.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(i){return{name:i.name,query:cg(i.bundledQuery),readTime:xt(i.readTime)}}(t)),D.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NF{constructor(){this.overlays=new ot(se.comparator),this.Rr=new Map}getOverlay(e,t){return D.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Er();return D.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.Et(e,t,s)}),D.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Rr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Rr.delete(r)),D.resolve()}getOverlaysForCollection(e,t,r){const i=Er(),s=t.length+1,o=new se(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,h=l.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return D.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new ot((h,f)=>h-f);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>r){let f=s.get(h.largestBatchId);f===null&&(f=Er(),s=s.insert(h.largestBatchId,f)),f.set(h.getKey(),h)}}const a=Er(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((h,f)=>a.set(h,f)),!(a.size()>=i)););return D.resolve(a)}Et(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Rr.get(i.largestBatchId).delete(r.key);this.Rr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new ag(t,r));let s=this.Rr.get(t);s===void 0&&(s=Ve(),this.Rr.set(t,s)),this.Rr.set(t,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VF{constructor(){this.sessionToken=St.EMPTY_BYTE_STRING}getSessionToken(e){return D.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,D.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(){this.Vr=new Je(Wt.mr),this.gr=new Je(Wt.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const r=new Wt(e,t);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.wr(new Wt(e,t))}br(e,t){e.forEach(r=>this.removeReference(r,t))}Sr(e){const t=new se(new Ue([])),r=new Wt(t,e),i=new Wt(t,e+1),s=[];return this.gr.forEachInRange([r,i],o=>{this.wr(o),s.push(o.key)}),s}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new se(new Ue([])),r=new Wt(t,e),i=new Wt(t,e+1);let s=Ve();return this.gr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new Wt(e,0),r=this.Vr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Wt{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return se.comparator(e.key,t.key)||Se(e.Cr,t.Cr)}static pr(e,t){return Se(e.Cr,t.Cr)||se.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DF{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new Je(Wt.mr)}checkEmpty(e){return D.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const s=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new sg(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.Mr=this.Mr.add(new Wt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return D.resolve(o)}lookupMutationBatch(e,t){return D.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.Nr(r),s=i<0?0:i;return D.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return D.resolve(this.mutationQueue.length===0?Fi:this.Fr-1)}getAllMutationBatches(e){return D.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Wt(t,0),i=new Wt(t,Number.POSITIVE_INFINITY),s=[];return this.Mr.forEachInRange([r,i],o=>{const a=this.Or(o.Cr);s.push(a)}),D.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Je(Se);return t.forEach(i=>{const s=new Wt(i,0),o=new Wt(i,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([s,o],a=>{r=r.add(a.Cr)})}),D.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;se.isDocumentKey(s)||(s=s.child(""));const o=new Wt(new se(s),0);let a=new Je(Se);return this.Mr.forEachWhile(l=>{const h=l.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(a=a.add(l.Cr)),!0)},o),D.resolve(this.Br(a))}Br(e){const t=[];return e.forEach(r=>{const i=this.Or(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){pe(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Mr;return D.forEach(t.mutations,i=>{const s=new Wt(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Mr=r})}qn(e){}containsKey(e,t){const r=new Wt(t,0),i=this.Mr.firstAfterOrEqual(r);return D.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,D.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MF{constructor(e){this.kr=e,this.docs=function(){return new ot(se.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.kr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return D.resolve(r?r.document.mutableCopy():ut.newInvalidDocument(t))}getEntries(e,t){let r=Vn();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ut.newInvalidDocument(i))}),D.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Vn();const o=t.path,a=new se(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:h,value:{document:f}}=l.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||G_(OE(f),r)<=0||(i.has(f.key)||xu(t,f))&&(s=s.insert(f.key,f.mutableCopy()))}return D.resolve(s)}getAllFromCollectionGroup(e,t,r,i){de()}qr(e,t){return D.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new LF(this)}getSize(e){return D.resolve(this.size)}}class LF extends J0{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Ir.addEntry(e,i)):this.Ir.removeEntry(r)}),D.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FF{constructor(e){this.persistence=e,this.Qr=new hi(t=>js(t),Pu),this.lastRemoteSnapshotVersion=me.min(),this.highestTargetId=0,this.$r=0,this.Kr=new fg,this.targetCount=0,this.Ur=Qs.Kn()}forEachTarget(e,t){return this.Qr.forEach((r,i)=>t(i)),D.resolve()}getLastRemoteSnapshotVersion(e){return D.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return D.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Ur.next(),D.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.$r&&(this.$r=t),D.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ur=new Qs(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,D.resolve()}updateTargetData(e,t){return this.zn(t),D.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Kr.Sr(t.targetId),this.targetCount-=1,D.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Qr.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Qr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),D.waitFor(s).next(()=>i)}getTargetCount(e){return D.resolve(this.targetCount)}getTargetData(e,t){const r=this.Qr.get(t)||null;return D.resolve(r)}addMatchingKeys(e,t,r){return this.Kr.yr(t,r),D.resolve()}removeMatchingKeys(e,t,r){this.Kr.br(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),D.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Kr.Sr(t),D.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Kr.vr(t);return D.resolve(r)}containsKey(e,t){return D.resolve(this.Kr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new On(0),this.zr=!1,this.zr=!0,this.jr=new VF,this.referenceDelegate=e(this),this.Hr=new FF(this),this.indexManager=new wF,this.remoteDocumentCache=function(i){return new MF(i)}(r=>this.referenceDelegate.Jr(r)),this.serializer=new B0(t),this.Yr=new OF(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new NF,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Wr[e.toKey()];return r||(r=new DF(t,this.referenceDelegate),this.Wr[e.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,r){W("MemoryPersistence","Starting transaction:",e);const i=new UF(this.Gr.next());return this.referenceDelegate.Zr(),r(i).next(s=>this.referenceDelegate.Xr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}ei(e,t){return D.or(Object.values(this.Wr).map(r=>()=>r.containsKey(e,t)))}}class UF extends VE{constructor(e){super(),this.currentSequenceNumber=e}}class fd{constructor(e){this.persistence=e,this.ti=new fg,this.ni=null}static ri(e){return new fd(e)}get ii(){if(this.ni)return this.ni;throw de()}addReference(e,t,r){return this.ti.addReference(r,t),this.ii.delete(r.toString()),D.resolve()}removeReference(e,t,r){return this.ti.removeReference(r,t),this.ii.add(r.toString()),D.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),D.resolve()}removeTarget(e,t){this.ti.Sr(t.targetId).forEach(i=>this.ii.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.ii.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return D.forEach(this.ii,r=>{const i=se.fromPath(r);return this.si(e,i).next(s=>{s||t.removeEntry(i,me.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(r=>{r?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return D.or([()=>D.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class ph{constructor(e,t){this.persistence=e,this.oi=new hi(r=>pn(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=Y0(this,t)}static ri(e,t){return new ph(e,t)}Zr(){}Xr(e){return D.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}sr(e){let t=0;return this.rr(e,r=>{t++}).next(()=>t)}rr(e,t){return D.forEach(this.oi,(r,i)=>this.ar(e,r,i).next(s=>s?D.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.qr(e,o=>this.ar(e,o,t).next(a=>{a||(r++,s.removeEntry(o,me.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),D.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),D.resolve()}removeReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),D.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),D.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Nc(e.data.value)),t}ar(e,t,r){return D.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.oi.get(t);return D.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KF{constructor(e){this.serializer=e}B(e,t,r,i){const s=new nd("createOrUpgrade",t);r<1&&i>=1&&(function(l){l.createObjectStore(Ru)}(e),function(l){l.createObjectStore(nu,{keyPath:nL}),l.createObjectStore(ir,{keyPath:xv,autoIncrement:!0}).createIndex(Ss,Ov,{unique:!0}),l.createObjectStore(sa)}(e),TT(e),function(l){l.createObjectStore(vs)}(e));let o=D.resolve();return r<3&&i>=3&&(r!==0&&(function(l){l.deleteObjectStore(aa),l.deleteObjectStore(oa),l.deleteObjectStore(Ds)}(e),TT(e)),o=o.next(()=>function(l){const h=l.store(Ds),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:me.min().toTimestamp(),targetCount:0};return h.put(sh,f)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(l,h){return h.store(ir).G().next(u=>{l.deleteObjectStore(ir),l.createObjectStore(ir,{keyPath:xv,autoIncrement:!0}).createIndex(Ss,Ov,{unique:!0});const d=h.store(ir),p=u.map(m=>d.put(m));return D.waitFor(p)})}(e,s))),o=o.next(()=>{(function(l){l.createObjectStore(la,{keyPath:hL})})(e)})),r<5&&i>=5&&(o=o.next(()=>this._i(s))),r<6&&i>=6&&(o=o.next(()=>(function(l){l.createObjectStore(ru)}(e),this.ai(s)))),r<7&&i>=7&&(o=o.next(()=>this.ui(s))),r<8&&i>=8&&(o=o.next(()=>this.ci(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.li(s))),r<11&&i>=11&&(o=o.next(()=>{(function(l){l.createObjectStore(rd,{keyPath:dL})})(e),function(l){l.createObjectStore(id,{keyPath:fL})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(l){const h=l.createObjectStore(sd,{keyPath:TL});h.createIndex(up,bL,{unique:!1}),h.createIndex($E,wL,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(l){const h=l.createObjectStore(ih,{keyPath:iL});h.createIndex(xc,sL),h.createIndex(FE,oL)}(e)).next(()=>this.hi(e,s)).next(()=>e.deleteObjectStore(vs))),r<14&&i>=14&&(o=o.next(()=>this.Pi(e,s))),r<15&&i>=15&&(o=o.next(()=>function(l){l.createObjectStore(Q_,{keyPath:pL,autoIncrement:!0}).createIndex(lp,_L,{unique:!1}),l.createObjectStore(oh,{keyPath:gL}).createIndex(KE,mL,{unique:!1}),l.createObjectStore(ah,{keyPath:yL}).createIndex(BE,vL,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{t.objectStore(oh).clear()}).next(()=>{t.objectStore(ah).clear()})),r<17&&i>=17&&(o=o.next(()=>{(function(l){l.createObjectStore(Y_,{keyPath:IL})})(e)})),o}ai(e){let t=0;return e.store(vs).Z((r,i)=>{t+=fh(i)}).next(()=>{const r={byteSize:t};return e.store(ru).put(ap,r)})}_i(e){const t=e.store(nu),r=e.store(ir);return t.G().next(i=>D.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,Fi],[s.userId,s.lastAcknowledgedBatchId]);return r.G(Ss,o).next(a=>D.forEach(a,l=>{pe(l.userId===s.userId);const h=ws(this.serializer,l);return G0(e,s.userId,h).next(()=>{})}))}))}ui(e){const t=e.store(aa),r=e.store(vs);return e.store(Ds).get(sh).next(i=>{const s=[];return r.Z((o,a)=>{const l=new Ue(o),h=function(u){return[0,pn(u)]}(l);s.push(t.get(h).next(f=>f?D.resolve():(u=>t.put({targetId:0,path:pn(u),sequenceNumber:i.highestListenSequenceNumber}))(l)))}).next(()=>D.waitFor(s))})}ci(e,t){e.createObjectStore(iu,{keyPath:cL});const r=t.store(iu),i=new dg,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:pn(l)})}};return t.store(vs).Z({Y:!0},(o,a)=>{const l=new Ue(o);return s(l.popLast())}).next(()=>t.store(sa).Z({Y:!0},([o,a,l],h)=>{const f=Ir(a);return s(f.popLast())}))}li(e){const t=e.store(oa);return t.Z((r,i)=>{const s=pl(i),o=$0(this.serializer,s);return t.put(o)})}hi(e,t){const r=t.store(vs),i=[];return r.Z((s,o)=>{const a=t.store(ih),l=function(u){return u.document?new se(Ue.fromString(u.document.name).popFirst(5)):u.noDocument?se.fromSegments(u.noDocument.path):u.unknownDocument?se.fromSegments(u.unknownDocument.path):de()}(o).path.toArray(),h={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(h))}).next(()=>D.waitFor(i))}Pi(e,t){const r=t.store(ir),i=X0(this.serializer),s=new pg(fd.ri,this.serializer.Tt);return r.G().next(o=>{const a=new Map;return o.forEach(l=>{var h;let f=(h=a.get(l.userId))!==null&&h!==void 0?h:Ve();ws(this.serializer,l).keys().forEach(u=>f=f.add(u)),a.set(l.userId,f)}),D.forEach(a,(l,h)=>{const f=new Qt(h),u=hd.It(this.serializer,f),d=s.getIndexManager(f),p=dd.It(f,this.serializer,d,s.referenceDelegate);return new Z0(i,p,u,d).recalculateAndSaveOverlaysForDocumentKeys(new cp(t,On.ae),l).next()})})}}function TT(n){n.createObjectStore(aa,{keyPath:lL}).createIndex(W_,uL,{unique:!0}),n.createObjectStore(oa,{keyPath:"targetId"}).createIndex(UE,aL,{unique:!0}),n.createObjectStore(Ds)}const Ei="IndexedDbPersistence",Tf=18e5,bf=5e3,wf="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",ek="main";class _g{constructor(e,t,r,i,s,o,a,l,h,f,u=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Ti=s,this.window=o,this.document=a,this.Ii=h,this.Ei=f,this.di=u,this.Gr=null,this.zr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ai=null,this.inForeground=!1,this.Ri=null,this.Vi=null,this.mi=Number.NEGATIVE_INFINITY,this.fi=d=>Promise.resolve(),!_g.D())throw new H(B.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new RF(this,i),this.gi=t+ek,this.serializer=new B0(l),this.pi=new Ar(this.gi,this.di,new KF(this.serializer)),this.jr=new gF,this.Hr=new EF(this.referenceDelegate,this.serializer),this.remoteDocumentCache=X0(this.serializer),this.Yr=new _F,this.window&&this.window.localStorage?this.yi=this.window.localStorage:(this.yi=null,f===!1&&Ct(Ei,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new H(B.FAILED_PRECONDITION,wf);return this.bi(),this.Si(),this.Di(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Hr.getHighestSequenceNumber(e))}).then(e=>{this.Gr=new On(e,this.Ii)}).then(()=>{this.zr=!0}).catch(e=>(this.pi&&this.pi.close(),Promise.reject(e)))}Ci(e){return this.fi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.pi.k(async t=>{t.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ti.enqueueAndForget(async()=>{this.started&&await this.wi()}))}wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>dc(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Fi(e).next(t=>{t||(this.isPrimary=!1,this.Ti.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Mi(e)).next(t=>this.isPrimary&&!t?this.xi(e).next(()=>!1):!!t&&this.Oi(e).next(()=>!0))).catch(e=>{if(is(e))return W(Ei,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return W(Ei,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ti.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Fi(e){return il(e).get(yo).next(t=>D.resolve(this.Ni(t)))}Bi(e){return dc(e).delete(this.clientId)}async Li(){if(this.isPrimary&&!this.ki(this.mi,Tf)){this.mi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const r=jt(t,la);return r.G().next(i=>{const s=this.qi(i,Tf),o=i.filter(a=>s.indexOf(a)===-1);return D.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.yi)for(const t of e)this.yi.removeItem(this.Qi(t.clientId))}}Di(){this.Vi=this.Ti.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.wi().then(()=>this.Li()).then(()=>this.Di()))}Ni(e){return!!e&&e.ownerId===this.clientId}Mi(e){return this.Ei?D.resolve(!0):il(e).get(yo).next(t=>{if(t!==null&&this.ki(t.leaseTimestampMs,bf)&&!this.$i(t.ownerId)){if(this.Ni(t)&&this.networkEnabled)return!0;if(!this.Ni(t)){if(!t.allowTabSynchronization)throw new H(B.FAILED_PRECONDITION,wf);return!1}}return!(!this.networkEnabled||!this.inForeground)||dc(e).G().next(r=>this.qi(r,bf).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&W(Ei,`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.zr=!1,this.Ki(),this.Vi&&(this.Vi.cancel(),this.Vi=null),this.Ui(),this.Wi(),await this.pi.runTransaction("shutdown","readwrite",[Ru,la],e=>{const t=new cp(e,On.ae);return this.xi(t).next(()=>this.Bi(t))}),this.pi.close(),this.Gi()}qi(e,t){return e.filter(r=>this.ki(r.updateTimeMs,t)&&!this.$i(r.clientId))}zi(){return this.runTransaction("getActiveClients","readonly",e=>dc(e).G().next(t=>this.qi(t,Tf).map(r=>r.clientId)))}get started(){return this.zr}getGlobalsCache(){return this.jr}getMutationQueue(e,t){return dd.It(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new IF(e,this.serializer.Tt.databaseId)}getDocumentOverlayCache(e){return hd.It(this.serializer,e)}getBundleCache(){return this.Yr}runTransaction(e,t,r){W(Ei,"Starting transaction:",e);const i=t==="readonly"?"readonly":"readwrite",s=function(l){return l===17?AL:l===16?kL:l===15?J_:l===14?qE:l===13?jE:l===12?EL:l===11?zE:void de()}(this.di);let o;return this.pi.runTransaction(e,i,s,a=>(o=new cp(a,this.Gr?this.Gr.next():On.ae),t==="readwrite-primary"?this.Fi(o).next(l=>!!l||this.Mi(o)).next(l=>{if(!l)throw Ct(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ti.enqueueRetryable(()=>this.fi(!1)),new H(B.FAILED_PRECONDITION,NE);return r(o)}).next(l=>this.Oi(o).next(()=>l)):this.ji(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}ji(e){return il(e).get(yo).next(t=>{if(t!==null&&this.ki(t.leaseTimestampMs,bf)&&!this.$i(t.ownerId)&&!this.Ni(t)&&!(this.Ei||this.allowTabSynchronization&&t.allowTabSynchronization))throw new H(B.FAILED_PRECONDITION,wf)})}Oi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return il(e).put(yo,t)}static D(){return Ar.D()}xi(e){const t=il(e);return t.get(yo).next(r=>this.Ni(r)?(W(Ei,"Releasing primary lease."),t.delete(yo)):D.resolve())}ki(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(Ct(`Detected an update time that is in the future: ${e} > ${r}`),!1))}bi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ri=()=>{this.Ti.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.wi()))},this.document.addEventListener("visibilitychange",this.Ri),this.inForeground=this.document.visibilityState==="visible")}Ui(){this.Ri&&(this.document.removeEventListener("visibilitychange",this.Ri),this.Ri=null)}Si(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Ai=()=>{this.Ki();const t=/(?:Version|Mobile)\/1[456]/;lI()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Ti.enterRestrictedMode(!0),this.Ti.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ai))}Wi(){this.Ai&&(this.window.removeEventListener("pagehide",this.Ai),this.Ai=null)}$i(e){var t;try{const r=((t=this.yi)===null||t===void 0?void 0:t.getItem(this.Qi(e)))!==null;return W(Ei,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ct(Ei,"Failed to get zombied client id.",r),!1}}Ki(){if(this.yi)try{this.yi.setItem(this.Qi(this.clientId),String(Date.now()))}catch(e){Ct("Failed to set zombie client id.",e)}}Gi(){if(this.yi)try{this.yi.removeItem(this.Qi(this.clientId))}catch{}}Qi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function il(n){return jt(n,Ru)}function dc(n){return jt(n,la)}function gg(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Hi=r,this.Ji=i}static Yi(e,t){let r=Ve(),i=Ve();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new mg(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BF{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return lI()?8:DE(wt())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.rs(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ss(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new BF;return this._s(e,t,o).next(a=>{if(s.result=a,this.Xi)return this.us(e,t,o,a.size)})}).next(()=>s.result)}us(e,t,r,i){return r.documentReadCount<this.es?(Ro()<=Me.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",Po(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),D.resolve()):(Ro()<=Me.DEBUG&&W("QueryEngine","Query:",Po(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ts*i?(Ro()<=Me.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",Po(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,En(t))):D.resolve())}rs(e,t){if(qv(t))return D.resolve(null);let r=En(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=ch(t,null,"F"),r=En(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Ve(...s);return this.ns.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const h=this.cs(t,a);return this.ls(t,h,o,l.readTime)?this.rs(e,ch(t,null,"F")):this.hs(e,h,t,l)}))})))}ss(e,t,r,i){return qv(t)||i.isEqual(me.min())?D.resolve(null):this.ns.getDocuments(e,r).next(s=>{const o=this.cs(t,s);return this.ls(t,o,r,i)?D.resolve(null):(Ro()<=Me.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Po(t)),this.hs(e,o,t,xE(i,ia)).next(a=>a))})}cs(e,t){let r=new Je(d0(e));return t.forEach((i,s)=>{xu(e,s)&&(r=r.add(s))}),r}ls(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}_s(e,t,r){return Ro()<=Me.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",Po(t)),this.ns.getDocumentsMatchingQuery(e,t,Wn.min(),r)}hs(e,t,r,i){return this.ns.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yg="LocalStore",$F=3e8;class zF{constructor(e,t,r,i){this.persistence=e,this.Ps=t,this.serializer=i,this.Ts=new ot(Se),this.Is=new hi(s=>js(s),Pu),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(r)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Z0(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function nk(n,e,t,r){return new zF(n,e,t,r)}async function rk(n,e){const t=ae(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.As(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=Ve();for(const h of i){o.push(h.batchId);for(const f of h.mutations)l=l.add(f.key)}for(const h of s){a.push(h.batchId);for(const f of h.mutations)l=l.add(f.key)}return t.localDocuments.getDocuments(r,l).next(h=>({Rs:h,removedBatchIds:o,addedBatchIds:a}))})})}function jF(n,e){const t=ae(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.ds.newChangeBuffer({trackRemovals:!0});return function(a,l,h,f){const u=h.batch,d=u.keys();let p=D.resolve();return d.forEach(m=>{p=p.next(()=>f.getEntry(l,m)).next(T=>{const v=h.docVersions.get(m);pe(v!==null),T.version.compareTo(v)<0&&(u.applyToRemoteDocument(T,h),T.isValidDocument()&&(T.setReadTime(h.commitVersion),f.addEntry(T)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(l,u))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Ve();for(let h=0;h<a.mutationResults.length;++h)a.mutationResults[h].transformResults.length>0&&(l=l.add(a.batch.mutations[h].key));return l}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function ik(n){const e=ae(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function qF(n,e){const t=ae(n),r=e.snapshotVersion;let i=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.ds.newChangeBuffer({trackRemovals:!0});i=t.Ts;const a=[];e.targetChanges.forEach((f,u)=>{const d=i.get(u);if(!d)return;a.push(t.Hr.removeMatchingKeys(s,f.removedDocuments,u).next(()=>t.Hr.addMatchingKeys(s,f.addedDocuments,u)));let p=d.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(u)!==null?p=p.withResumeToken(St.EMPTY_BYTE_STRING,me.min()).withLastLimboFreeSnapshotVersion(me.min()):f.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(f.resumeToken,r)),i=i.insert(u,p),function(T,v,I){return T.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=$F?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0}(d,p,f)&&a.push(t.Hr.updateTargetData(s,p))});let l=Vn(),h=Ve();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,f))}),a.push(sk(s,o,e.documentUpdates).next(f=>{l=f.Vs,h=f.fs})),!r.isEqual(me.min())){const f=t.Hr.getLastRemoteSnapshotVersion(s).next(u=>t.Hr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(f)}return D.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,h)).next(()=>l)}).then(s=>(t.Ts=i,s))}function sk(n,e,t){let r=Ve(),i=Ve();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Vn();return t.forEach((a,l)=>{const h=s.get(a);l.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(me.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!h.isValidDocument()||l.version.compareTo(h.version)>0||l.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):W(yg,"Ignoring outdated watch update for ",a,". Current version:",h.version," Watch version:",l.version)}),{Vs:o,fs:i}})}function GF(n,e){const t=ae(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Fi),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function _a(n,e){const t=ae(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Hr.getTargetData(r,e).next(s=>s?(i=s,D.resolve(i)):t.Hr.allocateTargetId(r).next(o=>(i=new Wr(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Hr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ts.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(r.targetId,r),t.Is.set(e,r.targetId)),r})}async function ga(n,e,t){const r=ae(n),i=r.Ts.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!is(o))throw o;W(yg,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ts=r.Ts.remove(e),r.Is.delete(i.target)}function _h(n,e,t){const r=ae(n);let i=me.min(),s=Ve();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,h,f){const u=ae(l),d=u.Is.get(f);return d!==void 0?D.resolve(u.Ts.get(d)):u.Hr.getTargetData(h,f)}(r,o,En(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.Ps.getDocumentsMatchingQuery(o,e,t?i:me.min(),t?s:Ve())).next(a=>(lk(r,h0(e),a),{documents:a,gs:s})))}function ok(n,e){const t=ae(n),r=ae(t.Hr),i=t.Ts.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.lt(s,e).next(o=>o?o.target:null))}function ak(n,e){const t=ae(n),r=t.Es.get(e)||me.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.ds.getAllFromCollectionGroup(i,e,xE(r,ia),Number.MAX_SAFE_INTEGER)).then(i=>(lk(t,e,i),i))}function lk(n,e,t){let r=n.Es.get(e)||me.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Es.set(e,r)}async function HF(n,e,t,r){const i=ae(n);let s=Ve(),o=Vn();for(const h of t){const f=e.ps(h.metadata.name);h.document&&(s=s.add(f));const u=e.ys(h);u.setReadTime(e.ws(h.metadata.readTime)),o=o.insert(f,u)}const a=i.ds.newChangeBuffer({trackRemovals:!0}),l=await _a(i,function(f){return En(Ra(Ue.fromString(`__bundle__/docs/${f}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",h=>sk(h,a,o).next(f=>(a.apply(h),f)).next(f=>i.Hr.removeMatchingKeysForTargetId(h,l.targetId).next(()=>i.Hr.addMatchingKeys(h,s,l.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(h,f.Vs,f.fs)).next(()=>f.Vs)))}async function WF(n,e,t=Ve()){const r=await _a(n,En(cg(e.bundledQuery))),i=ae(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=xt(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Yr.saveNamedQuery(s,e);const a=r.withResumeToken(St.EMPTY_BYTE_STRING,o);return i.Ts=i.Ts.insert(a.targetId,a),i.Hr.updateTargetData(s,a).next(()=>i.Hr.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Hr.addMatchingKeys(s,t,r.targetId)).next(()=>i.Yr.saveNamedQuery(s,e))})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uk="firestore_clients";function bT(n,e){return`${uk}_${n}_${e}`}const ck="firestore_mutations";function wT(n,e,t){let r=`${ck}_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const hk="firestore_targets";function If(n,e){return`${hk}_${n}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gr="SharedClientState";class gh{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static bs(e,t,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new H(i.error.code,i.error.message))),o?new gh(e,t,i.state,s):(Ct(gr,`Failed to parse mutation state for ID '${t}': ${r}`),null)}Ss(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Dl{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static bs(e,t){const r=JSON.parse(t);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new H(r.error.code,r.error.message))),s?new Dl(e,r.state,i):(Ct(gr,`Failed to parse target state for ID '${e}': ${t}`),null)}Ss(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class mh{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static bs(e,t){const r=JSON.parse(t);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=ng();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=ME(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new mh(e,s):(Ct(gr,`Failed to parse client data for instance '${e}': ${t}`),null)}}class vg{constructor(e,t){this.clientId=e,this.onlineState=t}static bs(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new vg(t.clientId,t.onlineState):(Ct(gr,`Failed to parse online state: ${e}`),null)}}class kp{constructor(){this.activeTargetIds=ng()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ss(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ef{constructor(e,t,r,i,s){this.window=e,this.Ti=t,this.persistenceKey=r,this.Cs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Fs=this.Ms.bind(this),this.xs=new ot(Se),this.started=!1,this.Os=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ns=bT(this.persistenceKey,this.Cs),this.Bs=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.xs=this.xs.insert(this.Cs,new kp),this.Ls=new RegExp(`^${uk}_${o}_([^_]*)$`),this.ks=new RegExp(`^${ck}_${o}_(\\d+)(?:_(.*))?$`),this.qs=new RegExp(`^${hk}_${o}_(\\d+)$`),this.Qs=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this.$s=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.Fs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.zi();for(const r of e){if(r===this.Cs)continue;const i=this.getItem(bT(this.persistenceKey,r));if(i){const s=mh.bs(r,i);s&&(this.xs=this.xs.insert(s.clientId,s))}}this.Ks();const t=this.storage.getItem(this.Qs);if(t){const r=this.Us(t);r&&this.Ws(r)}for(const r of this.Os)this.Ms(r);this.Os=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.Bs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Gs(this.xs)}isActiveQueryTarget(e){let t=!1;return this.xs.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.zs(e,"pending")}updateMutationState(e,t,r){this.zs(e,t,r),this.js(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(If(this.persistenceKey,e));if(i){const s=Dl.bs(e,i);s&&(r=s.state)}}return t&&this.Hs.Ds(e),this.Ks(),r}removeLocalQueryTarget(e){this.Hs.vs(e),this.Ks()}isLocalQueryTarget(e){return this.Hs.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(If(this.persistenceKey,e))}updateQueryState(e,t,r){this.Js(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.js(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Ys(e)}notifyBundleLoaded(e){this.Zs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Fs),this.removeItem(this.Ns),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return W(gr,"READ",e,t),t}setItem(e,t){W(gr,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){W(gr,"REMOVE",e),this.storage.removeItem(e)}Ms(e){const t=e;if(t.storageArea===this.storage){if(W(gr,"EVENT",t.key,t.newValue),t.key===this.Ns)return void Ct("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ti.enqueueRetryable(async()=>{if(this.started){if(t.key!==null){if(this.Ls.test(t.key)){if(t.newValue==null){const r=this.Xs(t.key);return this.eo(r,null)}{const r=this.no(t.key,t.newValue);if(r)return this.eo(r.clientId,r)}}else if(this.ks.test(t.key)){if(t.newValue!==null){const r=this.ro(t.key,t.newValue);if(r)return this.io(r)}}else if(this.qs.test(t.key)){if(t.newValue!==null){const r=this.so(t.key,t.newValue);if(r)return this.oo(r)}}else if(t.key===this.Qs){if(t.newValue!==null){const r=this.Us(t.newValue);if(r)return this.Ws(r)}}else if(t.key===this.Bs){const r=function(s){let o=On.ae;if(s!=null)try{const a=JSON.parse(s);pe(typeof a=="number"),o=a}catch(a){Ct(gr,"Failed to read sequence number from WebStorage",a)}return o}(t.newValue);r!==On.ae&&this.sequenceNumberHandler(r)}else if(t.key===this.$s){const r=this._o(t.newValue);await Promise.all(r.map(i=>this.syncEngine.ao(i)))}}}else this.Os.push(t)})}}get Hs(){return this.xs.get(this.Cs)}Ks(){this.setItem(this.Ns,this.Hs.Ss())}zs(e,t,r){const i=new gh(this.currentUser,e,t,r),s=wT(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Ss())}js(e){const t=wT(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Ys(e){const t={clientId:this.Cs,onlineState:e};this.storage.setItem(this.Qs,JSON.stringify(t))}Js(e,t,r){const i=If(this.persistenceKey,e),s=new Dl(e,t,r);this.setItem(i,s.Ss())}Zs(e){const t=JSON.stringify(Array.from(e));this.setItem(this.$s,t)}Xs(e){const t=this.Ls.exec(e);return t?t[1]:null}no(e,t){const r=this.Xs(e);return mh.bs(r,t)}ro(e,t){const r=this.ks.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return gh.bs(new Qt(s),i,t)}so(e,t){const r=this.qs.exec(e),i=Number(r[1]);return Dl.bs(i,t)}Us(e){return vg.bs(e)}_o(e){return JSON.parse(e)}async io(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.uo(e.batchId,e.state,e.error);W(gr,`Ignoring mutation for non-active user ${e.user.uid}`)}oo(e){return this.syncEngine.co(e.targetId,e.state,e.error)}eo(e,t){const r=t?this.xs.insert(e,t):this.xs.remove(e),i=this.Gs(this.xs),s=this.Gs(r),o=[],a=[];return s.forEach(l=>{i.has(l)||o.push(l)}),i.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.lo(o,a).then(()=>{this.xs=r})}Ws(e){this.xs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Gs(e){let t=ng();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class dk{constructor(){this.ho=new kp,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,r){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new kp,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QF{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IT="ConnectivityMonitor";class ET{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){W(IT,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){W(IT,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fc=null;function Ap(){return fc===null?fc=function(){return 268435456+Math.round(2147483648*Math.random())}():fc++,"0x"+fc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kf="RestConnection",YF={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class JF{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${r}/databases/${i}`,this.wo=this.databaseId.database===hp?`project_id=${r}`:`project_id=${r}&database_id=${i}`}bo(e,t,r,i,s){const o=Ap(),a=this.So(e,t.toUriEncodedString());W(kf,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(l,i,s),this.vo(e,a,l,r).then(h=>(W(kf,`Received RPC '${e}' ${o}: `,h),h),h=>{throw xr(kf,`RPC '${e}' ${o} failed with error: `,h,"url: ",a,"request:",r),h})}Co(e,t,r,i,s,o){return this.bo(e,t,r,i,s)}Do(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Sa}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}So(e,t){const r=YF[e];return`${this.po}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XF{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Ko(e){this.ko(e)}Uo(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ln="WebChannelConnection";class ZF extends JF{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,r,i){const s=Ap();return new Promise((o,a)=>{const l=new IE;l.setWithCredentials(!0),l.listenOnce(EE.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Rc.NO_ERROR:const f=l.getResponseJson();W(ln,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),o(f);break;case Rc.TIMEOUT:W(ln,`RPC '${e}' ${s} timed out`),a(new H(B.DEADLINE_EXCEEDED,"Request time out"));break;case Rc.HTTP_ERROR:const u=l.getStatus();if(W(ln,`RPC '${e}' ${s} failed with status:`,u,"response text:",l.getResponseText()),u>0){let d=l.getResponseJson();Array.isArray(d)&&(d=d[0]);const p=d==null?void 0:d.error;if(p&&p.status&&p.message){const m=function(v){const I=v.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(I)>=0?I:B.UNKNOWN}(p.status);a(new H(m,p.message))}else a(new H(B.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new H(B.UNAVAILABLE,"Connection failed."));break;default:de()}}finally{W(ln,`RPC '${e}' ${s} completed.`)}});const h=JSON.stringify(i);W(ln,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",h,r,15)})}Wo(e,t,r){const i=Ap(),s=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=SE(),a=AE(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(l.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Do(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;const f=s.join("");W(ln,`Creating RPC '${e}' stream ${i}: ${f}`,l);const u=o.createWebChannel(f,l);let d=!1,p=!1;const m=new XF({Fo:v=>{p?W(ln,`Not sending because RPC '${e}' stream ${i} is closed:`,v):(d||(W(ln,`Opening RPC '${e}' stream ${i} transport.`),u.open(),d=!0),W(ln,`RPC '${e}' stream ${i} sending:`,v),u.send(v))},Mo:()=>u.close()}),T=(v,I,C)=>{v.listen(I,M=>{try{C(M)}catch(U){setTimeout(()=>{throw U},0)}})};return T(u,hl.EventType.OPEN,()=>{p||(W(ln,`RPC '${e}' stream ${i} transport opened.`),m.Qo())}),T(u,hl.EventType.CLOSE,()=>{p||(p=!0,W(ln,`RPC '${e}' stream ${i} transport closed`),m.Ko())}),T(u,hl.EventType.ERROR,v=>{p||(p=!0,xr(ln,`RPC '${e}' stream ${i} transport errored:`,v),m.Ko(new H(B.UNAVAILABLE,"The operation could not be completed")))}),T(u,hl.EventType.MESSAGE,v=>{var I;if(!p){const C=v.data[0];pe(!!C);const M=C,U=(M==null?void 0:M.error)||((I=M[0])===null||I===void 0?void 0:I.error);if(U){W(ln,`RPC '${e}' stream ${i} received error:`,U);const ee=U.status;let ne=function(b){const R=Lt[b];if(R!==void 0)return k0(R)}(ee),k=U.message;ne===void 0&&(ne=B.INTERNAL,k="Unknown error status: "+ee+" with message "+U.message),p=!0,m.Ko(new H(ne,k)),u.close()}else W(ln,`RPC '${e}' stream ${i} received:`,C),m.Uo(C)}}),T(a,kE.STAT_EVENT,v=>{v.stat===sp.PROXY?W(ln,`RPC '${e}' stream ${i} detected buffering proxy`):v.stat===sp.NOPROXY&&W(ln,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{m.$o()},0),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fk(){return typeof window<"u"?window:null}function Lc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Du(n){return new iF(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Ti=e,this.timerId=t,this.Go=r,this.zo=i,this.jo=s,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),i=Math.max(0,t-r);i>0&&W("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,i,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kT="PersistentStream";class pk{constructor(e,t,r,i,s,o,a,l){this.Ti=e,this.n_=r,this.r_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new Tg(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===B.RESOURCE_EXHAUSTED?(Ct(t.toString()),Ct("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===B.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.i_===t&&this.V_(r,i)},r=>{e(()=>{const i=new H(B.UNKNOWN,"Fetching auth token failed: "+r.message);return this.m_(i)})})}V_(e,t){const r=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{r(()=>this.listener.xo())}),this.stream.No(()=>{r(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(i=>{r(()=>this.m_(i))}),this.stream.onMessage(i=>{r(()=>++this.__==1?this.g_(i):this.onNext(i))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return W(kT,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(W(kT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class eU extends pk{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=aF(this.serializer,e),r=function(s){if(!("targetChange"in s))return me.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?me.min():o.readTime?xt(o.readTime):me.min()}(e);return this.listener.p_(t,r)}y_(e){const t={};t.database=Tp(this.serializer),t.addTarget=function(s,o){let a;const l=o.target;if(a=lh(l)?{documents:D0(s,l)}:{query:M0(s,l).ht},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=P0(s,o.resumeToken);const h=yp(s,o.expectedCount);h!==null&&(a.expectedCount=h)}else if(o.snapshotVersion.compareTo(me.min())>0){a.readTime=pa(s,o.snapshotVersion.toTimestamp());const h=yp(s,o.expectedCount);h!==null&&(a.expectedCount=h)}return a}(this.serializer,e);const r=uF(this.serializer,e);r&&(t.labels=r),this.I_(t)}w_(e){const t={};t.database=Tp(this.serializer),t.removeTarget=e,this.I_(t)}}class tU extends pk{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get b_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.b_&&this.S_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return pe(!!e.streamToken),this.lastStreamToken=e.streamToken,pe(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){pe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=lF(e.writeResults,e.commitTime),r=xt(e.commitTime);return this.listener.v_(r,t)}C_(){const e={};e.database=Tp(this.serializer),this.I_(e)}S_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>cu(this.serializer,r))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nU{}class rU extends nU{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.F_=!1}M_(){if(this.F_)throw new H(B.FAILED_PRECONDITION,"The client has already been terminated.")}bo(e,t,r,i){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.bo(e,vp(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new H(B.UNKNOWN,s.toString())})}Co(e,t,r,i,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Co(e,vp(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new H(B.UNKNOWN,o.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class iU{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Ct(t),this.N_=!1):W("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ys="RemoteStore";class sU{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=s,this.z_.To(o=>{r.enqueueAndForget(async()=>{os(this)&&(W(Ys,"Restarting streams for network reachability change."),await async function(l){const h=ae(l);h.W_.add(4),await xa(h),h.j_.set("Unknown"),h.W_.delete(4),await Mu(h)}(this))})}),this.j_=new iU(r,i)}}async function Mu(n){if(os(n))for(const e of n.G_)await e(!0)}async function xa(n){for(const e of n.G_)await e(!1)}function pd(n,e){const t=ae(n);t.U_.has(e.targetId)||(t.U_.set(e.targetId,e),Ig(t)?wg(t):Na(t).c_()&&bg(t,e))}function ma(n,e){const t=ae(n),r=Na(t);t.U_.delete(e),r.c_()&&_k(t,e),t.U_.size===0&&(r.c_()?r.P_():os(t)&&t.j_.set("Unknown"))}function bg(n,e){if(n.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(me.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Na(n).y_(e)}function _k(n,e){n.H_.Ne(e),Na(n).w_(e)}function wg(n){n.H_=new eF({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>n.U_.get(e)||null,it:()=>n.datastore.serializer.databaseId}),Na(n).start(),n.j_.B_()}function Ig(n){return os(n)&&!Na(n).u_()&&n.U_.size>0}function os(n){return ae(n).W_.size===0}function gk(n){n.H_=void 0}async function oU(n){n.j_.set("Online")}async function aU(n){n.U_.forEach((e,t)=>{bg(n,e)})}async function lU(n,e){gk(n),Ig(n)?(n.j_.q_(e),wg(n)):n.j_.set("Unknown")}async function uU(n,e,t){if(n.j_.set("Online"),e instanceof R0&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.U_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.U_.delete(a),i.H_.removeTarget(a))}(n,e)}catch(r){W(Ys,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await yh(n,r)}else if(e instanceof Mc?n.H_.We(e):e instanceof S0?n.H_.Ze(e):n.H_.je(e),!t.isEqual(me.min()))try{const r=await ik(n.localStore);t.compareTo(r)>=0&&await function(s,o){const a=s.H_.ot(o);return a.targetChanges.forEach((l,h)=>{if(l.resumeToken.approximateByteSize()>0){const f=s.U_.get(h);f&&s.U_.set(h,f.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,h)=>{const f=s.U_.get(l);if(!f)return;s.U_.set(l,f.withResumeToken(St.EMPTY_BYTE_STRING,f.snapshotVersion)),_k(s,l);const u=new Wr(f.target,l,h,f.sequenceNumber);bg(s,u)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t)}catch(r){W(Ys,"Failed to raise snapshot:",r),await yh(n,r)}}async function yh(n,e,t){if(!is(e))throw e;n.W_.add(1),await xa(n),n.j_.set("Offline"),t||(t=()=>ik(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{W(Ys,"Retrying IndexedDB access"),await t(),n.W_.delete(1),await Mu(n)})}function mk(n,e){return e().catch(t=>yh(n,t,e))}async function Oa(n){const e=ae(n),t=Wi(e);let r=e.K_.length>0?e.K_[e.K_.length-1].batchId:Fi;for(;cU(e);)try{const i=await GF(e.localStore,r);if(i===null){e.K_.length===0&&t.P_();break}r=i.batchId,hU(e,i)}catch(i){await yh(e,i)}yk(e)&&vk(e)}function cU(n){return os(n)&&n.K_.length<10}function hU(n,e){n.K_.push(e);const t=Wi(n);t.c_()&&t.b_&&t.S_(e.mutations)}function yk(n){return os(n)&&!Wi(n).u_()&&n.K_.length>0}function vk(n){Wi(n).start()}async function dU(n){Wi(n).C_()}async function fU(n){const e=Wi(n);for(const t of n.K_)e.S_(t.mutations)}async function pU(n,e,t){const r=n.K_.shift(),i=og.from(r,e,t);await mk(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await Oa(n)}async function _U(n,e){e&&Wi(n).b_&&await async function(r,i){if(function(o){return E0(o)&&o!==B.ABORTED}(i.code)){const s=r.K_.shift();Wi(r).h_(),await mk(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Oa(r)}}(n,e),yk(n)&&vk(n)}async function AT(n,e){const t=ae(n);t.asyncQueue.verifyOperationInProgress(),W(Ys,"RemoteStore received new credentials");const r=os(t);t.W_.add(3),await xa(t),r&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await Mu(t)}async function Sp(n,e){const t=ae(n);e?(t.W_.delete(2),await Mu(t)):e||(t.W_.add(2),await xa(t),t.j_.set("Unknown"))}function Na(n){return n.J_||(n.J_=function(t,r,i){const s=ae(t);return s.M_(),new eU(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{xo:oU.bind(null,n),No:aU.bind(null,n),Lo:lU.bind(null,n),p_:uU.bind(null,n)}),n.G_.push(async e=>{e?(n.J_.h_(),Ig(n)?wg(n):n.j_.set("Unknown")):(await n.J_.stop(),gk(n))})),n.J_}function Wi(n){return n.Y_||(n.Y_=function(t,r,i){const s=ae(t);return s.M_(),new tU(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{xo:()=>Promise.resolve(),No:dU.bind(null,n),Lo:_U.bind(null,n),D_:fU.bind(null,n),v_:pU.bind(null,n)}),n.G_.push(async e=>{e?(n.Y_.h_(),await Oa(n)):(await n.Y_.stop(),n.K_.length>0&&(W(Ys,`Stopping write stream with ${n.K_.length} pending writes`),n.K_=[]))})),n.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new rn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new Eg(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new H(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Va(n,e){if(Ct("AsyncQueue",`${e}: ${n}`),is(n))return new H(B.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{static emptySet(e){return new qo(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||se.comparator(t.key,r.key):(t,r)=>se.comparator(t.key,r.key),this.keyedMap=dl(),this.sortedSet=new ot(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof qo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new qo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(){this.Z_=new ot(se.comparator)}track(e){const t=e.doc.key,r=this.Z_.get(t);r?e.type!==0&&r.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&r.type!==1?this.Z_=this.Z_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Z_=this.Z_.remove(t):e.type===1&&r.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):de():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,r)=>{e.push(r)}),e}}class ya{constructor(e,t,r,i,s,o,a,l,h){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=h}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new ya(e,t,qo.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Cu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gU{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class mU{constructor(){this.queries=RT(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,r){const i=ae(t),s=i.queries;i.queries=RT(),s.forEach((o,a)=>{for(const l of a.ta)l.onError(r)})})(this,new H(B.ABORTED,"Firestore shutting down"))}}function RT(){return new hi(n=>c0(n),Cu)}async function kg(n,e){const t=ae(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.na()&&e.ra()&&(r=2):(s=new gU,r=e.ra()?0:1);try{switch(r){case 0:s.ea=await t.onListen(i,!0);break;case 1:s.ea=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){const a=Va(o,`Initialization of query '${Po(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.ta.push(e),e.sa(t.onlineState),s.ea&&e.oa(s.ea)&&Sg(t)}async function Ag(n,e){const t=ae(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const o=s.ta.indexOf(e);o>=0&&(s.ta.splice(o,1),s.ta.length===0?i=e.ra()?0:1:!s.na()&&e.ra()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function yU(n,e){const t=ae(n);let r=!1;for(const i of e){const s=i.query,o=t.queries.get(s);if(o){for(const a of o.ta)a.oa(i)&&(r=!0);o.ea=i}}r&&Sg(t)}function vU(n,e,t){const r=ae(n),i=r.queries.get(e);if(i)for(const s of i.ta)s.onError(t);r.queries.delete(e)}function Sg(n){n.ia.forEach(e=>{e.next()})}var Rp,PT;(PT=Rp||(Rp={}))._a="default",PT.Cache="cache";class Rg{constructor(e,t,r){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new ya(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const r=t!=="Offline";return(!this.options.Ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=ya.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==Rp.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TU{constructor(e,t){this.Ia=e,this.byteLength=t}Ea(){return"metadata"in this.Ia}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(e){this.serializer=e}ps(e){return Sr(this.serializer,e)}ys(e){return e.metadata.exists?V0(this.serializer,e.document,!1):ut.newNoDocument(this.ps(e.metadata.name),this.ws(e.metadata.readTime))}ws(e){return xt(e)}}class bU{constructor(e,t,r){this.da=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Tk(e)}Aa(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Ia.namedQuery)this.queries.push(e.Ia.namedQuery);else if(e.Ia.documentMetadata){this.documents.push({metadata:e.Ia.documentMetadata}),e.Ia.documentMetadata.exists||++t;const r=Ue.fromString(e.Ia.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Ia.document&&(this.documents[this.documents.length-1].document=e.Ia.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Ra(e){const t=new Map,r=new CT(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.ps(i.metadata.name);for(const o of i.metadata.queries){const a=(t.get(o)||Ve()).add(s);t.set(o,a)}}return t}async complete(){const e=await HF(this.localStore,new CT(this.serializer),this.documents,this.da.id),t=this.Ra(this.documents);for(const r of this.queries)await WF(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Va:this.collectionGroups,ma:e}}}function Tk(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bk{constructor(e){this.key=e}}class wk{constructor(e){this.key=e}}class Ik{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Ve(),this.mutatedKeys=Ve(),this.ya=d0(e),this.wa=new qo(this.ya)}get ba(){return this.fa}Sa(e,t){const r=t?t.Da:new ST,i=t?t.wa:this.wa;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,u)=>{const d=i.get(f),p=xu(this.query,u)?u:null,m=!!d&&this.mutatedKeys.has(d.key),T=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let v=!1;d&&p?d.data.isEqual(p.data)?m!==T&&(r.track({type:3,doc:p}),v=!0):this.va(d,p)||(r.track({type:2,doc:p}),v=!0,(l&&this.ya(p,l)>0||h&&this.ya(p,h)<0)&&(a=!0)):!d&&p?(r.track({type:0,doc:p}),v=!0):d&&!p&&(r.track({type:1,doc:d}),v=!0,(l||h)&&(a=!0)),v&&(p?(o=o.add(p),s=T?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{wa:o,Da:r,ls:a,mutatedKeys:s}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const o=e.Da.X_();o.sort((f,u)=>function(p,m){const T=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return de()}};return T(p)-T(m)}(f.type,u.type)||this.ya(f.doc,u.doc)),this.Ca(r),i=i!=null&&i;const a=t&&!i?this.Fa():[],l=this.pa.size===0&&this.current&&!i?1:0,h=l!==this.ga;return this.ga=l,o.length!==0||h?{snapshot:new ya(this.query,e.wa,s,o,e.mutatedKeys,l===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:a}:{Ma:a}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new ST,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Ve(),this.wa.forEach(r=>{this.xa(r.key)&&(this.pa=this.pa.add(r.key))});const t=[];return e.forEach(r=>{this.pa.has(r)||t.push(new wk(r))}),this.pa.forEach(r=>{e.has(r)||t.push(new bk(r))}),t}Oa(e){this.fa=e.gs,this.pa=Ve();const t=this.Sa(e.documents);return this.applyChanges(t,!0)}Na(){return ya.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const as="SyncEngine";class wU{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class IU{constructor(e){this.key=e,this.Ba=!1}}class EU{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.La={},this.ka=new hi(a=>c0(a),Cu),this.qa=new Map,this.Qa=new Set,this.$a=new ot(se.comparator),this.Ka=new Map,this.Ua=new fg,this.Wa={},this.Ga=new Map,this.za=Qs.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function kU(n,e,t=!0){const r=_d(n);let i;const s=r.ka.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Na()):i=await Ek(r,e,t,!0),i}async function AU(n,e){const t=_d(n);await Ek(t,e,!0,!1)}async function Ek(n,e,t,r){const i=await _a(n.localStore,En(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t);let a;return r&&(a=await Pg(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&pd(n.remoteStore,i),a}async function Pg(n,e,t,r,i){n.Ha=(u,d,p)=>async function(T,v,I,C){let M=v.view.Sa(I);M.ls&&(M=await _h(T.localStore,v.query,!1).then(({documents:k})=>v.view.Sa(k,M)));const U=C&&C.targetChanges.get(v.targetId),ee=C&&C.targetMismatches.get(v.targetId)!=null,ne=v.view.applyChanges(M,T.isPrimaryClient,U,ee);return Pp(T,v.targetId,ne.Ma),ne.snapshot}(n,u,d,p);const s=await _h(n.localStore,e,!0),o=new Ik(e,s.gs),a=o.Sa(s.documents),l=Vu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),h=o.applyChanges(a,n.isPrimaryClient,l);Pp(n,t,h.Ma);const f=new wU(e,t,o);return n.ka.set(e,f),n.qa.has(t)?n.qa.get(t).push(e):n.qa.set(t,[e]),h.snapshot}async function SU(n,e,t){const r=ae(n),i=r.ka.get(e),s=r.qa.get(i.targetId);if(s.length>1)return r.qa.set(i.targetId,s.filter(o=>!Cu(o,e))),void r.ka.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await ga(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&ma(r.remoteStore,i.targetId),va(r,i.targetId)}).catch(rs)):(va(r,i.targetId),await ga(r.localStore,i.targetId,!0))}async function RU(n,e){const t=ae(n),r=t.ka.get(e),i=t.qa.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),ma(t.remoteStore,r.targetId))}async function PU(n,e,t){const r=Ng(n);try{const i=await function(o,a){const l=ae(o),h=yt.now(),f=a.reduce((p,m)=>p.add(m.key),Ve());let u,d;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let m=Vn(),T=Ve();return l.ds.getEntries(p,f).next(v=>{m=v,m.forEach((I,C)=>{C.isValidDocument()||(T=T.add(I))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,m)).next(v=>{u=v;const I=[];for(const C of a){const M=JL(C,u.get(C.key).overlayedDocument);M!=null&&I.push(new di(C.key,M,t0(M.value.mapValue),mt.exists(!0)))}return l.mutationQueue.addMutationBatch(p,h,I,a)}).next(v=>{d=v;const I=v.applyToLocalDocumentSet(u,T);return l.documentOverlayCache.saveOverlays(p,v.batchId,I)})}).then(()=>({batchId:d.batchId,changes:p0(u)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let h=o.Wa[o.currentUser.toKey()];h||(h=new ot(Se)),h=h.insert(a,l),o.Wa[o.currentUser.toKey()]=h}(r,i.batchId,t),await fi(r,i.changes),await Oa(r.remoteStore)}catch(i){const s=Va(i,"Failed to persist write");t.reject(s)}}async function kk(n,e){const t=ae(n);try{const r=await qF(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.Ka.get(s);o&&(pe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Ba=!0:i.modifiedDocuments.size>0?pe(o.Ba):i.removedDocuments.size>0&&(pe(o.Ba),o.Ba=!1))}),await fi(t,r,e)}catch(r){await rs(r)}}function xT(n,e,t){const r=ae(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.ka.forEach((s,o)=>{const a=o.view.sa(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=ae(o);l.onlineState=a;let h=!1;l.queries.forEach((f,u)=>{for(const d of u.ta)d.sa(a)&&(h=!0)}),h&&Sg(l)}(r.eventManager,e),i.length&&r.La.p_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function CU(n,e,t){const r=ae(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Ka.get(e),s=i&&i.key;if(s){let o=new ot(se.comparator);o=o.insert(s,ut.newNoDocument(s,me.min()));const a=Ve().add(s),l=new Nu(me.min(),new Map,new ot(Se),o,a);await kk(r,l),r.$a=r.$a.remove(s),r.Ka.delete(e),Og(r)}else await ga(r.localStore,e,!1).then(()=>va(r,e,t)).catch(rs)}async function xU(n,e){const t=ae(n),r=e.batch.batchId;try{const i=await jF(t.localStore,e);xg(t,r,null),Cg(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await fi(t,i)}catch(i){await rs(i)}}async function OU(n,e,t){const r=ae(n);try{const i=await function(o,a){const l=ae(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let f;return l.mutationQueue.lookupMutationBatch(h,a).next(u=>(pe(u!==null),f=u.keys(),l.mutationQueue.removeMutationBatch(h,u))).next(()=>l.mutationQueue.performConsistencyCheck(h)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(h,f,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,f)).next(()=>l.localDocuments.getDocuments(h,f))})}(r.localStore,e);xg(r,e,t),Cg(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await fi(r,i)}catch(i){await rs(i)}}async function NU(n,e){const t=ae(n);os(t.remoteStore)||W(as,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(o){const a=ae(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(t.localStore);if(r===Fi)return void e.resolve();const i=t.Ga.get(r)||[];i.push(e),t.Ga.set(r,i)}catch(r){const i=Va(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function Cg(n,e){(n.Ga.get(e)||[]).forEach(t=>{t.resolve()}),n.Ga.delete(e)}function xg(n,e,t){const r=ae(n);let i=r.Wa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Wa[r.currentUser.toKey()]=i}}function va(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.qa.get(e))n.ka.delete(r),t&&n.La.Ja(r,t);n.qa.delete(e),n.isPrimaryClient&&n.Ua.Sr(e).forEach(r=>{n.Ua.containsKey(r)||Ak(n,r)})}function Ak(n,e){n.Qa.delete(e.path.canonicalString());const t=n.$a.get(e);t!==null&&(ma(n.remoteStore,t),n.$a=n.$a.remove(e),n.Ka.delete(t),Og(n))}function Pp(n,e,t){for(const r of t)r instanceof bk?(n.Ua.addReference(r.key,e),VU(n,r)):r instanceof wk?(W(as,"Document no longer in limbo: "+r.key),n.Ua.removeReference(r.key,e),n.Ua.containsKey(r.key)||Ak(n,r.key)):de()}function VU(n,e){const t=e.key,r=t.path.canonicalString();n.$a.get(t)||n.Qa.has(r)||(W(as,"New document in limbo: "+t),n.Qa.add(r),Og(n))}function Og(n){for(;n.Qa.size>0&&n.$a.size<n.maxConcurrentLimboResolutions;){const e=n.Qa.values().next().value;n.Qa.delete(e);const t=new se(Ue.fromString(e)),r=n.za.next();n.Ka.set(r,new IU(t)),n.$a=n.$a.insert(t,r),pd(n.remoteStore,new Wr(En(Ra(t.path)),r,"TargetPurposeLimboResolution",On.ae))}}async function fi(n,e,t){const r=ae(n),i=[],s=[],o=[];r.ka.isEmpty()||(r.ka.forEach((a,l)=>{o.push(r.Ha(l,e,t).then(h=>{var f;if((h||t)&&r.isPrimaryClient){const u=h?!h.fromCache:(f=t==null?void 0:t.targetChanges.get(l.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(l.targetId,u?"current":"not-current")}if(h){i.push(h);const u=mg.Yi(l.targetId,h);s.push(u)}}))}),await Promise.all(o),r.La.p_(i),await async function(l,h){const f=ae(l);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",u=>D.forEach(h,d=>D.forEach(d.Hi,p=>f.persistence.referenceDelegate.addReference(u,d.targetId,p)).next(()=>D.forEach(d.Ji,p=>f.persistence.referenceDelegate.removeReference(u,d.targetId,p)))))}catch(u){if(!is(u))throw u;W(yg,"Failed to update sequence numbers: "+u)}for(const u of h){const d=u.targetId;if(!u.fromCache){const p=f.Ts.get(d),m=p.snapshotVersion,T=p.withLastLimboFreeSnapshotVersion(m);f.Ts=f.Ts.insert(d,T)}}}(r.localStore,s))}async function DU(n,e){const t=ae(n);if(!t.currentUser.isEqual(e)){W(as,"User change. New user:",e.toKey());const r=await rk(t.localStore,e);t.currentUser=e,function(s,o){s.Ga.forEach(a=>{a.forEach(l=>{l.reject(new H(B.CANCELLED,o))})}),s.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await fi(t,r.Rs)}}function MU(n,e){const t=ae(n),r=t.Ka.get(e);if(r&&r.Ba)return Ve().add(r.key);{let i=Ve();const s=t.qa.get(e);if(!s)return i;for(const o of s){const a=t.ka.get(o);i=i.unionWith(a.view.ba)}return i}}async function LU(n,e){const t=ae(n),r=await _h(t.localStore,e.query,!0),i=e.view.Oa(r);return t.isPrimaryClient&&Pp(t,e.targetId,i.Ma),i}async function FU(n,e){const t=ae(n);return ak(t.localStore,e).then(r=>fi(t,r))}async function UU(n,e,t,r){const i=ae(n),s=await function(a,l){const h=ae(a),f=ae(h.mutationQueue);return h.persistence.runTransaction("Lookup mutation documents","readonly",u=>f.Ln(u,l).next(d=>d?h.localDocuments.getDocuments(u,d):D.resolve(null)))}(i.localStore,e);s!==null?(t==="pending"?await Oa(i.remoteStore):t==="acknowledged"||t==="rejected"?(xg(i,e,r||null),Cg(i,e),function(a,l){ae(ae(a).mutationQueue).qn(l)}(i.localStore,e)):de(),await fi(i,s)):W(as,"Cannot apply mutation batch with id: "+e)}async function KU(n,e){const t=ae(n);if(_d(t),Ng(t),e===!0&&t.ja!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),i=await OT(t,r.toArray());t.ja=!0,await Sp(t.remoteStore,!0);for(const s of i)pd(t.remoteStore,s)}else if(e===!1&&t.ja!==!1){const r=[];let i=Promise.resolve();t.qa.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(va(t,o),ga(t.localStore,o,!0))),ma(t.remoteStore,o)}),await i,await OT(t,r),function(o){const a=ae(o);a.Ka.forEach((l,h)=>{ma(a.remoteStore,h)}),a.Ua.Dr(),a.Ka=new Map,a.$a=new ot(se.comparator)}(t),t.ja=!1,await Sp(t.remoteStore,!1)}}async function OT(n,e,t){const r=ae(n),i=[],s=[];for(const o of e){let a;const l=r.qa.get(o);if(l&&l.length!==0){a=await _a(r.localStore,En(l[0]));for(const h of l){const f=r.ka.get(h),u=await LU(r,f);u.snapshot&&s.push(u.snapshot)}}else{const h=await ok(r.localStore,o);a=await _a(r.localStore,h),await Pg(r,Sk(h),o,!1,a.resumeToken)}i.push(a)}return r.La.p_(s),i}function Sk(n){return u0(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function BU(n){return function(t){return ae(ae(t).persistence).zi()}(ae(n).localStore)}async function $U(n,e,t,r){const i=ae(n);if(i.ja)return void W(as,"Ignoring unexpected query state notification.");const s=i.qa.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const o=await ak(i.localStore,h0(s[0])),a=Nu.createSynthesizedRemoteEventForCurrentChange(e,t==="current",St.EMPTY_BYTE_STRING);await fi(i,o,a);break}case"rejected":await ga(i.localStore,e,!0),va(i,e,r);break;default:de()}}async function zU(n,e,t){const r=_d(n);if(r.ja){for(const i of e){if(r.qa.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){W(as,"Adding an already active target "+i);continue}const s=await ok(r.localStore,i),o=await _a(r.localStore,s);await Pg(r,Sk(s),o.targetId,!1,o.resumeToken),pd(r.remoteStore,o)}for(const i of t)r.qa.has(i)&&await ga(r.localStore,i,!1).then(()=>{ma(r.remoteStore,i),va(r,i)}).catch(rs)}}function _d(n){const e=ae(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=kk.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=MU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=CU.bind(null,e),e.La.p_=yU.bind(null,e.eventManager),e.La.Ja=vU.bind(null,e.eventManager),e}function Ng(n){const e=ae(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=xU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=OU.bind(null,e),e}function jU(n,e,t){const r=ae(n);(async function(s,o,a){try{const l=await o.getMetadata();if(await function(p,m){const T=ae(p),v=xt(m.createTime);return T.persistence.runTransaction("hasNewerBundle","readonly",I=>T.Yr.getBundleMetadata(I,m.id)).then(I=>!!I&&I.createTime.compareTo(v)>=0)}(s.localStore,l))return await o.close(),a._completeWith(function(p){return{taskState:"Success",documentsLoaded:p.totalDocuments,bytesLoaded:p.totalBytes,totalDocuments:p.totalDocuments,totalBytes:p.totalBytes}}(l)),Promise.resolve(new Set);a._updateProgress(Tk(l));const h=new bU(l,s.localStore,o.serializer);let f=await o.Ya();for(;f;){const d=await h.Aa(f);d&&a._updateProgress(d),f=await o.Ya()}const u=await h.complete();return await fi(s,u.ma,void 0),await function(p,m){const T=ae(p);return T.persistence.runTransaction("Save bundle","readwrite",v=>T.Yr.saveBundleMetadata(v,m))}(s.localStore,l),a._completeWith(u.progress),Promise.resolve(u.Va)}catch(l){return xr(as,`Loading bundle failed with ${l}`),a._failWith(l),Promise.resolve(new Set)}})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}class hu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Du(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return nk(this.persistence,new tk,e.initialUser,this.serializer)}Xa(e){return new pg(fd.ri,this.serializer)}Za(e){return new dk}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}hu.provider={build:()=>new hu};class qU extends hu{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){pe(this.persistence.referenceDelegate instanceof ph);const r=this.persistence.referenceDelegate.garbageCollector;return new Q0(r,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?un.withCacheSize(this.cacheSizeBytes):un.DEFAULT;return new pg(r=>ph.ri(r,t),this.serializer)}}class Rk extends hu{constructor(e,t,r){super(),this.ru=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.ru.initialize(this,e),await Ng(this.ru.syncEngine),await Oa(this.ru.remoteStore),await this.persistence.Ci(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}eu(e){return nk(this.persistence,new tk,e.initialUser,this.serializer)}tu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new Q0(r,e.asyncQueue,t)}nu(e,t){const r=new eL(t,this.persistence);return new ZM(e.asyncQueue,r)}Xa(e){const t=gg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?un.withCacheSize(this.cacheSizeBytes):un.DEFAULT;return new _g(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,fk(),Lc(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Za(e){return new dk}}class GU extends Rk{constructor(e,t){super(e,t,!1),this.ru=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.ru.syncEngine;this.sharedClientState instanceof Ef&&(this.sharedClientState.syncEngine={uo:UU.bind(null,t),co:$U.bind(null,t),lo:zU.bind(null,t),zi:BU.bind(null,t),ao:FU.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ci(async r=>{await KU(this.ru.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Za(e){const t=fk();if(!Ef.D(t))throw new H(B.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=gg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Ef(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class du{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>xT(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=DU.bind(null,this.syncEngine),await Sp(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new mU}()}createDatastore(e){const t=Du(e.databaseInfo.databaseId),r=function(s){return new ZF(s)}(e.databaseInfo);return function(s,o,a,l){return new rU(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,s,o,a){return new sU(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,t=>xT(this.syncEngine,t,0),function(){return ET.D()?new ET:new QF}())}createSyncEngine(e,t){return function(i,s,o,a,l,h,f){const u=new EU(i,s,o,a,l,h);return f&&(u.ja=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const s=ae(i);W(Ys,"RemoteStore shutting down."),s.W_.add(5),await xa(s),s.z_.shutdown(),s.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}du.provider={build:()=>new du};function NT(n,e=10240){let t=0;return{async read(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):Ct("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HU{constructor(e,t){this.ou=e,this.serializer=t,this.metadata=new rn,this.buffer=new Uint8Array,this._u=function(){return new TextDecoder("utf-8")}(),this.au().then(r=>{r&&r.Ea()?this.metadata.resolve(r.Ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.Ia)}`))},r=>this.metadata.reject(r))}close(){return this.ou.cancel()}async getMetadata(){return this.metadata.promise}async Ya(){return await this.getMetadata(),this.au()}async au(){const e=await this.uu();if(e===null)return null;const t=this._u.decode(e),r=Number(t);isNaN(r)&&this.cu(`length string (${t}) is not valid number`);const i=await this.lu(r);return new TU(JSON.parse(i),e.length+r)}hu(){return this.buffer.findIndex(e=>e===123)}async uu(){for(;this.hu()<0&&!await this.Pu(););if(this.buffer.length===0)return null;const e=this.hu();e<0&&this.cu("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async lu(e){for(;this.buffer.length<e;)await this.Pu()&&this.cu("Reached the end of bundle when more is expected.");const t=this._u.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}cu(e){throw this.ou.cancel(),new Error(`Invalid bundle format: ${e}`)}async Pu(){const e=await this.ou.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WU{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new H(B.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(i,s){const o=ae(i),a={documents:s.map(u=>uu(o.serializer,u))},l=await o.Co("BatchGetDocuments",o.serializer.databaseId,Ue.emptyPath(),a,s.length),h=new Map;l.forEach(u=>{const d=oF(o.serializer,u);h.set(d.key.toString(),d)});const f=[];return s.forEach(u=>{const d=h.get(u.toString());pe(!!d),f.push(d)}),f}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ca(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{const i=se.fromPath(r);this.mutations.push(new ig(i,this.precondition(i)))}),await async function(r,i){const s=ae(r),o={writes:i.map(a=>cu(s.serializer,a))};await s.bo("Commit",s.serializer.databaseId,Ue.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw de();t=me.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new H(B.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(me.min())?mt.exists(!1):mt.updateTime(t):mt.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(me.min()))throw new H(B.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return mt.updateTime(t)}return mt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QU{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.Tu=r.maxAttempts,this.a_=new Tg(this.asyncQueue,"transaction_retry")}Iu(){this.Tu-=1,this.Eu()}Eu(){this.a_.Xo(async()=>{const e=new WU(this.datastore),t=this.du(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Au(i)}))}).catch(r=>{this.Au(r)})})}du(e){try{const t=this.updateFunction(e);return!Su(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Au(e){this.Tu>0&&this.Ru(e)?(this.Tu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Eu(),Promise.resolve()))):this.deferred.reject(e)}Ru(e){if(e.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!E0(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qi="FirestoreClient";class YU{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Qt.UNAUTHENTICATED,this.clientId=PE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{W(Qi,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(W(Qi,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new rn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Va(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Af(n,e){n.asyncQueue.verifyOperationInProgress(),W(Qi,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await rk(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function VT(n,e){n.asyncQueue.verifyOperationInProgress();const t=await Vg(n);W(Qi,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>AT(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>AT(e.remoteStore,i)),n._onlineComponents=e}async function Vg(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){W(Qi,"Using user provided OfflineComponentProvider");try{await Af(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===B.FAILED_PRECONDITION||i.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;xr("Error using user provided cache. Falling back to memory cache: "+t),await Af(n,new hu)}}else W(Qi,"Using default OfflineComponentProvider"),await Af(n,new qU(void 0));return n._offlineComponents}async function md(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(W(Qi,"Using user provided OnlineComponentProvider"),await VT(n,n._uninitializedComponentsProvider._online)):(W(Qi,"Using default OnlineComponentProvider"),await VT(n,new du))),n._onlineComponents}function Pk(n){return Vg(n).then(e=>e.persistence)}function Dg(n){return Vg(n).then(e=>e.localStore)}function Ck(n){return md(n).then(e=>e.remoteStore)}function Mg(n){return md(n).then(e=>e.syncEngine)}function JU(n){return md(n).then(e=>e.datastore)}async function Ta(n){const e=await md(n),t=e.eventManager;return t.onListen=kU.bind(null,e.syncEngine),t.onUnlisten=SU.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=AU.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=RU.bind(null,e.syncEngine),t}function XU(n){return n.asyncQueue.enqueue(async()=>{const e=await Pk(n),t=await Ck(n);return e.setNetworkEnabled(!0),function(i){const s=ae(i);return s.W_.delete(0),Mu(s)}(t)})}function ZU(n){return n.asyncQueue.enqueue(async()=>{const e=await Pk(n),t=await Ck(n);return e.setNetworkEnabled(!1),async function(i){const s=ae(i);s.W_.add(0),await xa(s),s.j_.set("Offline")}(t)})}function e2(n,e){const t=new rn;return n.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await function(h,f){const u=ae(h);return u.persistence.runTransaction("read document","readonly",d=>u.localDocuments.getDocument(d,f))}(i,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new H(B.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const l=Va(a,`Failed to get document '${s} from cache`);o.reject(l)}}(await Dg(n),e,t)),t.promise}function xk(n,e,t={}){const r=new rn;return n.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,h){const f=new gd({next:d=>{f.su(),o.enqueueAndForget(()=>Ag(s,u));const p=d.docs.has(a);!p&&d.fromCache?h.reject(new H(B.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&d.fromCache&&l&&l.source==="server"?h.reject(new H(B.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(d)},error:d=>h.reject(d)}),u=new Rg(Ra(a.path),f,{includeMetadataChanges:!0,Ta:!0});return kg(s,u)}(await Ta(n),n.asyncQueue,e,t,r)),r.promise}function t2(n,e){const t=new rn;return n.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await _h(i,s,!0),l=new Ik(s,a.gs),h=l.Sa(a.documents),f=l.applyChanges(h,!1);o.resolve(f.snapshot)}catch(a){const l=Va(a,`Failed to execute query '${s} against cache`);o.reject(l)}}(await Dg(n),e,t)),t.promise}function Ok(n,e,t={}){const r=new rn;return n.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,h){const f=new gd({next:d=>{f.su(),o.enqueueAndForget(()=>Ag(s,u)),d.fromCache&&l.source==="server"?h.reject(new H(B.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(d)},error:d=>h.reject(d)}),u=new Rg(a,f,{includeMetadataChanges:!0,Ta:!0});return kg(s,u)}(await Ta(n),n.asyncQueue,e,t,r)),r.promise}function n2(n,e){const t=new gd(e);return n.asyncQueue.enqueueAndForget(async()=>function(i,s){ae(i).ia.add(s),s.next()}(await Ta(n),t)),()=>{t.su(),n.asyncQueue.enqueueAndForget(async()=>function(i,s){ae(i).ia.delete(s)}(await Ta(n),t))}}function r2(n,e,t,r){const i=function(o,a){let l;return l=typeof o=="string"?A0().encode(o):o,function(f,u){return new HU(f,u)}(function(f,u){if(f instanceof Uint8Array)return NT(f,u);if(f instanceof ArrayBuffer)return NT(new Uint8Array(f),u);if(f instanceof ReadableStream)return f.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),a)}(t,Du(e));n.asyncQueue.enqueueAndForget(async()=>{jU(await Mg(n),i,r)})}function i2(n,e){return n.asyncQueue.enqueue(async()=>function(r,i){const s=ae(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Yr.getNamedQuery(o,i))}(await Dg(n),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nk(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DT=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lg(n,e,t){if(!t)throw new H(B.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Vk(n,e,t,r){if(e===!0&&r===!0)throw new H(B.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function MT(n){if(!se.isDocumentKey(n))throw new H(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function LT(n){if(se.isDocumentKey(n))throw new H(B.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function yd(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":de()}function je(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new H(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=yd(n);throw new H(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Dk(n,e){if(e<=0)throw new H(B.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mk="firestore.googleapis.com",FT=!0;class UT{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new H(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Mk,this.ssl=FT}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:FT;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=q0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<kF)throw new H(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Vk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Nk((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new H(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new H(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new H(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Lu{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new UT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new H(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new H(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new UT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new zM;switch(r.type){case"firstParty":return new HM(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new H(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=DT.get(t);r&&(W("ComponentProvider","Removing Datastore"),DT.delete(t),r.terminate())}(this),Promise.resolve()}}function s2(n,e,t,r={}){var i;const s=(n=je(n,Lu))._getSettings(),o=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),a=`${e}:${t}`;s.host!==Mk&&s.host!==a&&xr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l=Object.assign(Object.assign({},s),{host:a,ssl:!1,emulatorOptions:r});if(!Ki(l,o)&&(n._setSettings(l),r.mockUserToken)){let h,f;if(typeof r.mockUserToken=="string")h=r.mockUserToken,f=Qt.MOCK_USER;else{h=iI(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new H(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Qt(u)}n._authCredentials=new jM(new RE(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let An=class Lk{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Lk(this.firestore,e,this._query)}},bt=class Fk{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ui(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Fk(this.firestore,e,this._key)}},Ui=class Uk extends An{constructor(e,t,r){super(e,t,Ra(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new bt(this.firestore,null,new se(e))}withConverter(e){return new Uk(this.firestore,e,this._path)}};function Kk(n,e,...t){if(n=_e(n),Lg("collection","path",e),n instanceof Lu){const r=Ue.fromString(e,...t);return LT(r),new Ui(n,null,r)}{if(!(n instanceof bt||n instanceof Ui))throw new H(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ue.fromString(e,...t));return LT(r),new Ui(n.firestore,null,r)}}function o2(n,e){if(n=je(n,Lu),Lg("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new H(B.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new An(n,null,function(r){return new ci(Ue.emptyPath(),r)}(e))}function vh(n,e,...t){if(n=_e(n),arguments.length===1&&(e=PE.newId()),Lg("doc","path",e),n instanceof Lu){const r=Ue.fromString(e,...t);return MT(r),new bt(n,null,new se(r))}{if(!(n instanceof bt||n instanceof Ui))throw new H(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ue.fromString(e,...t));return MT(r),new bt(n.firestore,n instanceof Ui?n.converter:null,new se(r))}}function Bk(n,e){return n=_e(n),e=_e(e),(n instanceof bt||n instanceof Ui)&&(e instanceof bt||e instanceof Ui)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function $k(n,e){return n=_e(n),e=_e(e),n instanceof An&&e instanceof An&&n.firestore===e.firestore&&Cu(n._query,e._query)&&n.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KT="AsyncQueue";class BT{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new Tg(this,"async_queue_retry"),this.bu=()=>{const r=Lc();r&&W(KT,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.Su=e;const t=Lc();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.bu)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=Lc();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.bu)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new rn;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!is(e))throw e;W(KT,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.Su.then(()=>(this.pu=!0,e().catch(r=>{this.gu=r,this.pu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Ct("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.pu=!1,r))));return this.Su=t,t}enqueueAfterDelay(e,t,r){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const i=Eg.createAndSchedule(this,e,t,r,s=>this.Fu(s));return this.fu.push(i),i}Du(){this.gu&&de()}verifyOperationInProgress(){}async Mu(){let e;do e=this.Su,await e;while(e!==this.Su)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}function Cp(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(n,["next","error","complete"])}class a2{constructor(){this._progressObserver={},this._taskCompletionResolver=new rn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l2=-1;let Nt=class extends Lu{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new BT,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new BT(e),this._firestoreClient=void 0,await e}}};function gn(n){if(n._terminated)throw new H(B.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||zk(n),n._firestoreClient}function zk(n){var e,t,r;const i=n._freezeSettings(),s=function(a,l,h,f){return new PL(a,l,h,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,Nk(f.experimentalLongPollingOptions),f.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new YU(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(n._componentsProvider))}function u2(n,e){xr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return jk(n,du.provider,{build:r=>new Rk(r,t.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function c2(n){xr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings();jk(n,du.provider,{build:t=>new GU(t,e.cacheSizeBytes)})}function jk(n,e,t){if((n=je(n,Nt))._firestoreClient||n._terminated)throw new H(B.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new H(B.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},zk(n)}function h2(n){if(n._initialized&&!n._terminated)throw new H(B.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new rn;return n._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!Ar.D())return Promise.resolve();const i=r+ek;await Ar.delete(i)}(gg(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}}),e.promise}function d2(n){return function(t){const r=new rn;return t.asyncQueue.enqueueAndForget(async()=>NU(await Mg(t),r)),r.promise}(gn(n=je(n,Nt)))}function f2(n){return XU(gn(n=je(n,Nt)))}function p2(n){return ZU(gn(n=je(n,Nt)))}function _2(n,e){const t=gn(n=je(n,Nt)),r=new a2;return r2(t,n._databaseId,e,r),r}function g2(n,e){return i2(gn(n=je(n,Nt)),e).then(t=>t?new An(n,null,t.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Nr(St.fromBase64String(e))}catch(t){throw new H(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Nr(St.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yi=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new H(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new gt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ro=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new H(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new H(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Se(this._lat,e._lat)||Se(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m2=/^__.*__$/;class y2{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new di(e,this.data,this.fieldMask,t,this.fieldTransforms):new Pa(e,this.data,t,this.fieldTransforms)}}class qk{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new di(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Gk(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw de()}}class Td{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Bu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new Td(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ku({path:r,Qu:!1});return i.$u(e),i}Ku(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ku({path:r,Qu:!1});return i.Bu(),i}Uu(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return Th(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(Gk(this.Lu)&&m2.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class v2{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Du(e)}ju(e,t,r,i=!1){return new Td({Lu:e,methodName:t,zu:r,path:gt.emptyPath(),Qu:!1,Gu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function io(n){const e=n._freezeSettings(),t=Du(n._databaseId);return new v2(n._databaseId,!!e.ignoreUndefinedProperties,t)}function bd(n,e,t,r,i,s={}){const o=n.ju(s.merge||s.mergeFields?2:0,e,t,i);qg("Data must be an object, but it was:",o,r);const a=Qk(r,o);let l,h;if(s.merge)l=new Nn(o.fieldMask),h=o.fieldTransforms;else if(s.mergeFields){const f=[];for(const u of s.mergeFields){const d=xp(e,u,t);if(!o.contains(d))throw new H(B.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);Jk(f,d)||f.push(d)}l=new Nn(f),h=o.fieldTransforms.filter(u=>l.covers(u.field))}else l=null,h=o.fieldTransforms;return new y2(new nn(a),l,h)}class Fu extends ro{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Fu}}function Hk(n,e,t){return new Td({Lu:3,zu:e.settings.zu,methodName:n._methodName,Qu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Ug extends ro{_toFieldTransform(e){return new Ou(e.path,new da)}isEqual(e){return e instanceof Ug}}class Kg extends ro{constructor(e,t){super(e),this.Hu=t}_toFieldTransform(e){const t=Hk(this,e,!0),r=this.Hu.map(s=>so(s,t)),i=new qs(r);return new Ou(e.path,i)}isEqual(e){return e instanceof Kg&&Ki(this.Hu,e.Hu)}}class Bg extends ro{constructor(e,t){super(e),this.Hu=t}_toFieldTransform(e){const t=Hk(this,e,!0),r=this.Hu.map(s=>so(s,t)),i=new Gs(r);return new Ou(e.path,i)}isEqual(e){return e instanceof Bg&&Ki(this.Hu,e.Hu)}}class $g extends ro{constructor(e,t){super(e),this.Ju=t}_toFieldTransform(e){const t=new fa(e.serializer,m0(e.serializer,this.Ju));return new Ou(e.path,t)}isEqual(e){return e instanceof $g&&this.Ju===e.Ju}}function zg(n,e,t,r){const i=n.ju(1,e,t);qg("Data must be an object, but it was:",i,r);const s=[],o=nn.empty();ss(r,(l,h)=>{const f=Gg(e,l,t);h=_e(h);const u=i.Ku(f);if(h instanceof Fu)s.push(f);else{const d=so(h,u);d!=null&&(s.push(f),o.set(f,d))}});const a=new Nn(s);return new qk(o,a,i.fieldTransforms)}function jg(n,e,t,r,i,s){const o=n.ju(1,e,t),a=[xp(e,r,t)],l=[i];if(s.length%2!=0)throw new H(B.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(xp(e,s[d])),l.push(s[d+1]);const h=[],f=nn.empty();for(let d=a.length-1;d>=0;--d)if(!Jk(h,a[d])){const p=a[d];let m=l[d];m=_e(m);const T=o.Ku(p);if(m instanceof Fu)h.push(p);else{const v=so(m,T);v!=null&&(h.push(p),f.set(p,v))}}const u=new Nn(h);return new qk(f,u,o.fieldTransforms)}function Wk(n,e,t,r=!1){return so(t,n.ju(r?4:3,e))}function so(n,e){if(Yk(n=_e(n)))return qg("Unsupported field value:",e,n),Qk(n,e);if(n instanceof ro)return function(r,i){if(!Gk(i.Lu))throw i.Wu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Wu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=so(a,i.Uu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=_e(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return m0(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=yt.fromDate(r);return{timestampValue:pa(i.serializer,s)}}if(r instanceof yt){const s=new yt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:pa(i.serializer,s)}}if(r instanceof vd)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Nr)return{bytesValue:P0(i.serializer,r._byteString)};if(r instanceof bt){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Wu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:ug(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Fg)return function(o,a){return{mapValue:{fields:{[X_]:{stringValue:Z_},[ua]:{arrayValue:{values:o.toArray().map(h=>{if(typeof h!="number")throw a.Wu("VectorValues must only contain numeric values.");return rg(a.serializer,h)})}}}}}}(r,i);throw i.Wu(`Unsupported field value: ${yd(r)}`)}(n,e)}function Qk(n,e){const t={};return GE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ss(n,(r,i)=>{const s=so(i,e.qu(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function Yk(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof yt||n instanceof vd||n instanceof Nr||n instanceof bt||n instanceof ro||n instanceof Fg)}function qg(n,e,t){if(!Yk(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const r=yd(t);throw r==="an object"?e.Wu(n+" a custom object"):e.Wu(n+" "+r)}}function xp(n,e,t){if((e=_e(e))instanceof Yi)return e._internalPath;if(typeof e=="string")return Gg(n,e);throw Th("Field path arguments must be of type string or ",n,!1,void 0,t)}const T2=new RegExp("[~\\*/\\[\\]]");function Gg(n,e,t){if(e.search(T2)>=0)throw Th(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Yi(...e.split("."))._internalPath}catch{throw Th(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Th(n,e,t,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new H(B.INVALID_ARGUMENT,a+n+l)}function Jk(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new bt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new b2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(wd("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class b2 extends fu{data(){return super.data()}}function wd(n,e){return typeof e=="string"?Gg(n,e):e instanceof Yi?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xk(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new H(B.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Hg{}class Uu extends Hg{}function ki(n,e,...t){let r=[];e instanceof Hg&&r.push(e),r=r.concat(t),function(s){const o=s.filter(l=>l instanceof Wg).length,a=s.filter(l=>l instanceof Id).length;if(o>1||o>0&&a>0)throw new H(B.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class Id extends Uu{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Id(e,t,r)}_apply(e){const t=this._parse(e);return eA(e._query,t),new An(e.firestore,e.converter,mp(e._query,t))}_parse(e){const t=io(e.firestore);return function(s,o,a,l,h,f,u){let d;if(h.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new H(B.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){zT(u,f);const m=[];for(const T of u)m.push($T(l,s,T));d={arrayValue:{values:m}}}else d=$T(l,s,u)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||zT(u,f),d=Wk(a,o,u,f==="in"||f==="not-in");return Ke.create(h,f,d)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function w2(n,e,t){const r=e,i=wd("where",n);return Id._create(i,r,t)}class Wg extends Hg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Wg(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Ye.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)eA(o,l),o=mp(o,l)}(e._query,t),new An(e.firestore,e.converter,mp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Qg extends Uu{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Qg(e,t)}_apply(e){const t=function(i,s,o){if(i.startAt!==null)throw new H(B.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new H(B.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new lu(s,o)}(e._query,this._field,this._direction);return new An(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new ci(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}function I2(n,e="asc"){const t=e,r=wd("orderBy",n);return Qg._create(r,t)}class Ed extends Uu{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Ed(e,t,r)}_apply(e){return new An(e.firestore,e.converter,ch(e._query,this._limit,this._limitType))}}function E2(n){return Dk("limit",n),Ed._create("limit",n,"F")}function k2(n){return Dk("limitToLast",n),Ed._create("limitToLast",n,"L")}class kd extends Uu{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new kd(e,t,r)}_apply(e){const t=Zk(e,this.type,this._docOrFields,this._inclusive);return new An(e.firestore,e.converter,function(i,s){return new ci(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,t))}}function A2(...n){return kd._create("startAt",n,!0)}function S2(...n){return kd._create("startAfter",n,!1)}class Ad extends Uu{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Ad(e,t,r)}_apply(e){const t=Zk(e,this.type,this._docOrFields,this._inclusive);return new An(e.firestore,e.converter,function(i,s){return new ci(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(e._query,t))}}function R2(...n){return Ad._create("endBefore",n,!1)}function P2(...n){return Ad._create("endAt",n,!0)}function Zk(n,e,t,r){if(t[0]=_e(t[0]),t[0]instanceof fu)return function(s,o,a,l,h){if(!l)throw new H(B.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const f=[];for(const u of jo(s))if(u.field.isKeyField())f.push(zs(o,l.key));else{const d=l.data.field(u.field);if(od(d))throw new H(B.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(d===null){const p=u.field.canonicalString();throw new H(B.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${p}' (used as the orderBy) does not exist.`)}f.push(d)}return new Hi(f,h)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=io(n.firestore);return function(o,a,l,h,f,u){const d=o.explicitOrderBy;if(f.length>d.length)throw new H(B.INVALID_ARGUMENT,`Too many arguments provided to ${h}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const p=[];for(let m=0;m<f.length;m++){const T=f[m];if(d[m].field.isKeyField()){if(typeof T!="string")throw new H(B.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${h}(), but got a ${typeof T}`);if(!tg(o)&&T.indexOf("/")!==-1)throw new H(B.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${h}() must be a plain document ID, but '${T}' contains a slash.`);const v=o.path.child(Ue.fromString(T));if(!se.isDocumentKey(v))throw new H(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${h}() must result in a valid document path, but '${v}' is not because it contains an odd number of segments.`);const I=new se(v);p.push(zs(a,I))}else{const v=Wk(l,h,T);p.push(v)}}return new Hi(p,u)}(n._query,n.firestore._databaseId,i,e,t,r)}}function $T(n,e,t){if(typeof(t=_e(t))=="string"){if(t==="")throw new H(B.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!tg(e)&&t.indexOf("/")!==-1)throw new H(B.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Ue.fromString(t));if(!se.isDocumentKey(r))throw new H(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return zs(n,new se(r))}if(t instanceof bt)return zs(n,t._key);throw new H(B.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${yd(t)}.`)}function zT(n,e){if(!Array.isArray(n)||n.length===0)throw new H(B.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function eA(n,e){const t=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new H(B.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new H(B.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class Yg{convertValue(e,t="none"){switch(qi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return pt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ri(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw de()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return ss(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;const s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[ua].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>pt(o.doubleValue));return new Fg(s)}convertGeoPoint(e){return new vd(pt(e.latitude),pt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=ad(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(su(e));default:return null}}convertTimestamp(e){const t=ni(e);return new yt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Ue.fromString(e);pe(K0(r));const i=new ji(r.get(1),r.get(3)),s=new se(r.popFirst(5));return i.isEqual(t)||Ct(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sd(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class C2 extends Yg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Nr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new bt(this.firestore,null,t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let ii=class extends fu{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ml(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(wd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Ml=class extends ii{data(e={}){return super.data(e)}},Ji=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Rs(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Ml(this._firestore,this._userDataWriter,r.key,r,new Rs(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new H(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new Ml(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Rs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Ml(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Rs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,f=-1;return a.type!==0&&(h=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),f=o.indexOf(a.doc.key)),{type:x2(a.type),doc:l,oldIndex:h,newIndex:f}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function x2(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return de()}}function tA(n,e){return n instanceof ii&&e instanceof ii?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Ji&&e instanceof Ji&&n._firestore===e._firestore&&$k(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O2(n){n=je(n,bt);const e=je(n.firestore,Nt);return xk(gn(e),n._key).then(t=>Jg(e,n,t))}class oo extends Yg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Nr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new bt(this.firestore,null,t)}}function N2(n){n=je(n,bt);const e=je(n.firestore,Nt),t=gn(e),r=new oo(e);return e2(t,n._key).then(i=>new ii(e,r,n._key,i,new Rs(i!==null&&i.hasLocalMutations,!0),n.converter))}function V2(n){n=je(n,bt);const e=je(n.firestore,Nt);return xk(gn(e),n._key,{source:"server"}).then(t=>Jg(e,n,t))}function D2(n){n=je(n,An);const e=je(n.firestore,Nt),t=gn(e),r=new oo(e);return Xk(n._query),Ok(t,n._query).then(i=>new Ji(e,r,n,i))}function M2(n){n=je(n,An);const e=je(n.firestore,Nt),t=gn(e),r=new oo(e);return t2(t,n._query).then(i=>new Ji(e,r,n,i))}function L2(n){n=je(n,An);const e=je(n.firestore,Nt),t=gn(e),r=new oo(e);return Ok(t,n._query,{source:"server"}).then(i=>new Ji(e,r,n,i))}function jT(n,e,t){n=je(n,bt);const r=je(n.firestore,Nt),i=Sd(n.converter,e,t);return Ku(r,[bd(io(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,mt.none())])}function qT(n,e,t,...r){n=je(n,bt);const i=je(n.firestore,Nt),s=io(i);let o;return o=typeof(e=_e(e))=="string"||e instanceof Yi?jg(s,"updateDoc",n._key,e,t,r):zg(s,"updateDoc",n._key,e),Ku(i,[o.toMutation(n._key,mt.exists(!0))])}function F2(n){return Ku(je(n.firestore,Nt),[new Ca(n._key,mt.none())])}function U2(n,e){const t=je(n.firestore,Nt),r=vh(n),i=Sd(n.converter,e);return Ku(t,[bd(io(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,mt.exists(!1))]).then(()=>r)}function nA(n,...e){var t,r,i;n=_e(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Cp(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Cp(e[o])){const u=e[o];e[o]=(t=u.next)===null||t===void 0?void 0:t.bind(u),e[o+1]=(r=u.error)===null||r===void 0?void 0:r.bind(u),e[o+2]=(i=u.complete)===null||i===void 0?void 0:i.bind(u)}let l,h,f;if(n instanceof bt)h=je(n.firestore,Nt),f=Ra(n._key.path),l={next:u=>{e[o]&&e[o](Jg(h,n,u))},error:e[o+1],complete:e[o+2]};else{const u=je(n,An);h=je(u.firestore,Nt),f=u._query;const d=new oo(h);l={next:p=>{e[o]&&e[o](new Ji(h,d,u,p))},error:e[o+1],complete:e[o+2]},Xk(n._query)}return function(d,p,m,T){const v=new gd(T),I=new Rg(p,v,m);return d.asyncQueue.enqueueAndForget(async()=>kg(await Ta(d),I)),()=>{v.su(),d.asyncQueue.enqueueAndForget(async()=>Ag(await Ta(d),I))}}(gn(h),f,a,l)}function K2(n,e){return n2(gn(n=je(n,Nt)),Cp(e)?e:{next:e})}function Ku(n,e){return function(r,i){const s=new rn;return r.asyncQueue.enqueueAndForget(async()=>PU(await Mg(r),i,s)),s.promise}(gn(n),e)}function Jg(n,e,t){const r=t.docs.get(e._key),i=new oo(n);return new ii(n,i,e._key,r,new Rs(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B2={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $2=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=io(e)}set(e,t,r){this._verifyNotCommitted();const i=Oi(e,this._firestore),s=Sd(i.converter,t,r),o=bd(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,mt.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=Oi(e,this._firestore);let o;return o=typeof(t=_e(t))=="string"||t instanceof Yi?jg(this._dataReader,"WriteBatch.update",s._key,t,r,i):zg(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,mt.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Oi(e,this._firestore);return this._mutations=this._mutations.concat(new Ca(t._key,mt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new H(B.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Oi(n,e){if((n=_e(n)).firestore!==e)throw new H(B.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=io(e)}get(e){const t=Oi(e,this._firestore),r=new C2(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||i.length!==1)return de();const s=i[0];if(s.isFoundDocument())return new fu(this._firestore,r,s.key,s,t.converter);if(s.isNoDocument())return new fu(this._firestore,r,t._key,null,t.converter);throw de()})}set(e,t,r){const i=Oi(e,this._firestore),s=Sd(i.converter,t,r),o=bd(this._dataReader,"Transaction.set",i._key,s,i.converter!==null,r);return this._transaction.set(i._key,o),this}update(e,t,r,...i){const s=Oi(e,this._firestore);let o;return o=typeof(t=_e(t))=="string"||t instanceof Yi?jg(this._dataReader,"Transaction.update",s._key,t,r,i):zg(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,o),this}delete(e){const t=Oi(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let j2=class extends z2{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Oi(e,this._firestore),r=new oo(this._firestore);return super.get(e).then(i=>new ii(this._firestore,r,t._key,i._document,new Rs(!1,!1),t.converter))}};function q2(n,e,t){n=je(n,Nt);const r=Object.assign(Object.assign({},B2),t);return function(s){if(s.maxAttempts<1)throw new H(B.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const l=new rn;return s.asyncQueue.enqueueAndForget(async()=>{const h=await JU(s);new QU(s.asyncQueue,h,a,o,l).Iu()}),l.promise}(gn(n),i=>e(new j2(n,i)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G2(){return new Fu("deleteField")}function H2(){return new Ug("serverTimestamp")}function W2(...n){return new Kg("arrayUnion",n)}function Q2(...n){return new Bg("arrayRemove",n)}function Y2(n){return new $g("increment",n)}(function(e,t=!0){(function(i){Sa=i})(ai),ei(new tr("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Nt(new qM(r.getProvider("auth-internal")),new WM(o,r.getProvider("app-check-internal")),function(h,f){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new H(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ji(h.options.projectId,f)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Hn(Iv,Ev,e),Hn(Iv,Ev,"esm2017")})();const J2="@firebase/firestore-compat",X2="0.3.44";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xg(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new H("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GT(){if(typeof Uint8Array>"u")throw new H("unimplemented","Uint8Arrays are not available in this environment.")}function HT(){if(!SL())throw new H("unimplemented","Blobs are unavailable in Firestore in this environment.")}let rA=class Op{constructor(e){this._delegate=e}static fromBase64String(e){return HT(),new Op(Nr.fromBase64String(e))}static fromUint8Array(e){return GT(),new Op(Nr.fromUint8Array(e))}toBase64(){return HT(),this._delegate.toBase64()}toUint8Array(){return GT(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Np(n){return Z2(n,["next","error","complete"])}function Z2(n,e){if(typeof n!="object"||n===null)return!1;const t=n;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eK{enableIndexedDbPersistence(e,t){return u2(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return c2(e._delegate)}clearIndexedDbPersistence(e){return h2(e._delegate)}}class iA{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof ji||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&xr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){s2(this._delegate,e,t,r)}enableNetwork(){return f2(this._delegate)}disableNetwork(){return p2(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,Vk("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return d2(this._delegate)}onSnapshotsInSync(e){return K2(this._delegate,e)}get app(){if(!this._appCompat)throw new H("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ba(this,Kk(this._delegate,e))}catch(t){throw bn(t,"collection()","Firestore.collection()")}}doc(e){try{return new Yn(this,vh(this._delegate,e))}catch(t){throw bn(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Tn(this,o2(this._delegate,e))}catch(t){throw bn(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return q2(this._delegate,t=>e(new sA(this,t)))}batch(){return gn(this._delegate),new oA(new $2(this._delegate,e=>Ku(this._delegate,e)))}loadBundle(e){return _2(this._delegate,e)}namedQuery(e){return g2(this._delegate,e).then(t=>t?new Tn(this,t):null)}}class Rd extends Yg{constructor(e){super(),this.firestore=e}convertBytes(e){return new rA(new Nr(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Yn.forKey(t,this.firestore,null)}}function tK(n){BM(n)}class sA{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Rd(e)}get(e){const t=Ps(e);return this._delegate.get(t).then(r=>new pu(this._firestore,new ii(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Ps(e);return r?(Xg("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Ps(e);return arguments.length===2?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Ps(e);return this._delegate.delete(t),this}}class oA{constructor(e){this._delegate=e}set(e,t,r){const i=Ps(e);return r?(Xg("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Ps(e);return arguments.length===2?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Ps(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Js{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Ml(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new _u(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Js.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new Js(e,new Rd(e),t),i.set(t,s)),s}}Js.INSTANCES=new WeakMap;class Yn{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Rd(e)}static forPath(e,t,r){if(e.length%2!==0)throw new H("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Yn(t,new bt(t._delegate,r,new se(e)))}static forKey(e,t,r){return new Yn(t,new bt(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new ba(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ba(this.firestore,Kk(this._delegate,e))}catch(t){throw bn(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=_e(e),e instanceof bt?Bk(this._delegate,e):!1}set(e,t){t=Xg("DocumentReference.set",t);try{return t?jT(this._delegate,e,t):jT(this._delegate,e)}catch(r){throw bn(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?qT(this._delegate,e):qT(this._delegate,e,t,...r)}catch(i){throw bn(i,"updateDoc()","DocumentReference.update()")}}delete(){return F2(this._delegate)}onSnapshot(...e){const t=aA(e),r=lA(e,i=>new pu(this.firestore,new ii(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return nA(this._delegate,t,r)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=N2(this._delegate):(e==null?void 0:e.source)==="server"?t=V2(this._delegate):t=O2(this._delegate),t.then(r=>new pu(this.firestore,new ii(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Yn(this.firestore,e?this._delegate.withConverter(Js.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function bn(n,e,t){return n.message=n.message.replace(e,t),n}function aA(n){for(const e of n)if(typeof e=="object"&&!Np(e))return e;return{}}function lA(n,e){var t,r;let i;return Np(n[0])?i=n[0]:Np(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}class pu{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Yn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return tA(this._delegate,e._delegate)}}class _u extends pu{data(e){const t=this._delegate.data(e);return this._delegate._converter||$M(t!==void 0),t}}class Tn{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Rd(e)}where(e,t,r){try{return new Tn(this.firestore,ki(this._delegate,w2(e,t,r)))}catch(i){throw bn(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Tn(this.firestore,ki(this._delegate,I2(e,t)))}catch(r){throw bn(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Tn(this.firestore,ki(this._delegate,E2(e)))}catch(t){throw bn(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Tn(this.firestore,ki(this._delegate,k2(e)))}catch(t){throw bn(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Tn(this.firestore,ki(this._delegate,A2(...e)))}catch(t){throw bn(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Tn(this.firestore,ki(this._delegate,S2(...e)))}catch(t){throw bn(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Tn(this.firestore,ki(this._delegate,R2(...e)))}catch(t){throw bn(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Tn(this.firestore,ki(this._delegate,P2(...e)))}catch(t){throw bn(t,"endAt()","Query.endAt()")}}isEqual(e){return $k(this._delegate,e._delegate)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=M2(this._delegate):(e==null?void 0:e.source)==="server"?t=L2(this._delegate):t=D2(this._delegate),t.then(r=>new Vp(this.firestore,new Ji(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=aA(e),r=lA(e,i=>new Vp(this.firestore,new Ji(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return nA(this._delegate,t,r)}withConverter(e){return new Tn(this.firestore,e?this._delegate.withConverter(Js.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class nK{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new _u(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Vp{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Tn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new _u(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new nK(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new _u(this._firestore,r))})}isEqual(e){return tA(this._delegate,e._delegate)}}class ba extends Tn{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Yn(this.firestore,e):null}doc(e){try{return e===void 0?new Yn(this.firestore,vh(this._delegate)):new Yn(this.firestore,vh(this._delegate,e))}catch(t){throw bn(t,"doc()","CollectionReference.doc()")}}add(e){return U2(this._delegate,e).then(t=>new Yn(this.firestore,t))}isEqual(e){return Bk(this._delegate,e._delegate)}withConverter(e){return new ba(this.firestore,e?this._delegate.withConverter(Js.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Ps(n){return je(n,bt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg{constructor(...e){this._delegate=new Yi(...e)}static documentId(){return new Zg(gt.keyField().canonicalString())}isEqual(e){return e=_e(e),e instanceof Yi?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{static serverTimestamp(){const e=H2();return e._methodName="FieldValue.serverTimestamp",new ks(e)}static delete(){const e=G2();return e._methodName="FieldValue.delete",new ks(e)}static arrayUnion(...e){const t=W2(...e);return t._methodName="FieldValue.arrayUnion",new ks(t)}static arrayRemove(...e){const t=Q2(...e);return t._methodName="FieldValue.arrayRemove",new ks(t)}static increment(e){const t=Y2(e);return t._methodName="FieldValue.increment",new ks(t)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rK={Firestore:iA,GeoPoint:vd,Timestamp:yt,Blob:rA,Transaction:sA,WriteBatch:oA,DocumentReference:Yn,DocumentSnapshot:pu,Query:Tn,QueryDocumentSnapshot:_u,QuerySnapshot:Vp,CollectionReference:ba,FieldPath:Zg,FieldValue:ks,setLogLevel:tK,CACHE_SIZE_UNLIMITED:l2};function iK(n,e){n.INTERNAL.registerComponent(new tr("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},rK)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sK(n){iK(n,(e,t)=>new iA(e,t,new eK)),n.registerVersion(J2,X2)}sK(Vr);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uA="firebasestorage.googleapis.com",cA="storageBucket",oK=2*60*1e3,aK=10*60*1e3,lK=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et extends fn{constructor(e,t,r=0){super(Sf(e),`Firebase Storage: ${t} (${Sf(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Et.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Sf(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var dt;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(dt||(dt={}));function Sf(n){return"storage/"+n}function em(){const n="An unknown error occurred, please check the error payload for server response.";return new Et(dt.UNKNOWN,n)}function uK(n){return new Et(dt.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function cK(n){return new Et(dt.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function hK(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Et(dt.UNAUTHENTICATED,n)}function dK(){return new Et(dt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function fK(n){return new Et(dt.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function hA(){return new Et(dt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function dA(){return new Et(dt.CANCELED,"User canceled the upload/download.")}function pK(n){return new Et(dt.INVALID_URL,"Invalid URL '"+n+"'.")}function _K(n){return new Et(dt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function gK(){return new Et(dt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+cA+"' property when initializing the app?")}function fA(){return new Et(dt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function mK(){return new Et(dt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function yK(){return new Et(dt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function vK(n){return new Et(dt.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Go(n){return new Et(dt.INVALID_ARGUMENT,n)}function pA(){return new Et(dt.APP_DELETED,"The Firebase app was deleted.")}function _A(n){return new Et(dt.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ll(n,e){return new Et(dt.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function sl(n){throw new Et(dt.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=dn.makeFromUrl(e,t)}catch{return new dn(e,"")}if(r.path==="")return r;throw _K(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(U){U.path.charAt(U.path.length-1)==="/"&&(U.path_=U.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function h(U){U.path_=decodeURIComponent(U.path)}const f="v[A-Za-z0-9_]+",u=t.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",p=new RegExp(`^https?://${u}/${f}/b/${i}/o${d}`,"i"),m={bucket:1,path:3},T=t===uA?"(?:storage.googleapis.com|storage.cloud.google.com)":t,v="([^?#]*)",I=new RegExp(`^https?://${T}/${i}/${v}`,"i"),M=[{regex:a,indices:l,postModify:s},{regex:p,indices:m,postModify:h},{regex:I,indices:{bucket:1,path:2},postModify:h}];for(let U=0;U<M.length;U++){const ee=M[U],ne=ee.regex.exec(e);if(ne){const k=ne[ee.indices.bucket];let w=ne[ee.indices.path];w||(w=""),r=new dn(k,w),ee.postModify(r);break}}if(r==null)throw pK(e);return r}}class TK{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bK(n,e,t){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let h=!1;function f(...v){h||(h=!0,e.apply(null,v))}function u(v){i=setTimeout(()=>{i=null,n(p,l())},v)}function d(){s&&clearTimeout(s)}function p(v,...I){if(h){d();return}if(v){d(),f.call(null,v,...I);return}if(l()||o){d(),f.call(null,v,...I);return}r<64&&(r*=2);let M;a===1?(a=2,M=0):M=(r+Math.random())*1e3,u(M)}let m=!1;function T(v){m||(m=!0,d(),!h&&(i!==null?(v||(a=2),clearTimeout(i),u(0)):v||(a=1)))}return u(0),s=setTimeout(()=>{o=!0,T(!0)},t),T}function wK(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IK(n){return n!==void 0}function EK(n){return typeof n=="function"}function kK(n){return typeof n=="object"&&!Array.isArray(n)}function Pd(n){return typeof n=="string"||n instanceof String}function WT(n){return tm()&&n instanceof Blob}function tm(){return typeof Blob<"u"}function Dp(n,e,t,r){if(r<e)throw Go(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Go(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ls(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function gA(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var Ms;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Ms||(Ms={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mA(n,e){const t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,s=e.indexOf(n)!==-1;return t||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AK{constructor(e,t,r,i,s,o,a,l,h,f,u,d=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=h,this.progressCallback_=f,this.connectionFactory_=u,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((p,m)=>{this.resolve_=p,this.reject_=m,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new pc(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,h=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,h)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Ms.NO_ERROR,l=s.getStatus();if(!a||mA(l,this.additionalRetryCodes_)&&this.retry){const f=s.getErrorCode()===Ms.ABORT;r(!1,new pc(!1,null,f));return}const h=this.successCodes_.indexOf(l)!==-1;r(!0,new pc(h,s))})},t=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());IK(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=em();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?pA():dA();o(l)}else{const l=hA();o(l)}};this.canceled_?t(!1,new pc(!1,null,!0)):this.backoffId_=bK(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&wK(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class pc{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function SK(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function RK(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function PK(n,e){e&&(n["X-Firebase-GMPID"]=e)}function CK(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function xK(n,e,t,r,i,s,o=!0){const a=gA(n.urlParams),l=n.url+a,h=Object.assign({},n.headers);return PK(h,e),SK(h,t),RK(h,s),CK(h,r),new AK(l,n.method,h,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OK(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function NK(...n){const e=OK();if(e!==void 0){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(tm())return new Blob(n);throw new Et(dt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function VK(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DK(n){if(typeof atob>"u")throw vK("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Rf{constructor(e,t){this.data=e,this.contentType=t||null}}function yA(n,e){switch(n){case Jn.RAW:return new Rf(vA(e));case Jn.BASE64:case Jn.BASE64URL:return new Rf(TA(n,e));case Jn.DATA_URL:return new Rf(LK(e),FK(e))}throw em()}function vA(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=n.charCodeAt(++t);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function MK(n){let e;try{e=decodeURIComponent(n)}catch{throw Ll(Jn.DATA_URL,"Malformed data URL.")}return vA(e)}function TA(n,e){switch(n){case Jn.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw Ll(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Jn.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw Ll(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=DK(e)}catch(i){throw i.message.includes("polyfill")?i:Ll(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class bA{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw Ll(Jn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=UK(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function LK(n){const e=new bA(n);return e.base64?TA(Jn.BASE64,e.rest):MK(e.rest)}function FK(n){return new bA(n).contentType}function UK(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(e,t){let r=0,i="";WT(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(WT(this.data_)){const r=this.data_,i=VK(r,e,t);return i===null?null:new qr(i)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new qr(r,!0)}}static getBlob(...e){if(tm()){const t=e.map(r=>r instanceof qr?r.data_:r);return new qr(NK.apply(null,t))}else{const t=e.map(o=>Pd(o)?yA(Jn.RAW,o).data:o.data_);let r=0;t.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return t.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new qr(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nm(n){let e;try{e=JSON.parse(n)}catch{return null}return kK(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KK(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function BK(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function wA(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $K(n,e){return e}class yn{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||$K}}let _c=null;function zK(n){return!Pd(n)||n.length<2?n:wA(n)}function Cd(){if(_c)return _c;const n=[];n.push(new yn("bucket")),n.push(new yn("generation")),n.push(new yn("metageneration")),n.push(new yn("name","fullPath",!0));function e(s,o){return zK(o)}const t=new yn("name");t.xform=e,n.push(t);function r(s,o){return o!==void 0?Number(o):o}const i=new yn("size");return i.xform=r,n.push(i),n.push(new yn("timeCreated")),n.push(new yn("updated")),n.push(new yn("md5Hash",null,!0)),n.push(new yn("cacheControl",null,!0)),n.push(new yn("contentDisposition",null,!0)),n.push(new yn("contentEncoding",null,!0)),n.push(new yn("contentLanguage",null,!0)),n.push(new yn("contentType",null,!0)),n.push(new yn("metadata","customMetadata",!0)),_c=n,_c}function jK(n,e){function t(){const r=n.bucket,i=n.fullPath,s=new dn(r,i);return e._makeStorageReference(s)}Object.defineProperty(n,"ref",{get:t})}function qK(n,e,t){const r={};r.type="file";const i=t.length;for(let s=0;s<i;s++){const o=t[s];r[o.local]=o.xform(r,e[o.server])}return jK(r,n),r}function IA(n,e,t){const r=nm(e);return r===null?null:qK(n,r,t)}function GK(n,e,t,r){const i=nm(e);if(i===null||!Pd(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(h=>{const f=n.bucket,u=n.fullPath,d="/b/"+o(f)+"/o/"+o(u),p=ls(d,t,r),m=gA({alt:"media",token:h});return p+m})[0]}function rm(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QT="prefixes",YT="items";function HK(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[QT])for(const i of t[QT]){const s=i.replace(/\/$/,""),o=n._makeStorageReference(new dn(e,s));r.prefixes.push(o)}if(t[YT])for(const i of t[YT]){const s=n._makeStorageReference(new dn(e,i.name));r.items.push(s)}return r}function WK(n,e,t){const r=nm(t);return r===null?null:HK(n,e,r)}class pi{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rr(n){if(!n)throw em()}function xd(n,e){function t(r,i){const s=IA(n,i,e);return Rr(s!==null),s}return t}function QK(n,e){function t(r,i){const s=WK(n,e,i);return Rr(s!==null),s}return t}function YK(n,e){function t(r,i){const s=IA(n,i,e);return Rr(s!==null),GK(s,i,n.host,n._protocol)}return t}function Da(n){function e(t,r){let i;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?i=dK():i=hK():t.getStatus()===402?i=cK(n.bucket):t.getStatus()===403?i=fK(n.path):i=r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}return e}function Od(n){const e=Da(n);function t(r,i){let s=e(r,i);return r.getStatus()===404&&(s=uK(n.path)),s.serverResponse=i.serverResponse,s}return t}function EA(n,e,t){const r=e.fullServerUrl(),i=ls(r,n.host,n._protocol),s="GET",o=n.maxOperationRetryTime,a=new pi(i,s,xd(n,t),o);return a.errorHandler=Od(e),a}function JK(n,e,t,r,i){const s={};e.isRoot?s.prefix="":s.prefix=e.path+"/",t.length>0&&(s.delimiter=t),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=e.bucketOnlyServerUrl(),a=ls(o,n.host,n._protocol),l="GET",h=n.maxOperationRetryTime,f=new pi(a,l,QK(n,e.bucket),h);return f.urlParams=s,f.errorHandler=Da(e),f}function XK(n,e,t){const r=e.fullServerUrl(),i=ls(r,n.host,n._protocol),s="GET",o=n.maxOperationRetryTime,a=new pi(i,s,YK(n,t),o);return a.errorHandler=Od(e),a}function ZK(n,e,t,r){const i=e.fullServerUrl(),s=ls(i,n.host,n._protocol),o="PATCH",a=rm(t,r),l={"Content-Type":"application/json; charset=utf-8"},h=n.maxOperationRetryTime,f=new pi(s,o,xd(n,r),h);return f.headers=l,f.body=a,f.errorHandler=Od(e),f}function eB(n,e){const t=e.fullServerUrl(),r=ls(t,n.host,n._protocol),i="DELETE",s=n.maxOperationRetryTime;function o(l,h){}const a=new pi(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=Od(e),a}function tB(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function kA(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=tB(null,e)),r}function nB(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let M="";for(let U=0;U<2;U++)M=M+Math.random().toString().slice(2);return M}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const h=kA(e,r,i),f=rm(h,t),u="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+l+`\r
Content-Type: `+h.contentType+`\r
\r
`,d=`\r
--`+l+"--",p=qr.getBlob(u,r,d);if(p===null)throw fA();const m={name:h.fullPath},T=ls(s,n.host,n._protocol),v="POST",I=n.maxUploadRetryTime,C=new pi(T,v,xd(n,t),I);return C.urlParams=m,C.headers=o,C.body=p.uploadData(),C.errorHandler=Da(e),C}class bh{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function im(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Rr(!1)}return Rr(!!t&&(e||["active"]).indexOf(t)!==-1),t}function rB(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),o=kA(e,r,i),a={name:o.fullPath},l=ls(s,n.host,n._protocol),h="POST",f={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},u=rm(o,t),d=n.maxUploadRetryTime;function p(T){im(T);let v;try{v=T.getResponseHeader("X-Goog-Upload-URL")}catch{Rr(!1)}return Rr(Pd(v)),v}const m=new pi(l,h,p,d);return m.urlParams=a,m.headers=f,m.body=u,m.errorHandler=Da(e),m}function iB(n,e,t,r){const i={"X-Goog-Upload-Command":"query"};function s(h){const f=im(h,["active","final"]);let u=null;try{u=h.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Rr(!1)}u||Rr(!1);const d=Number(u);return Rr(!isNaN(d)),new bh(d,r.size(),f==="final")}const o="POST",a=n.maxUploadRetryTime,l=new pi(t,o,s,a);return l.headers=i,l.errorHandler=Da(e),l}const JT=256*1024;function sB(n,e,t,r,i,s,o,a){const l=new bh(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw mK();const h=l.total-l.current;let f=h;i>0&&(f=Math.min(f,i));const u=l.current,d=u+f;let p="";f===0?p="finalize":h===f?p="upload, finalize":p="upload";const m={"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":`${l.current}`},T=r.slice(u,d);if(T===null)throw fA();function v(U,ee){const ne=im(U,["active","final"]),k=l.current+f,w=r.size();let b;return ne==="final"?b=xd(e,s)(U,ee):b=null,new bh(k,w,ne==="final",b)}const I="POST",C=e.maxUploadRetryTime,M=new pi(t,I,v,C);return M.headers=m,M.body=T.uploadData(),M.progressCallback=a||null,M.errorHandler=Da(n),M}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oB={STATE_CHANGED:"state_changed"},wn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Pf(n){switch(n){case"running":case"pausing":case"canceling":return wn.RUNNING;case"paused":return wn.PAUSED;case"success":return wn.SUCCESS;case"canceled":return wn.CANCELED;case"error":return wn.ERROR;default:return wn.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aB{constructor(e,t,r){if(EK(e)||t!=null||r!=null)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eo(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class lB{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ms.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ms.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ms.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw sl("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw sl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw sl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw sl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw sl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class uB extends lB{initXhr(){this.xhr_.responseType="text"}}function br(){return new uB}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=Cd(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(dt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(mA(i.status,[]))if(s)i=hA();else{this.sleepTime=Math.max(this.sleepTime*2,lK),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(dt.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,t)=>{const r=rB(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,br,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=iB(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,br,t,r);this._request=s,s.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=JT*this._chunkMultiplier,t=new bh(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let o;try{o=sB(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const a=this._ref.storage._makeRequest(o,br,i,s,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){JT*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=EA(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,br,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=nB(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,br,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t=this._state==="paused";this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=dA(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=Pf(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const s=new aB(t||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);t!==-1&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(Pf(this._state)){case wn.SUCCESS:Eo(this._resolve.bind(null,this.snapshot))();break;case wn.CANCELED:case wn.ERROR:const t=this._reject;Eo(t.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Pf(this._state)){case wn.RUNNING:case wn.PAUSED:e.next&&Eo(e.next.bind(e,this.snapshot))();break;case wn.SUCCESS:e.complete&&Eo(e.complete.bind(e))();break;case wn.CANCELED:case wn.ERROR:e.error&&Eo(e.error.bind(e,this._error))();break;default:e.error&&Eo(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(e,t){this._service=e,t instanceof dn?this._location=t:this._location=dn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Xs(e,t)}get root(){const e=new dn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return wA(this._location.path)}get storage(){return this._service}get parent(){const e=KK(this._location.path);if(e===null)return null;const t=new dn(this._location.bucket,e);return new Xs(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw _A(e)}}function cB(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new AA(n,new qr(e),t)}function hB(n){const e={prefixes:[],items:[]};return SA(n,e).then(()=>e)}async function SA(n,e,t){const i=await RA(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),i.nextPageToken!=null&&await SA(n,e,i.nextPageToken)}function RA(n,e){e!=null&&typeof e.maxResults=="number"&&Dp("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=JK(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,br)}function dB(n){n._throwIfRoot("getMetadata");const e=EA(n.storage,n._location,Cd());return n.storage.makeRequestWithTokens(e,br)}function fB(n,e){n._throwIfRoot("updateMetadata");const t=ZK(n.storage,n._location,e,Cd());return n.storage.makeRequestWithTokens(t,br)}function pB(n){n._throwIfRoot("getDownloadURL");const e=XK(n.storage,n._location,Cd());return n.storage.makeRequestWithTokens(e,br).then(t=>{if(t===null)throw yK();return t})}function _B(n){n._throwIfRoot("deleteObject");const e=eB(n.storage,n._location);return n.storage.makeRequestWithTokens(e,br)}function PA(n,e){const t=BK(n._location.path,e),r=new dn(n._location.bucket,t);return new Xs(n.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gB(n){return/^[A-Za-z]+:\/\//.test(n)}function mB(n,e){return new Xs(n,e)}function CA(n,e){if(n instanceof sm){const t=n;if(t._bucket==null)throw gK();const r=new Xs(t,t._bucket);return e!=null?CA(r,e):r}else return e!==void 0?PA(n,e):n}function yB(n,e){if(e&&gB(e)){if(n instanceof sm)return mB(n,e);throw Go("To use ref(service, url), the first argument must be a Storage instance.")}else return CA(n,e)}function XT(n,e){const t=e==null?void 0:e[cA];return t==null?null:dn.makeFromBucketSpec(t,n)}function vB(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken=typeof i=="string"?i:iI(i,n.app.options.projectId))}class sm{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=uA,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=oK,this._maxUploadRetryTime=aK,this._requests=new Set,i!=null?this._bucket=dn.makeFromBucketSpec(i,this._host):this._bucket=XT(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=dn.makeFromBucketSpec(this._url,e):this._bucket=XT(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Dp("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Dp("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(ct(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Xs(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new TK(pA());{const o=xK(e,this._appId,r,i,t,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,t){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()}}const ZT="@firebase/storage",eb="0.13.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TB="storage";function bB(n,e,t){return n=_e(n),cB(n,e,t)}function wB(n){return n=_e(n),dB(n)}function IB(n,e){return n=_e(n),fB(n,e)}function EB(n,e){return n=_e(n),RA(n,e)}function kB(n){return n=_e(n),hB(n)}function AB(n){return n=_e(n),pB(n)}function SB(n){return n=_e(n),_B(n)}function tb(n,e){return n=_e(n),yB(n,e)}function RB(n,e){return PA(n,e)}function PB(n,e,t,r={}){vB(n,e,t,r)}function CB(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new sm(t,r,i,e,ai)}function xB(){ei(new tr(TB,CB,"PUBLIC").setMultipleInstances(!0)),Hn(ZT,eb,""),Hn(ZT,eb,"esm2017")}xB();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new gc(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new gc(r,this,this._ref))},t)}on(e,t,r,i){let s;return t&&(typeof t=="function"?s=o=>t(new gc(o,this,this._ref)):s={next:t.next?o=>t.next(new gc(o,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,s,r||void 0,i||void 0)}}class rb{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Jr(e,this._service))}get items(){return this._delegate.items.map(e=>new Jr(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=RB(this._delegate,e);return new Jr(t,this.storage)}get root(){return new Jr(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return e==null?null:new Jr(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new nb(bB(this._delegate,e,t),this)}putString(e,t=Jn.RAW,r){this._throwIfRoot("putString");const i=yA(t,e),s=Object.assign({},r);return s.contentType==null&&i.contentType!=null&&(s.contentType=i.contentType),new nb(new AA(this._delegate,new qr(i.data,!0),s),this)}listAll(){return kB(this._delegate).then(e=>new rb(e,this.storage))}list(e){return EB(this._delegate,e||void 0).then(t=>new rb(t,this.storage))}getMetadata(){return wB(this._delegate)}updateMetadata(e){return IB(this._delegate,e)}getDownloadURL(){return AB(this._delegate)}delete(){return this._throwIfRoot("delete"),SB(this._delegate)}_throwIfRoot(e){if(this._delegate._location.path==="")throw _A(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(ib(e))throw Go("ref() expected a child path but got a URL, use refFromURL instead.");return new Jr(tb(this._delegate,e),this)}refFromURL(e){if(!ib(e))throw Go("refFromURL() expected a full URL but got a child path, use ref() instead.");try{dn.makeFromUrl(e,this._delegate.host)}catch{throw Go("refFromUrl() expected a valid full URL but got an invalid one.")}return new Jr(tb(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){PB(this._delegate,e,t,r)}}function ib(n){return/^[A-Za-z]+:\/\//.test(n)}const OB="@firebase/storage-compat",NB="0.3.17";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VB="storage-compat";function DB(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new xA(t,r)}function MB(n){const e={TaskState:wn,TaskEvent:oB,StringFormat:Jn,Storage:xA,Reference:Jr};n.INTERNAL.registerComponent(new tr(VB,DB,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion(OB,NB)}MB(Vr);const LB={apiKey:"AIzaSyCOAPP-7rLsDcAACSyl5cOPwzqHGziOEEw",authDomain:"slavoplayer.firebaseapp.com",projectId:"slavoplayer",storageBucket:"slavoplayer.appspot.com",appId:"1:40514221839:web:9b630d7bfe54b87843307a"};Vr.initializeApp(LB);const Ni=Vr.auth(),$r=Vr.firestore(),OA=Vr.storage(),FB=$r.collection("users"),wh=$r.collection("tracks");class Vo{constructor(e,t,r){console.log("Enetring constructor in CollectionMapper"),this.collectionName=e,this.objectToSave=t,this.key=r,this.request={pending:!1},this.docsArray=[]}async createDoc(){try{await $r.collection(this.collectionName).doc(this.key).set(this.objectToSave),console.log("FS mapper: created new document in firestore.")}catch(e){console.log(`FS mapper: unexpected error on saving track meta... Error message: ${e.message}`)}}async updateDoc(){console.log("FS mapper: updateDoc");try{await $r.collection(this.collectionName).doc(this.key).update(this.objectToSave),console.log("Document updated in firestore.")}catch(e){console.log(`Unexpected error on updating track meta... Error message: ${e.message}`)}}async get(e){console.log("FS mapper: getDocs()");const t=e;return t.source||(t.source=this.collectionName),t.numberOfItems?await this.findNext(t):await this.findAll(t),this.docsArray}async getOnKey(e){let t={};try{if(this.request.pending){console.log("Request is already pending");return}this.request.pending=!0,t=await $r.collection(this.collectionName).doc(e).get(),this.request.pending=!1}catch(r){console.log(`Error while quering tags from database: ${r.message}`)}return{...t.data()}}async findAll(e){try{if(console.log("FS mapper: findAll"),this.request.pending){console.log("Request is already pending");return}this.request.pending=!0,(await $r.collection(e.source).orderBy(e.sortOnColumn).get()).forEach(r=>{const i={...r.data()};this.docsArray.push(i)}),this.request.pending=!1}catch(t){console.log(`FS mapper: error while quering tags from database: ${t.message}`)}}async findNext(e){try{if(this.request.pending){console.log("FS mapper: Request is already pending");return}this.request.pending=!0;let t;if(e.startAfterKey){console.log(`FS mapper: quering firebase with findNext. Start after:${e.startAfterKey}`);const r=await $r.collection(e.source).doc(e.startAfterKey).get();t=await $r.collection(e.source).orderBy(e.sortOnColumn).startAfter(r).limit(e.numberOfItems).get()}else console.log("FS mapper: quering firebase with findNext. Start from beginning."),t=await $r.collection(e.source).orderBy(e.sortOnColumn).limit(e.numberOfItems).get();t.forEach(r=>{const i={...r.data()};this.docsArray.push(i)}),this.request.pending=!1}catch(t){console.log(`FS mapper: error while quering tags from database: ${t.message}`)}}}class UB{constructor(){console.log("Entering constructor in BookHandler"),this.bookMapper=new Vo}async get(e){return console.log("get() in BookHandler"),await this.bookMapper.get(e)}}const KB={name:"BookToPlay",props:{book:{type:Object,required:!0}}},BB={class:"flex justify-between items-center p-2 pl-6 cursor-pointer transition duration-300 hover:bg-gray-50"};function $B(n,e,t,r,i,s){const o=st("router-link");return Ee(),Ae("li",BB,[K("div",null,[Te(o,{to:{name:"book",params:{book_id:t.book.bookKey}},class:"font-bold block text-gray-600 tst-track-name"},{default:ar(()=>[Qr(lt(this.book.title)+" | "+lt(this.book.author)+" ",1),e[0]||(e[0]=K("span",{class:"text-gray-500 text-sm"},"(. : 234)",-1))]),_:1},8,["to"])])])}const zB=zt(KB,[["render",$B]]),jB={name:"Home",components:{AppBookToPlay:zB},data(){return{booksArray:[]}},async created(){let n=[];try{console.log("Home1 - get books"),n=await new UB().get({source:"books",sortOnColumn:"title"}),console.log(n),n.forEach(t=>{this.booksArray.push(t),console.log("bookArrayItem added.")})}catch(e){console.log(`Error while quering tracks from database: ${e.message}`)}}},qB={class:"container mx-auto"},GB={class:"bg-white rounded border border-gray-200 relative flex flex-col"},HB={id:"booklist"};function WB(n,e,t,r,i,s){const o=st("app-book-to-play");return Ee(),Ae("div",null,[e[0]||(e[0]=kw('<section class="mb-8 py-20 text-white text-center relative"><div class="absolute inset-0 w-full h-full bg-cover introduction-bg" style="background-image:url(&#39;/SlavoPlayer/src/assets/song-header.png&#39;);"></div><div class="container mx-auto"><div class="text-white main-header-content"><h1 class="font-bold text-3xl mb-5"> &quot;     ;   ...&quot; 1..4,16 </h1><p class="w-full mx-auto px-2">           azbyka.ru                (      ). </p><a href="https://azbyka.ru/kak-pomoch?">C   azbyka.ru!</a></div></div></section>',1)),K("section",qB,[K("div",GB,[K("ol",HB,[(Ee(!0),Ae(Bt,null,Fs(i.booksArray,a=>(Ee(),Wo(o,{key:a.bookKey,book:a},null,8,["book"]))),128))])])])])}const QB=zt(jB,[["render",WB]]),YB={defaultPlaylist(){return[{trackKey:"07_Sv_Antoniy_O_Zhizni_Vo_Khriste_01",nr:"7",title:" 6.     ",url:"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-1/06_Sv_Antoniy_O_Zhizni_Vo_Khriste_01.mp3",length:"10:08",tags:[{tagKey:"My tag 1",displayName:"My tag 1"},{tagKey:"My tag 2",displayName:"My tag 2"}]},{trackKey:"07_Sv_Antoniy_O_Zhizni_Vo_Khriste_02",nr:"8",title:" 7.     ",url:"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-1/07_Sv_Antoniy_O_Zhizni_Vo_Khriste_02.mp3",length:"07:39",tags:[]},{trackKey:"07_Sv_Antoniy_O_Zhizni_Vo_Khriste_03",nr:"9",title:" 8.     ",url:"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-1/07_Sv_Antoniy_O_Zhizni_Vo_Khriste_03.mp3",length:"09:01",tags:[]}]}},JB=JSON.parse('[{"trackKey":"000_Zastavka","bookKey":"philokalia","bookTitle":"   .  ","author":"","subtitle":" 5","initialTitle":"","title":"","chapter":"","nr":"1","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/000_Zastavka.mp3","length":"00:30","tags":[],"searchKeywords":[]},{"trackKey":"001_Predislovie","bookKey":"philokalia","bookTitle":"   .  ","author":"","subtitle":" 5","initialTitle":"","title":"","chapter":"","nr":"2","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/001_Predislovie.mp3","length":"02:24","tags":[],"searchKeywords":[]},{"trackKey":"002_Svt_Simeon_Novyy_Bogoslov_01","bookKey":"philokalia","bookTitle":"   .  ","author":" ,  ","subtitle":" 5","initialTitle":" ,  . 1.    ","title":"   ","chapter":"1","nr":"3","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/002_Svt_Simeon_Novyy_Bogoslov_01.mp3","length":"03:58","tags":[],"searchKeywords":[]},{"trackKey":"003_Svt_Simeon_Novyy_Bogoslov_02","bookKey":"philokalia","bookTitle":"   .  ","author":" ,  ","subtitle":" 5","initialTitle":" ,  . 2.    ","title":"   ","chapter":"2","nr":"4","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/003_Svt_Simeon_Novyy_Bogoslov_02.mp3","length":"09:43","tags":[],"searchKeywords":[]},{"trackKey":"004_Svt_Simeon_Novyy_Bogoslov_03","bookKey":"philokalia","bookTitle":"   .  ","author":" ,  ","subtitle":" 5","initialTitle":" ,  . 3.    ","title":"   ","chapter":"3","nr":"5","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/004_Svt_Simeon_Novyy_Bogoslov_03.mp3","length":"05:52","tags":[],"searchKeywords":[]},{"trackKey":"005_Svt_Simeon_Novyy_Bogoslov_04","bookKey":"philokalia","bookTitle":"   .  ","author":" ,  ","subtitle":" 5","initialTitle":" ,  . 4.    ","title":"   ","chapter":"4","nr":"6","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/005_Svt_Simeon_Novyy_Bogoslov_04.mp3","length":"10:59","tags":[],"searchKeywords":[]},{"trackKey":"006_Svt_Simeon_Novyy_Bogoslov_05","bookKey":"philokalia","bookTitle":"   .  ","author":" ,  ","subtitle":" 5","initialTitle":" ,  . 5.    ","title":"   ","chapter":"5","nr":"7","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/006_Svt_Simeon_Novyy_Bogoslov_05.mp3","length":"05:54","tags":[],"searchKeywords":[]},{"trackKey":"007_Svt_Simeon_Novyy_Bogoslov_06","bookKey":"philokalia","bookTitle":"   .  ","author":" ,  ","subtitle":" 5","initialTitle":" ,  . 6.    ","title":"   ","chapter":"6","nr":"8","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/007_Svt_Simeon_Novyy_Bogoslov_06.mp3","length":"05:54","tags":[],"searchKeywords":[]},{"trackKey":"008_Svt_Simeon_Novyy_Bogoslov_07","bookKey":"philokalia","bookTitle":"   .  ","author":" ,  ","subtitle":" 5","initialTitle":" ,  . 7.    ","title":"   ","chapter":"7","nr":"9","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/008_Svt_Simeon_Novyy_Bogoslov_07.mp3","length":"13:23","tags":[],"searchKeywords":[]},{"trackKey":"009_Svt_Simeon_Novyy_Bogoslov_08","bookKey":"philokalia","bookTitle":"   .  ","author":" ,  ","subtitle":" 5","initialTitle":" ,  . 8.    ","title":"   ","chapter":"8","nr":"10","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/009_Svt_Simeon_Novyy_Bogoslov_08.mp3","length":"16:07","tags":[],"searchKeywords":[]},{"trackKey":"010_Svt_Simeon_Novyy_Bogoslov_09","bookKey":"philokalia","bookTitle":"   .  ","author":" ,  ","subtitle":" 5","initialTitle":" ,  . 9.    ","title":"   ","chapter":"9","nr":"11","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/010_Svt_Simeon_Novyy_Bogoslov_09.mp3","length":"09:24","tags":[],"searchKeywords":[]},{"trackKey":"011_Svt_Simeon_Novyy_Bogoslov_10","bookKey":"philokalia","bookTitle":"   .  ","author":" ,  ","subtitle":" 5","initialTitle":" ,  . 10.    ","title":"   ","chapter":"10","nr":"12","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/011_Svt_Simeon_Novyy_Bogoslov_10.mp3","length":"08:24","tags":[],"searchKeywords":[]},{"trackKey":"012_Svt_Simeon_Novyy_Bogoslov_11","bookKey":"philokalia","bookTitle":"   .  ","author":" ,  ","subtitle":" 5","initialTitle":" ,  . 11.    ","title":"   ","chapter":"11","nr":"13","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/012_Svt_Simeon_Novyy_Bogoslov_11.mp3","length":"10:59","tags":[],"searchKeywords":[]},{"trackKey":"013_Svt_Simeon_Novyy_Bogoslov_12","bookKey":"philokalia","bookTitle":"   .  ","author":" ,  ","subtitle":" 5","initialTitle":" ,  . 12.    ","title":"   ","chapter":"12","nr":"14","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/013_Svt_Simeon_Novyy_Bogoslov_12.mp3","length":"15:34","tags":[],"searchKeywords":[]},{"trackKey":"014_Svt_Simeon_Novyy_Bogoslov_13","bookKey":"philokalia","bookTitle":"   .  ","author":" ,  ","subtitle":" 5","initialTitle":" ,  . 13.    ","title":"   ","chapter":"13","nr":"15","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/014_Svt_Simeon_Novyy_Bogoslov_13.mp3","length":"05:10","tags":[],"searchKeywords":[]},{"trackKey":"015_Svt_Simeon_Novyy_Bogoslov_14","bookKey":"philokalia","bookTitle":"   .  ","author":" ,  ","subtitle":" 5","initialTitle":" ,  . 14.    ","title":"   ","chapter":"14","nr":"16","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/015_Svt_Simeon_Novyy_Bogoslov_14.mp3","length":"08:44","tags":[],"searchKeywords":[]},{"trackKey":"016_Svt_Simeon_Novyy_Bogoslov_15","bookKey":"philokalia","bookTitle":"   .  ","author":" ,  ","subtitle":" 5","initialTitle":" ,  . 15.    ","title":"   ","chapter":"15","nr":"17","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/016_Svt_Simeon_Novyy_Bogoslov_15.mp3","length":"06:55","tags":[],"searchKeywords":[]},{"trackKey":"017_Svt_Simeon_Novyy_Bogoslov_16","bookKey":"philokalia","bookTitle":"   .  ","author":" ,  ","subtitle":" 5","initialTitle":" ,  . 16.    ","title":"   ","chapter":"16","nr":"18","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/017_Svt_Simeon_Novyy_Bogoslov_16.mp3","length":"03:11","tags":[],"searchKeywords":[]},{"trackKey":"018_Svt_Simeon_Novyy_Bogoslov_17","bookKey":"philokalia","bookTitle":"   .  ","author":"  ","subtitle":" 5","initialTitle":"  . 1.  ","title":" ","chapter":"1","nr":"19","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/018_Svt_Simeon_Novyy_Bogoslov_17.mp3","length":"09:42","tags":[],"searchKeywords":[]},{"trackKey":"019_Svt_Simeon_Novyy_Bogoslov_18","bookKey":"philokalia","bookTitle":"   .  ","author":"  ","subtitle":" 5","initialTitle":"  . 2.  ","title":" ","chapter":"2","nr":"20","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/019_Svt_Simeon_Novyy_Bogoslov_18.mp3","length":"09:55","tags":[],"searchKeywords":[]},{"trackKey":"020_Svt_Simeon_Novyy_Bogoslov_19","bookKey":"philokalia","bookTitle":"   .  ","author":"  ","subtitle":" 5","initialTitle":"  . 3.  ","title":" ","chapter":"3","nr":"21","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/020_Svt_Simeon_Novyy_Bogoslov_19.mp3","length":"07:47","tags":[],"searchKeywords":[]},{"trackKey":"021_Svt_Simeon_Novyy_Bogoslov_20","bookKey":"philokalia","bookTitle":"   .  ","author":"  ","subtitle":" 5","initialTitle":"  . 4.  ","title":" ","chapter":"4","nr":"22","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/021_Svt_Simeon_Novyy_Bogoslov_20.mp3","length":"12:33","tags":[],"searchKeywords":[]},{"trackKey":"022_Svt_Simeon_Novyy_Bogoslov_21","bookKey":"philokalia","bookTitle":"   .  ","author":"  ","subtitle":" 5","initialTitle":"  . 5.  ","title":" ","chapter":"5","nr":"23","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/022_Svt_Simeon_Novyy_Bogoslov_21.mp3","length":"13:10","tags":[],"searchKeywords":[]},{"trackKey":"023_Prp_Nikita_Stifat_01","bookKey":"philokalia","bookTitle":"   .  ","author":"  ","subtitle":" 5","initialTitle":"  . 1.    ","title":"   ","chapter":"1","nr":"24","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/023_Prp_Nikita_Stifat_01.mp3","length":"02:24","tags":[],"searchKeywords":[]},{"trackKey":"024_Prp_Nikita_Stifat_02","bookKey":"philokalia","bookTitle":"   .  ","author":"  ","subtitle":" 5","initialTitle":"  . 2.    ","title":"   ","chapter":"2","nr":"25","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/024_Prp_Nikita_Stifat_02.mp3","length":"13:55","tags":[],"searchKeywords":[]},{"trackKey":"025_Prp_Nikita_Stifat_03","bookKey":"philokalia","bookTitle":"   .  ","author":"  ","subtitle":" 5","initialTitle":"  . 3.    ","title":"   ","chapter":"3","nr":"26","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/025_Prp_Nikita_Stifat_03.mp3","length":"09:29","tags":[],"searchKeywords":[]},{"trackKey":"026_Prp_Nikita_Stifat_04","bookKey":"philokalia","bookTitle":"   .  ","author":"  ","subtitle":" 5","initialTitle":"  . 4.    ","title":"   ","chapter":"4","nr":"27","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/026_Prp_Nikita_Stifat_04.mp3","length":"05:06","tags":[],"searchKeywords":[]},{"trackKey":"027_Prp_Nikita_Stifat_05","bookKey":"philokalia","bookTitle":"   .  ","author":"  ","subtitle":" 5","initialTitle":"  . 5.    ","title":"   ","chapter":"5","nr":"28","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/027_Prp_Nikita_Stifat_05.mp3","length":"05:45","tags":[],"searchKeywords":[]},{"trackKey":"028_Prp_Nikita_Stifat_06","bookKey":"philokalia","bookTitle":"   .  ","author":"  ","subtitle":" 5","initialTitle":"  . 6.    ","title":"   ","chapter":"6","nr":"29","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/028_Prp_Nikita_Stifat_06.mp3","length":"08:38","tags":[],"searchKeywords":[]},{"trackKey":"029_Prp_Nikita_Stifat_07","bookKey":"philokalia","bookTitle":"   .  ","author":"  ","subtitle":" 5","initialTitle":"  . 7.    ","title":"   ","chapter":"7","nr":"30","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/029_Prp_Nikita_Stifat_07.mp3","length":"07:57","tags":[],"searchKeywords":[]},{"trackKey":"030_Prp_Nikita_Stifat_08","bookKey":"philokalia","bookTitle":"   .  ","author":"  ","subtitle":" 5","initialTitle":"  . 8.    ","title":"   ","chapter":"8","nr":"31","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/030_Prp_Nikita_Stifat_08.mp3","length":"08:46","tags":[],"searchKeywords":[]},{"trackKey":"031_Prp_Nikita_Stifat_09","bookKey":"philokalia","bookTitle":"   .  ","author":"  ","subtitle":" 5","initialTitle":"  . 9.    ","title":"   ","chapter":"9","nr":"32","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/031_Prp_Nikita_Stifat_09.mp3","length":"17:47","tags":[],"searchKeywords":[]},{"trackKey":"032_Prp_Nikita_Stifat_10","bookKey":"philokalia","bookTitle":"   .  ","author":"  ","subtitle":" 5","initialTitle":"  . 10.        ","title":"       ","chapter":"10","nr":"33","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/032_Prp_Nikita_Stifat_10.mp3","length":"12:35","tags":[],"searchKeywords":[]},{"trackKey":"033_Prp_Nikita_Stifat_11","bookKey":"philokalia","bookTitle":"   .  ","author":"  ","subtitle":" 5","initialTitle":"  . 11.        ","title":"       ","chapter":"11","nr":"34","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/033_Prp_Nikita_Stifat_11.mp3","length":"10:59","tags":[],"searchKeywords":[]},{"trackKey":"034_Prp_Nikita_Stifat_12","bookKey":"philokalia","bookTitle":"   .  ","author":"  ","subtitle":" 5","initialTitle":"  . 12.        ","title":"       ","chapter":"12","nr":"35","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/034_Prp_Nikita_Stifat_12.mp3","length":"19:17","tags":[],"searchKeywords":[]},{"trackKey":"035_Prp_Nikita_Stifat_13","bookKey":"philokalia","bookTitle":"   .  ","author":"  ","subtitle":" 5","initialTitle":"  . 13.        ","title":"       ","chapter":"13","nr":"36","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/035_Prp_Nikita_Stifat_13.mp3","length":"10:17","tags":[],"searchKeywords":[]},{"trackKey":"036_Prp_Nikita_Stifat_14","bookKey":"philokalia","bookTitle":"   .  ","author":"  ","subtitle":" 5","initialTitle":"  . 14.        ","title":"       ","chapter":"14","nr":"37","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/036_Prp_Nikita_Stifat_14.mp3","length":"04:08","tags":[],"searchKeywords":[]},{"trackKey":"037_Prp_Nikita_Stifat_15","bookKey":"philokalia","bookTitle":"   .  ","author":"  ","subtitle":" 5","initialTitle":"  . 15.        ","title":"       ","chapter":"15","nr":"38","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/037_Prp_Nikita_Stifat_15.mp3","length":"07:06","tags":[],"searchKeywords":[]},{"trackKey":"038_Prp_Nikita_Stifat_16","bookKey":"philokalia","bookTitle":"   .  ","author":"  ","subtitle":" 5","initialTitle":"  . 16.        ","title":"       ","chapter":"16","nr":"39","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/038_Prp_Nikita_Stifat_16.mp3","length":"12:05","tags":[],"searchKeywords":[]},{"trackKey":"039_Prp_Nikita_Stifat_17","bookKey":"philokalia","bookTitle":"   .  ","author":"  ","subtitle":" 5","initialTitle":"  . 17.        ","title":"       ","chapter":"17","nr":"40","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/039_Prp_Nikita_Stifat_17.mp3","length":"13:37","tags":[],"searchKeywords":[]},{"trackKey":"040_Prp_Nikita_Stifat_18","bookKey":"philokalia","bookTitle":"   .  ","author":"  ","subtitle":" 5","initialTitle":"  . 18.    ,      ","title":"   ,      ","chapter":"18","nr":"41","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/040_Prp_Nikita_Stifat_18.mp3","length":"14:45","tags":[],"searchKeywords":[]},{"trackKey":"041_Prp_Nikita_Stifat_19","bookKey":"philokalia","bookTitle":"   .  ","author":"  ","subtitle":" 5","initialTitle":"  . 19.    ,      ","title":"   ,      ","chapter":"19","nr":"42","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/041_Prp_Nikita_Stifat_19.mp3","length":"04:26","tags":[],"searchKeywords":[]},{"trackKey":"042_Prp_Nikita_Stifat_20","bookKey":"philokalia","bookTitle":"   .  ","author":"  ","subtitle":" 5","initialTitle":"  . 20.    ,      ","title":"   ,      ","chapter":"20","nr":"43","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/042_Prp_Nikita_Stifat_20.mp3","length":"11:00","tags":[],"searchKeywords":[]},{"trackKey":"043_Prp_Nikita_Stifat_21","bookKey":"philokalia","bookTitle":"   .  ","author":"  ","subtitle":" 5","initialTitle":"  . 21.    ,      ","title":"   ,      ","chapter":"21","nr":"44","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/043_Prp_Nikita_Stifat_21.mp3","length":"09:33","tags":[],"searchKeywords":[]},{"trackKey":"044_Prp_Nikita_Stifat_22","bookKey":"philokalia","bookTitle":"   .  ","author":"  ","subtitle":" 5","initialTitle":"  . 22.    ,      ","title":"   ,      ","chapter":"22","nr":"45","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/044_Prp_Nikita_Stifat_22.mp3","length":"07:53","tags":[],"searchKeywords":[]},{"trackKey":"046_Feolipt_Ep_Filadelfiyskiy_01","bookKey":"philokalia","bookTitle":"   .  ","author":" ,  ","subtitle":" 5","initialTitle":" ,  . 1.    ","title":"   ","chapter":"1","nr":"46","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/046_Feolipt_Ep_Filadelfiyskiy_01.mp3","length":"02:01","tags":[],"searchKeywords":[]},{"trackKey":"047_Feolipt_Ep_Filadelfiyskiy_02","bookKey":"philokalia","bookTitle":"   .  ","author":" ,  ","subtitle":" 5","initialTitle":" ,  . 2. ,       ,   ,       ","title":",       ,   ,       ","chapter":"2","nr":"47","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/047_Feolipt_Ep_Filadelfiyskiy_02.mp3","length":"16:28","tags":[],"searchKeywords":[]},{"trackKey":"048_Feolipt_Ep_Filadelfiyskiy_03","bookKey":"philokalia","bookTitle":"   .  ","author":" ,  ","subtitle":" 5","initialTitle":" ,  . 3. ,       ,   ,       ","title":",       ,   ,       ","chapter":"3","nr":"48","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/048_Feolipt_Ep_Filadelfiyskiy_03.mp3","length":"09:21","tags":[],"searchKeywords":[]},{"trackKey":"049_Feolipt_Ep_Filadelfiyskiy_04","bookKey":"philokalia","bookTitle":"   .  ","author":" ,  ","subtitle":" 5","initialTitle":" ,  . 4. ,       ,   ,       ","title":",       ,   ,       ","chapter":"4","nr":"49","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/049_Feolipt_Ep_Filadelfiyskiy_04.mp3","length":"08:43","tags":[],"searchKeywords":[]},{"trackKey":"050_Feolipt_Ep_Filadelfiyskiy_05","bookKey":"philokalia","bookTitle":"   .  ","author":" ,  ","subtitle":" 5","initialTitle":" ,  . 5.     .  ","title":"    ","chapter":"5","nr":"50","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/050_Feolipt_Ep_Filadelfiyskiy_05.mp3","length":"09:37","tags":[],"searchKeywords":[]},{"trackKey":"051_Svt_Grigoriy_Sinait_01","bookKey":"philokalia","bookTitle":"   .  ","author":"  ","subtitle":" 5","initialTitle":"  . 1.    ","title":"   ","chapter":"1","nr":"51","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/051_Svt_Grigoriy_Sinait_01.mp3","length":"03:04","tags":[],"searchKeywords":[]},{"trackKey":"052_Svt_Grigoriy_Sinait_02","bookKey":"philokalia","bookTitle":"   .  ","author":"  ","subtitle":" 5","initialTitle":"  . 2.     ,   ,      ,   ,        ","title":"    ,   ,      ,   ,        ","chapter":"2","nr":"52","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/052_Svt_Grigoriy_Sinait_02.mp3","length":"06:52","tags":[],"searchKeywords":[]},{"trackKey":"053_Svt_Grigoriy_Sinait_03","bookKey":"philokalia","bookTitle":"   .  ","author":"  ","subtitle":" 5","initialTitle":"  . 3.     ,   ,      ,   ,        ","title":"    ,   ,      ,   ,        ","chapter":"3","nr":"53","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/053_Svt_Grigoriy_Sinait_03.mp3","length":"07:54","tags":[],"searchKeywords":[]},{"trackKey":"054_Svt_Grigoriy_Sinait_04","bookKey":"philokalia","bookTitle":"   .  ","author":"  ","subtitle":" 5","initialTitle":"  . 4.     ,   ,      ,   ,        ","title":"    ,   ,      ,   ,        ","chapter":"4","nr":"54","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/054_Svt_Grigoriy_Sinait_04.mp3","length":"06:33","tags":[],"searchKeywords":[]},{"trackKey":"055_Svt_Grigoriy_Sinait_05","bookKey":"philokalia","bookTitle":"   .  ","author":"  ","subtitle":" 5","initialTitle":"  . 5.     ,   ,      ,   ,        ","title":"    ,   ,      ,   ,        ","chapter":"5","nr":"55","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/055_Svt_Grigoriy_Sinait_05.mp3","length":"07:17","tags":[],"searchKeywords":[]},{"trackKey":"056_Svt_Grigoriy_Sinait_06","bookKey":"philokalia","bookTitle":"   .  ","author":"  ","subtitle":" 5","initialTitle":"  . 6.     ,   ,      ,   ,        ","title":"    ,   ,      ,   ,        ","chapter":"6","nr":"56","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/056_Svt_Grigoriy_Sinait_06.mp3","length":"11:11","tags":[],"searchKeywords":[]},{"trackKey":"057_Svt_Grigoriy_Sinait_07","bookKey":"philokalia","bookTitle":"   .  ","author":"  ","subtitle":" 5","initialTitle":"  . 7.     ,   ,      ,   ,        ","title":"    ,   ,      ,   ,        ","chapter":"7","nr":"57","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/057_Svt_Grigoriy_Sinait_07.mp3","length":"09:53","tags":[],"searchKeywords":[]},{"trackKey":"058_Svt_Grigoriy_Sinait_08","bookKey":"philokalia","bookTitle":"   .  ","author":"  ","subtitle":" 5","initialTitle":"  . 8.     ,   ,      ,   ,        ","title":"    ,   ,      ,   ,        ","chapter":"8","nr":"58","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/058_Svt_Grigoriy_Sinait_08.mp3","length":"05:37","tags":[],"searchKeywords":[]},{"trackKey":"059_Svt_Grigoriy_Sinait_09","bookKey":"philokalia","bookTitle":"   .  ","author":"  ","subtitle":" 5","initialTitle":"  . 9.     ,   ,      ,   ,        ","title":"    ,   ,      ,   ,        ","chapter":"9","nr":"59","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/059_Svt_Grigoriy_Sinait_09.mp3","length":"10:56","tags":[],"searchKeywords":[]},{"trackKey":"060_Svt_Grigoriy_Sinait_10","bookKey":"philokalia","bookTitle":"   .  ","author":"  ","subtitle":" 5","initialTitle":"  . 10.     ,   ,      ,   ,        ","title":"    ,   ,      ,   ,        ","chapter":"10","nr":"60","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/060_Svt_Grigoriy_Sinait_10.mp3","length":"07:12","tags":[],"searchKeywords":[]},{"trackKey":"061_Svt_Grigoriy_Sinait_11","bookKey":"philokalia","bookTitle":"   .  ","author":"  ","subtitle":" 5","initialTitle":"  . 11.     ,   ,      ,   ,        ","title":"    ,   ,      ,   ,        ","chapter":"11","nr":"61","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/061_Svt_Grigoriy_Sinait_11.mp3","length":"12:27","tags":[],"searchKeywords":[]},{"trackKey":"062_Svt_Grigoriy_Sinait_12","bookKey":"philokalia","bookTitle":"   .  ","author":"  ","subtitle":" 5","initialTitle":"  . 12.     ,   ,      ,   ,        ","title":"    ,   ,      ,   ,        ","chapter":"12","nr":"62","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/062_Svt_Grigoriy_Sinait_12.mp3","length":"14:22","tags":[],"searchKeywords":[]},{"trackKey":"063_Svt_Grigoriy_Sinait_13","bookKey":"philokalia","bookTitle":"   .  ","author":"  ","subtitle":" 5","initialTitle":"  . 13.  .  ","title":" ","chapter":"13","nr":"63","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/063_Svt_Grigoriy_Sinait_13.mp3","length":"05:52","tags":[],"searchKeywords":[]},{"trackKey":"064_Svt_Grigoriy_Sinait_14","bookKey":"philokalia","bookTitle":"   .  ","author":"  ","subtitle":" 5","initialTitle":"  . 14.  .  ","title":" ","chapter":"14","nr":"64","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/064_Svt_Grigoriy_Sinait_14.mp3","length":"05:42","tags":[],"searchKeywords":[]},{"trackKey":"065_Svt_Grigoriy_Sinait_15","bookKey":"philokalia","bookTitle":"   .  ","author":"  ","subtitle":" 5","initialTitle":"  . 15.  .  ","title":" ","chapter":"15","nr":"65","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/065_Svt_Grigoriy_Sinait_15.mp3","length":"04:17","tags":[],"searchKeywords":[]},{"trackKey":"066_Svt_Grigoriy_Sinait_16","bookKey":"philokalia","bookTitle":"   .  ","author":"  ","subtitle":" 5","initialTitle":"  . 16.  .  ","title":" ","chapter":"16","nr":"66","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/066_Svt_Grigoriy_Sinait_16.mp3","length":"13:12","tags":[],"searchKeywords":[]},{"trackKey":"067_Svt_Grigoriy_Sinait_17","bookKey":"philokalia","bookTitle":"   .  ","author":"  ","subtitle":" 5","initialTitle":"  . 17.    .  ","title":"   ","chapter":"17","nr":"67","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/067_Svt_Grigoriy_Sinait_17.mp3","length":"09:01","tags":[],"searchKeywords":[]},{"trackKey":"068_Svt_Grigoriy_Sinait_18","bookKey":"philokalia","bookTitle":"   .  ","author":"  ","subtitle":" 5","initialTitle":"  . 18.    .  ","title":"   ","chapter":"18","nr":"68","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/068_Svt_Grigoriy_Sinait_18.mp3","length":"05:38","tags":[],"searchKeywords":[]},{"trackKey":"069_Svt_Grigoriy_Sinait_19","bookKey":"philokalia","bookTitle":"   .  ","author":"  ","subtitle":" 5","initialTitle":"  . 19.    .  ","title":"   ","chapter":"19","nr":"69","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/069_Svt_Grigoriy_Sinait_19.mp3","length":"11:11","tags":[],"searchKeywords":[]},{"trackKey":"070_Nikifor_Uedinennik_01","bookKey":"philokalia","bookTitle":"   .  ","author":"  ","subtitle":" 5","initialTitle":"  . 1.    .       ","title":"   ","chapter":"1","nr":"70","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/070_Nikifor_Uedinennik_01.mp3","length":"07:01","tags":[],"searchKeywords":[]},{"trackKey":"071_Nikifor_Uedinennik_02","bookKey":"philokalia","bookTitle":"   .  ","author":"  ","subtitle":" 5","initialTitle":"  . 2.       ","title":"      ","chapter":"2","nr":"71","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/071_Nikifor_Uedinennik_02.mp3","length":"17:39","tags":[],"searchKeywords":[]},{"trackKey":"072_Nikifor_Uedinennik_03","bookKey":"philokalia","bookTitle":"   .  ","author":"  ","subtitle":" 5","initialTitle":"  . 3.       ","title":"      ","chapter":"3","nr":"72","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/072_Nikifor_Uedinennik_03.mp3","length":"08:07","tags":[],"searchKeywords":[]},{"trackKey":"073_Svt_Grigoriy_Palama_01","bookKey":"philokalia","bookTitle":"   .  ","author":"","subtitle":" 5","initialTitle":".  ,  . 1.    ","title":"1","chapter":" ,  ","nr":"73","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/073_Svt_Grigoriy_Palama_01.mp3","length":"04:28","tags":[],"searchKeywords":[]},{"trackKey":"074_Svt_Grigoriy_Palama_02","bookKey":"philokalia","bookTitle":"   .  ","author":"","subtitle":" 5","initialTitle":".  ,  . 2. ( )     ,         ","title":"2","chapter":" ,  ","nr":"74","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/074_Svt_Grigoriy_Palama_02.mp3","length":"13:55","tags":[],"searchKeywords":[]},{"trackKey":"075_Svt_Grigoriy_Palama_03","bookKey":"philokalia","bookTitle":"   .  ","author":"","subtitle":" 5","initialTitle":".  ,  . 3.     ,         ","title":"3","chapter":" ,  ","nr":"75","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/075_Svt_Grigoriy_Palama_03.mp3","length":"11:22","tags":[],"searchKeywords":[]},{"trackKey":"076_Svt_Grigoriy_Palama_04","bookKey":"philokalia","bookTitle":"   .  ","author":"","subtitle":" 5","initialTitle":".  ,  . 4.     ,         ","title":"4","chapter":" ,  ","nr":"76","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/076_Svt_Grigoriy_Palama_04.mp3","length":"08:37","tags":[],"searchKeywords":[]},{"trackKey":"077_Svt_Grigoriy_Palama_05","bookKey":"philokalia","bookTitle":"   .  ","author":"","subtitle":" 5","initialTitle":".  ,  . 5.     ,         ","title":"5","chapter":" ,  ","nr":"77","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/077_Svt_Grigoriy_Palama_05.mp3","length":"09:28","tags":[],"searchKeywords":[]},{"trackKey":"078_Svt_Grigoriy_Palama_06","bookKey":"philokalia","bookTitle":"   .  ","author":"","subtitle":" 5","initialTitle":".  ,  . 6.     ,         ","title":"6","chapter":" ,  ","nr":"78","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/078_Svt_Grigoriy_Palama_06.mp3","length":"06:10","tags":[],"searchKeywords":[]},{"trackKey":"079_Svt_Grigoriy_Palama_07","bookKey":"philokalia","bookTitle":"   .  ","author":"","subtitle":" 5","initialTitle":".  ,  . 7.     ,         ","title":"7","chapter":" ,  ","nr":"79","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/079_Svt_Grigoriy_Palama_07.mp3","length":"10:08","tags":[],"searchKeywords":[]},{"trackKey":"080_Svt_Grigoriy_Palama_08","bookKey":"philokalia","bookTitle":"   .  ","author":"","subtitle":" 5","initialTitle":".  ,  . 8.     ,         ","title":"8","chapter":" ,  ","nr":"80","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/080_Svt_Grigoriy_Palama_08.mp3","length":"14:07","tags":[],"searchKeywords":[]},{"trackKey":"081_Svt_Grigoriy_Palama_09","bookKey":"philokalia","bookTitle":"   .  ","author":"","subtitle":" 5","initialTitle":".  ,  . 9.    ","title":"9","chapter":" ,  ","nr":"81","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/081_Svt_Grigoriy_Palama_09.mp3","length":"20:55","tags":[],"searchKeywords":[]},{"trackKey":"082_Svt_Grigoriy_Palama_10","bookKey":"philokalia","bookTitle":"   .  ","author":"","subtitle":" 5","initialTitle":".  ,  . 10.  ","title":"10","chapter":" ,  ","nr":"82","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/082_Svt_Grigoriy_Palama_10.mp3","length":"09:44","tags":[],"searchKeywords":[]},{"trackKey":"083_Svt_Grigoriy_Palama_11","bookKey":"philokalia","bookTitle":"   .  ","author":"","subtitle":" 5","initialTitle":".  ,  . 11.  ","title":"11","chapter":" ,  ","nr":"83","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/083_Svt_Grigoriy_Palama_11.mp3","length":"15:48","tags":[],"searchKeywords":[]},{"trackKey":"084_Svt_Grigoriy_Palama_12","bookKey":"philokalia","bookTitle":"   .  ","author":"","subtitle":" 5","initialTitle":".  ,  . 12.     ,  ","title":"12","chapter":" ,  ","nr":"84","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/084_Svt_Grigoriy_Palama_12.mp3","length":"06:55","tags":[],"searchKeywords":[]},{"trackKey":"086_Kallist_Patriarh_I_Ignatiy_Ksanfopuly_01","bookKey":"philokalia","bookTitle":"   .  ","author":"     , ","subtitle":" 5","initialTitle":"     , . 1.    ","title":"   ","chapter":"1","nr":"85","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/086_Kallist_Patriarh_I_Ignatiy_Ksanfopuly_01.mp3","length":"03:25","tags":[],"searchKeywords":[]},{"trackKey":"087_Kallist_Patriarh_I_Ignatiy_Ksanfopuly_02","bookKey":"philokalia","bookTitle":"   .  ","author":"     , ","subtitle":" 5","initialTitle":"     , . 2.  ,   ","title":" ,   ","chapter":"2","nr":"86","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/087_Kallist_Patriarh_I_Ignatiy_Ksanfopuly_02.mp3","length":"11:34","tags":[],"searchKeywords":[]},{"trackKey":"088_Kallist_Patriarh_I_Ignatiy_Ksanfopuly_03","bookKey":"philokalia","bookTitle":"   .  ","author":"     , ","subtitle":" 5","initialTitle":"     , . 3.  ,   ","title":" ,   ","chapter":"3","nr":"87","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/088_Kallist_Patriarh_I_Ignatiy_Ksanfopuly_03.mp3","length":"11:57","tags":[],"searchKeywords":[]},{"trackKey":"089_Kallist_Patriarh_I_Ignatiy_Ksanfopuly_04","bookKey":"philokalia","bookTitle":"   .  ","author":"     , ","subtitle":" 5","initialTitle":"     , . 4.  ,   ","title":" ,   ","chapter":"4","nr":"88","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/089_Kallist_Patriarh_I_Ignatiy_Ksanfopuly_04.mp3","length":"10:30","tags":[],"searchKeywords":[]},{"trackKey":"090_Kallist_Patriarh_I_Ignatiy_Ksanfopuly_05","bookKey":"philokalia","bookTitle":"   .  ","author":"     , ","subtitle":" 5","initialTitle":"     , . 5.  ,   ","title":" ,   ","chapter":"5","nr":"89","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/090_Kallist_Patriarh_I_Ignatiy_Ksanfopuly_05.mp3","length":"16:34","tags":[],"searchKeywords":[]},{"trackKey":"091_Kallist_Patriarh_I_Ignatiy_Ksanfopuly_06","bookKey":"philokalia","bookTitle":"   .  ","author":"     , ","subtitle":" 5","initialTitle":"     , . 6.  ,   ","title":" ,   ","chapter":"6","nr":"90","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/091_Kallist_Patriarh_I_Ignatiy_Ksanfopuly_06.mp3","length":"22:22","tags":[],"searchKeywords":[]},{"trackKey":"092_Kallist_Patriarh_I_Ignatiy_Ksanfopuly_07","bookKey":"philokalia","bookTitle":"   .  ","author":"     , ","subtitle":" 5","initialTitle":"     , . 7.  ,   ","title":" ,   ","chapter":"7","nr":"91","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/092_Kallist_Patriarh_I_Ignatiy_Ksanfopuly_07.mp3","length":"10:30","tags":[],"searchKeywords":[]},{"trackKey":"093_Kallist_Patriarh_I_Ignatiy_Ksanfopuly_08","bookKey":"philokalia","bookTitle":"   .  ","author":"     , ","subtitle":" 5","initialTitle":"     , . 8.  ,   ","title":" ,   ","chapter":"8","nr":"92","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/093_Kallist_Patriarh_I_Ignatiy_Ksanfopuly_08.mp3","length":"10:36","tags":[],"searchKeywords":[]},{"trackKey":"094_Kallist_Patriarh_I_Ignatiy_Ksanfopuly_09","bookKey":"philokalia","bookTitle":"   .  ","author":"     , ","subtitle":" 5","initialTitle":"     , . 9.  ,   ","title":" ,   ","chapter":"9","nr":"93","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/094_Kallist_Patriarh_I_Ignatiy_Ksanfopuly_09.mp3","length":"12:32","tags":[],"searchKeywords":[]},{"trackKey":"095_Kallist_Patriarh_I_Ignatiy_Ksanfopuly_10","bookKey":"philokalia","bookTitle":"   .  ","author":"     , ","subtitle":" 5","initialTitle":"     , . 10.  ,   ","title":" ,   ","chapter":"10","nr":"94","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/095_Kallist_Patriarh_I_Ignatiy_Ksanfopuly_10.mp3","length":"18:23","tags":[],"searchKeywords":[]},{"trackKey":"096_Kallist_Patriarh_I_Ignatiy_Ksanfopuly_11","bookKey":"philokalia","bookTitle":"   .  ","author":"     , ","subtitle":" 5","initialTitle":"     , . 11.  ,   ","title":" ,   ","chapter":"11","nr":"95","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/096_Kallist_Patriarh_I_Ignatiy_Ksanfopuly_11.mp3","length":"14:36","tags":[],"searchKeywords":[]},{"trackKey":"097_Kallist_Patriarh_I_Ignatiy_Ksanfopuly_12","bookKey":"philokalia","bookTitle":"   .  ","author":"     , ","subtitle":" 5","initialTitle":"     , . 12.  ,   ","title":" ,   ","chapter":"12","nr":"96","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/097_Kallist_Patriarh_I_Ignatiy_Ksanfopuly_12.mp3","length":"14:51","tags":[],"searchKeywords":[]},{"trackKey":"098_Kallist_Patriarh_I_Ignatiy_Ksanfopuly_13","bookKey":"philokalia","bookTitle":"   .  ","author":"     , ","subtitle":" 5","initialTitle":"     , . 13.  ,   ","title":" ,   ","chapter":"13","nr":"97","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/098_Kallist_Patriarh_I_Ignatiy_Ksanfopuly_13.mp3","length":"10:23","tags":[],"searchKeywords":[]},{"trackKey":"099_Kallist_Patriarh_I_Ignatiy_Ksanfopuly_14","bookKey":"philokalia","bookTitle":"   .  ","author":"     , ","subtitle":" 5","initialTitle":"     , . 14.  ,   ","title":" ,   ","chapter":"14","nr":"98","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/099_Kallist_Patriarh_I_Ignatiy_Ksanfopuly_14.mp3","length":"08:24","tags":[],"searchKeywords":[]},{"trackKey":"100_Kallist_Patriarh_I_Ignatiy_Ksanfopuly_15","bookKey":"philokalia","bookTitle":"   .  ","author":"     , ","subtitle":" 5","initialTitle":"     , . 15.  ,   ","title":" ,   ","chapter":"15","nr":"99","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/100_Kallist_Patriarh_I_Ignatiy_Ksanfopuly_15.mp3","length":"11:02","tags":[],"searchKeywords":[]},{"trackKey":"101_Kallist_Patriarh_I_Ignatiy_Ksanfopuly_16","bookKey":"philokalia","bookTitle":"   .  ","author":"     , ","subtitle":" 5","initialTitle":"     , . 16.  ,   ","title":" ,   ","chapter":"16","nr":"100","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/101_Kallist_Patriarh_I_Ignatiy_Ksanfopuly_16.mp3","length":"14:10","tags":[],"searchKeywords":[]},{"trackKey":"102_Kallist_Patriarh_I_Ignatiy_Ksanfopuly_17","bookKey":"philokalia","bookTitle":"   .  ","author":"     , ","subtitle":" 5","initialTitle":"     , . 17.  ,   ","title":" ,   ","chapter":"17","nr":"101","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/102_Kallist_Patriarh_I_Ignatiy_Ksanfopuly_17.mp3","length":"11:01","tags":[],"searchKeywords":[]},{"trackKey":"103_Kallist_Patriarh_I_Ignatiy_Ksanfopuly_18","bookKey":"philokalia","bookTitle":"   .  ","author":"     , ","subtitle":" 5","initialTitle":"     , . 18.  ,   ","title":" ,   ","chapter":"18","nr":"102","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/103_Kallist_Patriarh_I_Ignatiy_Ksanfopuly_18.mp3","length":"28:26","tags":[],"searchKeywords":[]},{"trackKey":"104_Kallist_Patriarh_I_Ignatiy_Ksanfopuly_19","bookKey":"philokalia","bookTitle":"   .  ","author":"     , ","subtitle":" 5","initialTitle":"     , . 19.  ,   ","title":" ,   ","chapter":"19","nr":"103","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/104_Kallist_Patriarh_I_Ignatiy_Ksanfopuly_19.mp3","length":"13:27","tags":[],"searchKeywords":[]},{"trackKey":"105_Kallist_Patriarh_I_Ignatiy_Ksanfopuly_20","bookKey":"philokalia","bookTitle":"   .  ","author":"     , ","subtitle":" 5","initialTitle":"     , . 20.  ,   ","title":" ,   ","chapter":"20","nr":"104","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/105_Kallist_Patriarh_I_Ignatiy_Ksanfopuly_20.mp3","length":"12:02","tags":[],"searchKeywords":[]},{"trackKey":"106_Kallist_Patriarh_I_Ignatiy_Ksanfopuly_21","bookKey":"philokalia","bookTitle":"   .  ","author":"     , ","subtitle":" 5","initialTitle":"     , . 21.  ,   ","title":" ,   ","chapter":"21","nr":"105","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/106_Kallist_Patriarh_I_Ignatiy_Ksanfopuly_21.mp3","length":"11:07","tags":[],"searchKeywords":[]},{"trackKey":"107_Kallist_Patriarh_I_Ignatiy_Ksanfopuly_22","bookKey":"philokalia","bookTitle":"   .  ","author":"     , ","subtitle":" 5","initialTitle":"     , . 22.  ,   ","title":" ,   ","chapter":"22","nr":"106","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/107_Kallist_Patriarh_I_Ignatiy_Ksanfopuly_22.mp3","length":"16:06","tags":[],"searchKeywords":[]},{"trackKey":"108_Kallist_Patriarh_I_Ignatiy_Ksanfopuly_23","bookKey":"philokalia","bookTitle":"   .  ","author":"     , ","subtitle":" 5","initialTitle":"     , . 23.  ,   ","title":" ,   ","chapter":"23","nr":"107","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/108_Kallist_Patriarh_I_Ignatiy_Ksanfopuly_23.mp3","length":"18:56","tags":[],"searchKeywords":[]},{"trackKey":"109_Kallist_Patriarh_I_Ignatiy_Ksanfopuly_24","bookKey":"philokalia","bookTitle":"   .  ","author":" , ","subtitle":" 5","initialTitle":" , .   ","title":" , .   ","chapter":"  ","nr":"108","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/109_Kallist_Patriarh_I_Ignatiy_Ksanfopuly_24.mp3","length":"07:05","tags":[],"searchKeywords":[]},{"trackKey":"110_Kallist_Patriarh_I_Ignatiy_Ksanfopuly_25","bookKey":"philokalia","bookTitle":"   .  ","author":"  ","subtitle":" 5","initialTitle":"  . 1.   ","title":"  ","chapter":"1","nr":"109","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/110_Kallist_Patriarh_I_Ignatiy_Ksanfopuly_25.mp3","length":"15:48","tags":[],"searchKeywords":[]},{"trackKey":"111_Kallist_Patriarh_I_Ignatiy_Ksanfopuly_26","bookKey":"philokalia","bookTitle":"   .  ","author":"  ","subtitle":" 5","initialTitle":"  . 2.     (   ).","title":"    (   )","chapter":"2","nr":"110","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/111_Kallist_Patriarh_I_Ignatiy_Ksanfopuly_26.mp3","length":"09:38","tags":[],"searchKeywords":[]},{"trackKey":"112_Blazhennyy_Simeon_Arkhiepiskop_Solunskiy_01","bookKey":"philokalia","bookTitle":"   .  ","author":"&nbsp;,  ","subtitle":" 5","initialTitle":"&nbsp;,  . 1.   ","title":"  ","chapter":"1","nr":"111","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/112_Blazhennyy_Simeon_Arkhiepiskop_Solunskiy_01.mp3","length":"17:15","tags":[],"searchKeywords":[]},{"trackKey":"113_Blazhennyy_Simeon_Arkhiepiskop_Solunskiy_02","bookKey":"philokalia","bookTitle":"   .  ","author":"&nbsp;,  ","subtitle":" 5","initialTitle":"&nbsp;,  . 2.    !","title":"   !","chapter":"2","nr":"112","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/113_Blazhennyy_Simeon_Arkhiepiskop_Solunskiy_02.mp3","length":"11:16","tags":[],"searchKeywords":[]},{"trackKey":"114_Svt_Simeon_Novyy_Bogoslov_01","bookKey":"philokalia","bookTitle":"   .  ","author":" ,  ","subtitle":" 5","initialTitle":" ,  . 1.  ,   ,  ,         ","title":" ,   ,  ,         ","chapter":"1","nr":"113","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/114_Svt_Simeon_Novyy_Bogoslov_01.mp3","length":"26:20","tags":[],"searchKeywords":[]},{"trackKey":"115_Svt_Simeon_Novyy_Bogoslov_02","bookKey":"philokalia","bookTitle":"   .  ","author":" ,  ","subtitle":" 5","initialTitle":" ,  . 2.      ","title":"     ","chapter":"2","nr":"114","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/115_Svt_Simeon_Novyy_Bogoslov_02.mp3","length":"24:55","tags":[],"searchKeywords":[]},{"trackKey":"116_Iz_Zhitiya_Prp_Maksima_Kapsokalivita","bookKey":"philokalia","bookTitle":"   .  ","author":"  ","subtitle":" 5","initialTitle":"  .    .    ","title":"   ","chapter":"   ","nr":"115","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/116_Iz_Zhitiya_Prp_Maksima_Kapsokalivita.mp3","length":"09:48","tags":[],"searchKeywords":[]},{"trackKey":"117_Iz_Zhitiya_Svt_Grigoriya_Palamy","bookKey":"philokalia","bookTitle":"   .  ","author":"  ","subtitle":" 5","initialTitle":"  .  ,  .  ,       ","title":" ,       ","chapter":" ,  ","nr":"116","url":"https://azbyka.ru/audio/audio1/knigi/feofan_zatvornik/tom-5/117_Iz_Zhitiya_Svt_Grigoriya_Palamy.mp3","length":"13:41","tags":[],"searchKeywords":[]}]');class si{constructor(e){e?(this.trackKey=e.trackKey,this.bookKey=e.bookKey,this.bookTitle=e.bookTitle,this.author=e.author,this.subtitle=e.subtitle,this.title=e.title,this.initialTitle=e.initialTitle,this.chapter=e.chapter,this.nr=e.nr,this.url=e.url,this.length=e.length,this.tags=e.tags,this.searchKeywords=[]):(this.trackKey="",this.bookKey="",this.bookTitle="",this.author="",this.subtitle="",this.title="",this.initialTitle="",this.chapter="",this.nr=0,this.url="",this.length=0,this.tags=[],this.searchKeywords=[])}getMeta(){return{trackKey:this.trackKey,bookKey:this.bookKey,bookTitle:this.bookTitle,author:this.author,subtitle:this.subtitle,title:this.title,initialTitle:this.initialTitle,chapter:this.chapter,url:this.url,length:this.length,nr:this.nr,tags:this.tags,searchKeywords:this.searchKeywords}}save(e){const t=e||this.bookKey;new Vo(t,this.getMeta()).save()}update(e){const t=e||this.bookKey;new Vo(t,this.getMeta()).update()}async get(e){console.log("get() from Track");const r=await new Vo(e.source).get(e),i=[];return r.forEach(s=>{i.push(new si(s))}),i}async getOnKey(e,t){console.log("getOnKey() from Track");const i=await new Vo(e).getOnKey(t);return new si(i)}}const XB={name:"Upload",data(){return{destinationCollection:"philokalia",is_dragover:!1,uploads:[]}},methods:{upload(n){this.is_dragover=!1,[...n.dataTransfer.files].forEach(t=>{if(t.type==="audio/mpeg"){const s=OA.ref("audio").child(`${t.name}`).put(t),o=this.uploads.push({task:s,current_progress:0,name:t.name,variant:"bg-blue-400",icon:"fas fa-spinner fa-spin",cancel_icon:"fas fa-window-close",text_class:""})-1;s.on("state_changed",a=>{this.uploads[o].current_progress=a.bytesTransferred/a.totalBytes*100},a=>{this.uploads[o].variant="bg-red-400",this.uploads[o].icon="fas fa-times",this.uploads[o].text_class="text-red-400",console.log(a)},async()=>{const a={user_uid:Ni.currentUser.uid,user_name:Ni.currentUser.displayName,track_original_name:s.snapshot.ref.name,track_modified_name:s.snapshot.ref.name,genre:"",comment_count:0};a.url=await s.snapshot.ref.getDownloadURL();const l=await wh.add(a);console.log(`Upload.vue: Uploaded track to firebase: ${a.track_original_name}`),this.uploads[o].variant="bg-green-400",this.uploads[o].icon="fas fa-check",this.uploads[o].text_class="text-green-400";const h=await l.get(),f={trackKey:h.id,...h.data()};this.$emit("track-add",f)})}})},savePlaylistFakeData(){YB.defaultPlaylist().forEach(n=>{new si(n).save(this.destinationCollection)})},savePlaylistFromJson(){JB.forEach(n=>{new si(n).save(this.destinationCollection)})},cancelAllUploads(){this.uploads.forEach(n=>{n.task.cancel()})},beforeUnmount(){this.cancelAllUploads()}}},ZB={class:"bg-white rounded border border-gray-200 relative flex flex-col"},e5={class:"px-6 pt-6 pb-5 font-bold border-b border-gray-200"},t5={class:"p-6"},n5={class:"flex h-4 overflow-hidden bg-gray-200 rounded"};function r5(n,e,t,r,i,s){return Ee(),Ae("div",ZB,[K("div",e5,[e[9]||(e[9]=K("span",{class:"card-title"},"Upload",-1)),K("i",{class:"fas fa-upload float-right text-green-400 text-2xl",onClick:e[0]||(e[0]=(...o)=>s.savePlaylistFromJson&&s.savePlaylistFromJson(...o))})]),K("div",t5,[K("div",{class:en(["w-full px-10 py-20 rounded text-center cursor-pointer border border-dashed border-gray-400 text-gray-400 transition duration-500 hover:text-white hover:bg-green-400 hover:border-green-400 hover:border-solid",{"bg-green-400 border-green-400 border-solid":i.is_dragover}]),onDrag:e[1]||(e[1]=_t(()=>{},["prevent","stop"])),onDragstart:e[2]||(e[2]=_t(()=>{},["prevent","stop"])),onDragend:e[3]||(e[3]=_t(o=>i.is_dragover=!1,["prevent","stop"])),onDragover:e[4]||(e[4]=_t(o=>i.is_dragover=!0,["prevent","stop"])),onDragenter:e[5]||(e[5]=_t(o=>i.is_dragover=!0,["prevent","stop"])),onDragleave:e[6]||(e[6]=_t(o=>i.is_dragover=!1,["prevent","stop"])),onDrop:e[7]||(e[7]=_t(o=>s.upload(o),["prevent","stop"]))},e[10]||(e[10]=[K("h5",null,"Drop your files here",-1)]),34),e[11]||(e[11]=K("hr",{class:"my-6"},null,-1)),(Ee(!0),Ae(Bt,null,Fs(i.uploads,o=>(Ee(),Ae("div",{class:"mb-4",key:o.name},[K("div",{class:en(["font-bold text-sm",o.text_class])},[K("i",{class:en(o.icon)},null,2),K("i",{class:en(o.cancel_icon),onClick:e[8]||(e[8]=(...a)=>s.cancelAllUploads&&s.cancelAllUploads(...a))},null,2),Qr(lt(o.name),1)],2),K("div",n5,[K("div",{class:en(["transition-all progress-bar",o.variant]),style:Ho({width:o.current_progress+"%"})},null,6)])]))),128))])])}const i5=zt(XB,[["render",r5]]),s5={name:"Track",data(){return{showEditForm:!1,valSchema:{track_modified_name:"required|max:100",genre:"alpha_spaces"},initialTrackData:{track_modified_name:this.track.track_modified_name,genre:this.track.genre},track_in_submission:!1,track_show_alert:!1,track_alert_variant:"bg-blue-50",track_alert_message:"Please wait! Processing track update..."}},props:{track:{type:Object,required:!0}},methods:{async updateTrack(n){console.log("Track.vue: Updating track in firebase db"),this.track_show_alert=!0,this.track_in_submission=!0,this.track_alert_variant="bg-blue-50",this.track_alert_message="Please wait! Processing registration...";try{await wh.doc(this.track.trackKey).update(n)}catch(e){this.track_in_submission=!1,this.track_alert_variant="bg-red-50",this.track_alert_message=`Unexpected error during update... Error message: ${e.message}`,console.log(e);return}this.track_alert_variant="bg-green-50",this.track_alert_message="Track was updated!",setTimeout(()=>{this.track_in_submission=!1;const e={...n};this.$emit("track-updated",e),this.$emit("unsaved-data",!1)},1e3)},async deleteTrack(){console.log("Track.vue: Deleting track in firebase db"),await OA.ref().child(`audio/${this.track.track_original_name}`).delete(),await wh.doc(this.track.trackKey).delete(),this.$emit("track-remove",this.track.trackKey)}}},o5={class:"border border-gray-200 p-3 mb-4 rounded"},a5={class:"inline-block text-1xl font-bold"},l5={class:"mb-3"},u5={class:"mb-3"},c5=["disabled"],h5=["disabled"];function d5(n,e,t,r,i,s){const o=st("vee-field"),a=st("ErrorMessage"),l=st("vee-form");return Ee(),Ae("div",o5,[Bl(K("div",null,[K("h4",a5,lt(t.track.track_modified_name),1),K("button",{class:"ml-1 py-1 px-2 text-sm rounded text-white bg-red-600 float-right",onClick:e[0]||(e[0]=_t((...h)=>s.deleteTrack&&s.deleteTrack(...h),["prevent"]))},e[5]||(e[5]=[K("i",{class:"fa fa-times"},null,-1)])),K("button",{class:"ml-1 py-1 px-2 text-sm rounded text-white bg-blue-600 float-right",onClick:e[1]||(e[1]=_t(h=>i.showEditForm=!i.showEditForm,["prevent"]))},e[6]||(e[6]=[K("i",{class:"fa fa-pencil-alt"},null,-1)]))],512),[[jl,!i.showEditForm]]),i.track_show_alert?(Ee(),Ae("div",{key:0,class:en(["text white text-center font-bold p-5 mb-4",i.track_alert_variant])},lt(i.track_alert_message),3)):xn("",!0),Bl(K("div",null,[Te(l,{"validation-schema":i.valSchema,onSubmit:s.updateTrack,"initial-values":i.initialTrackData},{default:ar(()=>[K("div",l5,[e[7]||(e[7]=K("label",{class:"inline-block mb-2"},"Song Title",-1)),Te(o,{type:"text",name:"track_modified_name",class:"block w-full py-1.5 px-3 text-gray-800 border border-gray-300 transition duration-500 focus:outline-none focus:border-black rounded",placeholder:"Enter Song Title",onInput:e[2]||(e[2]=h=>this.$emit("unsaved-data",!0))}),Te(a,{class:"text-red-600",name:"track_modified_name"})]),K("div",u5,[e[8]||(e[8]=K("label",{class:"inline-block mb-2"},"Genre",-1)),Te(o,{type:"text",name:"genre",class:"block w-full py-1.5 px-3 text-gray-800 border border-gray-300 transition duration-500 focus:outline-none focus:border-black rounded",placeholder:"Enter Genre",onInput:e[3]||(e[3]=h=>this.$emit("unsaved-data",!0))}),Te(a,{class:"text-red-600",name:"genre"})]),K("button",{type:"submit",class:"py-1.5 px-3 rounded text-white bg-green-600",disabled:i.track_in_submission}," Submit ",8,c5),K("button",{type:"button",class:"py-1.5 px-3 rounded text-white bg-gray-600",disabled:i.track_in_submission,onClick:e[4]||(e[4]=_t(h=>{i.showEditForm=!1,i.track_show_alert=!1},["prevent"]))}," Go Back ",8,h5)]),_:1},8,["validation-schema","onSubmit","initial-values"])],512),[[jl,i.showEditForm]])])}const f5=zt(s5,[["render",d5]]),p5={name:"Manage",components:{AppFileUpload:i5,AppTrackToManage:f5},data(){return{userTracksList:[],unsavedDataFlag:!1}},methods:{addTrackToList(n){const e=n;console.log(n),this.userTracksList.push(e)},updateTrackInList(n){this.userTracksList[n.arrayId].track_modified_name=n.track_modified_name,this.userTracksList[n.arrayId].genre=n.genre},removeTrackFromList(n){const e=this.userTracksList.findIndex(t=>t.trackKey===n);this.userTracksList.splice(e,1)},updateUnsavedDataFlag(n){this.unsavedDataFlag=n}},beforeRouteEnter(n,e,t){console.log("beforeRouteEnter Guard / defined in component vue"),t()},beforeRouteLeave(n,e,t){if(!this.unsavedDataFlag)t();else{const r=confirm("Sie haben noch nicht gespeichert! Seite trotzdem verlassen?");t(r)}},async created(){console.log("Entering >created< lifecycle function in Manage"),console.log("...quering firebase for user track list"),(await wh.where("user_uid","==",Ni.currentUser.uid).get()).forEach(e=>{const t={...e.data()};this.addTrackToList(t)})}},_5={class:"container mx-auto mt-6"},g5={class:"md:grid md:grid-cols-3 md:gap-4"},m5={class:"col-span-1"},y5={class:"col-span-2"},v5={class:"bg-white rounded border border-gray-200 relative flex flex-col"},T5={class:"p-6"};function b5(n,e,t,r,i,s){const o=st("app-file-upload"),a=st("app-track-to-manage");return Ee(),Ae("div",null,[K("section",_5,[K("div",g5,[K("div",m5,[Te(o,{onTrackAdd:s.addTrackToList},null,8,["onTrackAdd"])]),K("div",y5,[K("div",v5,[e[0]||(e[0]=K("div",{class:"px-6 pt-6 pb-5 font-bold border-b border-gray-200"},[K("span",{class:"card-title"},"My Songs"),K("i",{class:"fa fa-compact-disc float-right text-green-400 text-2xl"})],-1)),K("div",T5,[(Ee(!0),Ae(Bt,null,Fs(i.userTracksList,l=>(Ee(),Ae("div",{key:l.trackKey},[Te(a,{track:l,onTrackUpdated:s.updateTrackInList,onTrackRemove:s.removeTrackFromList,onUnsavedData:s.updateUnsavedDataFlag},null,8,["track","onTrackUpdated","onTrackRemove","onUnsavedData"])]))),128))])])])])])])}const w5=zt(p5,[["render",b5]]),_l={formatSecToTimerValue(n){const e=Math.floor(n/60)||0,t=Math.round(n-e*60||0),r=`${t<10?"0":""}${t}`;return`${`${e<10?"0":""}${e}`}:${r}`},formatTimerValueToSec(n){try{const e=parseInt(n.split(":")[0],10),t=parseInt(n.split(":")[1],10);return e*60+t}catch(e){return console.log("Error in formatTimerValueToSec"),console.log(e),0}},stringLimiter(n,e){return n.length<e?n:`${n.substring(0,e)}...`}},I5={name:"TrackToPlay",props:{track:{type:Object,required:!0}},computed:{bookmarks(){return this.track.tags.filter(n=>n.isBookmarked===!0)},anyTags(){return this.track.tags.length>0},title(){return _l.stringLimiter(this.track.title,55)}}},E5={class:"justify-between items-center p-2 pl-6 cursor-pointer transition duration-300 hover:bg-gray-50"},k5={class:"md:flex"},A5={class:"md:w-5/12 px-1"},S5={class:"md:w-4/12 px-1"},R5={class:"text-gray-400 pr-3 md:w-3/12 md:text-right"},P5=["title"],C5={key:0,class:"px-1",title:"  "},x5={key:1},O5={key:2,class:"px-1",title:"  "},N5={class:"bg-gray-400 text-white px-1 rounded-md text-center"};function V5(n,e,t,r,i,s){const o=st("router-link");return Ee(),Ae("li",E5,[Te(o,{to:{name:"track",params:{book_id:t.track.bookKey,track_id:t.track.trackKey}},class:"font-bold block text-gray-600 tst-track-name"},{default:ar(()=>[K("div",k5,[K("div",A5,"  "+lt(this.track.chapter)+": "+lt(s.title),1),K("div",S5,lt(this.track.author),1),e[0]||(e[0]=K("div",null,null,-1)),K("div",R5,[(Ee(!0),Ae(Bt,null,Fs(t.track.tags,a=>(Ee(),Ae("span",{key:a.tagKey},[Te(o,{to:{name:"track_tag",params:{book_id:t.track.bookKey,track_id:t.track.trackKey,tag_id:a.tagKey}}},{default:ar(()=>[a.isBookmarked?(Ee(),Ae("i",{key:0,title:a.displayName,class:"fas fa-star pr-1 text-yellow-300 text-2xl"},null,8,P5)):xn("",!0)]),_:2},1032,["to"])]))),128)),s.anyTags?(Ee(),Ae("span",C5,lt(this.bookmarks.length),1)):xn("",!0),s.anyTags?(Ee(),Ae("span",x5,"|")):xn("",!0),s.anyTags?(Ee(),Ae("span",O5,lt(this.track.tags.length),1)):xn("",!0),K("span",N5,lt(this.track.length),1)])])]),_:1},8,["to"])])}const D5=zt(I5,[["render",V5]]),M5={name:"Book",components:{AppTrackToPlay:D5},props:["book_id"],data(){return{currentBook:"philokalia",userTracksList:[],maxTracksPerPage:40}},methods:{...f_(["updatePlaylist"]),async getTracks(n){let e=[];try{const t=new si;if(this.userTracksList.length){const{trackKey:r}=this.userTracksList[this.userTracksList.length-1];console.log(r),e=await t.get({source:n,numberOfItems:this.maxTracksPerPage,startAfterKey:r,sortOnColumn:"trackKey"})}else console.log("Book1 - get first portion"),e=await t.get({source:n,numberOfItems:this.maxTracksPerPage,sortOnColumn:"trackKey"});e.forEach(r=>{const i=new si({...r});this.userTracksList.push(i)})}catch(t){console.log(`Error while quering tracks from database: ${t.message}`)}return this.updatePlaylist({meta:this.currentBook,trackArray:this.userTracksList}),e.length},handleTrackListScroll(){const{innerHeight:n}=window,{scrollTop:e,offsetHeight:t}=document.documentElement,r=Math.round(e)+n;console.log(`left: ${r} right: ${t}`),Math.round(e)+n>t-5&&(console.log("Bottom of page reached! Geting max number of tracks from firebase..."),this.getTracks(this.currentBook))}},async created(){let n=0;const e=this.$route.params.book_id;e&&(n=await this.getTracks(e)),console.log("Current book"),console.log(e),n<1?this.getTracks(e):this.currentBook=e,window.addEventListener("scroll",this.handleTrackListScroll)},beforeUnmount(){window.removeEventListener("scroll",this.handleTrackListScroll)}},L5={class:"container mx-auto"},F5={class:"bg-white rounded border border-gray-200 relative flex flex-col"},U5={id:"playlist"};function K5(n,e,t,r,i,s){const o=st("app-track-to-play");return Ee(),Ae("div",null,[e[0]||(e[0]=kw('<section class="mb-8 py-20 text-white text-center relative"><div class="absolute inset-0 w-full h-full bg-cover introduction-bg" style="background-image:url(&#39;/SlavoPlayer/src/assets/song-header.png&#39;);"></div><div class="container mx-auto"><div class="z-50 text-left ml-8"><div class="text-3xl md:text-5xl font-bold">    .   </div></div></div></section>',1)),K("section",L5,[K("div",F5,[K("ol",U5,[(Ee(!0),Ae(Bt,null,Fs(i.userTracksList,a=>(Ee(),Wo(o,{key:a.trackKey,track:a},null,8,["track"]))),128))])])])])}const B5=zt(M5,[["render",K5]]);class Mp{constructor(e){this.displayName=e,this.tagKey=this.generateKeyFromTitle(e),this.sysTag=!0,this.isBookmarked=!0,this.position=0,this.tagMapper=new Vo(this.getMeta())}generateKeyFromTitle(e){const t=String(e);return console.log(t),t}getMeta(){return{tagKey:this.tagKey,displayName:this.displayName,sysTag:this.sysTag,isBookmarked:this.isBookmarked,position:this.position}}save(){this.tagMapper.save()}async get(e){return console.log("Get tag handler"),await this.tagMapper.get(e)}}const $5={name:"TrackTagToSelect",props:{tag:{type:Object,required:!0}},methods:{clickOnTagHandler(){console.log("clickOnTagHandler()"),console.log(this.tag),this.$emit("tag-add",this.tag)}}};function z5(n,e,t,r,i,s){return Ee(),Ae("a",{href:"#",onClick:e[0]||(e[0]=_t((...o)=>s.clickOnTagHandler&&s.clickOnTagHandler(...o),["prevent"]))},lt(this.tag.displayName),1)}const j5=zt($5,[["render",z5]]),q5={name:"TrackTagToDisplay",props:{tag:{type:Object,required:!0},isCurrentTag:{type:Boolean,required:!0}},methods:{clickOnTagHandler(){this.$emit("tag-click",this.tag)}},async created(){console.log("Tag to display created")}},G5={key:0,class:"fas fa-star pr-1 text-yellow-300"};function H5(n,e,t,r,i,s){return Ee(),Ae("div",{class:en(["inline-block px-3 mx-1 mb-2 text-gray-800 bg-gray-200 transition duration-500 focus:outline-none focus:border-black rounded border cursor-pointer",t.isCurrentTag?"border-yellow-400":"border-gray-300"]),title:"       ",onClick:e[0]||(e[0]=_t((...o)=>s.clickOnTagHandler&&s.clickOnTagHandler(...o),["prevent"]))},[t.tag.isBookmarked?(Ee(),Ae("i",G5)):xn("",!0),Qr(" "+lt(this.tag.displayName),1)],2)}const W5=zt(q5,[["render",H5]]),Q5={name:"TrackTagsList",components:{AppTrackTagToSelect:j5,AppTrackTagToDisplay:W5},data(){return{savedTrackPosition:0,tagSearchIsActive:!1,allTags:[],currentTagKey:"",showTagDropdown:!1}},props:{parentTrack:{type:Object,required:!0}},computed:{...d_(["currentTrackPosition"])},methods:{handleOnTagClick(n){console.log("handleOnTagClick(clickedTag)"),this.$emit("tag-click"),this.currentTagKey!==n.tagKey&&(this.currentTagKey=n.tagKey,console.log("Loading TagEditForm via route call"),this.$router.push({name:"track_tag",params:{book_id:this.parentTrack.bookKey,track_id:this.parentTrack.trackKey,tag_id:this.currentTagKey}}))},async handleTagDropDownClick(){if(this.showTagDropdown=!this.showTagDropdown,this.savedTrackPosition=this.currentTrackPosition,!this.tagSearchIsActive&&!this.allTags[0]){const n=new Mp;this.allTags=await n.get({sortOnColumn:"displayName"}),console.log("Global tag list loaded:"),this.allTags.forEach(e=>{console.log(e.displayName)})}this.tagSearchIsActive=!this.tagSearchIsActive},filterTags(){const e=document.getElementById("newTagInput").value.toUpperCase(),r=document.getElementById("tagsDropdown").getElementsByTagName("a");for(let i=0;i<r.length;i++)(r[i].textContent||r[i].innerText).toUpperCase().indexOf(e)>-1?r[i].style.display="":r[i].style.display="none"},createNewTag(){console.log("createNewTag");const e=document.getElementById("newTagInput").value;console.log(e);const t=new Mp(e);t.save(),this.addNewTag(t.getMeta())},addNewTag(n){console.log("addNewTag");const e=n;e.position=this.currentTrackPosition,console.log(e),this.$emit("add-tag",e)}},async created(){console.log("TrackTags vue created"),this.$route.params.tag_id&&(this.currentTagKey=this.$route.params.tag_id)}},Y5={class:"container mx-auto mt-6",id:"tags"},J5={class:"md:grid md:grid-cols-4 md:gap-4"},X5={key:0,id:"tagsDropdown",class:"dropdown-content"},Z5={class:"col-span-4 inline-block"},e$=["title"];function t$(n,e,t,r,i,s){const o=st("app-track-tag-to-select"),a=st("app-track-tag-to-display");return Ee(),Ae("section",Y5,[K("div",J5,[i.showTagDropdown?(Ee(),Ae("div",X5,[K("input",{type:"text",placeholder:"Search..",id:"newTagInput",onKeyup:[e[0]||(e[0]=MP((...l)=>s.createNewTag&&s.createNewTag(...l),["enter"])),e[1]||(e[1]=(...l)=>s.filterTags&&s.filterTags(...l))]},null,32),(Ee(!0),Ae(Bt,null,Fs(i.allTags,l=>(Ee(),Wo(o,{onTagAdd:s.addNewTag,key:l.tagKey,tag:l},null,8,["onTagAdd","tag"]))),128))])):xn("",!0),K("div",Z5,[K("i",{title:i.showTagDropdown?"  ":"   ",class:en(["fa text-3xl px-5",i.showTagDropdown?"fa-minus-circle":"fa-plus-circle"]),onClick:e[2]||(e[2]=(...l)=>s.handleTagDropDownClick&&s.handleTagDropDownClick(...l))},null,10,e$),(Ee(!0),Ae(Bt,null,Fs(t.parentTrack.tags,l=>(Ee(),Wo(a,{key:l.tagKey,tag:l,isCurrentTag:i.currentTagKey===l.tagKey,onTagClick:s.handleOnTagClick},null,8,["tag","isCurrentTag","onTagClick"]))),128))])])])}const n$=zt(Q5,[["render",t$]]),r$={name:"TagEdit",props:{currentTag:{type:Object,required:!0}},methods:{clickOnRemoveTag(){console.log("clickOnRemoveTag"),this.$emit("tag-remove",this.currentTag)},clickOnToggleMode(){console.log("clickOnToggleMode"),this.$emit("tag-toggle-mode")},clickOnClose(){console.log("clickOnClose"),this.$emit("close-click")}},created(){console.log("created()")}},i$={class:"container mx-auto mt-6"},s$={class:"bg-white rounded border border-gray-200 relative flex flex-col"},o$={class:"px-6 pt-6 pb-5 border-b border-gray-200"},a$={class:"card-title"},l$={class:"font-bold"},u$={key:0,class:"fas fa-star pr-2 text-yellow-300"},c$={class:"card-title",title:"     :    "},h$={key:0,class:"font-bold"},d$={key:1,class:"font-bold"},f$={class:"p-6"};function p$(n,e,t,r,i,s){return Ee(),Ae("section",i$,[K("div",s$,[K("div",o$,[K("span",a$,[e[3]||(e[3]=Qr(" : ")),K("span",l$,lt(this.currentTag.displayName),1)]),K("div",{class:"modal-close cursor-pointer z-50 float-right",onClick:e[0]||(e[0]=_t((...o)=>s.clickOnClose&&s.clickOnClose(...o),["prevent"])),title:"  "},e[4]||(e[4]=[K("i",{class:"fas fa-times"},null,-1)])),K("div",{class:"cursor-pointer pt-3",onClick:e[1]||(e[1]=_t((...o)=>s.clickOnToggleMode&&s.clickOnToggleMode(...o),["prevent"]))},[t.currentTag.isBookmarked?(Ee(),Ae("i",u$)):xn("",!0),K("span",c$,[e[5]||(e[5]=Qr("   (): ")),t.currentTag.isBookmarked?(Ee(),Ae("span",h$,"")):(Ee(),Ae("span",d$," "))])])]),K("div",f$,[e[6]||(e[6]=K("textarea",{rows:"3",class:"block w-full py-1.5 px-3 text-gray-800 border border-gray-300 transition duration-500 focus:outline-none focus:border-black rounded mb-4",placeholder:`   ''      
      .      
 .`},null,-1)),K("button",{class:"py-1.5 px-3 rounded text-white bg-red-400 block",onClick:e[2]||(e[2]=_t((...o)=>s.clickOnRemoveTag&&s.clickOnRemoveTag(...o),["prevent"]))},"   ")])])])}const _$=zt(r$,[["render",p$]]),g$={name:"TrackPlayer",emits:["change-track"],computed:{...d_(["trackIsPlaying"]),...h_(["currentTrack","currentPlaylist"])},methods:{...f_(["togglePlaying","updateSeek","playNextTrack","playPrevTrack"]),async playNext(){await this.playNextTrack(),console.log(`PlayNext Nr: ${this.currentTrack.meta.nr}`),this.$emit("change-track",this.currentTrack.meta)},async playPrev(){await this.playPrevTrack(),console.log(`PlayPrev Nr: ${this.currentTrack.meta.nr}`),this.$emit("change-track",this.currentTrack.meta)}}},m$={class:"flex justify-center"},y$={class:"flex text-gray-300 text-3xl m-5 space-x-6"},v$={class:"md:hidden text-gray-300 font-medium"},T$={class:"player-currenttime"},b$={class:"md:flex text-xl justify-center"},w$={class:"hidden md:block text-gray-300 pl-5"},I$={class:"player-currenttime"},E$={class:"w-full pt-3 pl-5 player-scrub"},k$={class:"hidden md:block text-gray-300 px-3"},A$={class:"player-duration"},S$={class:"text-lg text-center mt-3"},R$={key:0};function P$(n,e,t,r,i,s){return Ee(),Ae(Bt,null,[K("div",m$,[K("div",y$,[n.currentPlaylist.seek?(Ee(),Ae("button",{key:0,id:"play-prev",type:"button",onClick:e[0]||(e[0]=_t((...o)=>s.playPrev&&s.playPrev(...o),["prevent"]))},e[4]||(e[4]=[K("i",{class:"fa fa-fast-backward"},null,-1)]))):xn("",!0),K("button",{id:"play-player",type:"button",onClick:e[1]||(e[1]=_t((...o)=>n.togglePlaying&&n.togglePlaying(...o),["prevent"]))},[K("i",{class:en(["fa",{"fa-play":!n.trackIsPlaying,"fa-pause":n.trackIsPlaying}])},null,2)]),n.currentPlaylist.seek?(Ee(),Ae("button",{key:1,id:"play-next",type:"button",onClick:e[2]||(e[2]=_t((...o)=>s.playNext&&s.playNext(...o),["prevent"]))},e[5]||(e[5]=[K("i",{class:"fa fa-fast-forward"},null,-1)]))):xn("",!0),K("div",v$,[K("span",T$,lt(n.currentTrack.seek),1)])])]),K("div",b$,[K("div",w$,[K("span",I$,lt(n.currentTrack.seek),1)]),K("div",E$,[K("span",{class:"block w-full rounded bg-gray-500 relative cursor-pointer",onClick:e[3]||(e[3]=_t((...o)=>n.updateSeek&&n.updateSeek(...o),["prevent"]))},[K("span",{class:"absolute top-neg-8 text-gray-300 text-lg",style:Ho({left:n.currentTrack.seekPercentage})},e[6]||(e[6]=[K("i",{class:"fas fa-circle"},null,-1)]),4),K("span",{class:"block h-2 rounded bg-gradient-to-r from-green-500 to-green-400",style:Ho({width:n.currentTrack.seekPercentage})},null,4)])]),K("div",k$,[K("span",A$,lt(n.currentTrack.duration),1)])]),K("div",S$,[n.currentTrack.sound.playing?(Ee(),Ae("span",R$)):xn("",!0)])],64)}const C$=zt(g$,[["render",P$]]),x$={name:"Track",data(){return{track:new si,currentTag:new Mp,showTagEditForm:!1}},components:{AppTrackTagsList:n$,AppTagEdit:_$,AppTrackPlayer:C$},computed:{...d_(["trackIsPlaying","trackIsLoading"]),fullTitle(){return`${this.track.bookTitle} | ${this.track.subtitle} |  ${this.track.chapter}: ${this.track.title}`}},methods:{...f_(["changeTrack","togglePlaying","stopCurrentTrack"]),addTag(n){this.track.tags.push(n),this.currentTag=n,this.track.update()},async removeTag(n){console.log("removing Tag"),console.log(n);const e=this.track.tags.findIndex(t=>t.tagKey===n.tagKey);e>-1&&this.track.tags.splice(e,1),await this.track.update(),this.$router.push({name:"track",params:{book_id:this.track.bookKey,track_id:this.track.trackKey}})},handleChangeTrack(n){this.track=n,console.log(`newTrack in Track.vue handleChangeTrack:${n}`),document.title=this.fullTitle,this.$router.push({name:"track",params:{book_id:this.track.bookKey,track_id:this.track.trackKey}})},async handleTagModeChange(){console.log("// ToDo: add and remove Bookmark objects"),this.currentTag.isBookmarked=!this.currentTag.isBookmarked,console.log("Reset start track position"),this.currentTag.isBookmarked?this.changeTrack({track:this.track,currentTag:this.currentTag}):this.stopCurrentTrack(),this.track.update()}},async created(){try{const e=await new si().getOnKey(this.$route.params.book_id,this.$route.params.track_id);if(!e.trackKey){console.log("Track not found!"),this.$router.push({name:"home"});return}this.track=e,document.title=this.fullTitle;const t=this.track.tags?this.track.tags.find(r=>r.tagKey===this.$route.params.tag_id):{};if(!t){this.changeTrack({track:this.track});return}this.currentTag=t,console.log("// Set current tag"),console.log(this.currentTag.tagKey),this.showTagEditForm=!0,this.changeTrack({track:this.track,currentTag:this.currentTag})}catch(n){console.log(`Unexpected error during loading track... Error message: ${n.message}`),this.$router.push({name:"home"})}},mounted(){}},O$={class:"mx-auto bg-white shadow-md overflow-hidden bg-cover md:bg-contain introduction-bg text-gray-300 container items-center",style:{"background-image":"url('/SlavoPlayer/src/assets/song-header.png')"}},N$={class:"lg:flex"},V$={class:"p-4 md:py-8 text-center lg:w-1/2"},D$={class:"m-4 md:my-8 lg:w-1/2"},M$={class:"z-50 text-left ml-4 text-lg"},L$={class:"md:text-xl md:font-bold"},F$={class:"md:text-xl md:font-bold"},U$={class:"md:text-2xl font-bold"},K$={key:0,class:"sp-block-ui"};function B$(n,e,t,r,i,s){const o=st("app-track-player"),a=st("app-track-tags-list"),l=st("app-tag-edit");return Ee(),Ae(Bt,null,[K("section",O$,[K("div",N$,[K("div",V$,[Te(o,{onChangeTrack:s.handleChangeTrack},null,8,["onChangeTrack"])]),K("div",D$,[K("div",M$,[K("div",L$,lt(this.track.bookTitle)+" | "+lt(this.track.subtitle),1),K("div",F$,lt(this.track.author),1),K("div",U$,"  "+lt(this.track.chapter)+": "+lt(this.track.title),1)])])])]),Te(a,{parentTrack:i.track,onTagClick:e[0]||(e[0]=h=>this.showTagEditForm=!0),onAddTag:s.addTag},null,8,["parentTrack","onAddTag"]),Bl(Te(l,{currentTag:i.currentTag,onCloseClick:e[1]||(e[1]=h=>i.showTagEditForm=!1),onTagRemove:s.removeTag,onTagToggleMode:s.handleTagModeChange},null,8,["currentTag","onTagRemove","onTagToggleMode"]),[[jl,i.showTagEditForm]]),n.trackIsLoading?(Ee(),Ae("div",K$)):xn("",!0)],64)}const sb=zt(x$,[["render",B$]]),$$={},z$={class:"about"};function j$(n,e){return Ee(),Ae("div",z$,e[0]||(e[0]=[K("h1",null,"This is an about page",-1)]))}const q$=zt($$,[["render",j$]]);var ol=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Cf={};/*!
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */var ob;function G$(){return ob||(ob=1,function(n){(function(){var e=function(){this.init()};e.prototype={init:function(){var u=this||t;return u._counter=1e3,u._html5AudioPool=[],u.html5PoolSize=10,u._codecs={},u._howls=[],u._muted=!1,u._volume=1,u._canPlayEvent="canplaythrough",u._navigator=typeof window<"u"&&window.navigator?window.navigator:null,u.masterGain=null,u.noAudio=!1,u.usingWebAudio=!0,u.autoSuspend=!0,u.ctx=null,u.autoUnlock=!0,u._setup(),u},volume:function(u){var d=this||t;if(u=parseFloat(u),d.ctx||f(),typeof u<"u"&&u>=0&&u<=1){if(d._volume=u,d._muted)return d;d.usingWebAudio&&d.masterGain.gain.setValueAtTime(u,t.ctx.currentTime);for(var p=0;p<d._howls.length;p++)if(!d._howls[p]._webAudio)for(var m=d._howls[p]._getSoundIds(),T=0;T<m.length;T++){var v=d._howls[p]._soundById(m[T]);v&&v._node&&(v._node.volume=v._volume*u)}return d}return d._volume},mute:function(u){var d=this||t;d.ctx||f(),d._muted=u,d.usingWebAudio&&d.masterGain.gain.setValueAtTime(u?0:d._volume,t.ctx.currentTime);for(var p=0;p<d._howls.length;p++)if(!d._howls[p]._webAudio)for(var m=d._howls[p]._getSoundIds(),T=0;T<m.length;T++){var v=d._howls[p]._soundById(m[T]);v&&v._node&&(v._node.muted=u?!0:v._muted)}return d},stop:function(){for(var u=this||t,d=0;d<u._howls.length;d++)u._howls[d].stop();return u},unload:function(){for(var u=this||t,d=u._howls.length-1;d>=0;d--)u._howls[d].unload();return u.usingWebAudio&&u.ctx&&typeof u.ctx.close<"u"&&(u.ctx.close(),u.ctx=null,f()),u},codecs:function(u){return(this||t)._codecs[u.replace(/^x-/,"")]},_setup:function(){var u=this||t;if(u.state=u.ctx&&u.ctx.state||"suspended",u._autoSuspend(),!u.usingWebAudio)if(typeof Audio<"u")try{var d=new Audio;typeof d.oncanplaythrough>"u"&&(u._canPlayEvent="canplay")}catch{u.noAudio=!0}else u.noAudio=!0;try{var d=new Audio;d.muted&&(u.noAudio=!0)}catch{}return u.noAudio||u._setupCodecs(),u},_setupCodecs:function(){var u=this||t,d=null;try{d=typeof Audio<"u"?new Audio:null}catch{return u}if(!d||typeof d.canPlayType!="function")return u;var p=d.canPlayType("audio/mpeg;").replace(/^no$/,""),m=u._navigator?u._navigator.userAgent:"",T=m.match(/OPR\/(\d+)/g),v=T&&parseInt(T[0].split("/")[1],10)<33,I=m.indexOf("Safari")!==-1&&m.indexOf("Chrome")===-1,C=m.match(/Version\/(.*?) /),M=I&&C&&parseInt(C[1],10)<15;return u._codecs={mp3:!!(!v&&(p||d.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!p,opus:!!d.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!d.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!d.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(d.canPlayType('audio/wav; codecs="1"')||d.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!d.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!d.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(d.canPlayType("audio/x-m4a;")||d.canPlayType("audio/m4a;")||d.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(d.canPlayType("audio/x-m4b;")||d.canPlayType("audio/m4b;")||d.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(d.canPlayType("audio/x-mp4;")||d.canPlayType("audio/mp4;")||d.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!M&&d.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!M&&d.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!d.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(d.canPlayType("audio/x-flac;")||d.canPlayType("audio/flac;")).replace(/^no$/,"")},u},_unlockAudio:function(){var u=this||t;if(!(u._audioUnlocked||!u.ctx)){u._audioUnlocked=!1,u.autoUnlock=!1,!u._mobileUnloaded&&u.ctx.sampleRate!==44100&&(u._mobileUnloaded=!0,u.unload()),u._scratchBuffer=u.ctx.createBuffer(1,1,22050);var d=function(p){for(;u._html5AudioPool.length<u.html5PoolSize;)try{var m=new Audio;m._unlocked=!0,u._releaseHtml5Audio(m)}catch{u.noAudio=!0;break}for(var T=0;T<u._howls.length;T++)if(!u._howls[T]._webAudio)for(var v=u._howls[T]._getSoundIds(),I=0;I<v.length;I++){var C=u._howls[T]._soundById(v[I]);C&&C._node&&!C._node._unlocked&&(C._node._unlocked=!0,C._node.load())}u._autoResume();var M=u.ctx.createBufferSource();M.buffer=u._scratchBuffer,M.connect(u.ctx.destination),typeof M.start>"u"?M.noteOn(0):M.start(0),typeof u.ctx.resume=="function"&&u.ctx.resume(),M.onended=function(){M.disconnect(0),u._audioUnlocked=!0,document.removeEventListener("touchstart",d,!0),document.removeEventListener("touchend",d,!0),document.removeEventListener("click",d,!0),document.removeEventListener("keydown",d,!0);for(var U=0;U<u._howls.length;U++)u._howls[U]._emit("unlock")}};return document.addEventListener("touchstart",d,!0),document.addEventListener("touchend",d,!0),document.addEventListener("click",d,!0),document.addEventListener("keydown",d,!0),u}},_obtainHtml5Audio:function(){var u=this||t;if(u._html5AudioPool.length)return u._html5AudioPool.pop();var d=new Audio().play();return d&&typeof Promise<"u"&&(d instanceof Promise||typeof d.then=="function")&&d.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(u){var d=this||t;return u._unlocked&&d._html5AudioPool.push(u),d},_autoSuspend:function(){var u=this;if(!(!u.autoSuspend||!u.ctx||typeof u.ctx.suspend>"u"||!t.usingWebAudio)){for(var d=0;d<u._howls.length;d++)if(u._howls[d]._webAudio){for(var p=0;p<u._howls[d]._sounds.length;p++)if(!u._howls[d]._sounds[p]._paused)return u}return u._suspendTimer&&clearTimeout(u._suspendTimer),u._suspendTimer=setTimeout(function(){if(u.autoSuspend){u._suspendTimer=null,u.state="suspending";var m=function(){u.state="suspended",u._resumeAfterSuspend&&(delete u._resumeAfterSuspend,u._autoResume())};u.ctx.suspend().then(m,m)}},3e4),u}},_autoResume:function(){var u=this;if(!(!u.ctx||typeof u.ctx.resume>"u"||!t.usingWebAudio))return u.state==="running"&&u.ctx.state!=="interrupted"&&u._suspendTimer?(clearTimeout(u._suspendTimer),u._suspendTimer=null):u.state==="suspended"||u.state==="running"&&u.ctx.state==="interrupted"?(u.ctx.resume().then(function(){u.state="running";for(var d=0;d<u._howls.length;d++)u._howls[d]._emit("resume")}),u._suspendTimer&&(clearTimeout(u._suspendTimer),u._suspendTimer=null)):u.state==="suspending"&&(u._resumeAfterSuspend=!0),u}};var t=new e,r=function(u){var d=this;if(!u.src||u.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}d.init(u)};r.prototype={init:function(u){var d=this;return t.ctx||f(),d._autoplay=u.autoplay||!1,d._format=typeof u.format!="string"?u.format:[u.format],d._html5=u.html5||!1,d._muted=u.mute||!1,d._loop=u.loop||!1,d._pool=u.pool||5,d._preload=typeof u.preload=="boolean"||u.preload==="metadata"?u.preload:!0,d._rate=u.rate||1,d._sprite=u.sprite||{},d._src=typeof u.src!="string"?u.src:[u.src],d._volume=u.volume!==void 0?u.volume:1,d._xhr={method:u.xhr&&u.xhr.method?u.xhr.method:"GET",headers:u.xhr&&u.xhr.headers?u.xhr.headers:null,withCredentials:u.xhr&&u.xhr.withCredentials?u.xhr.withCredentials:!1},d._duration=0,d._state="unloaded",d._sounds=[],d._endTimers={},d._queue=[],d._playLock=!1,d._onend=u.onend?[{fn:u.onend}]:[],d._onfade=u.onfade?[{fn:u.onfade}]:[],d._onload=u.onload?[{fn:u.onload}]:[],d._onloaderror=u.onloaderror?[{fn:u.onloaderror}]:[],d._onplayerror=u.onplayerror?[{fn:u.onplayerror}]:[],d._onpause=u.onpause?[{fn:u.onpause}]:[],d._onplay=u.onplay?[{fn:u.onplay}]:[],d._onstop=u.onstop?[{fn:u.onstop}]:[],d._onmute=u.onmute?[{fn:u.onmute}]:[],d._onvolume=u.onvolume?[{fn:u.onvolume}]:[],d._onrate=u.onrate?[{fn:u.onrate}]:[],d._onseek=u.onseek?[{fn:u.onseek}]:[],d._onunlock=u.onunlock?[{fn:u.onunlock}]:[],d._onresume=[],d._webAudio=t.usingWebAudio&&!d._html5,typeof t.ctx<"u"&&t.ctx&&t.autoUnlock&&t._unlockAudio(),t._howls.push(d),d._autoplay&&d._queue.push({event:"play",action:function(){d.play()}}),d._preload&&d._preload!=="none"&&d.load(),d},load:function(){var u=this,d=null;if(t.noAudio){u._emit("loaderror",null,"No audio support.");return}typeof u._src=="string"&&(u._src=[u._src]);for(var p=0;p<u._src.length;p++){var m,T;if(u._format&&u._format[p])m=u._format[p];else{if(T=u._src[p],typeof T!="string"){u._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}m=/^data:audio\/([^;,]+);/i.exec(T),m||(m=/\.([^.]+)$/.exec(T.split("?",1)[0])),m&&(m=m[1].toLowerCase())}if(m||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),m&&t.codecs(m)){d=u._src[p];break}}if(!d){u._emit("loaderror",null,"No codec support for selected audio sources.");return}return u._src=d,u._state="loading",window.location.protocol==="https:"&&d.slice(0,5)==="http:"&&(u._html5=!0,u._webAudio=!1),new i(u),u._webAudio&&o(u),u},play:function(u,d){var p=this,m=null;if(typeof u=="number")m=u,u=null;else{if(typeof u=="string"&&p._state==="loaded"&&!p._sprite[u])return null;if(typeof u>"u"&&(u="__default",!p._playLock)){for(var T=0,v=0;v<p._sounds.length;v++)p._sounds[v]._paused&&!p._sounds[v]._ended&&(T++,m=p._sounds[v]._id);T===1?u=null:m=null}}var I=m?p._soundById(m):p._inactiveSound();if(!I)return null;if(m&&!u&&(u=I._sprite||"__default"),p._state!=="loaded"){I._sprite=u,I._ended=!1;var C=I._id;return p._queue.push({event:"play",action:function(){p.play(C)}}),C}if(m&&!I._paused)return d||p._loadQueue("play"),I._id;p._webAudio&&t._autoResume();var M=Math.max(0,I._seek>0?I._seek:p._sprite[u][0]/1e3),U=Math.max(0,(p._sprite[u][0]+p._sprite[u][1])/1e3-M),ee=U*1e3/Math.abs(I._rate),ne=p._sprite[u][0]/1e3,k=(p._sprite[u][0]+p._sprite[u][1])/1e3;I._sprite=u,I._ended=!1;var w=function(){I._paused=!1,I._seek=M,I._start=ne,I._stop=k,I._loop=!!(I._loop||p._sprite[u][2])};if(M>=k){p._ended(I);return}var b=I._node;if(p._webAudio){var R=function(){p._playLock=!1,w(),p._refreshBuffer(I);var Le=I._muted||p._muted?0:I._volume;b.gain.setValueAtTime(Le,t.ctx.currentTime),I._playStart=t.ctx.currentTime,typeof b.bufferSource.start>"u"?I._loop?b.bufferSource.noteGrainOn(0,M,86400):b.bufferSource.noteGrainOn(0,M,U):I._loop?b.bufferSource.start(0,M,86400):b.bufferSource.start(0,M,U),ee!==1/0&&(p._endTimers[I._id]=setTimeout(p._ended.bind(p,I),ee)),d||setTimeout(function(){p._emit("play",I._id),p._loadQueue()},0)};t.state==="running"&&t.ctx.state!=="interrupted"?R():(p._playLock=!0,p.once("resume",R),p._clearTimer(I._id))}else{var P=function(){b.currentTime=M,b.muted=I._muted||p._muted||t._muted||b.muted,b.volume=I._volume*t.volume(),b.playbackRate=I._rate;try{var Le=b.play();if(Le&&typeof Promise<"u"&&(Le instanceof Promise||typeof Le.then=="function")?(p._playLock=!0,w(),Le.then(function(){p._playLock=!1,b._unlocked=!0,d?p._loadQueue():p._emit("play",I._id)}).catch(function(){p._playLock=!1,p._emit("playerror",I._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),I._ended=!0,I._paused=!0})):d||(p._playLock=!1,w(),p._emit("play",I._id)),b.playbackRate=I._rate,b.paused){p._emit("playerror",I._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}u!=="__default"||I._loop?p._endTimers[I._id]=setTimeout(p._ended.bind(p,I),ee):(p._endTimers[I._id]=function(){p._ended(I),b.removeEventListener("ended",p._endTimers[I._id],!1)},b.addEventListener("ended",p._endTimers[I._id],!1))}catch(Xe){p._emit("playerror",I._id,Xe)}};b.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(b.src=p._src,b.load());var x=window&&window.ejecta||!b.readyState&&t._navigator.isCocoonJS;if(b.readyState>=3||x)P();else{p._playLock=!0,p._state="loading";var A=function(){p._state="loaded",P(),b.removeEventListener(t._canPlayEvent,A,!1)};b.addEventListener(t._canPlayEvent,A,!1),p._clearTimer(I._id)}}return I._id},pause:function(u){var d=this;if(d._state!=="loaded"||d._playLock)return d._queue.push({event:"pause",action:function(){d.pause(u)}}),d;for(var p=d._getSoundIds(u),m=0;m<p.length;m++){d._clearTimer(p[m]);var T=d._soundById(p[m]);if(T&&!T._paused&&(T._seek=d.seek(p[m]),T._rateSeek=0,T._paused=!0,d._stopFade(p[m]),T._node))if(d._webAudio){if(!T._node.bufferSource)continue;typeof T._node.bufferSource.stop>"u"?T._node.bufferSource.noteOff(0):T._node.bufferSource.stop(0),d._cleanBuffer(T._node)}else(!isNaN(T._node.duration)||T._node.duration===1/0)&&T._node.pause();arguments[1]||d._emit("pause",T?T._id:null)}return d},stop:function(u,d){var p=this;if(p._state!=="loaded"||p._playLock)return p._queue.push({event:"stop",action:function(){p.stop(u)}}),p;for(var m=p._getSoundIds(u),T=0;T<m.length;T++){p._clearTimer(m[T]);var v=p._soundById(m[T]);v&&(v._seek=v._start||0,v._rateSeek=0,v._paused=!0,v._ended=!0,p._stopFade(m[T]),v._node&&(p._webAudio?v._node.bufferSource&&(typeof v._node.bufferSource.stop>"u"?v._node.bufferSource.noteOff(0):v._node.bufferSource.stop(0),p._cleanBuffer(v._node)):(!isNaN(v._node.duration)||v._node.duration===1/0)&&(v._node.currentTime=v._start||0,v._node.pause(),v._node.duration===1/0&&p._clearSound(v._node))),d||p._emit("stop",v._id))}return p},mute:function(u,d){var p=this;if(p._state!=="loaded"||p._playLock)return p._queue.push({event:"mute",action:function(){p.mute(u,d)}}),p;if(typeof d>"u")if(typeof u=="boolean")p._muted=u;else return p._muted;for(var m=p._getSoundIds(d),T=0;T<m.length;T++){var v=p._soundById(m[T]);v&&(v._muted=u,v._interval&&p._stopFade(v._id),p._webAudio&&v._node?v._node.gain.setValueAtTime(u?0:v._volume,t.ctx.currentTime):v._node&&(v._node.muted=t._muted?!0:u),p._emit("mute",v._id))}return p},volume:function(){var u=this,d=arguments,p,m;if(d.length===0)return u._volume;if(d.length===1||d.length===2&&typeof d[1]>"u"){var T=u._getSoundIds(),v=T.indexOf(d[0]);v>=0?m=parseInt(d[0],10):p=parseFloat(d[0])}else d.length>=2&&(p=parseFloat(d[0]),m=parseInt(d[1],10));var I;if(typeof p<"u"&&p>=0&&p<=1){if(u._state!=="loaded"||u._playLock)return u._queue.push({event:"volume",action:function(){u.volume.apply(u,d)}}),u;typeof m>"u"&&(u._volume=p),m=u._getSoundIds(m);for(var C=0;C<m.length;C++)I=u._soundById(m[C]),I&&(I._volume=p,d[2]||u._stopFade(m[C]),u._webAudio&&I._node&&!I._muted?I._node.gain.setValueAtTime(p,t.ctx.currentTime):I._node&&!I._muted&&(I._node.volume=p*t.volume()),u._emit("volume",I._id))}else return I=m?u._soundById(m):u._sounds[0],I?I._volume:0;return u},fade:function(u,d,p,m){var T=this;if(T._state!=="loaded"||T._playLock)return T._queue.push({event:"fade",action:function(){T.fade(u,d,p,m)}}),T;u=Math.min(Math.max(0,parseFloat(u)),1),d=Math.min(Math.max(0,parseFloat(d)),1),p=parseFloat(p),T.volume(u,m);for(var v=T._getSoundIds(m),I=0;I<v.length;I++){var C=T._soundById(v[I]);if(C){if(m||T._stopFade(v[I]),T._webAudio&&!C._muted){var M=t.ctx.currentTime,U=M+p/1e3;C._volume=u,C._node.gain.setValueAtTime(u,M),C._node.gain.linearRampToValueAtTime(d,U)}T._startFadeInterval(C,u,d,p,v[I],typeof m>"u")}}return T},_startFadeInterval:function(u,d,p,m,T,v){var I=this,C=d,M=p-d,U=Math.abs(M/.01),ee=Math.max(4,U>0?m/U:m),ne=Date.now();u._fadeTo=p,u._interval=setInterval(function(){var k=(Date.now()-ne)/m;ne=Date.now(),C+=M*k,C=Math.round(C*100)/100,M<0?C=Math.max(p,C):C=Math.min(p,C),I._webAudio?u._volume=C:I.volume(C,u._id,!0),v&&(I._volume=C),(p<d&&C<=p||p>d&&C>=p)&&(clearInterval(u._interval),u._interval=null,u._fadeTo=null,I.volume(p,u._id),I._emit("fade",u._id))},ee)},_stopFade:function(u){var d=this,p=d._soundById(u);return p&&p._interval&&(d._webAudio&&p._node.gain.cancelScheduledValues(t.ctx.currentTime),clearInterval(p._interval),p._interval=null,d.volume(p._fadeTo,u),p._fadeTo=null,d._emit("fade",u)),d},loop:function(){var u=this,d=arguments,p,m,T;if(d.length===0)return u._loop;if(d.length===1)if(typeof d[0]=="boolean")p=d[0],u._loop=p;else return T=u._soundById(parseInt(d[0],10)),T?T._loop:!1;else d.length===2&&(p=d[0],m=parseInt(d[1],10));for(var v=u._getSoundIds(m),I=0;I<v.length;I++)T=u._soundById(v[I]),T&&(T._loop=p,u._webAudio&&T._node&&T._node.bufferSource&&(T._node.bufferSource.loop=p,p&&(T._node.bufferSource.loopStart=T._start||0,T._node.bufferSource.loopEnd=T._stop,u.playing(v[I])&&(u.pause(v[I],!0),u.play(v[I],!0)))));return u},rate:function(){var u=this,d=arguments,p,m;if(d.length===0)m=u._sounds[0]._id;else if(d.length===1){var T=u._getSoundIds(),v=T.indexOf(d[0]);v>=0?m=parseInt(d[0],10):p=parseFloat(d[0])}else d.length===2&&(p=parseFloat(d[0]),m=parseInt(d[1],10));var I;if(typeof p=="number"){if(u._state!=="loaded"||u._playLock)return u._queue.push({event:"rate",action:function(){u.rate.apply(u,d)}}),u;typeof m>"u"&&(u._rate=p),m=u._getSoundIds(m);for(var C=0;C<m.length;C++)if(I=u._soundById(m[C]),I){u.playing(m[C])&&(I._rateSeek=u.seek(m[C]),I._playStart=u._webAudio?t.ctx.currentTime:I._playStart),I._rate=p,u._webAudio&&I._node&&I._node.bufferSource?I._node.bufferSource.playbackRate.setValueAtTime(p,t.ctx.currentTime):I._node&&(I._node.playbackRate=p);var M=u.seek(m[C]),U=(u._sprite[I._sprite][0]+u._sprite[I._sprite][1])/1e3-M,ee=U*1e3/Math.abs(I._rate);(u._endTimers[m[C]]||!I._paused)&&(u._clearTimer(m[C]),u._endTimers[m[C]]=setTimeout(u._ended.bind(u,I),ee)),u._emit("rate",I._id)}}else return I=u._soundById(m),I?I._rate:u._rate;return u},seek:function(){var u=this,d=arguments,p,m;if(d.length===0)u._sounds.length&&(m=u._sounds[0]._id);else if(d.length===1){var T=u._getSoundIds(),v=T.indexOf(d[0]);v>=0?m=parseInt(d[0],10):u._sounds.length&&(m=u._sounds[0]._id,p=parseFloat(d[0]))}else d.length===2&&(p=parseFloat(d[0]),m=parseInt(d[1],10));if(typeof m>"u")return 0;if(typeof p=="number"&&(u._state!=="loaded"||u._playLock))return u._queue.push({event:"seek",action:function(){u.seek.apply(u,d)}}),u;var I=u._soundById(m);if(I)if(typeof p=="number"&&p>=0){var C=u.playing(m);C&&u.pause(m,!0),I._seek=p,I._ended=!1,u._clearTimer(m),!u._webAudio&&I._node&&!isNaN(I._node.duration)&&(I._node.currentTime=p);var M=function(){C&&u.play(m,!0),u._emit("seek",m)};if(C&&!u._webAudio){var U=function(){u._playLock?setTimeout(U,0):M()};setTimeout(U,0)}else M()}else if(u._webAudio){var ee=u.playing(m)?t.ctx.currentTime-I._playStart:0,ne=I._rateSeek?I._rateSeek-I._seek:0;return I._seek+(ne+ee*Math.abs(I._rate))}else return I._node.currentTime;return u},playing:function(u){var d=this;if(typeof u=="number"){var p=d._soundById(u);return p?!p._paused:!1}for(var m=0;m<d._sounds.length;m++)if(!d._sounds[m]._paused)return!0;return!1},duration:function(u){var d=this,p=d._duration,m=d._soundById(u);return m&&(p=d._sprite[m._sprite][1]/1e3),p},state:function(){return this._state},unload:function(){for(var u=this,d=u._sounds,p=0;p<d.length;p++)d[p]._paused||u.stop(d[p]._id),u._webAudio||(u._clearSound(d[p]._node),d[p]._node.removeEventListener("error",d[p]._errorFn,!1),d[p]._node.removeEventListener(t._canPlayEvent,d[p]._loadFn,!1),d[p]._node.removeEventListener("ended",d[p]._endFn,!1),t._releaseHtml5Audio(d[p]._node)),delete d[p]._node,u._clearTimer(d[p]._id);var m=t._howls.indexOf(u);m>=0&&t._howls.splice(m,1);var T=!0;for(p=0;p<t._howls.length;p++)if(t._howls[p]._src===u._src||u._src.indexOf(t._howls[p]._src)>=0){T=!1;break}return s&&T&&delete s[u._src],t.noAudio=!1,u._state="unloaded",u._sounds=[],u=null,null},on:function(u,d,p,m){var T=this,v=T["_on"+u];return typeof d=="function"&&v.push(m?{id:p,fn:d,once:m}:{id:p,fn:d}),T},off:function(u,d,p){var m=this,T=m["_on"+u],v=0;if(typeof d=="number"&&(p=d,d=null),d||p)for(v=0;v<T.length;v++){var I=p===T[v].id;if(d===T[v].fn&&I||!d&&I){T.splice(v,1);break}}else if(u)m["_on"+u]=[];else{var C=Object.keys(m);for(v=0;v<C.length;v++)C[v].indexOf("_on")===0&&Array.isArray(m[C[v]])&&(m[C[v]]=[])}return m},once:function(u,d,p){var m=this;return m.on(u,d,p,1),m},_emit:function(u,d,p){for(var m=this,T=m["_on"+u],v=T.length-1;v>=0;v--)(!T[v].id||T[v].id===d||u==="load")&&(setTimeout((function(I){I.call(this,d,p)}).bind(m,T[v].fn),0),T[v].once&&m.off(u,T[v].fn,T[v].id));return m._loadQueue(u),m},_loadQueue:function(u){var d=this;if(d._queue.length>0){var p=d._queue[0];p.event===u&&(d._queue.shift(),d._loadQueue()),u||p.action()}return d},_ended:function(u){var d=this,p=u._sprite;if(!d._webAudio&&u._node&&!u._node.paused&&!u._node.ended&&u._node.currentTime<u._stop)return setTimeout(d._ended.bind(d,u),100),d;var m=!!(u._loop||d._sprite[p][2]);if(d._emit("end",u._id),!d._webAudio&&m&&d.stop(u._id,!0).play(u._id),d._webAudio&&m){d._emit("play",u._id),u._seek=u._start||0,u._rateSeek=0,u._playStart=t.ctx.currentTime;var T=(u._stop-u._start)*1e3/Math.abs(u._rate);d._endTimers[u._id]=setTimeout(d._ended.bind(d,u),T)}return d._webAudio&&!m&&(u._paused=!0,u._ended=!0,u._seek=u._start||0,u._rateSeek=0,d._clearTimer(u._id),d._cleanBuffer(u._node),t._autoSuspend()),!d._webAudio&&!m&&d.stop(u._id,!0),d},_clearTimer:function(u){var d=this;if(d._endTimers[u]){if(typeof d._endTimers[u]!="function")clearTimeout(d._endTimers[u]);else{var p=d._soundById(u);p&&p._node&&p._node.removeEventListener("ended",d._endTimers[u],!1)}delete d._endTimers[u]}return d},_soundById:function(u){for(var d=this,p=0;p<d._sounds.length;p++)if(u===d._sounds[p]._id)return d._sounds[p];return null},_inactiveSound:function(){var u=this;u._drain();for(var d=0;d<u._sounds.length;d++)if(u._sounds[d]._ended)return u._sounds[d].reset();return new i(u)},_drain:function(){var u=this,d=u._pool,p=0,m=0;if(!(u._sounds.length<d)){for(m=0;m<u._sounds.length;m++)u._sounds[m]._ended&&p++;for(m=u._sounds.length-1;m>=0;m--){if(p<=d)return;u._sounds[m]._ended&&(u._webAudio&&u._sounds[m]._node&&u._sounds[m]._node.disconnect(0),u._sounds.splice(m,1),p--)}}},_getSoundIds:function(u){var d=this;if(typeof u>"u"){for(var p=[],m=0;m<d._sounds.length;m++)p.push(d._sounds[m]._id);return p}else return[u]},_refreshBuffer:function(u){var d=this;return u._node.bufferSource=t.ctx.createBufferSource(),u._node.bufferSource.buffer=s[d._src],u._panner?u._node.bufferSource.connect(u._panner):u._node.bufferSource.connect(u._node),u._node.bufferSource.loop=u._loop,u._loop&&(u._node.bufferSource.loopStart=u._start||0,u._node.bufferSource.loopEnd=u._stop||0),u._node.bufferSource.playbackRate.setValueAtTime(u._rate,t.ctx.currentTime),d},_cleanBuffer:function(u){var d=this,p=t._navigator&&t._navigator.vendor.indexOf("Apple")>=0;if(!u.bufferSource)return d;if(t._scratchBuffer&&u.bufferSource&&(u.bufferSource.onended=null,u.bufferSource.disconnect(0),p))try{u.bufferSource.buffer=t._scratchBuffer}catch{}return u.bufferSource=null,d},_clearSound:function(u){var d=/MSIE |Trident\//.test(t._navigator&&t._navigator.userAgent);d||(u.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var i=function(u){this._parent=u,this.init()};i.prototype={init:function(){var u=this,d=u._parent;return u._muted=d._muted,u._loop=d._loop,u._volume=d._volume,u._rate=d._rate,u._seek=0,u._paused=!0,u._ended=!0,u._sprite="__default",u._id=++t._counter,d._sounds.push(u),u.create(),u},create:function(){var u=this,d=u._parent,p=t._muted||u._muted||u._parent._muted?0:u._volume;return d._webAudio?(u._node=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),u._node.gain.setValueAtTime(p,t.ctx.currentTime),u._node.paused=!0,u._node.connect(t.masterGain)):t.noAudio||(u._node=t._obtainHtml5Audio(),u._errorFn=u._errorListener.bind(u),u._node.addEventListener("error",u._errorFn,!1),u._loadFn=u._loadListener.bind(u),u._node.addEventListener(t._canPlayEvent,u._loadFn,!1),u._endFn=u._endListener.bind(u),u._node.addEventListener("ended",u._endFn,!1),u._node.src=d._src,u._node.preload=d._preload===!0?"auto":d._preload,u._node.volume=p*t.volume(),u._node.load()),u},reset:function(){var u=this,d=u._parent;return u._muted=d._muted,u._loop=d._loop,u._volume=d._volume,u._rate=d._rate,u._seek=0,u._rateSeek=0,u._paused=!0,u._ended=!0,u._sprite="__default",u._id=++t._counter,u},_errorListener:function(){var u=this;u._parent._emit("loaderror",u._id,u._node.error?u._node.error.code:0),u._node.removeEventListener("error",u._errorFn,!1)},_loadListener:function(){var u=this,d=u._parent;d._duration=Math.ceil(u._node.duration*10)/10,Object.keys(d._sprite).length===0&&(d._sprite={__default:[0,d._duration*1e3]}),d._state!=="loaded"&&(d._state="loaded",d._emit("load"),d._loadQueue()),u._node.removeEventListener(t._canPlayEvent,u._loadFn,!1)},_endListener:function(){var u=this,d=u._parent;d._duration===1/0&&(d._duration=Math.ceil(u._node.duration*10)/10,d._sprite.__default[1]===1/0&&(d._sprite.__default[1]=d._duration*1e3),d._ended(u)),u._node.removeEventListener("ended",u._endFn,!1)}};var s={},o=function(u){var d=u._src;if(s[d]){u._duration=s[d].duration,h(u);return}if(/^data:[^;]+;base64,/.test(d)){for(var p=atob(d.split(",")[1]),m=new Uint8Array(p.length),T=0;T<p.length;++T)m[T]=p.charCodeAt(T);l(m.buffer,u)}else{var v=new XMLHttpRequest;v.open(u._xhr.method,d,!0),v.withCredentials=u._xhr.withCredentials,v.responseType="arraybuffer",u._xhr.headers&&Object.keys(u._xhr.headers).forEach(function(I){v.setRequestHeader(I,u._xhr.headers[I])}),v.onload=function(){var I=(v.status+"")[0];if(I!=="0"&&I!=="2"&&I!=="3"){u._emit("loaderror",null,"Failed loading audio file with status: "+v.status+".");return}l(v.response,u)},v.onerror=function(){u._webAudio&&(u._html5=!0,u._webAudio=!1,u._sounds=[],delete s[d],u.load())},a(v)}},a=function(u){try{u.send()}catch{u.onerror()}},l=function(u,d){var p=function(){d._emit("loaderror",null,"Decoding audio data failed.")},m=function(T){T&&d._sounds.length>0?(s[d._src]=T,h(d,T)):p()};typeof Promise<"u"&&t.ctx.decodeAudioData.length===1?t.ctx.decodeAudioData(u).then(m).catch(p):t.ctx.decodeAudioData(u,m,p)},h=function(u,d){d&&!u._duration&&(u._duration=d.duration),Object.keys(u._sprite).length===0&&(u._sprite={__default:[0,u._duration*1e3]}),u._state!=="loaded"&&(u._state="loaded",u._emit("load"),u._loadQueue())},f=function(){if(t.usingWebAudio){try{typeof AudioContext<"u"?t.ctx=new AudioContext:typeof webkitAudioContext<"u"?t.ctx=new webkitAudioContext:t.usingWebAudio=!1}catch{t.usingWebAudio=!1}t.ctx||(t.usingWebAudio=!1);var u=/iP(hone|od|ad)/.test(t._navigator&&t._navigator.platform),d=t._navigator&&t._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),p=d?parseInt(d[1],10):null;if(u&&p&&p<9){var m=/safari/.test(t._navigator&&t._navigator.userAgent.toLowerCase());t._navigator&&!m&&(t.usingWebAudio=!1)}t.usingWebAudio&&(t.masterGain=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),t.masterGain.gain.setValueAtTime(t._muted?0:t._volume,t.ctx.currentTime),t.masterGain.connect(t.ctx.destination)),t._setup()}};n.Howler=t,n.Howl=r,typeof ol<"u"?(ol.HowlerGlobal=e,ol.Howler=t,ol.Howl=r,ol.Sound=i):typeof window<"u"&&(window.HowlerGlobal=e,window.Howler=t,window.Howl=r,window.Sound=i)})();/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){var r=this;if(!r.ctx||!r.ctx.listener)return r;for(var i=r._howls.length-1;i>=0;i--)r._howls[i].stereo(t);return r},HowlerGlobal.prototype.pos=function(t,r,i){var s=this;if(!s.ctx||!s.ctx.listener)return s;if(r=typeof r!="number"?s._pos[1]:r,i=typeof i!="number"?s._pos[2]:i,typeof t=="number")s._pos=[t,r,i],typeof s.ctx.listener.positionX<"u"?(s.ctx.listener.positionX.setTargetAtTime(s._pos[0],Howler.ctx.currentTime,.1),s.ctx.listener.positionY.setTargetAtTime(s._pos[1],Howler.ctx.currentTime,.1),s.ctx.listener.positionZ.setTargetAtTime(s._pos[2],Howler.ctx.currentTime,.1)):s.ctx.listener.setPosition(s._pos[0],s._pos[1],s._pos[2]);else return s._pos;return s},HowlerGlobal.prototype.orientation=function(t,r,i,s,o,a){var l=this;if(!l.ctx||!l.ctx.listener)return l;var h=l._orientation;if(r=typeof r!="number"?h[1]:r,i=typeof i!="number"?h[2]:i,s=typeof s!="number"?h[3]:s,o=typeof o!="number"?h[4]:o,a=typeof a!="number"?h[5]:a,typeof t=="number")l._orientation=[t,r,i,s,o,a],typeof l.ctx.listener.forwardX<"u"?(l.ctx.listener.forwardX.setTargetAtTime(t,Howler.ctx.currentTime,.1),l.ctx.listener.forwardY.setTargetAtTime(r,Howler.ctx.currentTime,.1),l.ctx.listener.forwardZ.setTargetAtTime(i,Howler.ctx.currentTime,.1),l.ctx.listener.upX.setTargetAtTime(s,Howler.ctx.currentTime,.1),l.ctx.listener.upY.setTargetAtTime(o,Howler.ctx.currentTime,.1),l.ctx.listener.upZ.setTargetAtTime(a,Howler.ctx.currentTime,.1)):l.ctx.listener.setOrientation(t,r,i,s,o,a);else return h;return l},Howl.prototype.init=function(t){return function(r){var i=this;return i._orientation=r.orientation||[1,0,0],i._stereo=r.stereo||null,i._pos=r.pos||null,i._pannerAttr={coneInnerAngle:typeof r.coneInnerAngle<"u"?r.coneInnerAngle:360,coneOuterAngle:typeof r.coneOuterAngle<"u"?r.coneOuterAngle:360,coneOuterGain:typeof r.coneOuterGain<"u"?r.coneOuterGain:0,distanceModel:typeof r.distanceModel<"u"?r.distanceModel:"inverse",maxDistance:typeof r.maxDistance<"u"?r.maxDistance:1e4,panningModel:typeof r.panningModel<"u"?r.panningModel:"HRTF",refDistance:typeof r.refDistance<"u"?r.refDistance:1,rolloffFactor:typeof r.rolloffFactor<"u"?r.rolloffFactor:1},i._onstereo=r.onstereo?[{fn:r.onstereo}]:[],i._onpos=r.onpos?[{fn:r.onpos}]:[],i._onorientation=r.onorientation?[{fn:r.onorientation}]:[],t.call(this,r)}}(Howl.prototype.init),Howl.prototype.stereo=function(t,r){var i=this;if(!i._webAudio)return i;if(i._state!=="loaded")return i._queue.push({event:"stereo",action:function(){i.stereo(t,r)}}),i;var s=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof r>"u")if(typeof t=="number")i._stereo=t,i._pos=[t,0,0];else return i._stereo;for(var o=i._getSoundIds(r),a=0;a<o.length;a++){var l=i._soundById(o[a]);if(l)if(typeof t=="number")l._stereo=t,l._pos=[t,0,0],l._node&&(l._pannerAttr.panningModel="equalpower",(!l._panner||!l._panner.pan)&&e(l,s),s==="spatial"?typeof l._panner.positionX<"u"?(l._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),l._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),l._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):l._panner.setPosition(t,0,0):l._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),i._emit("stereo",l._id);else return l._stereo}return i},Howl.prototype.pos=function(t,r,i,s){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"pos",action:function(){o.pos(t,r,i,s)}}),o;if(r=typeof r!="number"?0:r,i=typeof i!="number"?-.5:i,typeof s>"u")if(typeof t=="number")o._pos=[t,r,i];else return o._pos;for(var a=o._getSoundIds(s),l=0;l<a.length;l++){var h=o._soundById(a[l]);if(h)if(typeof t=="number")h._pos=[t,r,i],h._node&&((!h._panner||h._panner.pan)&&e(h,"spatial"),typeof h._panner.positionX<"u"?(h._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),h._panner.positionY.setValueAtTime(r,Howler.ctx.currentTime),h._panner.positionZ.setValueAtTime(i,Howler.ctx.currentTime)):h._panner.setPosition(t,r,i)),o._emit("pos",h._id);else return h._pos}return o},Howl.prototype.orientation=function(t,r,i,s){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"orientation",action:function(){o.orientation(t,r,i,s)}}),o;if(r=typeof r!="number"?o._orientation[1]:r,i=typeof i!="number"?o._orientation[2]:i,typeof s>"u")if(typeof t=="number")o._orientation=[t,r,i];else return o._orientation;for(var a=o._getSoundIds(s),l=0;l<a.length;l++){var h=o._soundById(a[l]);if(h)if(typeof t=="number")h._orientation=[t,r,i],h._node&&(h._panner||(h._pos||(h._pos=o._pos||[0,0,-.5]),e(h,"spatial")),typeof h._panner.orientationX<"u"?(h._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),h._panner.orientationY.setValueAtTime(r,Howler.ctx.currentTime),h._panner.orientationZ.setValueAtTime(i,Howler.ctx.currentTime)):h._panner.setOrientation(t,r,i)),o._emit("orientation",h._id);else return h._orientation}return o},Howl.prototype.pannerAttr=function(){var t=this,r=arguments,i,s,o;if(!t._webAudio)return t;if(r.length===0)return t._pannerAttr;if(r.length===1)if(typeof r[0]=="object")i=r[0],typeof s>"u"&&(i.pannerAttr||(i.pannerAttr={coneInnerAngle:i.coneInnerAngle,coneOuterAngle:i.coneOuterAngle,coneOuterGain:i.coneOuterGain,distanceModel:i.distanceModel,maxDistance:i.maxDistance,refDistance:i.refDistance,rolloffFactor:i.rolloffFactor,panningModel:i.panningModel}),t._pannerAttr={coneInnerAngle:typeof i.pannerAttr.coneInnerAngle<"u"?i.pannerAttr.coneInnerAngle:t._coneInnerAngle,coneOuterAngle:typeof i.pannerAttr.coneOuterAngle<"u"?i.pannerAttr.coneOuterAngle:t._coneOuterAngle,coneOuterGain:typeof i.pannerAttr.coneOuterGain<"u"?i.pannerAttr.coneOuterGain:t._coneOuterGain,distanceModel:typeof i.pannerAttr.distanceModel<"u"?i.pannerAttr.distanceModel:t._distanceModel,maxDistance:typeof i.pannerAttr.maxDistance<"u"?i.pannerAttr.maxDistance:t._maxDistance,refDistance:typeof i.pannerAttr.refDistance<"u"?i.pannerAttr.refDistance:t._refDistance,rolloffFactor:typeof i.pannerAttr.rolloffFactor<"u"?i.pannerAttr.rolloffFactor:t._rolloffFactor,panningModel:typeof i.pannerAttr.panningModel<"u"?i.pannerAttr.panningModel:t._panningModel});else return o=t._soundById(parseInt(r[0],10)),o?o._pannerAttr:t._pannerAttr;else r.length===2&&(i=r[0],s=parseInt(r[1],10));for(var a=t._getSoundIds(s),l=0;l<a.length;l++)if(o=t._soundById(a[l]),o){var h=o._pannerAttr;h={coneInnerAngle:typeof i.coneInnerAngle<"u"?i.coneInnerAngle:h.coneInnerAngle,coneOuterAngle:typeof i.coneOuterAngle<"u"?i.coneOuterAngle:h.coneOuterAngle,coneOuterGain:typeof i.coneOuterGain<"u"?i.coneOuterGain:h.coneOuterGain,distanceModel:typeof i.distanceModel<"u"?i.distanceModel:h.distanceModel,maxDistance:typeof i.maxDistance<"u"?i.maxDistance:h.maxDistance,refDistance:typeof i.refDistance<"u"?i.refDistance:h.refDistance,rolloffFactor:typeof i.rolloffFactor<"u"?i.rolloffFactor:h.rolloffFactor,panningModel:typeof i.panningModel<"u"?i.panningModel:h.panningModel};var f=o._panner;f||(o._pos||(o._pos=t._pos||[0,0,-.5]),e(o,"spatial"),f=o._panner),f.coneInnerAngle=h.coneInnerAngle,f.coneOuterAngle=h.coneOuterAngle,f.coneOuterGain=h.coneOuterGain,f.distanceModel=h.distanceModel,f.maxDistance=h.maxDistance,f.refDistance=h.refDistance,f.rolloffFactor=h.rolloffFactor,f.panningModel=h.panningModel}return t},Sound.prototype.init=function(t){return function(){var r=this,i=r._parent;r._orientation=i._orientation,r._stereo=i._stereo,r._pos=i._pos,r._pannerAttr=i._pannerAttr,t.call(this),r._stereo?i.stereo(r._stereo):r._pos&&i.pos(r._pos[0],r._pos[1],r._pos[2],r._id)}}(Sound.prototype.init),Sound.prototype.reset=function(t){return function(){var r=this,i=r._parent;return r._orientation=i._orientation,r._stereo=i._stereo,r._pos=i._pos,r._pannerAttr=i._pannerAttr,r._stereo?i.stereo(r._stereo):r._pos?i.pos(r._pos[0],r._pos[1],r._pos[2],r._id):r._panner&&(r._panner.disconnect(0),r._panner=void 0,i._refreshBuffer(r)),t.call(this)}}(Sound.prototype.reset);var e=function(t,r){r=r||"spatial",r==="spatial"?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,typeof t._panner.positionX<"u"?(t._panner.positionX.setValueAtTime(t._pos[0],Howler.ctx.currentTime),t._panner.positionY.setValueAtTime(t._pos[1],Howler.ctx.currentTime),t._panner.positionZ.setValueAtTime(t._pos[2],Howler.ctx.currentTime)):t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),typeof t._panner.orientationX<"u"?(t._panner.orientationX.setValueAtTime(t._orientation[0],Howler.ctx.currentTime),t._panner.orientationY.setValueAtTime(t._orientation[1],Howler.ctx.currentTime),t._panner.orientationZ.setValueAtTime(t._orientation[2],Howler.ctx.currentTime)):t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.setValueAtTime(t._stereo,Howler.ctx.currentTime)),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id,!0)}})()}(Cf)),Cf}var H$=G$();const W$={state:{authShowModal:!1,userLoggedIn:!1},getters:{getAuthShowModal:n=>n.authShowModal},mutations:{toggleAuthModal:n=>{n.authShowModal=!n.authShowModal},toggleUserLoggedIn:n=>{n.userLoggedIn=!n.userLoggedIn}},actions:{async registerUser({commit:n},e){const t=await Ni.createUserWithEmailAndPassword(e.email,e.password);await FB.doc(t.user.uid).set({name:e.name,email:e.email,age:e.age,country:e.country}),await t.user.updateProfile({displayName:e.name}),n("toggleUserLoggedIn")},async loginUser({commit:n},e){await Ni.signInWithEmailAndPassword(e.email,e.password),n("toggleUserLoggedIn")},async logoutUser({commit:n}){await Ni.signOut(),n("toggleUserLoggedIn")},initLogin({commit:n}){Ni.currentUser&&n("toggleUserLoggedIn")}}},Lp=dC({modules:{auth:W$},state:{currentTrack:{meta:{},sound:{},seek:"00:00",seekPercentage:"0%",duration:"00:00",isLoading:!1},currentPlaylist:{meta:{},trackArray:[],seek:0}},mutations:{changeCurrentTrack:(n,e)=>{if(n.currentTrack.meta=e.track,console.log("Current track changed/mutated"),n.currentTrack.sound=new H$.Howl({src:[e.track.url],html5:!0}),n.currentTrack.duration=e.track.length,e.currentTag&&e.currentTag.isBookmarked){const r=e.currentTag.position;n.currentTrack.seek=_l.formatSecToTimerValue(r),n.currentTrack.seekPercentage=`${r/_l.formatTimerValueToSec(n.currentTrack.duration)*100}%`,n.currentTrack.sound.seek(r)}const t=n.currentPlaylist.trackArray?n.currentPlaylist.trackArray.findIndex(r=>r.trackKey===n.currentTrack.meta.trackKey):n.currentPlaylist.seek;t>0&&(n.currentPlaylist.seek=t),console.log(`state.currentPlaylist.seek: ${n.currentPlaylist.seek}`)},updateTrackPosition(n){const e=n.currentTrack.sound.seek(),t=n.currentTrack.sound.duration();n.currentTrack.seek=_l.formatSecToTimerValue(e),n.currentTrack.duration=_l.formatSecToTimerValue(t),n.currentTrack.seekPercentage=`${e/t*100}%`},updateLoadingState(n,e){n.currentTrack.isLoading=e,console.log("state.currentTrack.isLoading")},updateCurrentPlaylist:(n,e)=>{n.currentPlaylist.meta=e.meta,console.log("Current playlist changed..."),n.currentPlaylist.trackArray=e.trackArray}},getters:{currentTrackPosition:n=>{let e=0;return n.currentTrack.sound.playing&&(e=n.currentTrack.sound.seek()),e},trackIsPlaying:n=>{let e=!1;return n.currentTrack.sound.playing&&(e=n.currentTrack.sound.playing()),e},trackIsLoading:n=>n.currentTrack.isLoading,getNextTrack:n=>{let e=n.currentTrack;const t=n.currentPlaylist.seek+1;return t<n.currentPlaylist.trackArray.length&&(e=n.currentPlaylist.trackArray[t]),e},getPrevTrack:n=>{let e=n.currentTrack;const t=n.currentPlaylist.seek-1;return t>=0&&(e=n.currentPlaylist.trackArray[t]),e}},actions:{playCurrentTrack({state:n,dispatch:e,commit:t}){n.currentTrack.sound.play&&(t("updateLoadingState",!0),n.currentTrack.sound.play(),console.log("Start track..."),n.currentTrack.sound.on("play",()=>{requestAnimationFrame(()=>{t("updateLoadingState",!1),e("playProgress")})}),n.currentTrack.sound.on("end",()=>{e("playNextTrack")}))},changeTrack({commit:n,dispatch:e},t){console.log("Action to change current track..."),e("stopCurrentTrack"),n("changeCurrentTrack",t)},async playNextTrack({dispatch:n,getters:e}){const t={track:e.getNextTrack};n("changeTrack",t),n("playCurrentTrack"),console.log("Start next track...")},playPrevTrack({dispatch:n,getters:e}){const t={track:e.getPrevTrack};n("changeTrack",t),n("playCurrentTrack"),console.log("Start prev track...")},togglePlaying({dispatch:n,getters:e}){e.trackIsPlaying?n("pauseCurrentTrack"):n("playCurrentTrack")},pauseCurrentTrack({state:n}){n.currentTrack.sound.pause&&(n.currentTrack.sound.pause(),console.log("Pause track..."))},stopCurrentTrack({state:n}){n.currentTrack.sound.stop&&(n.currentTrack.sound.stop(),n.currentTrack.seek="00:00",n.currentTrack.duration="00:00",n.currentTrack.seekPercentage="0%",console.log("Stop track..."))},playProgress({commit:n,state:e,dispatch:t}){n("updateTrackPosition"),e.currentTrack.sound.playing()&&requestAnimationFrame(()=>{t("playProgress")})},updateSeek({state:n,dispatch:e},t){if(!n.currentTrack.sound.playing)return;const r=t.clientX,{x:i,width:s}=t.currentTarget.getBoundingClientRect(),a=(r-i)/s*n.currentTrack.sound.duration();n.currentTrack.sound.seek(a),n.currentTrack.sound.once("seek",()=>{e("playProgress")})},updatePlaylist({commit:n},e){n("updateCurrentPlaylist",e)}}}),Q$=[{name:"home",path:"/",component:QB},{name:"book",path:"/book/:book_id",component:B5,props:!0},{name:"track",path:"/book/:book_id/track/:track_id",component:sb},{name:"track_tag",path:"/book/:book_id/track/:track_id/tag/:tag_id",component:sb},{name:"manage",path:"/manage-music",meta:{requiresAuthentication:!0},component:w5,beforeEnter:(n,e,t)=>{if(console.log("beforeEnter Guard / defined in route/index.js"),!n.matched.some(r=>r.meta.requiresAuthentication)){t();return}console.log(Lp.state),Lp.state.auth.userLoggedIn?t():t({name:"home"})}},{name:"about",path:"/about",component:q$},{path:"/manage",redirect:{name:"manage"}},{path:"/:catchAll(.*)*",redirect:{name:"home"}}],NA=X1({history:S1("/SlavoPlayer/"),routes:Q$,linkExactActiveClass:"text-yellow-500"});NA.beforeEach((n,e,t)=>{console.log("Global Guard run."),t()});/**
  * vee-validate v4.15.0
  * (c) 2024 Abdelrahman Awad
  * @license MIT
  */function Yt(n){return typeof n=="function"}function VA(n){return n==null}const Zs=n=>n!==null&&!!n&&typeof n=="object"&&!Array.isArray(n);function om(n){return Number(n)>=0}function Y$(n){const e=parseFloat(n);return isNaN(e)?n:e}function J$(n){return typeof n=="object"&&n!==null}function X$(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}function ab(n){if(!J$(n)||X$(n)!=="[object Object]")return!1;if(Object.getPrototypeOf(n)===null)return!0;let e=n;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e}function gu(n,e){return Object.keys(e).forEach(t=>{if(ab(e[t])&&ab(n[t])){n[t]||(n[t]={}),gu(n[t],e[t]);return}n[t]=e[t]}),n}function gl(n){const e=n.split(".");if(!e.length)return"";let t=String(e[0]);for(let r=1;r<e.length;r++){if(om(e[r])){t+=`[${e[r]}]`;continue}t+=`.${e[r]}`}return t}const DA={};function Ln(n,e){e4(n,e),DA[n]=e}function Z$(n){return DA[n]}function e4(n,e){if(!Yt(e))throw new Error(`Extension Error: The validator '${n}' must be a function.`)}function lb(n,e,t){typeof t.value=="object"&&(t.value=He(t.value)),!t.enumerable||t.get||t.set||!t.configurable||!t.writable||e==="__proto__"?Object.defineProperty(n,e,t):n[e]=t.value}function He(n){if(typeof n!="object")return n;var e=0,t,r,i,s=Object.prototype.toString.call(n);if(s==="[object Object]"?i=Object.create(n.__proto__||null):s==="[object Array]"?i=Array(n.length):s==="[object Set]"?(i=new Set,n.forEach(function(o){i.add(He(o))})):s==="[object Map]"?(i=new Map,n.forEach(function(o,a){i.set(He(a),He(o))})):s==="[object Date]"?i=new Date(+n):s==="[object RegExp]"?i=new RegExp(n.source,n.flags):s==="[object DataView]"?i=new n.constructor(He(n.buffer)):s==="[object ArrayBuffer]"?i=n.slice(0):s.slice(-6)==="Array]"&&(i=new n.constructor(n)),i){for(r=Object.getOwnPropertySymbols(n);e<r.length;e++)lb(i,r[e],Object.getOwnPropertyDescriptor(n,r[e]));for(e=0,r=Object.getOwnPropertyNames(n);e<r.length;e++)Object.hasOwnProperty.call(i,t=r[e])&&i[t]===n[t]||lb(i,t,Object.getOwnPropertyDescriptor(n,t))}return i||n}const Nd=Symbol("vee-validate-form"),t4=Symbol("vee-validate-form-context"),n4=Symbol("vee-validate-field-instance"),Ih=Symbol("Default empty value"),r4=typeof window<"u";function Fp(n){return Yt(n)&&!!n.__locatorRef}function sr(n){return!!n&&Yt(n.parse)&&n.__type==="VVTypedSchema"}function Eh(n){return!!n&&Yt(n.validate)}function Bu(n){return n==="checkbox"||n==="radio"}function i4(n){return Zs(n)||Array.isArray(n)}function s4(n){return Array.isArray(n)?n.length===0:Zs(n)&&Object.keys(n).length===0}function Vd(n){return/^\[.+\]$/i.test(n)}function o4(n){return MA(n)&&n.multiple}function MA(n){return n.tagName==="SELECT"}function a4(n,e){const t=![!1,null,void 0,0].includes(e.multiple)&&!Number.isNaN(e.multiple);return n==="select"&&"multiple"in e&&t}function l4(n,e){return!a4(n,e)&&e.type!=="file"&&!Bu(e.type)}function LA(n){return am(n)&&n.target&&"submit"in n.target}function am(n){return n?!!(typeof Event<"u"&&Yt(Event)&&n instanceof Event||n&&n.srcElement):!1}function ub(n,e){return e in n&&n[e]!==Ih}function kn(n,e){if(n===e)return!0;if(n&&e&&typeof n=="object"&&typeof e=="object"){if(n.constructor!==e.constructor)return!1;var t,r,i;if(Array.isArray(n)){if(t=n.length,t!=e.length)return!1;for(r=t;r--!==0;)if(!kn(n[r],e[r]))return!1;return!0}if(n instanceof Map&&e instanceof Map){if(n.size!==e.size)return!1;for(r of n.entries())if(!e.has(r[0]))return!1;for(r of n.entries())if(!kn(r[1],e.get(r[0])))return!1;return!0}if(hb(n)&&hb(e))return!(n.size!==e.size||n.name!==e.name||n.lastModified!==e.lastModified||n.type!==e.type);if(n instanceof Set&&e instanceof Set){if(n.size!==e.size)return!1;for(r of n.entries())if(!e.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(n)&&ArrayBuffer.isView(e)){if(t=n.length,t!=e.length)return!1;for(r=t;r--!==0;)if(n[r]!==e[r])return!1;return!0}if(n.constructor===RegExp)return n.source===e.source&&n.flags===e.flags;if(n.valueOf!==Object.prototype.valueOf)return n.valueOf()===e.valueOf();if(n.toString!==Object.prototype.toString)return n.toString()===e.toString();if(i=Object.keys(n),t=i.length-cb(n,i),t!==Object.keys(e).length-cb(e,Object.keys(e)))return!1;for(r=t;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,i[r]))return!1;for(r=t;r--!==0;){var s=i[r];if(!kn(n[s],e[s]))return!1}return!0}return n!==n&&e!==e}function cb(n,e){let t=0;for(let i=e.length;i--!==0;){var r=e[i];n[r]===void 0&&t++}return t}function hb(n){return r4?n instanceof File:!1}function lm(n){return Vd(n)?n.replace(/\[|\]/gi,""):n}function Pn(n,e,t){return n?Vd(e)?n[lm(e)]:(e||"").split(/\.|\[(\d+)\]/).filter(Boolean).reduce((i,s)=>i4(i)&&s in i?i[s]:t,n):t}function Kr(n,e,t){if(Vd(e)){n[lm(e)]=t;return}const r=e.split(/\.|\[(\d+)\]/).filter(Boolean);let i=n;for(let s=0;s<r.length;s++){if(s===r.length-1){i[r[s]]=t;return}(!(r[s]in i)||VA(i[r[s]]))&&(i[r[s]]=om(r[s+1])?[]:{}),i=i[r[s]]}}function xf(n,e){if(Array.isArray(n)&&om(e)){n.splice(Number(e),1);return}Zs(n)&&delete n[e]}function db(n,e){if(Vd(e)){delete n[lm(e)];return}const t=e.split(/\.|\[(\d+)\]/).filter(Boolean);let r=n;for(let s=0;s<t.length;s++){if(s===t.length-1){xf(r,t[s]);break}if(!(t[s]in r)||VA(r[t[s]]))break;r=r[t[s]]}const i=t.map((s,o)=>Pn(n,t.slice(0,o).join(".")));for(let s=i.length-1;s>=0;s--)if(s4(i[s])){if(s===0){xf(n,t[0]);continue}xf(i[s-1],t[s-1])}}function Kn(n){return Object.keys(n)}function FA(n,e=void 0){const t=Mh();return(t==null?void 0:t.provides[n])||lr(n,e)}function fb(n,e,t){if(Array.isArray(n)){const r=[...n],i=r.findIndex(s=>kn(s,e));return i>=0?r.splice(i,1):r.push(e),r}return kn(n,e)?t:e}function pb(n,e=0){let t=null,r=[];return function(...i){return t&&clearTimeout(t),t=setTimeout(()=>{const s=n(...i);r.forEach(o=>o(s)),r=[]},e),new Promise(s=>r.push(s))}}function u4(n,e){return Zs(e)&&e.number?Y$(n):n}function Up(n,e){let t;return async function(...i){const s=n(...i);t=s;const o=await s;return s!==t?o:(t=void 0,e(o,i))}}function Kp(n){return Array.isArray(n)?n:n?[n]:[]}function mc(n,e){const t={};for(const r in n)e.includes(r)||(t[r]=n[r]);return t}function c4(n){let e=null,t=[];return function(...r){const i=Qn(()=>{if(e!==i)return;const s=n(...r);t.forEach(o=>o(s)),t=[],e=null});return e=i,new Promise(s=>t.push(s))}}function um(n,e,t){return e.slots.default?typeof n=="string"||!n?e.slots.default(t()):{default:()=>{var r,i;return(i=(r=e.slots).default)===null||i===void 0?void 0:i.call(r,t())}}:e.slots.default}function Of(n){if(UA(n))return n._value}function UA(n){return"_value"in n}function h4(n){return n.type==="number"||n.type==="range"?Number.isNaN(n.valueAsNumber)?n.value:n.valueAsNumber:n.value}function kh(n){if(!am(n))return n;const e=n.target;if(Bu(e.type)&&UA(e))return Of(e);if(e.type==="file"&&e.files){const t=Array.from(e.files);return e.multiple?t:t[0]}if(o4(e))return Array.from(e.options).filter(t=>t.selected&&!t.disabled).map(Of);if(MA(e)){const t=Array.from(e.options).find(r=>r.selected);return t?Of(t):e.value}return h4(e)}function KA(n){const e={};return Object.defineProperty(e,"_$$isNormalized",{value:!0,writable:!1,enumerable:!1,configurable:!1}),n?Zs(n)&&n._$$isNormalized?n:Zs(n)?Object.keys(n).reduce((t,r)=>{const i=d4(n[r]);return n[r]!==!1&&(t[r]=_b(i)),t},e):typeof n!="string"?e:n.split("|").reduce((t,r)=>{const i=f4(r);return i.name&&(t[i.name]=_b(i.params)),t},e):e}function d4(n){return n===!0?[]:Array.isArray(n)||Zs(n)?n:[n]}function _b(n){const e=t=>typeof t=="string"&&t[0]==="@"?p4(t.slice(1)):t;return Array.isArray(n)?n.map(e):n instanceof RegExp?[n]:Object.keys(n).reduce((t,r)=>(t[r]=e(n[r]),t),{})}const f4=n=>{let e=[];const t=n.split(":")[0];return n.includes(":")&&(e=n.split(":").slice(1).join(":").split(",")),{name:t,params:e}};function p4(n){const e=t=>{var r;return(r=Pn(t,n))!==null&&r!==void 0?r:t[n]};return e.__locatorRef=n,e}function _4(n){return Array.isArray(n)?n.filter(Fp):Kn(n).filter(e=>Fp(n[e])).map(e=>n[e])}const g4={generateMessage:({field:n})=>`${n} is not valid.`,bails:!0,validateOnBlur:!0,validateOnChange:!0,validateOnInput:!1,validateOnModelUpdate:!0};let Bp=Object.assign({},g4);const Cs=()=>Bp,m4=n=>{Bp=Object.assign(Object.assign({},Bp),n)},y4=m4;async function BA(n,e,t={}){const r=t==null?void 0:t.bails,i={name:(t==null?void 0:t.name)||"{field}",rules:e,label:t==null?void 0:t.label,bails:r??!0,formData:(t==null?void 0:t.values)||{}},s=await v4(i,n);return Object.assign(Object.assign({},s),{valid:!s.errors.length})}async function v4(n,e){const t=n.rules;if(sr(t)||Eh(t))return b4(e,Object.assign(Object.assign({},n),{rules:t}));if(Yt(t)||Array.isArray(t)){const a={field:n.label||n.name,name:n.name,label:n.label,form:n.formData,value:e},l=Array.isArray(t)?t:[t],h=l.length,f=[];for(let u=0;u<h;u++){const d=l[u],p=await d(e,a);if(!(typeof p!="string"&&!Array.isArray(p)&&p)){if(Array.isArray(p))f.push(...p);else{const T=typeof p=="string"?p:zA(a);f.push(T)}if(n.bails)return{errors:f}}}return{errors:f}}const r=Object.assign(Object.assign({},n),{rules:KA(t)}),i=[],s=Object.keys(r.rules),o=s.length;for(let a=0;a<o;a++){const l=s[a],h=await w4(r,e,{name:l,params:r.rules[l]});if(h.error&&(i.push(h.error),n.bails))return{errors:i}}return{errors:i}}function T4(n){return!!n&&n.name==="ValidationError"}function $A(n){return{__type:"VVTypedSchema",async parse(t,r){var i;try{return{output:await n.validate(t,{abortEarly:!1,context:(r==null?void 0:r.formData)||{}}),errors:[]}}catch(s){if(!T4(s))throw s;if(!(!((i=s.inner)===null||i===void 0)&&i.length)&&s.errors.length)return{errors:[{path:s.path,errors:s.errors}]};const o=s.inner.reduce((a,l)=>{const h=l.path||"";return a[h]||(a[h]={errors:[],path:h}),a[h].errors.push(...l.errors),a},{});return{errors:Object.values(o)}}}}}async function b4(n,e){const r=await(sr(e.rules)?e.rules:$A(e.rules)).parse(n,{formData:e.formData}),i=[];for(const s of r.errors)s.errors.length&&i.push(...s.errors);return{value:r.value,errors:i}}async function w4(n,e,t){const r=Z$(t.name);if(!r)throw new Error(`No such validator '${t.name}' exists.`);const i=I4(t.params,n.formData),s={field:n.label||n.name,name:n.name,label:n.label,value:e,form:n.formData,rule:Object.assign(Object.assign({},t),{params:i})},o=await r(e,i,s);return typeof o=="string"?{error:o}:{error:o?void 0:zA(s)}}function zA(n){const e=Cs().generateMessage;return e?e(n):"Field is invalid"}function I4(n,e){const t=r=>Fp(r)?r(e):r;return Array.isArray(n)?n.map(t):Object.keys(n).reduce((r,i)=>(r[i]=t(n[i]),r),{})}async function E4(n,e){const r=await(sr(n)?n:$A(n)).parse(He(e),{formData:He(e)}),i={},s={};for(const o of r.errors){const a=o.errors,l=(o.path||"").replace(/\["(\d+)"\]/g,(h,f)=>`[${f}]`);i[l]={valid:!a.length,errors:a},a.length&&(s[l]=a[0])}return{valid:!r.errors.length,results:i,errors:s,values:r.value,source:"schema"}}async function k4(n,e,t){const i=Kn(n).map(async h=>{var f,u,d;const p=(f=t==null?void 0:t.names)===null||f===void 0?void 0:f[h],m=await BA(Pn(e,h),n[h],{name:(p==null?void 0:p.name)||h,label:p==null?void 0:p.label,values:e,bails:(d=(u=t==null?void 0:t.bailsMap)===null||u===void 0?void 0:u[h])!==null&&d!==void 0?d:!0});return Object.assign(Object.assign({},m),{path:h})});let s=!0;const o=await Promise.all(i),a={},l={};for(const h of o)a[h.path]={valid:h.valid,errors:h.errors},h.valid||(s=!1,l[h.path]=h.errors[0]);return{valid:s,results:a,errors:l,source:"schema"}}let gb=0;function A4(n,e){const{value:t,initialValue:r,setInitialValue:i}=S4(n,e.modelValue,e.form);if(!e.form){let l=function(p){var m;"value"in p&&(t.value=p.value),"errors"in p&&f(p.errors),"touched"in p&&(d.touched=(m=p.touched)!==null&&m!==void 0?m:d.touched),"initialValue"in p&&i(p.initialValue)};const{errors:h,setErrors:f}=C4(),u=gb>=Number.MAX_SAFE_INTEGER?0:++gb,d=P4(t,r,h,e.schema);return{id:u,path:n,value:t,initialValue:r,meta:d,flags:{pendingUnmount:{[u]:!1},pendingReset:!1},errors:h,setState:l}}const s=e.form.createPathState(n,{bails:e.bails,label:e.label,type:e.type,validate:e.validate,schema:e.schema}),o=Ne(()=>s.errors);function a(l){var h,f,u;"value"in l&&(t.value=l.value),"errors"in l&&((h=e.form)===null||h===void 0||h.setFieldError($e(n),l.errors)),"touched"in l&&((f=e.form)===null||f===void 0||f.setFieldTouched($e(n),(u=l.touched)!==null&&u!==void 0?u:!1)),"initialValue"in l&&i(l.initialValue)}return{id:Array.isArray(s.id)?s.id[s.id.length-1]:s.id,path:n,value:t,errors:o,meta:s,initialValue:r,flags:s.__flags,setState:a}}function S4(n,e,t){const r=$n($e(e));function i(){return t?Pn(t.initialValues.value,$e(n),$e(r)):$e(r)}function s(h){if(!t){r.value=h;return}t.setFieldInitialValue($e(n),h,!0)}const o=Ne(i);if(!t)return{value:$n(i()),initialValue:o,setInitialValue:s};const a=R4(e,t,o,n);return t.stageInitialValue($e(n),a,!0),{value:Ne({get(){return Pn(t.values,$e(n))},set(h){t.setFieldValue($e(n),h,!1)}}),initialValue:o,setInitialValue:s}}function R4(n,e,t,r){return At(n)?$e(n):n!==void 0?n:Pn(e.values,$e(r),$e(t))}function P4(n,e,t,r){const i=Ne(()=>{var o,a,l;return(l=(a=(o=Ie(r))===null||o===void 0?void 0:o.describe)===null||a===void 0?void 0:a.call(o).required)!==null&&l!==void 0?l:!1}),s=Xr({touched:!1,pending:!1,valid:!0,required:i,validated:!!$e(t).length,initialValue:Ne(()=>$e(e)),dirty:Ne(()=>!kn($e(n),$e(e)))});return Gn(t,o=>{s.valid=!o.length},{immediate:!0,flush:"sync"}),s}function C4(){const n=$n([]);return{errors:n,setErrors:e=>{n.value=Kp(e)}}}function x4(n,e,t){return Bu(t==null?void 0:t.type)?N4(n,e,t):jA(n,e,t)}function jA(n,e,t){const{initialValue:r,validateOnMount:i,bails:s,type:o,checkedValue:a,label:l,validateOnValueUpdate:h,uncheckedValue:f,controlled:u,keepValueOnUnmount:d,syncVModel:p,form:m}=O4(t),T=u?FA(Nd):void 0,v=m||T,I=Ne(()=>gl(Ie(n))),C=Ne(()=>{if(Ie(v==null?void 0:v.schema))return;const F=$e(e);return Eh(F)||sr(F)||Yt(F)||Array.isArray(F)?F:KA(F)}),M=!Yt(C.value)&&sr(Ie(e)),{id:U,value:ee,initialValue:ne,meta:k,setState:w,errors:b,flags:R}=A4(I,{modelValue:r,form:v,bails:s,label:l,type:o,validate:C.value?De:void 0,schema:M?e:void 0}),P=Ne(()=>b.value[0]);p&&V4({value:ee,prop:p,handleChange:le,shouldValidate:()=>h&&!R.pendingReset});const x=(ce,F=!1)=>{k.touched=!0,F&&Le()};async function A(ce){var F,X;if(v!=null&&v.validateSchema){const{results:Q}=await v.validateSchema(ce);return(F=Q[Ie(I)])!==null&&F!==void 0?F:{valid:!0,errors:[]}}return C.value?BA(ee.value,C.value,{name:Ie(I),label:Ie(l),values:(X=v==null?void 0:v.values)!==null&&X!==void 0?X:{},bails:s}):{valid:!0,errors:[]}}const Le=Up(async()=>(k.pending=!0,k.validated=!0,A("validated-only")),ce=>(R.pendingUnmount[ft.id]||(w({errors:ce.errors}),k.pending=!1,k.valid=ce.valid),ce)),Xe=Up(async()=>A("silent"),ce=>(k.valid=ce.valid,ce));function De(ce){return(ce==null?void 0:ce.mode)==="silent"?Xe():Le()}function le(ce,F=!0){const X=kh(ce);qt(X,F)}r_(()=>{if(i)return Le();(!v||!v.validateSchema)&&Xe()});function Pe(ce){k.touched=ce}function vt(ce){var F;const X=ce&&"value"in ce?ce.value:ne.value;w({value:He(X),initialValue:He(X),touched:(F=ce==null?void 0:ce.touched)!==null&&F!==void 0?F:!1,errors:(ce==null?void 0:ce.errors)||[]}),k.pending=!1,k.validated=!1,Xe()}const Ut=Mh();function qt(ce,F=!0){ee.value=Ut&&p?u4(ce,Ut.props.modelModifiers):ce,(F?Le:Xe)()}function Ze(ce){w({errors:Array.isArray(ce)?ce:[ce]})}const rt=Ne({get(){return ee.value},set(ce){qt(ce,h)}}),ft={id:U,name:I,label:l,value:rt,meta:k,errors:b,errorMessage:P,type:o,checkedValue:a,uncheckedValue:f,bails:s,keepValueOnUnmount:d,resetField:vt,handleReset:()=>vt(),validate:De,handleChange:le,handleBlur:x,setState:w,setTouched:Pe,setErrors:Ze,setValue:qt};if(Os(n4,ft),At(e)&&typeof $e(e)!="function"&&Gn(e,(ce,F)=>{kn(ce,F)||(k.validated?Le():Xe())},{deep:!0}),!v)return ft;const Sn=Ne(()=>{const ce=C.value;return!ce||Yt(ce)||Eh(ce)||sr(ce)||Array.isArray(ce)?{}:Object.keys(ce).reduce((F,X)=>{const Q=_4(ce[X]).map(he=>he.__locatorRef).reduce((he,Oe)=>{const E=Pn(v.values,Oe)||v.values[Oe];return E!==void 0&&(he[Oe]=E),he},{});return Object.assign(F,Q),F},{})});return Gn(Sn,(ce,F)=>{if(!Object.keys(ce).length)return;!kn(ce,F)&&(k.validated?Le():Xe())}),tw(()=>{var ce;const F=(ce=Ie(ft.keepValueOnUnmount))!==null&&ce!==void 0?ce:Ie(v.keepValuesOnUnmount),X=Ie(I);if(F||!v||R.pendingUnmount[ft.id]){v==null||v.removePathState(X,U);return}R.pendingUnmount[ft.id]=!0;const Q=v.getPathState(X);if(Array.isArray(Q==null?void 0:Q.id)&&(Q!=null&&Q.multiple)?Q!=null&&Q.id.includes(ft.id):(Q==null?void 0:Q.id)===ft.id){if(Q!=null&&Q.multiple&&Array.isArray(Q.value)){const Oe=Q.value.findIndex(E=>kn(E,Ie(ft.checkedValue)));if(Oe>-1){const E=[...Q.value];E.splice(Oe,1),v.setFieldValue(X,E)}Array.isArray(Q.id)&&Q.id.splice(Q.id.indexOf(ft.id),1)}else v.unsetPathValue(Ie(I));v.removePathState(X,U)}}),ft}function O4(n){const e=()=>({initialValue:void 0,validateOnMount:!1,bails:!0,label:void 0,validateOnValueUpdate:!0,keepValueOnUnmount:void 0,syncVModel:!1,controlled:!0}),t=!!(n!=null&&n.syncVModel),r=typeof(n==null?void 0:n.syncVModel)=="string"?n.syncVModel:(n==null?void 0:n.modelPropName)||"modelValue",i=t&&!("initialValue"in(n||{}))?$p(Mh(),r):n==null?void 0:n.initialValue;if(!n)return Object.assign(Object.assign({},e()),{initialValue:i});const s="valueProp"in n?n.valueProp:n.checkedValue,o="standalone"in n?!n.standalone:n.controlled,a=(n==null?void 0:n.modelPropName)||(n==null?void 0:n.syncVModel)||!1;return Object.assign(Object.assign(Object.assign({},e()),n||{}),{initialValue:i,controlled:o??!0,checkedValue:s,syncVModel:a})}function N4(n,e,t){const r=t!=null&&t.standalone?void 0:FA(Nd),i=t==null?void 0:t.checkedValue,s=t==null?void 0:t.uncheckedValue;function o(a){const l=a.handleChange,h=Ne(()=>{const u=Ie(a.value),d=Ie(i);return Array.isArray(u)?u.findIndex(p=>kn(p,d))>=0:kn(d,u)});function f(u,d=!0){var p,m;if(h.value===((p=u==null?void 0:u.target)===null||p===void 0?void 0:p.checked)){d&&a.validate();return}const T=Ie(n),v=r==null?void 0:r.getPathState(T),I=kh(u);let C=(m=Ie(i))!==null&&m!==void 0?m:I;r&&(v!=null&&v.multiple)&&v.type==="checkbox"?C=fb(Pn(r.values,T)||[],C,void 0):(t==null?void 0:t.type)==="checkbox"&&(C=fb(Ie(a.value),C,Ie(s))),l(C,d)}return Object.assign(Object.assign({},a),{checked:h,checkedValue:i,uncheckedValue:s,handleChange:f})}return o(jA(n,e,t))}function V4({prop:n,value:e,handleChange:t,shouldValidate:r}){const i=Mh();if(!i||!n)return;const s=typeof n=="string"?n:"modelValue",o=`update:${s}`;s in i.props&&(Gn(e,a=>{kn(a,$p(i,s))||i.emit(o,a)}),Gn(()=>$p(i,s),a=>{if(a===Ih&&e.value===void 0)return;const l=a===Ih?void 0:a;kn(l,e.value)||t(l,r())}))}function $p(n,e){if(n)return n.props[e]}const D4=yu({name:"Field",inheritAttrs:!1,props:{as:{type:[String,Object],default:void 0},name:{type:String,required:!0},rules:{type:[Object,String,Function],default:void 0},validateOnMount:{type:Boolean,default:!1},validateOnBlur:{type:Boolean,default:void 0},validateOnChange:{type:Boolean,default:void 0},validateOnInput:{type:Boolean,default:void 0},validateOnModelUpdate:{type:Boolean,default:void 0},bails:{type:Boolean,default:()=>Cs().bails},label:{type:String,default:void 0},uncheckedValue:{type:null,default:void 0},modelValue:{type:null,default:Ih},modelModifiers:{type:null,default:()=>({})},"onUpdate:modelValue":{type:null,default:void 0},standalone:{type:Boolean,default:!1},keepValue:{type:Boolean,default:void 0}},setup(n,e){const t=Ts(n,"rules"),r=Ts(n,"name"),i=Ts(n,"label"),s=Ts(n,"uncheckedValue"),o=Ts(n,"keepValue"),{errors:a,value:l,errorMessage:h,validate:f,handleChange:u,handleBlur:d,setTouched:p,resetField:m,handleReset:T,meta:v,checked:I,setErrors:C,setValue:M}=x4(r,t,{validateOnMount:n.validateOnMount,bails:n.bails,standalone:n.standalone,type:e.attrs.type,initialValue:L4(n,e),checkedValue:e.attrs.value,uncheckedValue:s,label:i,validateOnValueUpdate:n.validateOnModelUpdate,keepValueOnUnmount:o,syncVModel:!0}),U=function(R,P=!0){u(R,P)},ee=Ne(()=>{const{validateOnInput:b,validateOnChange:R,validateOnBlur:P,validateOnModelUpdate:x}=M4(n);function A(le){d(le,P),Yt(e.attrs.onBlur)&&e.attrs.onBlur(le)}function Le(le){U(le,b),Yt(e.attrs.onInput)&&e.attrs.onInput(le)}function Xe(le){U(le,R),Yt(e.attrs.onChange)&&e.attrs.onChange(le)}const De={name:n.name,onBlur:A,onInput:Le,onChange:Xe};return De["onUpdate:modelValue"]=le=>U(le,x),De}),ne=Ne(()=>{const b=Object.assign({},ee.value);Bu(e.attrs.type)&&I&&(b.checked=I.value);const R=mb(n,e);return l4(R,e.attrs)&&(b.value=l.value),b}),k=Ne(()=>Object.assign(Object.assign({},ee.value),{modelValue:l.value}));function w(){return{field:ne.value,componentField:k.value,value:l.value,meta:v,errors:a.value,errorMessage:h.value,validate:f,resetField:m,handleChange:U,handleInput:b=>U(b,!1),handleReset:T,handleBlur:ee.value.onBlur,setTouched:p,setErrors:C,setValue:M}}return e.expose({value:l,meta:v,errors:a,errorMessage:h,setErrors:C,setTouched:p,setValue:M,reset:m,validate:f,handleChange:u}),()=>{const b=i_(mb(n,e)),R=um(b,e,w);return b?Yo(b,Object.assign(Object.assign({},e.attrs),ne.value),R):R}}});function mb(n,e){let t=n.as||"";return!n.as&&!e.slots.default&&(t="input"),t}function M4(n){var e,t,r,i;const{validateOnInput:s,validateOnChange:o,validateOnBlur:a,validateOnModelUpdate:l}=Cs();return{validateOnInput:(e=n.validateOnInput)!==null&&e!==void 0?e:s,validateOnChange:(t=n.validateOnChange)!==null&&t!==void 0?t:o,validateOnBlur:(r=n.validateOnBlur)!==null&&r!==void 0?r:a,validateOnModelUpdate:(i=n.validateOnModelUpdate)!==null&&i!==void 0?i:l}}function L4(n,e){return Bu(e.attrs.type)?ub(n,"modelValue")?n.modelValue:void 0:ub(n,"modelValue")?n.modelValue:e.attrs.value}const F4=D4;let U4=0;const yc=["bails","fieldsCount","id","multiple","type","validate"];function qA(n){const e=(n==null?void 0:n.initialValues)||{},t=Object.assign({},Ie(e)),r=$e(n==null?void 0:n.validationSchema);return r&&sr(r)&&Yt(r.cast)?He(r.cast(t)||{}):He(t)}function K4(n){var e;const t=U4++,r=(n==null?void 0:n.name)||"Form";let i=0;const s=$n(!1),o=$n(!1),a=$n(0),l=[],h=Xr(qA(n)),f=$n([]),u=$n({}),d=$n({}),p=c4(()=>{d.value=f.value.reduce((V,O)=>(V[gl(Ie(O.path))]=O,V),{})});function m(V,O){const G=le(V);if(!G){typeof V=="string"&&(u.value[gl(V)]=Kp(O));return}if(typeof V=="string"){const ue=gl(V);u.value[ue]&&delete u.value[ue]}G.errors=Kp(O),G.valid=!G.errors.length}function T(V){Kn(V).forEach(O=>{m(O,V[O])})}n!=null&&n.initialErrors&&T(n.initialErrors);const v=Ne(()=>{const V=f.value.reduce((O,G)=>(G.errors.length&&(O[Ie(G.path)]=G.errors),O),{});return Object.assign(Object.assign({},u.value),V)}),I=Ne(()=>Kn(v.value).reduce((V,O)=>{const G=v.value[O];return G!=null&&G.length&&(V[O]=G[0]),V},{})),C=Ne(()=>f.value.reduce((V,O)=>(V[Ie(O.path)]={name:Ie(O.path)||"",label:O.label||""},V),{})),M=Ne(()=>f.value.reduce((V,O)=>{var G;return V[Ie(O.path)]=(G=O.bails)!==null&&G!==void 0?G:!0,V},{})),U=Object.assign({},(n==null?void 0:n.initialErrors)||{}),ee=(e=n==null?void 0:n.keepValuesOnUnmount)!==null&&e!==void 0?e:!1,{initialValues:ne,originalInitialValues:k,setInitialValues:w}=$4(f,h,n),b=B4(f,h,k,I),R=Ne(()=>f.value.reduce((V,O)=>{const G=Pn(h,Ie(O.path));return Kr(V,Ie(O.path),G),V},{})),P=n==null?void 0:n.validationSchema;function x(V,O){var G,ue;const fe=Ne(()=>Pn(ne.value,Ie(V))),we=d.value[Ie(V)],ve=(O==null?void 0:O.type)==="checkbox"||(O==null?void 0:O.type)==="radio";if(we&&ve){we.multiple=!0;const Mt=i++;return Array.isArray(we.id)?we.id.push(Mt):we.id=[we.id,Mt],we.fieldsCount++,we.__flags.pendingUnmount[Mt]=!1,we}const et=Ne(()=>Pn(h,Ie(V))),Tt=Ie(V),Kt=vt.findIndex(Mt=>Mt===Tt);Kt!==-1&&vt.splice(Kt,1);const qe=Ne(()=>{var Mt,_i,gi,ao;const Dr=Ie(P);if(sr(Dr))return(_i=(Mt=Dr.describe)===null||Mt===void 0?void 0:Mt.call(Dr,Ie(V)).required)!==null&&_i!==void 0?_i:!1;const lo=Ie(O==null?void 0:O.schema);return sr(lo)&&(ao=(gi=lo.describe)===null||gi===void 0?void 0:gi.call(lo).required)!==null&&ao!==void 0?ao:!1}),Dt=i++,Ht=Xr({id:Dt,path:V,touched:!1,pending:!1,valid:!0,validated:!!(!((G=U[Tt])===null||G===void 0)&&G.length),required:qe,initialValue:fe,errors:jb([]),bails:(ue=O==null?void 0:O.bails)!==null&&ue!==void 0?ue:!1,label:O==null?void 0:O.label,type:(O==null?void 0:O.type)||"default",value:et,multiple:!1,__flags:{pendingUnmount:{[Dt]:!1},pendingReset:!1},fieldsCount:1,validate:O==null?void 0:O.validate,dirty:Ne(()=>!kn($e(et),$e(fe)))});return f.value.push(Ht),d.value[Tt]=Ht,p(),I.value[Tt]&&!U[Tt]&&Qn(()=>{Z(Tt,{mode:"silent"})}),At(V)&&Gn(V,Mt=>{p();const _i=He(et.value);d.value[Mt]=Ht,Qn(()=>{Kr(h,Mt,_i)})}),Ht}const A=pb(ge,5),Le=pb(ge,5),Xe=Up(async V=>await(V==="silent"?A():Le()),(V,[O])=>{const G=Kn(F.errorBag.value),fe=[...new Set([...Kn(V.results),...f.value.map(we=>we.path),...G])].sort().reduce((we,ve)=>{var et;const Tt=ve,Kt=le(Tt)||Pe(Tt),qe=((et=V.results[Tt])===null||et===void 0?void 0:et.errors)||[],Dt=Ie(Kt==null?void 0:Kt.path)||Tt,Ht=z4({errors:qe,valid:!qe.length},we.results[Dt]);return we.results[Dt]=Ht,Ht.valid||(we.errors[Dt]=Ht.errors[0]),Kt&&u.value[Dt]&&delete u.value[Dt],Kt?(Kt.valid=Ht.valid,O==="silent"||O==="validated-only"&&!Kt.validated||m(Kt,Ht.errors),we):(m(Dt,qe),we)},{valid:V.valid,results:{},errors:{},source:V.source});return V.values&&(fe.values=V.values,fe.source=V.source),Kn(fe.results).forEach(we=>{var ve;const et=le(we);et&&O!=="silent"&&(O==="validated-only"&&!et.validated||m(et,(ve=fe.results[we])===null||ve===void 0?void 0:ve.errors))}),fe});function De(V){f.value.forEach(V)}function le(V){const O=typeof V=="string"?gl(V):V;return typeof O=="string"?d.value[O]:O}function Pe(V){return f.value.filter(G=>V.startsWith(Ie(G.path))).reduce((G,ue)=>G?ue.path.length>G.path.length?ue:G:ue,void 0)}let vt=[],Ut;function qt(V){return vt.push(V),Ut||(Ut=Qn(()=>{[...vt].sort().reverse().forEach(G=>{db(h,G)}),vt=[],Ut=null})),Ut}function Ze(V){return function(G,ue){return function(we){return we instanceof Event&&(we.preventDefault(),we.stopPropagation()),De(ve=>ve.touched=!0),s.value=!0,a.value++,te().then(ve=>{const et=He(h);if(ve.valid&&typeof G=="function"){const Tt=He(R.value);let Kt=V?Tt:et;return ve.values&&(Kt=ve.source==="schema"?ve.values:Object.assign({},Kt,ve.values)),G(Kt,{evt:we,controlledValues:Tt,setErrors:T,setFieldError:m,setTouched:q,setFieldTouched:E,setValues:he,setFieldValue:X,resetForm:ie,resetField:j})}!ve.valid&&typeof ue=="function"&&ue({values:et,evt:we,errors:ve.errors,results:ve.results})}).then(ve=>(s.value=!1,ve),ve=>{throw s.value=!1,ve})}}}const ft=Ze(!1);ft.withControlled=Ze(!0);function Sn(V,O){const G=f.value.findIndex(fe=>fe.path===V&&(Array.isArray(fe.id)?fe.id.includes(O):fe.id===O)),ue=f.value[G];if(!(G===-1||!ue)){if(Qn(()=>{Z(V,{mode:"silent",warn:!1})}),ue.multiple&&ue.fieldsCount&&ue.fieldsCount--,Array.isArray(ue.id)){const fe=ue.id.indexOf(O);fe>=0&&ue.id.splice(fe,1),delete ue.__flags.pendingUnmount[O]}(!ue.multiple||ue.fieldsCount<=0)&&(f.value.splice(G,1),Y(V),p(),delete d.value[V])}}function ce(V){Kn(d.value).forEach(O=>{O.startsWith(V)&&delete d.value[O]}),f.value=f.value.filter(O=>!O.path.startsWith(V)),Qn(()=>{p()})}const F={name:r,formId:t,values:h,controlledValues:R,errorBag:v,errors:I,schema:P,submitCount:a,meta:b,isSubmitting:s,isValidating:o,fieldArrays:l,keepValuesOnUnmount:ee,validateSchema:$e(P)?Xe:void 0,validate:te,setFieldError:m,validateField:Z,setFieldValue:X,setValues:he,setErrors:T,setFieldTouched:E,setTouched:q,resetForm:ie,resetField:j,handleSubmit:ft,useFieldModel:Ce,defineInputBinds:Fe,defineComponentBinds:Gt,defineField:ye,stageInitialValue:be,unsetInitialValue:Y,setFieldInitialValue:oe,createPathState:x,getPathState:le,unsetPathValue:qt,removePathState:Sn,initialValues:ne,getAllPathStates:()=>f.value,destroyPath:ce,isFieldTouched:S,isFieldDirty:N,isFieldValid:z};function X(V,O,G=!0){const ue=He(O),fe=typeof V=="string"?V:V.path;le(fe)||x(fe),Kr(h,fe,ue),G&&Z(fe)}function Q(V,O=!0){Kn(h).forEach(G=>{delete h[G]}),Kn(V).forEach(G=>{X(G,V[G],!1)}),O&&te()}function he(V,O=!0){gu(h,V),l.forEach(G=>G&&G.reset()),O&&te()}function Oe(V,O){const G=le(Ie(V))||x(V);return Ne({get(){return G.value},set(ue){var fe;const we=Ie(V);X(we,ue,(fe=Ie(O))!==null&&fe!==void 0?fe:!1)}})}function E(V,O){const G=le(V);G&&(G.touched=O)}function S(V){const O=le(V);return O?O.touched:f.value.filter(G=>G.path.startsWith(V)).some(G=>G.touched)}function N(V){const O=le(V);return O?O.dirty:f.value.filter(G=>G.path.startsWith(V)).some(G=>G.dirty)}function z(V){const O=le(V);return O?O.valid:f.value.filter(G=>G.path.startsWith(V)).every(G=>G.valid)}function q(V){if(typeof V=="boolean"){De(O=>{O.touched=V});return}Kn(V).forEach(O=>{E(O,!!V[O])})}function j(V,O){var G;const ue=O&&"value"in O?O.value:Pn(ne.value,V),fe=le(V);fe&&(fe.__flags.pendingReset=!0),oe(V,He(ue),!0),X(V,ue,!1),E(V,(G=O==null?void 0:O.touched)!==null&&G!==void 0?G:!1),m(V,(O==null?void 0:O.errors)||[]),Qn(()=>{fe&&(fe.__flags.pendingReset=!1)})}function ie(V,O){let G=He(V!=null&&V.values?V.values:k.value);G=O!=null&&O.force?G:gu(k.value,G),G=sr(P)&&Yt(P.cast)?P.cast(G):G,w(G,{force:O==null?void 0:O.force}),De(ue=>{var fe;ue.__flags.pendingReset=!0,ue.validated=!1,ue.touched=((fe=V==null?void 0:V.touched)===null||fe===void 0?void 0:fe[Ie(ue.path)])||!1,X(Ie(ue.path),Pn(G,Ie(ue.path)),!1),m(Ie(ue.path),void 0)}),O!=null&&O.force?Q(G,!1):he(G,!1),T((V==null?void 0:V.errors)||{}),a.value=(V==null?void 0:V.submitCount)||0,Qn(()=>{te({mode:"silent"}),De(ue=>{ue.__flags.pendingReset=!1})})}async function te(V){const O=(V==null?void 0:V.mode)||"force";if(O==="force"&&De(ve=>ve.validated=!0),F.validateSchema)return F.validateSchema(O);o.value=!0;const G=await Promise.all(f.value.map(ve=>ve.validate?ve.validate(V).then(et=>({key:Ie(ve.path),valid:et.valid,errors:et.errors,value:et.value})):Promise.resolve({key:Ie(ve.path),valid:!0,errors:[],value:void 0})));o.value=!1;const ue={},fe={},we={};for(const ve of G)ue[ve.key]={valid:ve.valid,errors:ve.errors},ve.value&&Kr(we,ve.key,ve.value),ve.errors.length&&(fe[ve.key]=ve.errors[0]);return{valid:G.every(ve=>ve.valid),results:ue,errors:fe,values:we,source:"fields"}}async function Z(V,O){var G;const ue=le(V);if(ue&&(O==null?void 0:O.mode)!=="silent"&&(ue.validated=!0),P){const{results:fe}=await Xe((O==null?void 0:O.mode)||"validated-only");return fe[V]||{errors:[],valid:!0}}return ue!=null&&ue.validate?ue.validate(O):(!ue&&(G=O==null?void 0:O.warn),Promise.resolve({errors:[],valid:!0}))}function Y(V){db(ne.value,V)}function be(V,O,G=!1){oe(V,O),Kr(h,V,O),G&&!(n!=null&&n.initialValues)&&Kr(k.value,V,He(O))}function oe(V,O,G=!1){Kr(ne.value,V,He(O)),G&&Kr(k.value,V,He(O))}async function ge(){const V=$e(P);if(!V)return{valid:!0,results:{},errors:{},source:"none"};o.value=!0;const O=Eh(V)||sr(V)?await E4(V,h):await k4(V,h,{names:C.value,bailsMap:M.value});return o.value=!1,O}const ke=ft((V,{evt:O})=>{LA(O)&&O.target.submit()});r_(()=>{if(n!=null&&n.initialErrors&&T(n.initialErrors),n!=null&&n.initialTouched&&q(n.initialTouched),n!=null&&n.validateOnMount){te();return}F.validateSchema&&F.validateSchema("silent")}),At(P)&&Gn(P,()=>{var V;(V=F.validateSchema)===null||V===void 0||V.call(F,"validated-only")}),Os(Nd,F);function ye(V,O){const G=Yt(O)||O==null?void 0:O.label,ue=le(Ie(V))||x(V,{label:G}),fe=()=>Yt(O)?O(mc(ue,yc)):O||{};function we(){var qe;ue.touched=!0,((qe=fe().validateOnBlur)!==null&&qe!==void 0?qe:Cs().validateOnBlur)&&Z(Ie(ue.path))}function ve(){var qe;((qe=fe().validateOnInput)!==null&&qe!==void 0?qe:Cs().validateOnInput)&&Qn(()=>{Z(Ie(ue.path))})}function et(){var qe;((qe=fe().validateOnChange)!==null&&qe!==void 0?qe:Cs().validateOnChange)&&Qn(()=>{Z(Ie(ue.path))})}const Tt=Ne(()=>{const qe={onChange:et,onInput:ve,onBlur:we};return Yt(O)?Object.assign(Object.assign({},qe),O(mc(ue,yc)).props||{}):O!=null&&O.props?Object.assign(Object.assign({},qe),O.props(mc(ue,yc))):qe});return[Oe(V,()=>{var qe,Dt,Ht;return(Ht=(qe=fe().validateOnModelUpdate)!==null&&qe!==void 0?qe:(Dt=Cs())===null||Dt===void 0?void 0:Dt.validateOnModelUpdate)!==null&&Ht!==void 0?Ht:!0}),Tt]}function Ce(V){return Array.isArray(V)?V.map(O=>Oe(O,!0)):Oe(V)}function Fe(V,O){const[G,ue]=ye(V,O);function fe(){ue.value.onBlur()}function we(et){const Tt=kh(et);X(Ie(V),Tt,!1),ue.value.onInput()}function ve(et){const Tt=kh(et);X(Ie(V),Tt,!1),ue.value.onChange()}return Ne(()=>Object.assign(Object.assign({},ue.value),{onBlur:fe,onInput:we,onChange:ve,value:G.value}))}function Gt(V,O){const[G,ue]=ye(V,O),fe=le(Ie(V));function we(ve){G.value=ve}return Ne(()=>{const ve=Yt(O)?O(mc(fe,yc)):O||{};return Object.assign({[ve.model||"modelValue"]:G.value,[`onUpdate:${ve.model||"modelValue"}`]:we},ue.value)})}const Vt=Object.assign(Object.assign({},F),{values:Xp(h),handleReset:()=>ie(),submitForm:ke});return Os(t4,Vt),Vt}function B4(n,e,t,r){const i={touched:"some",pending:"some",valid:"every"},s=Ne(()=>!kn(e,$e(t)));function o(){const l=n.value;return Kn(i).reduce((h,f)=>{const u=i[f];return h[f]=l[u](d=>d[f]),h},{})}const a=Xr(o());return qR(()=>{const l=o();a.touched=l.touched,a.valid=l.valid,a.pending=l.pending}),Ne(()=>Object.assign(Object.assign({initialValues:$e(t)},a),{valid:a.valid&&!Kn(r.value).length,dirty:s.value}))}function $4(n,e,t){const r=qA(t),i=$n(r),s=$n(He(r));function o(a,l){l!=null&&l.force?(i.value=He(a),s.value=He(a)):(i.value=gu(He(i.value)||{},He(a)),s.value=gu(He(s.value)||{},He(a))),l!=null&&l.updateFields&&n.value.forEach(h=>{if(h.touched)return;const u=Pn(i.value,Ie(h.path));Kr(e,Ie(h.path),He(u))})}return{initialValues:i,originalInitialValues:s,setInitialValues:o}}function z4(n,e){return e?{valid:n.valid&&e.valid,errors:[...n.errors,...e.errors]}:n}const j4=yu({name:"Form",inheritAttrs:!1,props:{as:{type:null,default:"form"},validationSchema:{type:Object,default:void 0},initialValues:{type:Object,default:void 0},initialErrors:{type:Object,default:void 0},initialTouched:{type:Object,default:void 0},validateOnMount:{type:Boolean,default:!1},onSubmit:{type:Function,default:void 0},onInvalidSubmit:{type:Function,default:void 0},keepValues:{type:Boolean,default:!1},name:{type:String,default:"Form"}},setup(n,e){const t=Ts(n,"validationSchema"),r=Ts(n,"keepValues"),{errors:i,errorBag:s,values:o,meta:a,isSubmitting:l,isValidating:h,submitCount:f,controlledValues:u,validate:d,validateField:p,handleReset:m,resetForm:T,handleSubmit:v,setErrors:I,setFieldError:C,setFieldValue:M,setValues:U,setFieldTouched:ee,setTouched:ne,resetField:k}=K4({validationSchema:t.value?t:void 0,initialValues:n.initialValues,initialErrors:n.initialErrors,initialTouched:n.initialTouched,validateOnMount:n.validateOnMount,keepValuesOnUnmount:r,name:n.name}),w=v((De,{evt:le})=>{LA(le)&&le.target.submit()},n.onInvalidSubmit),b=n.onSubmit?v(n.onSubmit,n.onInvalidSubmit):w;function R(De){am(De)&&De.preventDefault(),m(),typeof e.attrs.onReset=="function"&&e.attrs.onReset()}function P(De,le){return v(typeof De=="function"&&!le?De:le,n.onInvalidSubmit)(De)}function x(){return He(o)}function A(){return He(a.value)}function Le(){return He(i.value)}function Xe(){return{meta:a.value,errors:i.value,errorBag:s.value,values:o,isSubmitting:l.value,isValidating:h.value,submitCount:f.value,controlledValues:u.value,validate:d,validateField:p,handleSubmit:P,handleReset:m,submitForm:w,setErrors:I,setFieldError:C,setFieldValue:M,setValues:U,setFieldTouched:ee,setTouched:ne,resetForm:T,resetField:k,getValues:x,getMeta:A,getErrors:Le}}return e.expose({setFieldError:C,setErrors:I,setFieldValue:M,setValues:U,setFieldTouched:ee,setTouched:ne,resetForm:T,validate:d,validateField:p,resetField:k,getValues:x,getMeta:A,getErrors:Le,values:o,meta:a,errors:i}),function(){const le=n.as==="form"?n.as:n.as?i_(n.as):null,Pe=um(le,e,Xe);return le?Yo(le,Object.assign(Object.assign(Object.assign({},le==="form"?{novalidate:!0}:{}),e.attrs),{onSubmit:b,onReset:R}),Pe):Pe}}}),q4=j4,G4=yu({name:"ErrorMessage",props:{as:{type:String,default:void 0},name:{type:String,required:!0}},setup(n,e){const t=lr(Nd,void 0),r=Ne(()=>t==null?void 0:t.errors.value[n.name]);function i(){return{message:r.value}}return()=>{if(!r.value)return;const s=n.as?i_(n.as):n.as,o=um(s,e,i),a=Object.assign({role:"alert"},e.attrs);return!s&&(Array.isArray(o)||!o)&&(o!=null&&o.length)?o:(Array.isArray(o)||!o)&&!(o!=null&&o.length)?Yo(s||"span",a,r.value):Yo(s,a,o)}}}),H4=G4;/**
  * vee-validate v4.15.0
  * (c) 2024 Abdelrahman Awad
  * @license MIT
  */const vc={en:/^[A-Z\s]*$/i,cs:/^[A-Z\s]*$/i,da:/^[A-Z\s]*$/i,de:/^[A-Z\s]*$/i,es:/^[A-Z\s]*$/i,fr:/^[A-Z\s]*$/i,it:/^[A-Z\xC0-\xFF\s]*$/i,lt:/^[A-Z\s]*$/i,nl:/^[A-Z\s]*$/i,hu:/^[A-Z\s]*$/i,pl:/^[A-Z\s]*$/i,pt:/^[A-Z\s]*$/i,ru:/^[-\s]*$/i,kz:/^[-\u04D8\u04B0\u0406\u04A2\u0492\u04AE\u049A\u04E8\u04BA\s]*$/i,sk:/^[A-Z\s]*$/i,sr:/^[A-Z\s]*$/i,sv:/^[A-Z\s]*$/i,tr:/^[A-Z\s]*$/i,uk:/^[-\s]*$/i,ar:/^[\s]*$/,az:/^[A-Z\s]*$/i,ug:/^[A-Z\s]*$/i},W4=n=>{if(n)return Array.isArray(n)?n[0]:n.locale};function $u(n,e){return Array.isArray(n)?n[0]:n[e]}function us(n){return!!(n==null||n===""||Array.isArray(n)&&n.length===0)}const GA=(n,e)=>{if(us(n))return!0;const t=W4(e);if(Array.isArray(n))return n.every(i=>GA(i,{locale:t}));const r=String(n);return t?(vc[t]||vc.en).test(r):Object.keys(vc).some(i=>vc[i].test(r))},Q4=(n,e)=>{const t=$u(e,"target");return String(n)===String(t)},yb=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Y4=n=>us(n)?!0:Array.isArray(n)?n.every(e=>yb.test(String(e))):yb.test(String(n)),HA=(n,e)=>{if(us(n))return!0;const t=$u(e,"length");return Array.isArray(n)?n.every(r=>HA(r,{length:t})):[...String(n)].length<=Number(t)},WA=(n,e)=>{if(us(n))return!0;const t=$u(e,"max");return Array.isArray(n)?n.length>0&&n.every(r=>WA(r,{max:t})):Number(n)<=Number(t)},QA=(n,e)=>{if(us(n))return!0;const t=$u(e,"length");return Array.isArray(n)?n.every(r=>QA(r,{length:t})):[...String(n)].length>=Number(t)},YA=(n,e)=>{if(us(n))return!0;const t=$u(e,"min");return Array.isArray(n)?n.length>0&&n.every(r=>YA(r,{min:t})):Number(n)>=Number(t)},JA=(n,e)=>us(n)?!0:Array.isArray(n)?n.every(t=>JA(t,e)):Array.from(e).some(t=>t==n),vb=(n,e)=>us(n)?!0:!JA(n,e);function J4(n){return n==null}function X4(n){return Array.isArray(n)&&n.length===0}const Tc=n=>J4(n)||X4(n)||n===!1?!1:!!String(n).trim().length,Z4={install(n){n.component("VeeForm",q4),n.component("VeeField",F4),n.component("ErrorMessage",H4),Ln("required",Tc),Ln("min",QA),Ln("max",HA),Ln("alpha_spaces",GA),Ln("email",Y4),Ln("min_value",YA),Ln("max_value",WA),Ln("passwords_mismatch",Q4),Ln("excluded",vb),Ln("country_excluded",vb),Ln("tos",Tc),Ln("loginEmptyEmail",Tc),Ln("loginEmptyPwd",Tc),y4({generateMessage:e=>{const t={required:`The field ${e.field} is required.`,min:`The field ${e.field} is too short.`,max:`The field ${e.field} is too long.`,alpha_spaces:`The field ${e.field} may only contain alphabetical characters and spaces.`,email:`The field ${e.field} must be a valid email.`,min_value:`The field ${e.field} is too low.`,max_value:`The field ${e.field} is too high.`,excluded:`You are not allowed to use this value for the field ${e.field}.`,country_excluded:"Due to restrictions, we do not accept users from this location.",passwords_mismatch:"The passwords don't match.",tos:"You must accept the Terms of Service.",loginEmptyEmail:"Please enter your email.",loginEmptyPwd:"Please enter your password."};return t[e.rule.name]?t[e.rule.name]:`The field ${e.field} is invalid.`},validateOnBlur:!0,validateOnChange:!0,validateOnInput:!1,validateOnModelUpdate:!0})}};let ko;Ni.onAuthStateChanged(()=>{ko||(console.log("In main.js"),ko=UP(YC),ko.use(Lp),ko.use(NA),ko.use(Z4),ko.mount("#app"))});
